import{J as F,K as ie,L as Ie,E as p,M as Re,N as Be,O as $e,P as ze,Q as re,c as O,d as L,R as le,r as se,g as T,S as ce,e as de,U as Pe,V as $,W as ve,a as g,n as z,X as ue,m as A,Y as be,Z as N,w as X,t as Z,$ as K,j as Ae,a0 as V,G as Ne,a1 as Y,u as Oe,a2 as Le,a3 as Ee,a4 as He,a5 as P,b as te,i as Me,a6 as We,a7 as Ze,a8 as De,a9 as ae,aa as Ue,ab as Ve,f as je,ac as Fe,ad as Ke,ae as Xe,af as Ye}from"./index.1cb909ac.js";import{u as fe}from"./use-id.923fd6e3.js";import{a as qe,r as Ge}from"./use-route.7ab8f082.js";import{T as Je}from"./use-tab-status.25286f08.js";import{S as Qe,a as et}from"./index.54505bef.js";function tt(e,i,l){let r=0;const a=e.scrollLeft,n=l===0?1:Math.round(l*1e3/16);function s(){e.scrollLeft+=(i-a)/n,++r<n&&F(s)}s()}function at(e,i,l,r){let a=ie(e);const n=a<i,s=l===0?1:Math.round(l*1e3/16),f=(i-a)/s;function v(){a+=f,(n&&a>i||!n&&a<i)&&(a=i),Ie(e,a),n&&a<i||!n&&a>i?F(v):r&&F(r)}v()}function nt(){const e=p([]),i=[];return Re(()=>{e.value=[]}),[e,r=>(i[r]||(i[r]=a=>{e.value[r]=a}),i[r])]}function ot(e,i){if(!Be||!window.IntersectionObserver)return;const l=new IntersectionObserver(n=>{i(n[0].intersectionRatio>0)},{root:document.body}),r=()=>{e.value&&l.observe(e.value)},a=()=>{e.value&&l.unobserve(e.value)};$e(a),ze(a),re(r)}const[it,rt]=O("sticky"),lt={zIndex:z,position:ue("top"),container:Object,offsetTop:A(0),offsetBottom:A(0)};var st=L({name:it,props:lt,emits:["scroll","change"],setup(e,{emit:i,slots:l}){const r=p(),a=le(r),n=se({fixed:!1,width:0,height:0,transform:0}),s=T(()=>ce(e.position==="top"?e.offsetTop:e.offsetBottom)),f=T(()=>{const{fixed:u,height:w,width:y}=n;if(u)return{width:`${y}px`,height:`${w}px`}}),v=T(()=>{if(!n.fixed)return;const u=de(Pe(e.zIndex),{width:`${n.width}px`,height:`${n.height}px`,[e.position]:`${s.value}px`});return n.transform&&(u.transform=`translate3d(0, ${n.transform}px, 0)`),u}),S=u=>i("scroll",{scrollTop:u,isFixed:n.fixed}),h=()=>{if(!r.value||be(r))return;const{container:u,position:w}=e,y=N(r),b=ie(window);if(n.width=y.width,n.height=y.height,w==="top")if(u){const _=N(u),c=_.bottom-s.value-n.height;n.fixed=s.value>y.top&&_.bottom>0,n.transform=c<0?c:0}else n.fixed=s.value>y.top;else{const{clientHeight:_}=document.documentElement;if(u){const c=N(u),C=_-c.top-s.value-n.height;n.fixed=_-s.value<y.bottom&&_>c.top,n.transform=C<0?-C:0}else n.fixed=_-s.value<y.bottom}S(b)};return $(()=>n.fixed,u=>i("change",u)),ve("scroll",h,{target:a,passive:!0}),ot(r,h),()=>{var u;return g("div",{ref:r,style:f.value},[g("div",{class:rt({fixed:n.fixed}),style:v.value},[(u=l.default)==null?void 0:u.call(l)])])}}});const ct=X(st),[dt,ne]=O("tab");var vt=L({name:dt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:z,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:Z},setup(e,{slots:i}){const l=T(()=>{const a={},{type:n,color:s,disabled:f,isActive:v,activeColor:S,inactiveColor:h}=e;s&&n==="card"&&(a.borderColor=s,f||(v?a.backgroundColor=s:a.color=s));const w=v?S:h;return w&&(a.color=w),a}),r=()=>{const a=g("span",{class:ne("text",{ellipsis:!e.scrollable})},[i.title?i.title():e.title]);return e.dot||K(e.badge)&&e.badge!==""?g(Ae,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[a]}):a};return()=>g("div",{id:e.id,role:"tab",class:[ne([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[r()])}});const[ut,oe]=O("tabs");var bt=L({name:ut,props:{count:V(Number),inited:Boolean,animated:Boolean,duration:V(z),swipeable:Boolean,lazyRender:Boolean,currentIndex:V(Number)},emits:["change"],setup(e,{emit:i,slots:l}){const r=p(),a=f=>i("change",f),n=()=>{var f;const v=(f=l.default)==null?void 0:f.call(l);return e.animated||e.swipeable?g(Qe,{ref:r,loop:!1,class:oe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:a},{default:()=>[v]}):v},s=f=>{const v=r.value;v&&v.state.active!==f&&v.swipeTo(f,{immediate:!e.inited})};return $(()=>e.currentIndex,s),Ne(()=>{s(e.currentIndex)}),Y({swipeRef:r}),()=>g("div",{class:oe("content",{animated:e.animated||e.swipeable})},[n()])}});const[he,W]=O("tabs"),ft={type:ue("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:A(0),duration:A(.3),animated:Boolean,ellipsis:Z,swipeable:Boolean,scrollspy:Boolean,offsetTop:A(0),background:String,lazyRender:Z,lineWidth:z,lineHeight:z,beforeChange:Function,swipeThreshold:A(5),titleActiveColor:String,titleInactiveColor:String},ge=Symbol(he);var ht=L({name:he,props:ft,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:i,slots:l}){let r,a,n;const s=p(),f=p(),v=p(),S=p(),h=fe(),u=le(s),[w,y]=nt(),{children:b,linkChildren:_}=Oe(ge),c=se({inited:!1,position:"",lineStyle:{},currentIndex:-1}),C=T(()=>b.length>e.swipeThreshold||!e.ellipsis||e.shrink),D=T(()=>({borderColor:e.color,background:e.background})),I=(t,o)=>{var d;return(d=t.name)!=null?d:o},q=T(()=>{const t=b[c.currentIndex];if(t)return I(t,c.currentIndex)}),U=T(()=>ce(e.offsetTop)),G=T(()=>e.sticky?U.value+r:0),E=t=>{const o=f.value,d=w.value;if(!C.value||!o||!d||!d[c.currentIndex])return;const x=d[c.currentIndex].$el,m=x.offsetLeft-(o.offsetWidth-x.offsetWidth)/2;tt(o,m,t?0:+e.duration)},R=()=>{const t=c.inited;P(()=>{const o=w.value;if(!o||!o[c.currentIndex]||e.type!=="line"||be(s.value))return;const d=o[c.currentIndex].$el,{lineWidth:x,lineHeight:m}=e,k=d.offsetLeft+d.offsetWidth/2,B={width:te(x),backgroundColor:e.color,transform:`translateX(${k}px) translateX(-50%)`};if(t&&(B.transitionDuration=`${e.duration}s`),K(m)){const ee=te(m);B.height=ee,B.borderRadius=ee}c.lineStyle=B})},me=t=>{const o=t<c.currentIndex?-1:1;for(;t>=0&&t<b.length;){if(!b[t].disabled)return t;t+=o}},H=(t,o)=>{const d=me(t);if(!K(d))return;const x=b[d],m=I(x,d),k=c.currentIndex!==null;c.currentIndex!==d&&(c.currentIndex=d,o||E(),R()),m!==e.active&&(i("update:active",m),k&&i("change",m,x.title)),n&&!e.scrollspy&&De(Math.ceil(ae(s.value)-U.value))},M=(t,o)=>{const d=b.find((m,k)=>I(m,k)===t),x=d?b.indexOf(d):0;H(x,o)},J=(t=!1)=>{if(e.scrollspy){const o=b[c.currentIndex].$el;if(o&&u.value){const d=ae(o,u.value)-G.value;a=!0,at(u.value,d,t?0:+e.duration,()=>{a=!1})}}},xe=(t,o,d)=>{const{title:x,disabled:m}=b[o],k=I(b[o],o);m||(Ue(e.beforeChange,{args:[k],done:()=>{H(o),J()}}),qe(t)),i("clickTab",{name:k,title:x,event:d,disabled:m})},we=t=>{n=t.isFixed,i("scroll",t)},ye=t=>{P(()=>{M(t),J(!0)})},_e=()=>{for(let t=0;t<b.length;t++){const{top:o}=N(b[t].$el);if(o>G.value)return t===0?0:t-1}return b.length-1},ke=()=>{if(e.scrollspy&&!a){const t=_e();H(t)}},Se=()=>b.map((t,o)=>g(vt,Me({key:t.id,id:`${h}-${o}`,ref:y(o),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:o===c.currentIndex,controls:t.id,scrollable:C.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:d=>xe(t,o,d)},We(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),Te=()=>{if(e.type==="line"&&b.length)return g("div",{class:W("line"),style:c.lineStyle},null)},Q=()=>{var t,o,d;const{type:x,border:m,sticky:k}=e,B=[g("div",{ref:k?void 0:v,class:[W("wrap"),{[Ze]:x==="line"&&m}]},[g("div",{ref:f,role:"tablist",class:W("nav",[x,{shrink:e.shrink,complete:C.value}]),style:D.value,"aria-orientation":"horizontal"},[(t=l["nav-left"])==null?void 0:t.call(l),Se(),Te(),(o=l["nav-right"])==null?void 0:o.call(l)])]),(d=l["nav-bottom"])==null?void 0:d.call(l)];return k?g("div",{ref:v},[B]):B};$([()=>e.color,Le],R),$(()=>e.active,t=>{t!==q.value&&M(t)}),$(()=>b.length,()=>{c.inited&&(M(e.active),R(),P(()=>{E(!0)}))});const pe=()=>{M(e.active,!0),P(()=>{c.inited=!0,v.value&&(r=N(v.value).height),E(!0)})},Ce=(t,o)=>i("rendered",t,o);return Y({resize:()=>{R(),P(()=>{var t,o;return(o=(t=S.value)==null?void 0:t.swipeRef.value)==null?void 0:o.resize()})},scrollTo:ye}),Ee(R),He(R),re(pe),ve("scroll",ke,{target:u,passive:!0}),_({id:h,props:e,setLine:R,onRendered:Ce,currentName:q,scrollIntoView:E}),()=>g("div",{ref:s,class:W([e.type])},[e.sticky?g(ct,{container:s.value,offsetTop:U.value,onScroll:we},{default:()=>[Q()]}):Q(),g(bt,{ref:S,count:b.length,inited:c.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:c.currentIndex,onChange:H},{default:()=>{var t;return[(t=l.default)==null?void 0:t.call(l)]}})])}});const[gt,j]=O("tab"),mt=de({},Ge,{dot:Boolean,name:z,badge:z,title:String,disabled:Boolean,titleClass:Ve,titleStyle:[String,Object],showZeroBadge:Z});var xt=L({name:gt,props:mt,setup(e,{slots:i}){const l=fe(),r=p(!1),{parent:a,index:n}=je(ge);if(!a)return;const s=()=>{var h;return(h=e.name)!=null?h:n.value},f=()=>{r.value=!0,a.props.lazyRender&&P(()=>{a.onRendered(s(),e.title)})},v=T(()=>{const h=s()===a.currentName.value;return h&&!r.value&&f(),h}),S=p(!v.value);return $(v,h=>{h?S.value=!1:Ye(()=>{S.value=!0})}),$(()=>e.title,()=>{a.setLine(),a.scrollIntoView()}),Fe(Je,v),()=>{var h;const u=`${a.id}-${n.value}`,{animated:w,swipeable:y,scrollspy:b,lazyRender:_}=a.props;if(!i.default&&!w)return;const c=b||v.value;if(w||y)return g(et,{id:l,role:"tabpanel",class:j("panel-wrapper",{inactive:S.value}),tabindex:v.value?0:-1,"aria-hidden":!v.value,"aria-labelledby":u},{default:()=>{var I;return[g("div",{class:j("panel")},[(I=i.default)==null?void 0:I.call(i)])]}});const D=r.value||b||!_?(h=i.default)==null?void 0:h.call(i):null;return Y({id:l}),Ke(g("div",{id:l,role:"tabpanel",class:j("panel"),tabindex:c?0:-1,"aria-labelledby":u},[D]),[[Xe,c]])}}});const pt=X(xt),Ct=X(ht);export{pt as T,Ct as a};
