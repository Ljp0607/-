/* empty css              */import{T as tt,a as et}from"./index.24f2b48f.js";import"./index.45c30aaf.js";/* empty css              *//* empty css              */import{_ as H,d as J,r as G,z as K,o as s,l as d,p as t,ap as ot,F as x,s as B,A as v,ad as E,ae as T,a as w,q as y,C as Q,D as X,aq as at,T as l,ar as nt,k as it,E as j,G as rt,as as st,at as dt,au as M,H as q,v as ct}from"./index.4a3d8a83.js";import{B as ut}from"./index.68f2ff4e.js";import{F as lt,C as vt,a as ht}from"./index.a0f57fcd.js";import"./index.ccf5f842.js";import{D as gt}from"./index.e9a9b215.js";import{r as C}from"./index.5ffddab0.js";import{c as pt,s as wt}from"./index.6d9d4489.js";import{g as O,a as mt}from"./appRoute.3f3f71a5.js";import{s as k}from"./setting.088f8b88.js";import{g as ft}from"./wx-share.257d08d6.js";import"./use-id.ea8c8a7a.js";import"./use-route.323992c4.js";import"./use-tab-status.a8e54c32.js";import"./request.e54a2d6e.js";const $=g=>(Q("data-v-68b2c5fc"),g=g(),X(),g),bt={class:"wrapper"},_t={class:"sector-inner"},yt=["src"],kt=$(()=>t("div",{class:"start"},"\u7ACB\u5373\u62BD\u5956",-1)),xt=[kt],Ct={class:"van-overlay"},Ft={class:"block"},Bt=$(()=>t("div",null,"\u8BF7\u586B\u5199\u9886\u5956\u4FE1\u606F",-1)),$t={style:{margin:"16px"}},At=at(" \u63D0\u4EA4 "),Nt={class:"number"},zt={class:"residue"},It=$(()=>t("text",null," \u60A8\u5F53\u524D\u5269\u4F59 ",-1)),Dt={style:{color:"#fc0404"}},Et=$(()=>t("text",null," \u62BD\u5956\u673A\u4F1A ",-1)),Tt=$(()=>t("div",{class:"assistance"},"\u53C2\u52A0\u6295\u7A3F\u53EF\u83B71\u6B21\u62BD\u5956\u673A\u4F1A",-1)),Lt=J({__name:"Corona",props:{RecordList:Function,activityRule:Function},setup(g){const A=g,e=G({number:0,message:{realName:"",phone:"",address:""},show:!1,rotateAngle:0,time:0,IsTurnOver:!0,rotate_angle:"",activity:{poolList:[]}}),o=K(),m=/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[1589]))\d{8}$/;C.findDraw({userId:o.$state.userId,activityNo:o.$state.activityNo}).then(c=>{A.activityRule(c.drawActivityConfig.activityRule),e.activity=c.drawActivityConfig});function r(){C.saveAddress(`?userId=${o.$state.userId}&activityNo=${o.$state.activityNo}`,JSON.stringify({realName:e.message.realName,recordNo:e.message.recordNo,phone:e.message.phone,activityNo:o.$state.activityNo,address:e.message.address})).then(c=>{l(c.message),e.show=!1,A.RecordList()})}function N(){C.findDrawCount({userId:o.$state.userId,activityNo:o.$state.activityNo}).then(c=>{c.drawCount>=0&&(e.number=c.drawCount)})}function f(){e.IsTurnOver?e.number==0?l("\u6682\u65E0\u62BD\u5956\u6B21\u6570"):(e.IsTurnOver=!1,C.toDraw({userId:o.$state.userId,activityNo:o.$state.activityNo}).then(c=>{N(),e.activity.poolList.map((u,b)=>{if(u.awardNo==c.awardNo){e.message.recordNo=c.recordNo,z(b+1),setTimeout(function(){u.awardFlag=="1"?gt.alert({message:"\u606D\u559C\u83B7\u5F97"+u.awardName}).then(()=>{e.show=!0}):l(u.awardName),e.IsTurnOver=!0},5200);return}})})):l("\u8BF7\u52FF\u91CD\u590D\u62BD\u5956")}function z(c){switch(e.rotateAngle=e.rotateAngle-e.time,c){case 1:e.time=Math.random()*(30-0)+0;break;case 6:e.time=Math.random()*(85-35)+35;break;case 5:e.time=Math.random()*(145-95)+95;break;case 4:e.time=Math.random()*(205-155)+155;break;case 3:e.time=Math.random()*(265-215)+215;break;case 2:e.time=Math.random()*(325-275)+275;break}e.rotateAngle=e.rotateAngle+3600+e.time,e.rotate_angle=`rotate(${e.rotateAngle}deg)`}function R(c){r()}return N(),(c,u)=>{const b=lt,S=vt,I=ut,D=ht,W=nt;return s(),d(x,null,[t("div",bt,[t("div",{class:"panel",style:ot({transform:e.rotate_angle,transition:"5s"})},[(s(!0),d(x,null,B(e.activity.poolList,(h,V)=>(s(),d("div",{class:"sector",key:V},[t("div",_t,[t("span",null,v(h.awardName),1),E(t("img",{src:h.awardImage},null,8,yt),[[T,h.awardImage]])])]))),128))],4),t("div",{class:"pointer",onClick:f},xt),w(W,{show:e.show},{default:y(()=>[t("div",Ct,[t("div",Ft,[Bt,w(D,{onSubmit:R},{default:y(()=>[w(S,{inset:""},{default:y(()=>[w(b,{modelValue:e.message.realName,"onUpdate:modelValue":u[0]||(u[0]=h=>e.message.realName=h),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",name:"realName",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"]),w(b,{modelValue:e.message.phone,"onUpdate:modelValue":u[1]||(u[1]=h=>e.message.phone=h),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801",name:"phone",rules:[{pattern:m,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u624B\u673A\u53F7"}]},null,8,["modelValue","rules"]),w(b,{modelValue:e.message.address,"onUpdate:modelValue":u[2]||(u[2]=h=>e.message.address=h),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740",name:"address",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5730\u5740"}]},null,8,["modelValue"])]),_:1}),t("div",$t,[w(I,{round:"",block:"",type:"primary","native-type":"submit"},{default:y(()=>[At]),_:1})])]),_:1})])])]),_:1},8,["show"])]),t("div",Nt,[t("div",zt,[It,t("text",Dt,v(e.number)+"\u6B21 ",1),Et]),Tt])],64)}}});var Rt=H(Lt,[["__scopeId","data-v-68b2c5fc"]]);const L=g=>(Q("data-v-69253edc"),g=g(),X(),g),St={class:"content"},Wt={class:"tab"},Vt={class:"tab_content"},Pt={class:"item_content"},Ut=["onClick"],Ot=["src"],jt=L(()=>t("img",{class:"item_start",src:"https://imgcdn.dahebao.cn/20221011/20221011094515515822.png"},null,-1)),Mt=["onClick"],qt=["src"],Ht={class:"postsTitle"},Jt={class:"hotData"},Gt=L(()=>t("span",null," \u4EBA\u6C14\u503C:",-1)),Kt={style:{color:"#dc5d3c"}},Qt=["onClick"],Xt=["onClick"],Yt={key:0,class:"empty",src:"https://imgcdn.dahebao.cn/20221027/20221027113957273185.png",alt:""},Zt={class:"button"},te=L(()=>t("div",{class:"title"},"\u6295\u7A3F\u5373\u53EF\u53C2\u4E0E\u62BD\u5956",-1)),ee={class:"lottery"},oe={key:0,class:"recordWeek"},ae=L(()=>t("div",{class:"title"},"\u5468\u8BC4\u699C\uFF1A\u9AD8\u4EBA\u6C14\u4F5C\u54C1\u7528\u6237",-1)),ne={class:"groud"},ie={class:"record"},re=J({__name:"index",setup(g){const A=it(),e=j(0),o=G({show:!1,item:[],recordList:[],recordListWeek:[],city:[],currentPage:1,activityRule:""}),m=j(),r=K();function N(){pt().then(n=>{n.map(a=>{delete a.children}),o.city=n,r.$state.citys=n}).then(()=>{q.get("https://restapi.amap.com/v3/ip?key=8f97aea18038bcb28d2d29b1c5cf5158").then(n=>{n.status==1?o.city.map((a,F)=>{n.adcode==a.city_id&&(e.value=F,r.changeCity(a))}):r.changeCity(o.city[0])}).then(()=>{f(!1),e.value==0&&r.changeCity(o.city[0])}).catch(()=>{r.changeCity(o.city[0]),f(!1)})})}function f(n){wt(r.$state.userId,o.city[e.value].city_id,o.currentPage).then(a=>{a.state==1?(a.data.length==0&&n?(l("\u6CA1\u6709\u66F4\u591A\u6570\u636E\u4E86"),--o.currentPage):o.item=a.data,a.data.length<4?o.city[e.value].more="no-more":o.city[e.value].more="more"):l(a.message)})}function z(){C.drawRecordList({userId:r.$state.userId,activityNo:r.$state.activityNo,awardFlag:"1",page_index:0,page_count:200}).then(n=>{o.recordList=n.recordList})}function R(){C.drawRecordList({userId:r.$state.userId,activityNo:"b2101db8b4e54358a042ba9306049791",awardFlag:"1",page_index:0,page_count:200}).then(n=>{o.recordListWeek=n.recordList})}function c(){o.city[e.value].more=="no-more"?l("\u6CA1\u6709\u66F4\u591A\u6570\u636E\u4E86"):(++o.currentPage,f(!0))}function u(){if(o.currentPage<=1){l("\u6CA1\u6709\u66F4\u591A\u6570\u636E\u4E86");return}else--o.currentPage,f(!0)}function b(){o.currentPage=1,f(!1)}function S(){r.$state.userId==""&&k()?(l("\u8BF7\u5728\u8C6B\u89C6\u9891App\u4E0A\u4F20\u65B0\u5730\u6807"),setTimeout(()=>{location.href="https://news.dahebao.cn/appdownload/index.html?Type=102&openUrl=https://news.dahebao.cn/dahe/h5/cityvote/index.html#/autoShow"},500)):r.$state.userId==""&&!k()?O():A.push({name:"uploading"})}function I(n){r.$state.userId==""&&k()?(l("\u8BF7\u5728\u8C6B\u89C6\u9891App\u67E5\u770B\u8BE6\u60C5"),setTimeout(()=>{location.href="https://news.dahebao.cn/appdownload/index.html?Type=102&openUrl=https://news.dahebao.cn/dahe/h5/cityvote/index.html#/autoShow"},500)):r.$state.userId==""&&!k()?O():mt(n.postsId)}function D(n,a){r.$state.userId==""&&k()?(l("\u8BF7\u5728\u8C6B\u89C6\u9891App\u6295\u7968"),setTimeout(()=>{location.href="https://news.dahebao.cn/appdownload/index.html?Type=102&openUrl=https://news.dahebao.cn/dahe/h5/cityvote/index.html#/autoShow"},500)):r.$state.userId==""&&!k()?O():W(n,a)}function W(n,a){o.item[a].ifThumb==0?q({method:"get",url:"https://news.dahebao.cn/dahe/appposts/poststhumbup",params:{data:JSON.stringify({user_id:r.$state.userId,action_type:1,posts_id:n.postsId}),headers:{"Content-Type":"application/json"}}}).then(F=>{F.state==1&&(o.item[a].hotData+=10,o.item[a].ifThumb=1,l("\u6295\u7968\u6210\u529F"))}):l("\u6BCF\u4E2A\u4F5C\u54C1\u53EA\u80FD\u6295\u4E00\u7968\u54E6")}function h(n){o.activityRule=n}let V=setInterval(()=>{m.value.scrollTop>=m.value.scrollHeight-m.value.clientHeight?m.value.scrollTop=0:m.value.scrollTop+=.5},100);return ft({type:22,share_url:window.location.href},"\u6CB3\u5357\u65B0\u5730\u6807","2022\u6CB3\u5357\u65B0\u5730\u6807,\u7ED9\u4F60\u5FC3\u91CC\u7684\u5730\u65B9\u6295\u7968!"),rt(()=>{N(),z(),R()}),st(()=>{clearInterval(V)}),(n,a)=>{const F=dt,Y=tt,Z=et;return s(),d("div",St,[t("header",null,[t("div",{class:"title",onClick:a[0]||(a[0]=i=>o.show=!0)},"\u6D3B\u52A8\u89C4\u5219"),t("img",{onClick:S,src:"https://imgcdn.dahebao.cn/20221206/20221206150922616976.png"})]),w(F,{class:"van-popup",show:o.show,"onUpdate:show":a[1]||(a[1]=i=>o.show=i),onClick:a[2]||(a[2]=i=>o.show=!1)},{default:y(()=>[t("span",null,v(o.activityRule),1)]),_:1},8,["show"]),t("main",Wt,[w(Z,{active:e.value,"onUpdate:active":a[3]||(a[3]=i=>e.value=i),onChange:b,animated:!1,swipeable:""},{default:y(()=>[(s(!0),d(x,null,B(o.city,(i,_)=>(s(),ct(Y,{title:i.city_name,key:_},{default:y(()=>[t("div",Vt,[t("div",Pt,[(s(!0),d(x,null,B(o.item,(p,P)=>(s(),d("div",{class:"item",key:P},[p.postsVideo?(s(),d("div",{key:0,onClick:U=>I(p),class:"video"},[t("img",{src:p.postsVideoImg},null,8,Ot),jt],8,Ut)):(s(),d("div",{key:1,onClick:U=>I(p),class:"img"},[t("img",{class:"postsImg",src:JSON.parse(p.postsImg)[0].imgUrl+"/pc_600"},null,8,qt)],8,Mt)),t("div",Ht,[t("div",Jt,[Gt,t("span",Kt,v(p.hotData),1)]),t("span",null,v(p.postsTitle),1)]),p.ifThumb?(s(),d("div",{key:3,class:"text",onClick:U=>D(p,P)}," \u5DF2\u6295\u7968 ",8,Xt)):(s(),d("div",{key:2,class:"text",onClick:U=>D(p,P)}," \u4E3ATA\u6295\u7968 ",8,Qt))]))),128)),o.item.length==0?(s(),d("img",Yt)):M("",!0)]),E(t("div",Zt,[t("button",{onClick:u},"\u4E0A\u4E00\u9875"),t("button",{onClick:c},"\u4E0B\u4E00\u9875")],512),[[T,o.item.length!=0]])])]),_:2},1032,["title"]))),128))]),_:1},8,["active"])]),t("footer",null,[te,t("div",ee,[w(Rt,{RecordList:z,activityRule:h})])]),o.recordListWeek.length>0?(s(),d("div",oe,[ae,t("div",ne,[(s(!0),d(x,null,B(o.recordListWeek,(i,_)=>E((s(),d("div",{class:"cell",key:_},[t("div",null,v(_<3?"":_+1),1),t("div",null,v(i.realName),1),t("div",null,v(i.awardName),1),t("div",null,v(i.phone),1)])),[[T,i.realName&&i.awardName&&i.phone]])),128))])])):M("",!0),t("div",ie,[t("div",{class:"groud",ref_key:"scrollRef",ref:m},[(s(!0),d(x,null,B(o.recordList,(i,_)=>E((s(),d("div",{class:"cell",key:_},[t("div",null,v(i.realName),1),t("div",null,v(i.awardName),1),t("div",null,v(i.phone),1)])),[[T,i.realName&&i.awardName&&i.phone]])),128))],512)])])}}});var Be=H(re,[["__scopeId","data-v-69253edc"]]);export{Be as default};
