import{z as U,A as M,E as j,d as J,G as bn,H as G,I as Q,h as s,J as N,K as X,L as fn,M as hn,N as mn,Q as pn,R as _n,S as T,U as xn,V as yn,W as wn,X as kn,Y as zn,e as Sn,f as D,Z as Cn,$ as E,a0 as In,a1 as Vn,a2 as En,g as Pn,a3 as P,a4 as Tn,a5 as L,a6 as Mn,a7 as q,a8 as An,a9 as H,aa as Bn,q as Ln,ab as qn,u as Fn}from"./index.4cfa603b.js";import{r as $}from"./request.d81ce039.js";const[Nn,$n]=U("form"),Rn={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:M,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:j,showErrorMessage:j,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var On=J({name:Nn,props:Rn,emits:["submit","failed"],setup(n,{emit:t,slots:o}){const{children:d,linkChildren:i}=bn(G),u=a=>a?d.filter(c=>a.includes(c.name)):d,k=a=>new Promise((c,v)=>{const p=[];u(a).reduce((B,w)=>B.then(()=>{if(!p.length)return w.validate().then(V=>{V&&p.push(V)})}),Promise.resolve()).then(()=>{p.length?v(p):c()})}),f=a=>new Promise((c,v)=>{const p=u(a);Promise.all(p.map(b=>b.validate())).then(b=>{b=b.filter(Boolean),b.length?v(b):c()})}),_=a=>{const c=d.find(v=>v.name===a);return c?new Promise((v,p)=>{c.validate().then(b=>{b?p(b):v()})}):Promise.reject()},g=a=>typeof a=="string"?_(a):n.validateFirst?k(a):f(a),A=a=>{typeof a=="string"&&(a=[a]),u(a).forEach(v=>{v.resetValidation()})},S=()=>d.reduce((a,c)=>(a[c.name]=c.getValidationStatus(),a),{}),C=(a,c)=>{d.some(v=>v.name===a?(v.$el.scrollIntoView(c),!0):!1)},x=()=>d.reduce((a,c)=>(a[c.name]=c.formValue.value,a),{}),z=()=>{const a=x();g().then(()=>t("submit",a)).catch(c=>{t("failed",{values:a,errors:c}),n.scrollToError&&c[0].name&&C(c[0].name)})},I=a=>{N(a),z()};return i({props:n}),Q({submit:z,validate:g,getValues:x,scrollToField:C,resetValidation:A,getValidationStatus:S}),()=>{var a;return s("form",{class:$n(),onSubmit:I},[(a=o.default)==null?void 0:a.call(o)])}}});const ae=X(On);function Wn(n){return Array.isArray(n)?!n.length:n===0?!1:!n}function jn(n,t){return!(t.required&&Wn(n)||t.pattern&&!t.pattern.test(String(n)))}function Dn(n,t){return new Promise(o=>{const d=t.validator(n,t);if(mn(d)){d.then(o);return}o(d)})}function K(n,t){const{message:o}=t;return pn(o)?o(n,t):o||""}function Hn({target:n}){n.composing=!0}function Y({target:n}){n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}function Kn(n,t){const o=fn();n.style.height="auto";let d=n.scrollHeight;if(_n(t)){const{maxHeight:i,minHeight:u}=t;i!==void 0&&(d=Math.min(d,i)),u!==void 0&&(d=Math.max(d,u))}d&&(n.style.height=`${d}px`,hn(o))}function Yn(n){return n==="number"?{type:"text",inputmode:"decimal"}:n==="digit"?{type:"tel",inputmode:"numeric"}:{type:n}}function F(n){return[...n].length}function Un(n,t){return[...n].slice(0,t).join("")}const[Jn,m]=U("field"),Gn={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:M,formatter:Function,clearIcon:T("clear"),modelValue:xn(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:T("focus"),formatTrigger:T("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Qn=yn({},wn,Gn,{rows:M,type:T("text"),rules:Array,autosize:[Boolean,Object],labelWidth:M,labelClass:kn,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Xn=J({name:Jn,props:Qn,emits:["blur","focus","clear","keypress","click-input","end-validate","start-validate","click-left-icon","click-right-icon","update:modelValue"],setup(n,{emit:t,slots:o}){const d=zn(),i=Sn({status:"unvalidated",focused:!1,validateMessage:""}),u=D(),k=D(),{parent:f}=Cn(G),_=()=>{var e;return String((e=n.modelValue)!=null?e:"")},g=e=>{if(L(n[e]))return n[e];if(f&&L(f.props[e]))return f.props[e]},A=E(()=>{const e=g("readonly");if(n.clearable&&!e){const r=_()!=="",l=n.clearTrigger==="always"||n.clearTrigger==="focus"&&i.focused;return r&&l}return!1}),S=E(()=>k.value&&o.input?k.value():n.modelValue),C=e=>e.reduce((r,l)=>r.then(()=>{if(i.status==="failed")return;let{value:h}=S;if(l.formatter&&(h=l.formatter(h,l)),!jn(h,l)){i.status="failed",i.validateMessage=K(h,l);return}if(l.validator)return Dn(h,l).then(y=>{y&&typeof y=="string"?(i.status="failed",i.validateMessage=y):y===!1&&(i.status="failed",i.validateMessage=K(h,l))})}),Promise.resolve()),x=()=>{i.status="unvalidated",i.validateMessage=""},z=()=>t("end-validate",{status:i.status}),I=(e=n.rules)=>new Promise(r=>{x(),e?(t("start-validate"),C(e).then(()=>{i.status==="failed"?(r({name:n.name,message:i.validateMessage}),z()):(i.status="passed",r(),z())})):r()}),a=e=>{if(f&&n.rules){const{validateTrigger:r}=f.props,l=H(r).includes(e),h=n.rules.filter(y=>y.trigger?H(y.trigger).includes(e):l);h.length&&I(h)}},c=e=>{const{maxlength:r}=n;if(L(r)&&F(e)>r){const l=_();return l&&F(l)===+r?l:Un(e,+r)}return e},v=(e,r="onChange")=>{if(e=c(e),n.type==="number"||n.type==="digit"){const l=n.type==="number";e=Mn(e,l,l)}n.formatter&&r===n.formatTrigger&&(e=n.formatter(e)),u.value&&u.value.value!==e&&(u.value.value=e),e!==n.modelValue&&t("update:modelValue",e)},p=e=>{e.target.composing||v(e.target.value)},b=()=>{var e;return(e=u.value)==null?void 0:e.blur()},B=()=>{var e;return(e=u.value)==null?void 0:e.focus()},w=()=>{const e=u.value;n.type==="textarea"&&n.autosize&&e&&Kn(e,n.autosize)},V=e=>{i.focused=!0,t("focus",e),P(w),g("readonly")&&b()},Z=e=>{g("readonly")||(i.focused=!1,v(_(),"onBlur"),t("blur",e),a("onBlur"),P(w),qn())},R=e=>t("click-input",e),nn=e=>t("click-left-icon",e),en=e=>t("click-right-icon",e),an=e=>{N(e),t("update:modelValue",""),t("clear",e)},O=E(()=>{if(typeof n.error=="boolean")return n.error;if(f&&f.props.showError&&i.status==="failed")return!0}),tn=E(()=>{const e=g("labelWidth");if(e)return{width:In(e)}}),rn=e=>{e.keyCode===13&&(!(f&&f.props.submitOnEnter)&&n.type!=="textarea"&&N(e),n.type==="search"&&b()),t("keypress",e)},W=()=>n.id||`${d}-input`,on=()=>i.status,ln=()=>{const e=m("control",[g("inputAlign"),{error:O.value,custom:!!o.input,"min-height":n.type==="textarea"&&!n.autosize}]);if(o.input)return s("div",{class:e,onClick:R},[o.input()]);const r={id:W(),ref:u,name:n.name,rows:n.rows!==void 0?+n.rows:void 0,class:e,disabled:g("disabled"),readonly:g("readonly"),autofocus:n.autofocus,placeholder:n.placeholder,autocomplete:n.autocomplete,enterkeyhint:n.enterkeyhint,"aria-labelledby":n.label?`${d}-label`:void 0,onBlur:Z,onFocus:V,onInput:p,onClick:R,onChange:Y,onKeypress:rn,onCompositionend:Y,onCompositionstart:Hn};return n.type==="textarea"?s("textarea",r,null):s("input",Bn(Yn(n.type),r),null)},cn=()=>{const e=o["left-icon"];if(n.leftIcon||e)return s("div",{class:m("left-icon"),onClick:nn},[e?e():s(q,{name:n.leftIcon,classPrefix:n.iconPrefix},null)])},dn=()=>{const e=o["right-icon"];if(n.rightIcon||e)return s("div",{class:m("right-icon"),onClick:en},[e?e():s(q,{name:n.rightIcon,classPrefix:n.iconPrefix},null)])},vn=()=>{if(n.showWordLimit&&n.maxlength){const e=F(_());return s("div",{class:m("word-limit")},[s("span",{class:m("word-num")},[e]),Ln("/"),n.maxlength])}},sn=()=>{if(f&&f.props.showErrorMessage===!1)return;const e=n.errorMessage||i.validateMessage;if(e){const r=o["error-message"],l=g("errorMessageAlign");return s("div",{class:m("error-message",l)},[r?r({message:e}):e])}},un=()=>{const e=g("colon")?":":"";if(o.label)return[o.label(),e];if(n.label)return s("label",{id:`${d}-label`,for:W()},[n.label+e])},gn=()=>[s("div",{class:m("body")},[ln(),A.value&&s(q,{name:n.clearIcon,class:m("clear"),onTouchstart:an},null),dn(),o.button&&s("div",{class:m("button")},[o.button()])]),vn(),sn()];return Q({blur:b,focus:B,validate:I,formValue:S,resetValidation:x,getValidationStatus:on}),Vn(An,{customValue:k,resetValidation:x,validateWithTrigger:a}),En(()=>n.modelValue,()=>{v(_()),x(),a("onChange"),P(w)}),Pn(()=>{v(_(),n.formatTrigger),P(w)}),()=>{const e=g("disabled"),r=g("labelAlign"),l=un(),h=cn();return s(Tn,{size:n.size,icon:n.leftIcon,class:m({error:O.value,disabled:e,[`label-${r}`]:r}),center:n.center,border:n.border,isLink:n.isLink,clickable:n.clickable,titleStyle:tn.value,valueClass:m("value"),titleClass:[m("label",[r,{required:n.required}]),n.labelClass],arrowDirection:n.arrowDirection},{icon:h?()=>h:null,title:l?()=>l:null,value:gn,extra:o.extra})}}});const te=X(Xn);const Zn=Fn(),re=()=>$.post("app/selectionActivity/cityList",{},""),oe=(n,t,o)=>$.post("app/selectionActivity/video/list",{userId:n,currentPage:o,pageSize:"4",activityNo:Zn.$state.activityNo,creatorType:t},""),le=n=>$.post("app/selectionActivity/video/save",n,"");export{te as F,ae as a,le as b,re as c,oe as s};
