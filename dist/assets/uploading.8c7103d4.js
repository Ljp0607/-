import"./request.d81ce039.js";import{F as Field,a as Form,b as saveCity}from"./index.571fde4d.js";import{a5 as isDef,R as isObject$1,z as createNamespace,d as defineComponent,ac as makeRequiredProp,X as unknownProp,ad as makeNumberProp,A as numericProp,ae as makeArrayProp,f as ref,e as reactive,af as useTouch,Z as useParent,I as useExpose,a2 as watch,h as createVNode,J as preventDefault,ag as clamp,U as makeNumericProp,E as truthProp,V as extend$1,S as makeStringProp,$ as computed,G as useChildren,ah as unitToPx,ai as Loading,aj as HAPTICS_FEEDBACK,ak as BORDER_UNSET_TOP_BOTTOM,K as withInstall,_ as _export_sfc,u as useCounterStore,g as onMounted,P as Popup,al as Uploader,C as CellGroup,B as Button,o as openBlock,c as createElementBlock,a as createBaseVNode,w as withCtx,p as pushScopeId,b as popScopeId,T as Toast,am as unref,F as Fragment,r as renderList,i as createBlock,an as createSlots,q as createTextVNode,l as axios$3}from"./index.4cfa603b.js";var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function deepClone(n){if(!isDef(n))return n;if(Array.isArray(n))return n.map(s=>deepClone(s));if(isObject$1(n)){const s={};return Object.keys(n).forEach(o=>{s[o]=deepClone(n[o])}),s}return n}const DEFAULT_DURATION=200,MOMENTUM_LIMIT_TIME=300,MOMENTUM_LIMIT_DISTANCE=15,[name$3,bem$1]=createNamespace("picker-column");function getElementTranslateY(n){const{transform:s}=window.getComputedStyle(n),o=s.slice(7,s.length-1).split(", ")[5];return Number(o)}const PICKER_KEY=Symbol(name$3),isOptionDisabled=n=>isObject$1(n)&&n.disabled;var stdin_default$1=defineComponent({name:name$3,props:{textKey:makeRequiredProp(String),readonly:Boolean,allowHtml:Boolean,className:unknownProp,itemHeight:makeRequiredProp(Number),defaultIndex:makeNumberProp(0),swipeDuration:makeRequiredProp(numericProp),initialOptions:makeArrayProp(),visibleItemCount:makeRequiredProp(numericProp)},emits:["change"],setup(n,{emit:s,slots:o}){let a,e,_,p,O;const b=ref(),S=reactive({index:n.defaultIndex,offset:0,duration:0,options:deepClone(n.initialOptions)}),A=useTouch(),F=()=>S.options.length,j=()=>n.itemHeight*(+n.visibleItemCount-1)/2,L=I=>{I=clamp(I,0,F());for(let q=I;q<F();q++)if(!isOptionDisabled(S.options[q]))return q;for(let q=I-1;q>=0;q--)if(!isOptionDisabled(S.options[q]))return q},P=(I,q)=>{I=L(I)||0;const Q=-I*n.itemHeight,ee=()=>{I!==S.index&&(S.index=I,q&&s("change",I))};a&&Q!==S.offset?O=ee:ee(),S.offset=Q},N=I=>{JSON.stringify(I)!==JSON.stringify(S.options)&&(S.options=deepClone(I),P(n.defaultIndex))},T=I=>{a||n.readonly||(O=null,S.duration=DEFAULT_DURATION,P(I,!0))},B=I=>isObject$1(I)&&n.textKey in I?I[n.textKey]:I,V=I=>clamp(Math.round(-I/n.itemHeight),0,F()-1),R=(I,q)=>{const Q=Math.abs(I/q);I=S.offset+Q/.003*(I<0?-1:1);const ee=V(I);S.duration=+n.swipeDuration,P(ee,!0)},x=()=>{a=!1,S.duration=0,O&&(O(),O=null)},C=I=>{if(!n.readonly){if(A.start(I),a){const q=getElementTranslateY(b.value);S.offset=Math.min(0,q-j()),e=S.offset}else e=S.offset;S.duration=0,_=Date.now(),p=e,O=null}},Z=I=>{if(n.readonly)return;A.move(I),A.isVertical()&&(a=!0,preventDefault(I,!0)),S.offset=clamp(e+A.deltaY.value,-(F()*n.itemHeight),n.itemHeight);const q=Date.now();q-_>MOMENTUM_LIMIT_TIME&&(_=q,p=S.offset)},f=()=>{if(n.readonly)return;const I=S.offset-p,q=Date.now()-_;if(q<MOMENTUM_LIMIT_TIME&&Math.abs(I)>MOMENTUM_LIMIT_DISTANCE){R(I,q);return}const ee=V(S.offset);S.duration=DEFAULT_DURATION,P(ee,!0),setTimeout(()=>{a=!1},0)},$=()=>{const I={height:`${n.itemHeight}px`};return S.options.map((q,Q)=>{const ee=B(q),re=isOptionDisabled(q),de={role:"button",style:I,tabindex:re?-1:0,class:bem$1("item",{disabled:re,selected:Q===S.index}),onClick:()=>T(Q)},pe={class:"van-ellipsis",[n.allowHtml?"innerHTML":"textContent"]:ee};return createVNode("li",de,[o.option?o.option(q):createVNode("div",pe,null)])})},X=I=>{const{options:q}=S;for(let Q=0;Q<q.length;Q++)if(B(q[Q])===I)return P(Q)},K=()=>S.options[S.index],ie=()=>S.options.length;return P(S.index),useParent(PICKER_KEY),useExpose({state:S,setIndex:P,getValue:K,setValue:X,setOptions:N,hasOptions:ie,stopMomentum:x}),watch(()=>n.initialOptions,N),watch(()=>n.defaultIndex,I=>P(I)),()=>createVNode("div",{class:[bem$1(),n.className],onTouchstart:C,onTouchmove:Z,onTouchend:f,onTouchcancel:f},[createVNode("ul",{ref:b,style:{transform:`translate3d(0, ${S.offset+j()}px, 0)`,transitionDuration:`${S.duration}ms`,transitionProperty:S.duration?"all":"none"},class:bem$1("wrapper"),onTransitionend:x},[$()])])}});const[name$2,bem,t]=createNamespace("picker"),pickerSharedProps={title:String,loading:Boolean,readonly:Boolean,allowHtml:Boolean,itemHeight:makeNumericProp(44),showToolbar:truthProp,swipeDuration:makeNumericProp(1e3),visibleItemCount:makeNumericProp(6),cancelButtonText:String,confirmButtonText:String},pickerProps=extend$1({},pickerSharedProps,{columns:makeArrayProp(),valueKey:String,defaultIndex:makeNumericProp(0),toolbarPosition:makeStringProp("top"),columnsFieldNames:Object});var stdin_default=defineComponent({name:name$2,props:pickerProps,emits:["confirm","cancel","change"],setup(n,{emit:s,slots:o}){const a=ref(!1),e=ref([]),_=computed(()=>{const{columnsFieldNames:W}=n;return{text:(W==null?void 0:W.text)||n.valueKey||"text",values:(W==null?void 0:W.values)||"values",children:(W==null?void 0:W.children)||"children"}}),{children:p,linkChildren:O}=useChildren(PICKER_KEY);O();const b=computed(()=>unitToPx(n.itemHeight)),S=computed(()=>{const W=n.columns[0];if(typeof W=="object"){if(_.value.children in W)return"cascade";if(_.value.values in W)return"object"}return"plain"}),A=()=>{var W;const J=[];let ue={[_.value.children]:n.columns};for(;ue&&ue[_.value.children];){const fe=ue[_.value.children];let ve=(W=ue.defaultIndex)!=null?W:+n.defaultIndex;for(;fe[ve]&&fe[ve].disabled;)if(ve<fe.length-1)ve++;else{ve=0;break}J.push({[_.value.values]:ue[_.value.children],className:ue.className,defaultIndex:ve}),ue=fe[ve]}e.value=J},F=()=>{const{columns:W}=n;S.value==="plain"?e.value=[{[_.value.values]:W}]:S.value==="cascade"?A():e.value=W,a.value=e.value.some(J=>J[_.value.values]&&J[_.value.values].length!==0)||p.some(J=>J.hasOptions)},j=()=>p.map(W=>W.state.index),L=(W,J)=>{const ue=p[W];ue&&(ue.setOptions(J),a.value=!0)},P=W=>{let J={[_.value.children]:n.columns};const ue=j();for(let fe=0;fe<=W;fe++)J=J[_.value.children][ue[fe]];for(;J&&J[_.value.children];)W++,L(W,J[_.value.children]),J=J[_.value.children][J.defaultIndex||0]},N=W=>p[W],T=W=>{const J=N(W);if(J)return J.getValue()},B=(W,J)=>{const ue=N(W);ue&&(ue.setValue(J),S.value==="cascade"&&P(W))},V=W=>{const J=N(W);if(J)return J.state.index},R=(W,J)=>{const ue=N(W);ue&&(ue.setIndex(J),S.value==="cascade"&&P(W))},x=W=>{const J=N(W);if(J)return J.state.options},C=()=>p.map(W=>W.getValue()),Z=W=>{W.forEach((J,ue)=>{B(ue,J)})},f=W=>{W.forEach((J,ue)=>{R(ue,J)})},$=W=>{S.value==="plain"?s(W,T(0),V(0)):s(W,C(),j())},X=W=>{S.value==="cascade"&&P(W),S.value==="plain"?s("change",T(0),V(0)):s("change",C(),W)},K=()=>{p.forEach(W=>W.stopMomentum()),$("confirm")},ie=()=>$("cancel"),I=()=>{if(o.title)return o.title();if(n.title)return createVNode("div",{class:[bem("title"),"van-ellipsis"]},[n.title])},q=()=>{const W=n.cancelButtonText||t("cancel");return createVNode("button",{type:"button",class:[bem("cancel"),HAPTICS_FEEDBACK],onClick:ie},[o.cancel?o.cancel():W])},Q=()=>{const W=n.confirmButtonText||t("confirm");return createVNode("button",{type:"button",class:[bem("confirm"),HAPTICS_FEEDBACK],onClick:K},[o.confirm?o.confirm():W])},ee=()=>{if(n.showToolbar){const W=o.toolbar||o.default;return createVNode("div",{class:bem("toolbar")},[W?W():[q(),I(),Q()]])}},re=()=>e.value.map((W,J)=>{var ue;return createVNode(stdin_default$1,{textKey:_.value.text,readonly:n.readonly,allowHtml:n.allowHtml,className:W.className,itemHeight:b.value,defaultIndex:(ue=W.defaultIndex)!=null?ue:+n.defaultIndex,swipeDuration:n.swipeDuration,initialOptions:W[_.value.values],visibleItemCount:n.visibleItemCount,onChange:()=>X(J)},{option:o.option})}),de=W=>{if(a.value){const J={height:`${b.value}px`},ue={backgroundSize:`100% ${(W-b.value)/2}px`};return[createVNode("div",{class:bem("mask"),style:ue},null),createVNode("div",{class:[BORDER_UNSET_TOP_BOTTOM,bem("frame")],style:J},null)]}},pe=()=>{const W=b.value*+n.visibleItemCount,J={height:`${W}px`};return createVNode("div",{class:bem("columns"),style:J,onTouchmove:preventDefault},[re(),de(W)])};return watch(()=>n.columns,F,{immediate:!0}),useExpose({confirm:K,getValues:C,setValues:Z,getIndexes:j,setIndexes:f,getColumnIndex:V,setColumnIndex:R,getColumnValue:T,setColumnValue:B,getColumnValues:x,setColumnValues:L}),()=>{var W,J;return createVNode("div",{class:bem()},[n.toolbarPosition==="top"?ee():null,n.loading?createVNode(Loading,{class:bem("loading")},null):null,(W=o["columns-top"])==null?void 0:W.call(o),pe(),(J=o["columns-bottom"])==null?void 0:J.call(o),n.toolbarPosition==="bottom"?ee():null])}}});const Picker=withInstall(stdin_default);var index$3=(()=>`:root{--van-image-placeholder-text-color: var(--van-text-color-2);--van-image-placeholder-font-size: var(--van-font-size-md);--van-image-placeholder-background-color: var(--van-background-color);--van-image-loading-icon-size: 32px;--van-image-loading-icon-color: var(--van-gray-4);--van-image-error-icon-size: 32px;--van-image-error-icon-color: var(--van-gray-4)}.van-image{position:relative;display:inline-block}.van-image--round{overflow:hidden;border-radius:var(--van-border-radius-max)}.van-image--round .van-image__img{border-radius:inherit}.van-image__img,.van-image__error,.van-image__loading{display:block;width:100%;height:100%}.van-image__error,.van-image__loading{position:absolute;top:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--van-image-placeholder-text-color);font-size:var(--van-image-placeholder-font-size);background:var(--van-image-placeholder-background-color)}.van-image__loading-icon{color:var(--van-image-loading-icon-color);font-size:var(--van-image-loading-icon-size)}.van-image__error-icon{color:var(--van-image-error-icon-color);font-size:var(--van-image-error-icon-size)}
`)(),index$2=(()=>`:root{--van-image-preview-index-text-color: var(--van-white);--van-image-preview-index-font-size: var(--van-font-size-md);--van-image-preview-index-line-height: var(--van-line-height-md);--van-image-preview-index-text-shadow: 0 1px 1px var(--van-gray-8);--van-image-preview-overlay-background-color: rgba(0, 0, 0, .9);--van-image-preview-close-icon-size: 22px;--van-image-preview-close-icon-color: var(--van-gray-5);--van-image-preview-close-icon-margin: var(--van-padding-md);--van-image-preview-close-icon-z-index: 1}.van-image-preview{position:fixed;top:0;left:0;width:100%;height:100%;background-color:transparent;transform:none}.van-image-preview__swipe{height:100%}.van-image-preview__swipe-item{display:flex;align-items:center;justify-content:center;overflow:hidden}.van-image-preview__cover{position:absolute;top:0;left:0}.van-image-preview__image{width:100%;transition-property:transform}.van-image-preview__image--vertical{width:auto;height:100%}.van-image-preview__image img{-webkit-user-drag:none}.van-image-preview__image .van-image__error{top:30%;height:40%}.van-image-preview__image .van-image__error-icon{font-size:36px}.van-image-preview__image .van-image__loading{background-color:transparent}.van-image-preview__index{position:absolute;top:var(--van-padding-md);left:50%;color:var(--van-image-preview-index-text-color);font-size:var(--van-image-preview-index-font-size);line-height:var(--van-image-preview-index-line-height);text-shadow:var(--van-image-preview-index-text-shadow);transform:translate(-50%)}.van-image-preview__overlay{background:var(--van-image-preview-overlay-background-color)}.van-image-preview__close-icon{position:absolute;z-index:var(--van-image-preview-close-icon-z-index);color:var(--van-image-preview-close-icon-color);font-size:var(--van-image-preview-close-icon-size)}.van-image-preview__close-icon--top-left{top:var(--van-image-preview-close-icon-margin);left:var(--van-image-preview-close-icon-margin)}.van-image-preview__close-icon--top-right{top:var(--van-image-preview-close-icon-margin);right:var(--van-image-preview-close-icon-margin)}.van-image-preview__close-icon--bottom-left{bottom:var(--van-image-preview-close-icon-margin);left:var(--van-image-preview-close-icon-margin)}.van-image-preview__close-icon--bottom-right{right:var(--van-image-preview-close-icon-margin);bottom:var(--van-image-preview-close-icon-margin)}
`)(),index$1=(()=>`:root{--van-uploader-size: 80px;--van-uploader-icon-size: 24px;--van-uploader-icon-color: var(--van-gray-4);--van-uploader-text-color: var(--van-text-color-2);--van-uploader-text-font-size: var(--van-font-size-sm);--van-uploader-upload-background-color: var(--van-gray-1);--van-uploader-upload-active-color: var(--van-active-color);--van-uploader-delete-color: var(--van-white);--van-uploader-delete-icon-size: 14px;--van-uploader-delete-background-color: rgba(0, 0, 0, .7);--van-uploader-file-background-color: var(--van-background-color);--van-uploader-file-icon-size: 20px;--van-uploader-file-icon-color: var(--van-gray-7);--van-uploader-file-name-padding: 0 var(--van-padding-base);--van-uploader-file-name-margin-top: var(--van-padding-xs);--van-uploader-file-name-font-size: var(--van-font-size-sm);--van-uploader-file-name-text-color: var(--van-gray-7);--van-uploader-mask-text-color: var(--van-white);--van-uploader-mask-background-color: rgba(50, 50, 51, .88);--van-uploader-mask-icon-size: 22px;--van-uploader-mask-message-font-size: var(--van-font-size-sm);--van-uploader-mask-message-line-height: var(--van-line-height-xs);--van-uploader-loading-icon-size: 22px;--van-uploader-loading-icon-color: var(--van-white);--van-uploader-disabled-opacity: var(--van-disabled-opacity)}.van-uploader{position:relative;display:inline-block}.van-uploader__wrapper{display:flex;flex-wrap:wrap}.van-uploader__wrapper--disabled{opacity:var(--van-uploader-disabled-opacity)}.van-uploader__input{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;cursor:pointer;opacity:0}.van-uploader__input-wrapper{position:relative}.van-uploader__input:disabled{cursor:not-allowed}.van-uploader__upload{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;box-sizing:border-box;width:var(--van-uploader-size);height:var(--van-uploader-size);margin:0 var(--van-padding-xs) var(--van-padding-xs) 0;background:var(--van-uploader-upload-background-color)}.van-uploader__upload:active{background-color:var(--van-uploader-upload-active-color)}.van-uploader__upload--readonly:active{background-color:var(--van-uploader-upload-background-color)}.van-uploader__upload-icon{color:var(--van-uploader-icon-color);font-size:var(--van-uploader-icon-size)}.van-uploader__upload-text{margin-top:var(--van-padding-xs);color:var(--van-uploader-text-color);font-size:var(--van-uploader-text-font-size)}.van-uploader__preview{position:relative;margin:0 var(--van-padding-xs) var(--van-padding-xs) 0;cursor:pointer}.van-uploader__preview-image{display:block;width:var(--van-uploader-size);height:var(--van-uploader-size);overflow:hidden}.van-uploader__preview-delete{position:absolute;top:0;right:0}.van-uploader__preview-delete--shadow{width:var(--van-uploader-delete-icon-size);height:var(--van-uploader-delete-icon-size);background:var(--van-uploader-delete-background-color);border-radius:0 0 0 12px}.van-uploader__preview-delete-icon{position:absolute;top:0;right:0;color:var(--van-uploader-delete-color);font-size:var(--van-uploader-delete-icon-size);transform:scale(.7) translate(10%,-10%)}.van-uploader__preview-cover{position:absolute;top:0;right:0;bottom:0;left:0}.van-uploader__mask{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--van-uploader-mask-text-color);background:var(--van-uploader-mask-background-color)}.van-uploader__mask-icon{font-size:var(--van-uploader-mask-icon-size)}.van-uploader__mask-message{margin-top:6px;padding:0 var(--van-padding-base);font-size:var(--van-uploader-mask-message-font-size);line-height:var(--van-uploader-mask-message-line-height)}.van-uploader__loading{width:var(--van-uploader-loading-icon-size);height:var(--van-uploader-loading-icon-size);color:var(--van-uploader-loading-icon-color)}.van-uploader__file{display:flex;flex-direction:column;align-items:center;justify-content:center;width:var(--van-uploader-size);height:var(--van-uploader-size);background:var(--van-uploader-file-background-color)}.van-uploader__file-icon{color:var(--van-uploader-file-icon-color);font-size:var(--van-uploader-file-icon-size)}.van-uploader__file-name{box-sizing:border-box;width:100%;margin-top:var(--van-uploader-file-name-margin-top);padding:var(--van-uploader-file-name-padding);color:var(--van-uploader-file-name-text-color);font-size:var(--van-uploader-file-name-font-size);text-align:center}
`)(),index=(()=>`:root{--van-picker-background-color: var(--van-background-color-light);--van-picker-toolbar-height: 44px;--van-picker-title-font-size: var(--van-font-size-lg);--van-picker-title-line-height: var(--van-line-height-md);--van-picker-action-padding: 0 var(--van-padding-md);--van-picker-action-font-size: var(--van-font-size-md);--van-picker-confirm-action-color: var(--van-text-link-color);--van-picker-cancel-action-color: var(--van-text-color-2);--van-picker-option-font-size: var(--van-font-size-lg);--van-picker-option-padding: 0 var(--van-padding-base);--van-picker-option-text-color: var(--van-text-color);--van-picker-option-disabled-opacity: .3;--van-picker-loading-icon-color: var(--van-primary-color);--van-picker-loading-mask-color: rgba(255, 255, 255, .9);--van-picker-mask-color: linear-gradient(180deg, rgba(255, 255, 255, .9), rgba(255, 255, 255, .4)), linear-gradient(0deg, rgba(255, 255, 255, .9), rgba(255, 255, 255, .4))}.van-picker{position:relative;background:var(--van-picker-background-color);-webkit-user-select:none;user-select:none}.van-picker__toolbar{display:flex;align-items:center;justify-content:space-between;height:var(--van-picker-toolbar-height)}.van-picker__cancel,.van-picker__confirm{height:100%;padding:var(--van-picker-action-padding);font-size:var(--van-picker-action-font-size);background-color:transparent;border:none}.van-picker__confirm{color:var(--van-picker-confirm-action-color)}.van-picker__cancel{color:var(--van-picker-cancel-action-color)}.van-picker__title{max-width:50%;font-weight:var(--van-font-weight-bold);font-size:var(--van-picker-title-font-size);line-height:var(--van-picker-title-line-height);text-align:center}.van-picker__columns{position:relative;display:flex;cursor:-webkit-grab;cursor:grab}.van-picker__loading{position:absolute;top:0;right:0;bottom:0;left:0;z-index:3;display:flex;align-items:center;justify-content:center;color:var(--van-picker-loading-icon-color);background:var(--van-picker-loading-mask-color)}.van-picker__frame{position:absolute;top:50%;right:var(--van-padding-md);left:var(--van-padding-md);z-index:2;transform:translateY(-50%);pointer-events:none}.van-picker__mask{position:absolute;top:0;left:0;z-index:1;width:100%;height:100%;background-image:var(--van-picker-mask-color);background-repeat:no-repeat;background-position:top,bottom;transform:translateZ(0);pointer-events:none}.van-picker-column{flex:1;overflow:hidden;font-size:var(--van-picker-option-font-size)}.van-picker-column__wrapper{transition-timing-function:cubic-bezier(.23,1,.68,1)}.van-picker-column__item{display:flex;align-items:center;justify-content:center;padding:var(--van-picker-option-padding);color:var(--van-picker-option-text-color)}.van-picker-column__item--disabled{cursor:not-allowed;opacity:var(--van-picker-option-disabled-opacity)}
`)(),tc_vod={},uploader={},sha1={exports:{}};/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var root=typeof window=="object"?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS&&(root=commonjsGlobal);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&!0&&module.exports,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(n){return function(s){return new Sha1(!0).update(s)[n]()}},createMethod=function(){var n=createOutputMethod("hex");NODE_JS&&(n=nodeWrap(n)),n.create=function(){return new Sha1},n.update=function(a){return n.create().update(a)};for(var s=0;s<OUTPUT_TYPES.length;++s){var o=OUTPUT_TYPES[s];n[o]=createOutputMethod(o)}return n},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(n){if(typeof n=="string")return crypto.createHash("sha1").update(n,"utf8").digest("hex");if(n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(n.length===void 0)return method(n);return crypto.createHash("sha1").update(new Buffer(n)).digest("hex")};return nodeMethod};function Sha1(n){n?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(n){if(!this.finalized){var s=typeof n!="string";s&&n.constructor===root.ArrayBuffer&&(n=new Uint8Array(n));for(var o,a=0,e,_=n.length||0,p=this.blocks;a<_;){if(this.hashed&&(this.hashed=!1,p[0]=this.block,p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0),s)for(e=this.start;a<_&&e<64;++a)p[e>>2]|=n[a]<<SHIFT[e++&3];else for(e=this.start;a<_&&e<64;++a)o=n.charCodeAt(a),o<128?p[e>>2]|=o<<SHIFT[e++&3]:o<2048?(p[e>>2]|=(192|o>>6)<<SHIFT[e++&3],p[e>>2]|=(128|o&63)<<SHIFT[e++&3]):o<55296||o>=57344?(p[e>>2]|=(224|o>>12)<<SHIFT[e++&3],p[e>>2]|=(128|o>>6&63)<<SHIFT[e++&3],p[e>>2]|=(128|o&63)<<SHIFT[e++&3]):(o=65536+((o&1023)<<10|n.charCodeAt(++a)&1023),p[e>>2]|=(240|o>>18)<<SHIFT[e++&3],p[e>>2]|=(128|o>>12&63)<<SHIFT[e++&3],p[e>>2]|=(128|o>>6&63)<<SHIFT[e++&3],p[e>>2]|=(128|o&63)<<SHIFT[e++&3]);this.lastByteIndex=e,this.bytes+=e-this.start,e>=64?(this.block=p[16],this.start=e-64,this.hash(),this.hashed=!0):this.start=e}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,s=this.lastByteIndex;n[16]=this.block,n[s>>2]|=EXTRA[s&3],this.block=n[16],s>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var n=this.h0,s=this.h1,o=this.h2,a=this.h3,e=this.h4,_,p,O,b=this.blocks;for(p=16;p<80;++p)O=b[p-3]^b[p-8]^b[p-14]^b[p-16],b[p]=O<<1|O>>>31;for(p=0;p<20;p+=5)_=s&o|~s&a,O=n<<5|n>>>27,e=O+_+e+1518500249+b[p]<<0,s=s<<30|s>>>2,_=n&s|~n&o,O=e<<5|e>>>27,a=O+_+a+1518500249+b[p+1]<<0,n=n<<30|n>>>2,_=e&n|~e&s,O=a<<5|a>>>27,o=O+_+o+1518500249+b[p+2]<<0,e=e<<30|e>>>2,_=a&e|~a&n,O=o<<5|o>>>27,s=O+_+s+1518500249+b[p+3]<<0,a=a<<30|a>>>2,_=o&a|~o&e,O=s<<5|s>>>27,n=O+_+n+1518500249+b[p+4]<<0,o=o<<30|o>>>2;for(;p<40;p+=5)_=s^o^a,O=n<<5|n>>>27,e=O+_+e+1859775393+b[p]<<0,s=s<<30|s>>>2,_=n^s^o,O=e<<5|e>>>27,a=O+_+a+1859775393+b[p+1]<<0,n=n<<30|n>>>2,_=e^n^s,O=a<<5|a>>>27,o=O+_+o+1859775393+b[p+2]<<0,e=e<<30|e>>>2,_=a^e^n,O=o<<5|o>>>27,s=O+_+s+1859775393+b[p+3]<<0,a=a<<30|a>>>2,_=o^a^e,O=s<<5|s>>>27,n=O+_+n+1859775393+b[p+4]<<0,o=o<<30|o>>>2;for(;p<60;p+=5)_=s&o|s&a|o&a,O=n<<5|n>>>27,e=O+_+e-1894007588+b[p]<<0,s=s<<30|s>>>2,_=n&s|n&o|s&o,O=e<<5|e>>>27,a=O+_+a-1894007588+b[p+1]<<0,n=n<<30|n>>>2,_=e&n|e&s|n&s,O=a<<5|a>>>27,o=O+_+o-1894007588+b[p+2]<<0,e=e<<30|e>>>2,_=a&e|a&n|e&n,O=o<<5|o>>>27,s=O+_+s-1894007588+b[p+3]<<0,a=a<<30|a>>>2,_=o&a|o&e|a&e,O=s<<5|s>>>27,n=O+_+n-1894007588+b[p+4]<<0,o=o<<30|o>>>2;for(;p<80;p+=5)_=s^o^a,O=n<<5|n>>>27,e=O+_+e-899497514+b[p]<<0,s=s<<30|s>>>2,_=n^s^o,O=e<<5|e>>>27,a=O+_+a-899497514+b[p+1]<<0,n=n<<30|n>>>2,_=e^n^s,O=a<<5|a>>>27,o=O+_+o-899497514+b[p+2]<<0,e=e<<30|e>>>2,_=a^e^n,O=o<<5|o>>>27,s=O+_+s-899497514+b[p+3]<<0,a=a<<30|a>>>2,_=o^a^e,O=s<<5|s>>>27,n=O+_+n-899497514+b[p+4]<<0,o=o<<30|o>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+s<<0,this.h2=this.h2+o<<0,this.h3=this.h3+a<<0,this.h4=this.h4+e<<0},Sha1.prototype.hex=function(){this.finalize();var n=this.h0,s=this.h1,o=this.h2,a=this.h3,e=this.h4;return HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var n=this.h0,s=this.h1,o=this.h2,a=this.h3,e=this.h4;return[n>>24&255,n>>16&255,n>>8&255,n&255,s>>24&255,s>>16&255,s>>8&255,s&255,o>>24&255,o>>16&255,o>>8&255,o&255,a>>24&255,a>>16&255,a>>8&255,a&255,e>>24&255,e>>16&255,e>>8&255,e&255]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(20),s=new DataView(n);return s.setUint32(0,this.h0),s.setUint32(4,this.h1),s.setUint32(8,this.h2),s.setUint32(12,this.h3),s.setUint32(16,this.h4),n};var exports=createMethod();COMMON_JS?module.exports=exports:root.sha1=exports})()})(sha1);var cosJsSdkV5={exports:{}};(function(module,exports){(function(s,o){module.exports=o()})(window,function(){return function(n){var s={};function o(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return n[a].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=s,o.d=function(a,e,_){o.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:_})},o.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,e){if(e&1&&(a=o(a)),e&8||e&4&&typeof a=="object"&&a&&a.__esModule)return a;var _=Object.create(null);if(o.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:a}),e&2&&typeof a!="string")for(var p in a)o.d(_,p,function(O){return a[O]}.bind(null,p));return _},o.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(e,"a",e),e},o.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},o.p="/dist/",o(o.s="./index.js")}({"./index.js":function(n,s,o){var a=o("./src/cos.js");n.exports=a},"./lib/beacon.min.js":function(n,s,o){var a,e,_=o("./node_modules/@babel/runtime/helpers/typeof.js");(function(p,O){_(s)=="object"&&typeof n!="undefined"?n.exports=O():(a=O,e=typeof a=="function"?a.call(s,o,s,n):a,e!==void 0&&(n.exports=e))})(this,function(){var p=function(l,h){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,k){d.__proto__=k}||function(d,k){for(var M in k)Object.prototype.hasOwnProperty.call(k,M)&&(d[M]=k[M])},p(l,h)},O=function(){return O=Object.assign||function(l){for(var h,d=1,k=arguments.length;d<k;d++)for(var M in h=arguments[d])Object.prototype.hasOwnProperty.call(h,M)&&(l[M]=h[M]);return l},O.apply(this,arguments)};function b(m,l,h,d){return new(h||(h=Promise))(function(k,M){function G(Ce){try{ge(d.next(Ce))}catch(ce){M(ce)}}function ae(Ce){try{ge(d.throw(Ce))}catch(ce){M(ce)}}function ge(Ce){var ce;Ce.done?k(Ce.value):(ce=Ce.value,ce instanceof h?ce:new h(function(De){De(ce)})).then(G,ae)}ge((d=d.apply(m,l||[])).next())})}function S(m,l){var h,d,k,M,G={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return M={next:ae(0),throw:ae(1),return:ae(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function ae(ge){return function(Ce){return function(ce){if(h)throw new TypeError("Generator is already executing.");for(;G;)try{if(h=1,d&&(k=2&ce[0]?d.return:ce[0]?d.throw||((k=d.return)&&k.call(d),0):d.next)&&!(k=k.call(d,ce[1])).done)return k;switch(d=0,k&&(ce=[2&ce[0],k.value]),ce[0]){case 0:case 1:k=ce;break;case 4:return G.label++,{value:ce[1],done:!1};case 5:G.label++,d=ce[1],ce=[0];continue;case 7:ce=G.ops.pop(),G.trys.pop();continue;default:if(k=G.trys,!((k=k.length>0&&k[k.length-1])||ce[0]!==6&&ce[0]!==2)){G=0;continue}if(ce[0]===3&&(!k||ce[1]>k[0]&&ce[1]<k[3])){G.label=ce[1];break}if(ce[0]===6&&G.label<k[1]){G.label=k[1],k=ce;break}if(k&&G.label<k[2]){G.label=k[2],G.ops.push(ce);break}k[2]&&G.ops.pop(),G.trys.pop();continue}ce=l.call(m,G)}catch(De){ce=[6,De],d=0}finally{h=k=0}if(5&ce[0])throw ce[1];return{value:ce[0]?ce[1]:void 0,done:!0}}([ge,Ce])}}}var A="__BEACON_",F="__BEACON_deviceId",j="last_report_time",L="sending_event_ids",P="beacon_config",N="beacon_config_request_time",T=function(){function m(){var l=this;this.emit=function(h,d){if(l){var k,M=l.__EventsList[h];if(M!=null&&M.length){M=M.slice();for(var G=0;G<M.length;G++){k=M[G];try{var ae=k.callback.apply(l,[d]);if(k.type===1&&l.remove(h,k.callback),ae===!1)break}catch(ge){throw ge}}}return l}},this.__EventsList={}}return m.prototype.indexOf=function(l,h){for(var d=0;d<l.length;d++)if(l[d].callback===h)return d;return-1},m.prototype.on=function(l,h,d){if(d===void 0&&(d=0),this){var k=this.__EventsList[l];if(k||(k=this.__EventsList[l]=[]),this.indexOf(k,h)===-1){var M={name:l,type:d||0,callback:h};return k.push(M),this}return this}},m.prototype.one=function(l,h){this.on(l,h,1)},m.prototype.remove=function(l,h){if(this){var d=this.__EventsList[l];if(!d)return null;if(!h){try{delete this.__EventsList[l]}catch{}return null}if(d.length){var k=this.indexOf(d,h);d.splice(k,1)}return this}},m}();function B(m,l){for(var h={},d=0,k=Object.keys(m);d<k.length;d++){var M=k[d],G=m[M];if(typeof G=="string")h[V(M)]=V(G);else{if(l)throw new Error("value mast be string  !!!!");h[V(String(M))]=V(String(G))}}return h}function V(m){if(typeof m!="string")return m;try{return m.replace(new RegExp("\\|","g"),"%7C").replace(new RegExp("\\&","g"),"%26").replace(new RegExp("\\=","g"),"%3D").replace(new RegExp("\\+","g"),"%2B")}catch{return""}}function R(m){return String(m.A99)+String(m.A100)}var x=function(){},C=function(){function m(l){var h=this;this.lifeCycle=new T,this.uploadJobQueue=[],this.additionalParams={},this.delayTime=0,this._normalLogPipeline=function(d){if(!d||!d.reduce||!d.length)throw new TypeError("createPipeline \u65B9\u6CD5\u9700\u8981\u4F20\u5165\u81F3\u5C11\u6709\u4E00\u4E2A pipe \u7684\u6570\u7EC4");return d.length===1?function(k,M){d[0](k,M||x)}:d.reduce(function(k,M){return function(G,ae){return ae===void 0&&(ae=x),k(G,function(ge){return M==null?void 0:M(ge,ae)})}})}([function(d){h.send({url:h.strategy.getUploadUrl(),data:d,method:"post",contentType:"application/json;charset=UTF-8"},function(){var k=h.config.onReportSuccess;typeof k=="function"&&k(JSON.stringify(d.events))},function(){var k=h.config.onReportFail;typeof k=="function"&&k(JSON.stringify(d.events))})}]),function(d,k){if(!d)throw k instanceof Error?k:new Error(k)}(Boolean(l.appkey),"appkey must be initial"),this.config=O({},l)}return m.prototype.onUserAction=function(l,h){this.preReport(l,h,!1)},m.prototype.onDirectUserAction=function(l,h){this.preReport(l,h,!0)},m.prototype.preReport=function(l,h,d){l?this.strategy.isEventUpOnOff()&&(this.strategy.isBlackEvent(l)||this.strategy.isSampleEvent(l)||this.onReport(l,h,d)):this.errorReport.reportError("602"," no eventCode")},m.prototype.addAdditionalParams=function(l){for(var h=0,d=Object.keys(l);h<d.length;h++){var k=d[h];this.additionalParams[k]=l[k]}},m.prototype.setChannelId=function(l){this.commonInfo.channelID=String(l)},m.prototype.setOpenId=function(l){this.commonInfo.openid=String(l)},m.prototype.setUnionid=function(l){this.commonInfo.unid=String(l)},m.prototype.getDeviceId=function(){return this.commonInfo.deviceId},m.prototype.getCommonInfo=function(){return this.commonInfo},m.prototype.removeSendingId=function(l){try{var h=JSON.parse(this.storage.getItem(L)),d=h.indexOf(l);d!=-1&&(h.splice(d,1),this.storage.setItem(L,JSON.stringify(h)))}catch{}},m}(),Z=function(){function m(l,h,d,k){this.requestParams={},this.network=k,this.requestParams.attaid="00400014144",this.requestParams.token="6478159937",this.requestParams.product_id=l.appkey,this.requestParams.platform=d,this.requestParams.uin=h.deviceId,this.requestParams.model="",this.requestParams.os=d,this.requestParams.app_version=l.appVersion,this.requestParams.sdk_version=h.sdkVersion,this.requestParams.error_stack="",this.uploadUrl=l.isOversea?"https://htrace.wetvinfo.com/kv":"https://h.trace.qq.com/kv"}return m.prototype.reportError=function(l,h){this.requestParams._dc=Math.random(),this.requestParams.error_msg=h,this.requestParams.error_code=l,this.network.get(this.uploadUrl,{params:this.requestParams}).catch(function(d){})},m}(),f=function(){function m(l,h,d,k,M){this.strategy={isEventUpOnOff:!0,httpsUploadUrl:"https://otheve.beacon.qq.com/analytics/v2_upload",requestInterval:30,blacklist:[],samplelist:[]},this.realSample={},this.appkey="",this.needQueryConfig=!0,this.appkey=h.appkey,this.storage=k,this.needQueryConfig=l;try{var G=JSON.parse(this.storage.getItem(P));G&&this.processData(G)}catch{}h.isOversea&&(this.strategy.httpsUploadUrl="https://svibeacon.onezapp.com/analytics/v2_upload"),!h.isOversea&&this.needRequestConfig()&&this.requestConfig(h.appVersion,d,M)}return m.prototype.requestConfig=function(l,h,d){var k=this;this.storage.setItem(N,Date.now().toString()),d.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig",{platformId:typeof wx=="undefined"?"3":"4",mainAppKey:this.appkey,appVersion:l,sdkVersion:h.sdkVersion,osVersion:h.userAgent,model:"",packageName:"",params:{A3:h.deviceId}}).then(function(M){if(M.data.ret==0)try{var G=JSON.parse(M.data.beaconConfig);G&&(k.processData(G),k.storage.setItem(P,M.data.beaconConfig))}catch{}else k.processData(null),k.storage.setItem(P,"")}).catch(function(M){})},m.prototype.processData=function(l){var h,d,k,M,G;this.strategy.isEventUpOnOff=(h=l==null?void 0:l.isEventUpOnOff)!==null&&h!==void 0?h:this.strategy.isEventUpOnOff,this.strategy.httpsUploadUrl=(d=l==null?void 0:l.httpsUploadUrl)!==null&&d!==void 0?d:this.strategy.httpsUploadUrl,this.strategy.requestInterval=(k=l==null?void 0:l.requestInterval)!==null&&k!==void 0?k:this.strategy.requestInterval,this.strategy.blacklist=(M=l==null?void 0:l.blacklist)!==null&&M!==void 0?M:this.strategy.blacklist,this.strategy.samplelist=(G=l==null?void 0:l.samplelist)!==null&&G!==void 0?G:this.strategy.samplelist;for(var ae=0,ge=this.strategy.samplelist;ae<ge.length;ae++){var Ce=ge[ae].split(",");Ce.length==2&&(this.realSample[Ce[0]]=Ce[1])}},m.prototype.needRequestConfig=function(){if(!this.needQueryConfig)return!1;var l=Number(this.storage.getItem(N));return Date.now()-l>60*this.strategy.requestInterval*1e3},m.prototype.getUploadUrl=function(){return this.strategy.httpsUploadUrl+"?appkey="+this.appkey},m.prototype.isBlackEvent=function(l){return this.strategy.blacklist.indexOf(l)!=-1},m.prototype.isEventUpOnOff=function(){return this.strategy.isEventUpOnOff},m.prototype.isSampleEvent=function(l){return!!Object.prototype.hasOwnProperty.call(this.realSample,l)&&this.realSample[l]<Math.floor(Math.random()*Math.floor(1e4))},m}(),$="session_storage_key",X=function(){function m(l,h,d){this.getSessionStackDepth=0,this.beacon=d,this.storage=l,this.duration=h,this.appkey=d.config.appkey}return m.prototype.getSession=function(){this.getSessionStackDepth+=1;var l=this.storage.getItem($);if(!l)return this.createSession();var h="",d=0;try{var k=JSON.parse(l)||{sessionId:void 0,sessionStart:void 0};if(!k.sessionId||!k.sessionStart)return this.createSession();var M=Number(this.storage.getItem(j));if(Date.now()-M>this.duration)return this.createSession();h=k.sessionId,d=k.sessionStart,this.getSessionStackDepth=0}catch{}return{sessionId:h,sessionStart:d}},m.prototype.createSession=function(){var l=Date.now(),h={sessionId:this.appkey+"_"+l.toString(),sessionStart:l};this.storage.setItem($,JSON.stringify(h)),this.storage.setItem(j,l.toString());var d="is_new_user",k=this.storage.getItem(d);return this.getSessionStackDepth<=1&&this.beacon.onDirectUserAction("rqd_applaunched",{A21:k?"N":"Y"}),this.storage.setItem(d,JSON.stringify(!1)),h},m}();function K(){var m=navigator.userAgent,l=m.indexOf("compatible")>-1&&m.indexOf("MSIE")>-1,h=m.indexOf("Edge")>-1&&!l,d=m.indexOf("Trident")>-1&&m.indexOf("rv:11.0")>-1;if(l){new RegExp("MSIE (\\d+\\.\\d+);").test(m);var k=parseFloat(RegExp.$1);return k==7?7:k==8?8:k==9?9:k==10?10:6}return h?-2:d?11:-1}function ie(m,l){var h,d;return(h="https://tun-cos-1258344701.file.myqcloud.com/fp.js",d===void 0&&(d=Date.now()+"-"+Math.random()),new Promise(function(k,M){if(document.getElementById(d))k(void 0);else{var G=document.getElementsByTagName("head")[0],ae=document.createElement("script");ae.onload=function(){return function(){ae.onload=null,k(void 0)}},ae.onerror=function(ge){ae.onerror=null,G.removeChild(ae),M(ge)},ae.src=h,ae.id=d,G.appendChild(ae)}})).then(function(){new Fingerprint().getQimei36(m,l)}).catch(function(k){}),""}var I=function(){return(I=Object.assign||function(l){for(var h,d=1,k=arguments.length;d<k;d++)for(var M in h=arguments[d])Object.prototype.hasOwnProperty.call(h,M)&&(l[M]=h[M]);return l}).apply(this,arguments)},q,Q=function(){function m(l,h){h===void 0&&(h={}),this.reportOptions={},this.config=l,this.reportOptions=h}return m.canUseDB=function(){return!!(window!=null&&window.indexedDB)},m.prototype.openDB=function(){var l=this;return new Promise(function(h,d){if(!m.canUseDB())return d({message:"\u5F53\u524D\u4E0D\u652F\u6301 indexeddb"});var k=l.config,M=k.name,G=k.version,ae=k.stores,ge=indexedDB.open(M,G);ge.onsuccess=function(){l.db=ge.result,h(),I({result:1,func:"open",params:JSON.stringify(l.config)},l.reportOptions)},ge.onerror=function(Ce){var ce,De;d(Ce),I({result:0,func:"open",params:JSON.stringify(l.config),error_msg:(De=(ce=Ce.target)===null||ce===void 0?void 0:ce.error)===null||De===void 0?void 0:De.message},l.reportOptions)},ge.onupgradeneeded=function(){l.db=ge.result;try{ae==null||ae.forEach(function(Ce){l.createStore(Ce)})}catch(Ce){I({result:0,func:"open",params:JSON.stringify(l.config),error_msg:Ce.message},l.reportOptions),d(Ce)}}})},m.prototype.useStore=function(l){return this.storeName=l,this},m.prototype.deleteDB=function(){var l=this;return this.closeDB(),new Promise(function(h,d){var k=indexedDB.deleteDatabase(l.config.name);k.onsuccess=function(){return h()},k.onerror=d})},m.prototype.closeDB=function(){var l;(l=this.db)===null||l===void 0||l.close(),this.db=null},m.prototype.getStoreCount=function(){var l=this;return new Promise(function(h,d){var k=l.getStore("readonly").count();k.onsuccess=function(){return h(k.result)},k.onerror=d})},m.prototype.clearStore=function(){var l=this;return new Promise(function(h,d){var k=l.getStore("readwrite").clear();k.onsuccess=function(){return h()},k.onerror=d})},m.prototype.add=function(l,h){var d=this;return new Promise(function(k,M){var G=d.getStore("readwrite").add(l,h);G.onsuccess=function(){k(G.result)},G.onerror=M})},m.prototype.put=function(l,h){var d=this;return new Promise(function(k,M){var G=d.getStore("readwrite").put(l,h);G.onsuccess=function(){k(G.result)},G.onerror=M})},m.prototype.getStoreAllData=function(){var l=this;return new Promise(function(h,d){var k=l.getStore("readonly").openCursor(),M=[];k.onsuccess=function(){var G;if(!((G=k.result)===null||G===void 0)&&G.value){var ae=k.result.value;M.push(ae),k.result.continue()}else h(M)},k.onerror=d})},m.prototype.getDataRangeByIndex=function(l,h,d,k,M){var G=this;return new Promise(function(ae,ge){var Ce=G.getStore().index(l),ce=IDBKeyRange.bound(h,d,k,M),De=[],Te=Ce.openCursor(ce);Te.onsuccess=function(){var Fe;!((Fe=Te==null?void 0:Te.result)===null||Fe===void 0)&&Fe.value?(De.push(Te==null?void 0:Te.result.value),Te==null||Te.result.continue()):ae(De)},Te.onerror=ge})},m.prototype.removeDataByIndex=function(l,h,d,k,M){var G=this;return new Promise(function(ae,ge){var Ce=G.getStore("readwrite").index(l),ce=IDBKeyRange.bound(h,d,k,M),De=Ce.openCursor(ce),Te=0;De.onsuccess=function(Fe){var He=Fe.target.result;He?(Te+=1,He.delete(),He.continue()):ae(Te)},De.onerror=ge})},m.prototype.createStore=function(l){var h=l.name,d=l.indexes,k=d===void 0?[]:d,M=l.options;if(this.db){this.db.objectStoreNames.contains(h)&&this.db.deleteObjectStore(h);var G=this.db.createObjectStore(h,M);k.forEach(function(ae){G.createIndex(ae.indexName,ae.keyPath,ae.options)})}},m.prototype.getStore=function(l){var h;return l===void 0&&(l="readonly"),(h=this.db)===null||h===void 0?void 0:h.transaction(this.storeName,l).objectStore(this.storeName)},m}(),ee="event_table_v3",re="eventId",de=function(){function m(l){this.isReady=!1,this.taskQueue=Promise.resolve(),this.db=new Q({name:"Beacon_"+l+"_V3",version:1,stores:[{name:ee,options:{keyPath:re},indexes:[{indexName:re,keyPath:re,options:{unique:!0}}]}]}),this.open()}return m.prototype.getCount=function(){var l=this;return this.readyExec(function(){return l.db.getStoreCount()})},m.prototype.setItem=function(l,h){var d=this;return this.readyExec(function(){return d.db.add({eventId:l,value:h})})},m.prototype.getItem=function(l){return b(this,void 0,void 0,function(){var h=this;return S(this,function(d){return[2,this.readyExec(function(){return h.db.getDataRangeByIndex(re,l,l)})]})})},m.prototype.removeItem=function(l){var h=this;return this.readyExec(function(){return h.db.removeDataByIndex(re,l,l)})},m.prototype.updateItem=function(l,h){var d=this;return this.readyExec(function(){return d.db.put({eventId:l,value:h})})},m.prototype.iterate=function(l){var h=this;return this.readyExec(function(){return h.db.getStoreAllData().then(function(d){d.forEach(function(k){l(k.value)})})})},m.prototype.open=function(){return b(this,void 0,void 0,function(){var l=this;return S(this,function(h){switch(h.label){case 0:return this.taskQueue=this.taskQueue.then(function(){return l.db.openDB()}),[4,this.taskQueue];case 1:return h.sent(),this.isReady=!0,this.db.useStore(ee),[2]}})})},m.prototype.readyExec=function(l){return this.isReady?l():(this.taskQueue=this.taskQueue.then(function(){return l()}),this.taskQueue)},m}(),pe=function(){function m(l){this.keyObject={},this.storage=l}return m.prototype.getCount=function(){return this.storage.getStoreCount()},m.prototype.removeItem=function(l){this.storage.removeItem(l),delete this.keyObject[l]},m.prototype.setItem=function(l,h){var d=JSON.stringify(h);this.storage.setItem(l,d),this.keyObject[l]=h},m.prototype.iterate=function(l){for(var h=Object.keys(this.keyObject),d=0;d<h.length;d++){var k=this.storage.getItem(h[d]);l(JSON.parse(k))}},m}(),W=function(){function m(l,h){var d=this;this.dbEventCount=0,K()>0||!window.indexedDB||/X5Lite/.test(navigator.userAgent)?(this.store=new pe(h),this.dbEventCount=this.store.getCount()):(this.store=new de(l),this.getCount().then(function(k){d.dbEventCount=k}).catch(function(k){}))}return m.prototype.getCount=function(){return b(this,void 0,void 0,function(){return S(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.store.getCount()];case 1:return[2,l.sent()];case 2:return l.sent(),[2,Promise.reject()];case 3:return[2]}})})},m.prototype.insertEvent=function(l,h){return b(this,void 0,void 0,function(){var d,k;return S(this,function(M){switch(M.label){case 0:if(this.dbEventCount>=1e4)return[2,Promise.reject()];d=R(l.mapValue),M.label=1;case 1:return M.trys.push([1,3,,4]),this.dbEventCount++,[4,this.store.setItem(d,l)];case 2:return[2,M.sent()];case 3:return k=M.sent(),h&&h(k,l),this.dbEventCount--,[2,Promise.reject()];case 4:return[2]}})})},m.prototype.getEvents=function(){return b(this,void 0,void 0,function(){var l;return S(this,function(h){switch(h.label){case 0:l=[],h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.store.iterate(function(d){l.push(d)})];case 2:return h.sent(),[2,Promise.all(l)];case 3:return h.sent(),[2,Promise.all(l)];case 4:return[2]}})})},m.prototype.removeEvent=function(l){return b(this,void 0,void 0,function(){var h;return S(this,function(d){switch(d.label){case 0:h=R(l.mapValue),d.label=1;case 1:return d.trys.push([1,3,,4]),this.dbEventCount--,[4,this.store.removeItem(h)];case 2:return[2,d.sent()];case 3:return d.sent(),this.dbEventCount++,[2,Promise.reject()];case 4:return[2]}})})},m}(),J=function(){return(J=Object.assign||function(l){for(var h,d=1,k=arguments.length;d<k;d++)for(var M in h=arguments[d])Object.prototype.hasOwnProperty.call(h,M)&&(l[M]=h[M]);return l}).apply(this,arguments)};function ue(m){try{return decodeURIComponent(m.replace(/\+/g," "))}catch{return null}}function fe(m,l){var h=[null,void 0,"",NaN].includes(m);if(l.isSkipEmpty&&h)return null;var d=!l.isSkipEmpty&&h?"":m;try{return l.encode?encodeURIComponent(d):d}catch{return null}}function ve(m,l){l===void 0&&(l={encode:!0,isSkipEmpty:!1});var h=m.url,d=m.query,k=d===void 0?{}:d,M=m.hash,G=h.split("#"),ae=G[0],ge=G[1],Ce=ge===void 0?"":ge,ce=ae.split("?")[0],De=[],Te=fe(M||Ce,l),Fe=J(J({},function(He){var $e=He.split("#"),Ve=$e[0],We=$e[1],Xe=We===void 0?"":We,Ke=Ve.split("?"),Ge=Ke[0],Je=Ke[1],it=Je===void 0?"":Je,tt=ue(Xe),Ye=Object.create(null);return it.split("&").forEach(function(c){var g=c.split("="),U=g[0],ne=g[1],Y=ne===void 0?"":ne,Be=ue(U),Me=ue(Y);Be===null||Me===null||Be===""&&Me===""||Ye[Be]||(Ye[Be]=Me)}),{url:Ge,query:Ye,hash:tt}}(h).query),k);return Object.keys(Fe).forEach(function(He){var $e=fe(He,l),Ve=fe(Fe[He],l);$e!==null&&Ve!==null&&De.push($e+"="+Ve)}),ce+(De.length?"?"+De.join("&"):"")+(Te?"#"+Te:"")}function oe(m,l){return new Promise(function(h,d){if(l&&document.querySelectorAll("script[data-tag="+l+"]").length)return h();var k=document.createElement("script"),M=J({type:"text/javascript",charset:"utf-8"},m);Object.keys(M).forEach(function(G){return function(ae,ge,Ce){if(ae)return Ce===void 0?ae.getAttribute(ge):ae.setAttribute(ge,Ce)}(k,G,M[G])}),l&&(k.dataset.tag=l),k.onload=function(){return h()},k.onreadystatechange=function(){var G=k.readyState;["complete","loaded"].includes(G)&&(k.onreadystatechange=null,h())},k.onerror=d,document.body.appendChild(k)})}(function(m){m[m.equal=0]="equal",m[m.low=-1]="low",m[m.high=1]="high"})(q||(q={}));var le=function(){return(le=Object.assign||function(l){for(var h,d=1,k=arguments.length;d<k;d++)for(var M in h=arguments[d])Object.prototype.hasOwnProperty.call(h,M)&&(l[M]=h[M]);return l}).apply(this,arguments)};function me(m,l,h,d){return new(h||(h=Promise))(function(k,M){function G(Ce){try{ge(d.next(Ce))}catch(ce){M(ce)}}function ae(Ce){try{ge(d.throw(Ce))}catch(ce){M(ce)}}function ge(Ce){var ce;Ce.done?k(Ce.value):(ce=Ce.value,ce instanceof h?ce:new h(function(De){De(ce)})).then(G,ae)}ge((d=d.apply(m,l||[])).next())})}function xe(m,l){var h,d,k,M,G={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return M={next:ae(0),throw:ae(1),return:ae(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function ae(ge){return function(Ce){return function(ce){if(h)throw new TypeError("Generator is already executing.");for(;G;)try{if(h=1,d&&(k=2&ce[0]?d.return:ce[0]?d.throw||((k=d.return)&&k.call(d),0):d.next)&&!(k=k.call(d,ce[1])).done)return k;switch(d=0,k&&(ce=[2&ce[0],k.value]),ce[0]){case 0:case 1:k=ce;break;case 4:return G.label++,{value:ce[1],done:!1};case 5:G.label++,d=ce[1],ce=[0];continue;case 7:ce=G.ops.pop(),G.trys.pop();continue;default:if(!((k=(k=G.trys).length>0&&k[k.length-1])||ce[0]!==6&&ce[0]!==2)){G=0;continue}if(ce[0]===3&&(!k||ce[1]>k[0]&&ce[1]<k[3])){G.label=ce[1];break}if(ce[0]===6&&G.label<k[1]){G.label=k[1],k=ce;break}if(k&&G.label<k[2]){G.label=k[2],G.ops.push(ce);break}k[2]&&G.ops.pop(),G.trys.pop();continue}ce=l.call(m,G)}catch(De){ce=[6,De],d=0}finally{h=k=0}if(5&ce[0])throw ce[1];return{value:ce[0]?ce[1]:void 0,done:!0}}([ge,Ce])}}}var ye=function(){function m(){this.interceptors=[]}return m.prototype.use=function(l,h){return this.interceptors.push({resolved:l,rejected:h}),this.interceptors.length-1},m.prototype.traverse=function(l,h){h===void 0&&(h=!1);var d=Promise.resolve(l);return(h?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,function(k,M){if(M){var G=M.resolved,ae=M.rejected;d=d.then(G,ae)}return k},""),d},m.prototype.eject=function(l){this.interceptors[l]&&(this.interceptors[l]=null)},m}(),Se={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new ye,response:new ye}},ke=/^([a-z][a-z\d+\-.]*:)?\/\//i,_e=Object.prototype.toString;function Ae(m){return me(this,void 0,void 0,function(){var l;return xe(this,function(h){switch(h.label){case 0:if(window.fetch)return[2];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,oe({src:m})];case 2:return h.sent(),[3,4];case 3:throw l=h.sent(),new Error("\u52A0\u8F7D polyfill "+m+" \u5931\u8D25: "+l.message);case 4:return[2]}})})}function Pe(m){return["Accept","Content-Type"].forEach(function(l){return h=l,void((d=m.headers)&&Object.keys(d).forEach(function(k){k!==h&&k.toUpperCase()===h.toUpperCase()&&(d[h]=d[k],delete d[k])}));var h,d}),function(l){if(_e.call(l)!=="[object Object]")return!1;var h=Object.getPrototypeOf(l);return h===null||h===Object.prototype}(m.body)&&(m.body=JSON.stringify(m.body),m.headers&&(m.headers["Content-Type"]="application/json;charset=utf-8")),m}function Oe(m){return me(this,void 0,void 0,function(){var l,h,d,k,M,G,ae,ge,Ce,ce,De,Te,Fe,He,$e,Ve,We;return xe(this,function(Xe){switch(Xe.label){case 0:return l=Se.baseURL,h=Se.defaults,d=Se.interceptors,[4,Ae(Se.polyfillUrl)];case 1:return Xe.sent(),(k=le(le({},h),m)).headers||(k.headers=function(Ke){Ke===void 0&&(Ke="GET");var Ge=Se.headers[Ke]||{};return le(le({},Se.headers.common),Ge)}(k.method)),Pe(k),[4,d.request.traverse(k,!0)];case 2:if((M=Xe.sent())instanceof Error)throw M;return M.url=function(Ke,Ge){return!Ke||ke.test(Ge)?Ge:Ke.replace(/\/+$/,"")+"/"+Ge.replace(/^\/+/,"")}(l,M.url),G=M.url,ae=M.timeout,ge=M.params,Ce=M.method,ce=["GET","DELETE","OPTIONS","HEAD"].includes(Ce===void 0?"GET":Ce)&&!!ge,De=ce?ve({url:G,query:ge}):G,Te=[],ae&&!M.signal&&($e=new Promise(function(Ke){Fe=setTimeout(function(){Ke(new Error("timeout"))},ae)}),Te.push($e),He=new AbortController,M.signal=He.signal),Te.push(fetch(De,M).catch(function(Ke){return Ke})),[4,Promise.race(Te)];case 3:return Ve=Xe.sent(),Fe&&clearTimeout(Fe),[4,d.response.traverse(Ve)];case 4:if((We=Xe.sent())instanceof Error)throw He==null||He.abort(),We;return[2,We]}})})}var Ie=function(){function m(l){Se.interceptors.request.use(function(h){var d=h.url,k=h.method,M=h.body,G=M;if(l.onReportBeforeSend){var ae=l.onReportBeforeSend({url:d,method:k,data:M?JSON.parse(M):null});G=ae!=null&&ae.data?JSON.stringify(ae.data):null}return k!="GET"&&G?O(O({},h),{body:G}):h})}return m.prototype.get=function(l,h){return b(this,void 0,void 0,function(){var d,k;return S(this,function(M){switch(M.label){case 0:return[4,Oe(O({url:l},h))];case 1:return[4,(d=M.sent()).json()];case 2:return k=M.sent(),[2,Promise.resolve({data:k,status:d.status,statusText:d.statusText,headers:d.headers})]}})})},m.prototype.post=function(l,h,d){return b(this,void 0,void 0,function(){var k,M;return S(this,function(G){switch(G.label){case 0:return[4,Oe(O({url:l,body:h,method:"POST"},d))];case 1:return[4,(k=G.sent()).json()];case 2:return M=G.sent(),[2,Promise.resolve({data:M,status:k.status,statusText:k.statusText,headers:k.headers})]}})})},m}(),he=function(){function m(l){this.appkey=l}return m.prototype.getItem=function(l){try{return window.localStorage.getItem(this.getStoreKey(l))}catch{return""}},m.prototype.removeItem=function(l){try{window.localStorage.removeItem(this.getStoreKey(l))}catch{}},m.prototype.setItem=function(l,h){try{window.localStorage.setItem(this.getStoreKey(l),h)}catch{}},m.prototype.setSessionItem=function(l,h){try{window.sessionStorage.setItem(this.getStoreKey(l),h)}catch{}},m.prototype.getSessionItem=function(l){try{return window.sessionStorage.getItem(this.getStoreKey(l))}catch{return""}},m.prototype.getStoreKey=function(l){return A+this.appkey+"_"+l},m.prototype.createDeviceId=function(){try{var l=window.localStorage.getItem(F);return l||(l=function(h){for(var d="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",k="",M=0;M<h;M++)k+=d.charAt(Math.floor(Math.random()*d.length));return k}(32),window.localStorage.setItem(F,l)),l}catch{return""}},m.prototype.clear=function(){try{for(var l=window.localStorage.length,h=0;h<l;h++){var d=window.localStorage.key(h);(d==null?void 0:d.substr(0,9))==A&&window.localStorage.removeItem(d)}}catch{}},m.prototype.getStoreCount=function(){var l=0;try{l=window.localStorage.length}catch{}return l},m}(),H="logid_start",te="4.5.14-web";return function(m){function l(h){var d=m.call(this,h)||this;d.qimei36="",d.uselessCycleTaskNum=0,d.underWeakNet=!1,d.pauseSearching=!1,d.send=function(ae,ge,Ce){d.storage.setItem(j,Date.now().toString()),d.network.post(d.uploadUrl||d.strategy.getUploadUrl(),ae.data).then(function(ce){var De;((De=ce==null?void 0:ce.data)===null||De===void 0?void 0:De.result)==100?d.delayTime=1e3*ce.data.delayTime:d.delayTime=0,ge&&ge(ae.data),ae.data.events.forEach(function(Te){d.store.removeEvent(Te).then(function(){d.removeSendingId(R(Te.mapValue))})}),d.doCustomCycleTask()}).catch(function(ce){var De=ae.data.events;d.errorReport.reportError(ce.code?ce.code.toString():"600",ce.message),Ce&&Ce(ae.data);var Te=JSON.parse(d.storage.getItem(L));De.forEach(function(Fe){Te&&Te.indexOf(R(Fe))!=-1&&d.store.insertEvent(Fe,function(He,$e){He&&d.errorReport.reportError("604","insertEvent fail!")}),d.removeSendingId(R(Fe))}),d.monitorUploadFailed()})};var k,M,G=K();return d.isUnderIE8=G>0&&G<8,d.isUnderIE8||(d.isUnderIE=G>0,h.needInitQimei&&ie(h.appkey,function(ae){d.qimei36=ae.q36}),d.network=new Ie(h),d.storage=new he(h.appkey),d.initCommonInfo(h),d.store=new W(h.appkey,d.storage),d.errorReport=new Z(d.config,d.commonInfo,"web",d.network),d.strategy=new f(h.needQueryConfig==null||h.needQueryConfig,d.config,d.commonInfo,d.storage,d.network),d.logidStartTime=d.storage.getItem(H),d.logidStartTime||(d.logidStartTime=Date.now().toString(),d.storage.setItem(H,d.logidStartTime)),k=d.logidStartTime,M=Date.now()-Number.parseFloat(k),Math.floor(M/864e5)>=365&&d.storage.clear(),d.initSession(h),d.onDirectUserAction("rqd_js_init",{}),setTimeout(function(){return d.lifeCycle.emit("init")},0),d.initDelayTime=h.delay?h.delay:1e3,d.cycleTask(d.initDelayTime)),d}return function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function k(){this.constructor=h}p(h,d),h.prototype=d===null?Object.create(d):(k.prototype=d.prototype,new k)}(l,m),l.prototype.initSession=function(h){var d=18e5;h.sessionDuration&&h.sessionDuration>3e4&&(d=h.sessionDuration),this.beaconSession=new X(this.storage,d,this)},l.prototype.initCommonInfo=function(h){var d=Number(this.storage.getItem(j));try{var k=JSON.parse(this.storage.getItem(L));(Date.now()-d>3e4||!k)&&this.storage.setItem(L,JSON.stringify([]))}catch{}h.uploadUrl&&(this.uploadUrl=h.uploadUrl+"?appkey="+h.appkey);var M=[window.screen.width,window.screen.height];window.devicePixelRatio&&M.push(window.devicePixelRatio),this.commonInfo={deviceId:this.storage.createDeviceId(),language:navigator&&navigator.language||"zh_CN",query:window.location.search,userAgent:navigator.userAgent,pixel:M.join("*"),channelID:h.channelID?String(h.channelID):"",openid:h.openid?String(h.openid):"",unid:h.unionid?String(h.unionid):"",sdkVersion:te},this.config.appVersion=h.versionCode?String(h.versionCode):"",this.config.strictMode=h.strictMode},l.prototype.cycleTask=function(h){var d=this;this.intervalID=window.setInterval(function(){d.pauseSearching||d.store.getEvents().then(function(k){k.length==0&&(d.pauseSearching=!0);var M=[],G=JSON.parse(d.storage.getItem(L));G||(G=[]),k&&k.forEach(function(ae){var ge=R(ae.mapValue);G.indexOf(ge)==-1&&(M.push(ae),G.push(ge))}),M.length!=0&&(d.storage.setItem(L,JSON.stringify(G)),d._normalLogPipeline(d.assembleData(M)))}).catch(function(k){})},h)},l.prototype.onReport=function(h,d,k){var M=this;if(this.isUnderIE8)this.errorReport.reportError("601","UnderIE8");else{this.pauseSearching=!1;var G=this.generateData(h,d,k);if(k&&this.delayTime==0&&!this.underWeakNet)this._normalLogPipeline(this.assembleData(G));else{var ae=G.shift();ae&&this.store.insertEvent(ae,function(ge){ge&&M.errorReport.reportError("604","insertEvent fail!")}).catch(function(ge){M._normalLogPipeline(M.assembleData(G))})}}},l.prototype.onSendBeacon=function(h,d){if(this.isUnderIE)this.errorReport.reportError("605","UnderIE");else{this.pauseSearching=!1;var k=this.assembleData(this.generateData(h,d,!0));typeof navigator.sendBeacon=="function"&&navigator.sendBeacon(this.uploadUrl||this.strategy.getUploadUrl(),JSON.stringify(k))}},l.prototype.generateData=function(h,d,k){var M=[],G="4.5.14-web_"+(k?"direct_log_id":"normal_log_id"),ae=Number(this.storage.getItem(G));return ae=ae||1,d=O(O({},d),{A99:k?"Y":"N",A100:ae.toString(),A72:te,A88:this.logidStartTime}),ae++,this.storage.setItem(G,ae.toString()),M.push({eventCode:h,eventTime:Date.now().toString(),mapValue:B(d,this.config.strictMode)}),M},l.prototype.assembleData=function(h){var d=this.beaconSession.getSession();return{appVersion:this.config.appVersion?V(this.config.appVersion):"",sdkId:"js",sdkVersion:te,mainAppKey:this.config.appkey,platformId:3,common:B(O(O({},this.additionalParams),{A2:this.commonInfo.deviceId,A8:this.commonInfo.openid,A12:this.commonInfo.language,A17:this.commonInfo.pixel,A23:this.commonInfo.channelID,A50:this.commonInfo.unid,A76:d.sessionId,A101:this.commonInfo.userAgent,A102:window.location.href,A104:document.referrer,A119:this.commonInfo.query,A153:this.qimei36}),!1),events:h}},l.prototype.monitorUploadFailed=function(){this.uselessCycleTaskNum++,this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(6e4),this.underWeakNet=!0)},l.prototype.doCustomCycleTask=function(){this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(this.initDelayTime)),this.uselessCycleTaskNum=0,this.underWeakNet=!1},l}(C)})},"./lib/crypto.js":function(n,s,o){(function(a){var e=o("./node_modules/@babel/runtime/helpers/typeof.js"),_=_||function(p,O){var b={},S=b.lib={},A=function(){},F=S.Base={extend:function(x){A.prototype=this;var C=new A;return x&&C.mixIn(x),C.hasOwnProperty("init")||(C.init=function(){C.$super.init.apply(this,arguments)}),C.init.prototype=C,C.$super=this,C},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var C in x)x.hasOwnProperty(C)&&(this[C]=x[C]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}},j=S.WordArray=F.extend({init:function(x,C){x=this.words=x||[],this.sigBytes=C!=O?C:4*x.length},toString:function(x){return(x||P).stringify(this)},concat:function(x){var C=this.words,Z=x.words,f=this.sigBytes;if(x=x.sigBytes,this.clamp(),f%4)for(var $=0;$<x;$++)C[f+$>>>2]|=(Z[$>>>2]>>>24-8*($%4)&255)<<24-8*((f+$)%4);else if(65535<Z.length)for($=0;$<x;$+=4)C[f+$>>>2]=Z[$>>>2];else C.push.apply(C,Z);return this.sigBytes+=x,this},clamp:function(){var x=this.words,C=this.sigBytes;x[C>>>2]&=4294967295<<32-8*(C%4),x.length=p.ceil(C/4)},clone:function(){var x=F.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var C=[],Z=0;Z<x;Z+=4)C.push(4294967296*p.random()|0);return new j.init(C,x)}}),L=b.enc={},P=L.Hex={stringify:function(x){var C=x.words;x=x.sigBytes;for(var Z=[],f=0;f<x;f++){var $=C[f>>>2]>>>24-8*(f%4)&255;Z.push(($>>>4).toString(16)),Z.push(($&15).toString(16))}return Z.join("")},parse:function(x){for(var C=x.length,Z=[],f=0;f<C;f+=2)Z[f>>>3]|=parseInt(x.substr(f,2),16)<<24-4*(f%8);return new j.init(Z,C/2)}},N=L.Latin1={stringify:function(x){var C=x.words;x=x.sigBytes;for(var Z=[],f=0;f<x;f++)Z.push(String.fromCharCode(C[f>>>2]>>>24-8*(f%4)&255));return Z.join("")},parse:function(x){for(var C=x.length,Z=[],f=0;f<C;f++)Z[f>>>2]|=(x.charCodeAt(f)&255)<<24-8*(f%4);return new j.init(Z,C)}},T=L.Utf8={stringify:function(x){try{return decodeURIComponent(escape(N.stringify(x)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(x){return N.parse(unescape(encodeURIComponent(x)))}},B=S.BufferedBlockAlgorithm=F.extend({reset:function(){this._data=new j.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=T.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var C=this._data,Z=C.words,f=C.sigBytes,$=this.blockSize,X=f/(4*$),X=x?p.ceil(X):p.max((X|0)-this._minBufferSize,0);if(x=X*$,f=p.min(4*x,f),x){for(var K=0;K<x;K+=$)this._doProcessBlock(Z,K);K=Z.splice(0,x),C.sigBytes-=f}return new j.init(K,f)},clone:function(){var x=F.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});S.Hasher=B.extend({cfg:F.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){B.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){return x&&this._append(x),this._doFinalize()},blockSize:16,_createHelper:function(x){return function(C,Z){return new x.init(Z).finalize(C)}},_createHmacHelper:function(x){return function(C,Z){return new V.HMAC.init(x,Z).finalize(C)}}});var V=b.algo={};return b}(Math);(function(){var p=_,A=p.lib,O=A.WordArray,b=A.Hasher,S=[],A=p.algo.SHA1=b.extend({_doReset:function(){this._hash=new O.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(j,L){for(var P=this._hash.words,N=P[0],T=P[1],B=P[2],V=P[3],R=P[4],x=0;80>x;x++){if(16>x)S[x]=j[L+x]|0;else{var C=S[x-3]^S[x-8]^S[x-14]^S[x-16];S[x]=C<<1|C>>>31}C=(N<<5|N>>>27)+R+S[x],C=20>x?C+((T&B|~T&V)+1518500249):40>x?C+((T^B^V)+1859775393):60>x?C+((T&B|T&V|B&V)-1894007588):C+((T^B^V)-899497514),R=V,V=B,B=T<<30|T>>>2,T=N,N=C}P[0]=P[0]+N|0,P[1]=P[1]+T|0,P[2]=P[2]+B|0,P[3]=P[3]+V|0,P[4]=P[4]+R|0},_doFinalize:function(){var j=this._data,L=j.words,P=8*this._nDataBytes,N=8*j.sigBytes;return L[N>>>5]|=128<<24-N%32,L[(N+64>>>9<<4)+14]=Math.floor(P/4294967296),L[(N+64>>>9<<4)+15]=P,j.sigBytes=4*L.length,this._process(),this._hash},clone:function(){var j=b.clone.call(this);return j._hash=this._hash.clone(),j}});p.SHA1=b._createHelper(A),p.HmacSHA1=b._createHmacHelper(A)})(),function(){var p=_,O=p.enc.Utf8;p.algo.HMAC=p.lib.Base.extend({init:function(S,A){S=this._hasher=new S.init,typeof A=="string"&&(A=O.parse(A));var F=S.blockSize,j=4*F;A.sigBytes>j&&(A=S.finalize(A)),A.clamp();for(var L=this._oKey=A.clone(),P=this._iKey=A.clone(),N=L.words,T=P.words,B=0;B<F;B++)N[B]^=1549556828,T[B]^=909522486;L.sigBytes=P.sigBytes=j,this.reset()},reset:function(){var S=this._hasher;S.reset(),S.update(this._iKey)},update:function(S){return this._hasher.update(S),this},finalize:function(S){var A=this._hasher;return S=A.finalize(S),A.reset(),A.finalize(this._oKey.clone().concat(S))}})}(),function(){var p=_,O=p.lib,b=O.WordArray,S=p.enc;S.Base64={stringify:function(F){var j=F.words,L=F.sigBytes,P=this._map;F.clamp();for(var N=[],T=0;T<L;T+=3)for(var B=j[T>>>2]>>>24-T%4*8&255,V=j[T+1>>>2]>>>24-(T+1)%4*8&255,R=j[T+2>>>2]>>>24-(T+2)%4*8&255,x=B<<16|V<<8|R,C=0;C<4&&T+C*.75<L;C++)N.push(P.charAt(x>>>6*(3-C)&63));var Z=P.charAt(64);if(Z)for(;N.length%4;)N.push(Z);return N.join("")},parse:function(F){var j=F.length,L=this._map,P=L.charAt(64);if(P){var N=F.indexOf(P);N!=-1&&(j=N)}for(var T=[],B=0,V=0;V<j;V++)if(V%4){var R=L.indexOf(F.charAt(V-1))<<V%4*2,x=L.indexOf(F.charAt(V))>>>6-V%4*2;T[B>>>2]|=(R|x)<<24-B%4*8,B++}return b.create(T,B)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e(a)==="object"?a.exports=_:window.CryptoJS=_}).call(this,o("./node_modules/webpack/buildin/module.js")(n))},"./lib/json2xml.js":function(n,s,o){var a=o("./node_modules/@babel/runtime/helpers/typeof.js"),e="a-zA-Z_\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FFF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",_="-.0-9\xB7\u0300-\u036F\u203F\u2040",p=new RegExp("^([^"+e+"])|^((x|X)(m|M)(l|L))|([^"+e+_+"])","g"),O=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,b=function(L){var P=[];if(L instanceof Object)for(var N in L)L.hasOwnProperty(N)&&P.push(N);return P},S=function(L,P){var N=function(B,V,R,x,C){var Z=P.indent!==void 0?P.indent:"	",f=P.prettyPrint?`
`+new Array(x).join(Z):"";P.removeIllegalNameCharacters&&(B=B.replace(p,"_"));var $=[f,"<",B,R||""];return V&&V.length>0?($.push(">"),$.push(V),C&&$.push(f),$.push("</"),$.push(B),$.push(">")):$.push("/>"),$.join("")};return function T(B,V,R){var x=a(B);switch((Array.isArray?Array.isArray(B):B instanceof Array)?x="array":B instanceof Date&&(x="date"),x){case"array":var C=[];return B.map(function(X){C.push(T(X,1,R+1))}),P.prettyPrint&&C.push(`
`),C.join("");case"date":return B.toJSON?B.toJSON():B+"";case"object":var Z=[];for(var f in B)if(B.hasOwnProperty(f))if(B[f]instanceof Array)for(var $=0;$<B[f].length;$++)B[f].hasOwnProperty($)&&Z.push(N(f,T(B[f][$],0,R+1),null,R+1,b(B[f][$]).length));else Z.push(N(f,T(B[f],0,R+1),null,R+1));return P.prettyPrint&&Z.length>0&&Z.push(`
`),Z.join("");case"function":return B();default:return P.escape?F(B):""+B}}(L,0,0)},A=function(L){var P=['<?xml version="1.0" encoding="UTF-8"'];return L&&P.push(' standalone="yes"'),P.push("?>"),P.join("")};function F(j){return(""+j).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(O,"")}n.exports=function(j,L){if(L||(L={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  ",escape:!0}),typeof j=="string")try{j=JSON.parse(j.toString())}catch{return!1}var P="",N="";L&&(a(L)=="object"?(L.xmlHeader&&(P=A(!!L.xmlHeader.standalone)),typeof L.docType!="undefined"&&(N="<!DOCTYPE "+L.docType+">")):P=A()),L=L||{};var T=[P,L.prettyPrint&&N?`
`:"",N,S(j,L)];return T.join("").replace(/\n{2,}/g,`
`).replace(/\s+$/g,"")}},"./lib/md5.js":function(module,exports,__webpack_require__){(function(process,global,module){var __WEBPACK_AMD_DEFINE_RESULT__,_typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/typeof.js");(function(){var ERROR="input is invalid type",WINDOW=(typeof window=="undefined"?"undefined":_typeof(window))==="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&(typeof self=="undefined"?"undefined":_typeof(self))==="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&(typeof process=="undefined"?"undefined":_typeof(process))==="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&_typeof(module)==="object"&&module.exports,AMD=__webpack_require__("./node_modules/webpack/buildin/amd-options.js"),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return _typeof(n)==="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});var createOutputMethod=function(s){return function(o,a){return new Md5(!0).update(o,a)[s]()}},createMethod=function(){var s=createOutputMethod("hex");NODE_JS&&(s=nodeWrap(s)),s.getCtx=s.create=function(){return new Md5},s.update=function(e){return s.create().update(e)};for(var o=0;o<OUTPUT_TYPES.length;++o){var a=OUTPUT_TYPES[o];s[a]=createOutputMethod(a)}return s},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function n(s){if(typeof s=="string")return crypto.createHash("md5").update(s,"utf8").digest("hex");if(s==null)throw ERROR;return s.constructor===ArrayBuffer&&(s=new Uint8Array(s)),Array.isArray(s)||ArrayBuffer.isView(s)||s.constructor===Buffer?crypto.createHash("md5").update(new Buffer(s)).digest("hex"):method(s)};return nodeMethod};function Md5(n){if(n)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var s=new ArrayBuffer(68);this.buffer8=new Uint8Array(s),this.blocks=new Uint32Array(s)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(n,s){if(!this.finalized){for(var o,a=0,e,_=n.length,p=this.blocks,O=this.buffer8;a<_;){if(this.hashed&&(this.hashed=!1,p[0]=p[16],p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0),ARRAY_BUFFER)for(e=this.start;a<_&&e<64;++a)o=n.charCodeAt(a),s||o<128?O[e++]=o:o<2048?(O[e++]=192|o>>6,O[e++]=128|o&63):o<55296||o>=57344?(O[e++]=224|o>>12,O[e++]=128|o>>6&63,O[e++]=128|o&63):(o=65536+((o&1023)<<10|n.charCodeAt(++a)&1023),O[e++]=240|o>>18,O[e++]=128|o>>12&63,O[e++]=128|o>>6&63,O[e++]=128|o&63);else for(e=this.start;a<_&&e<64;++a)o=n.charCodeAt(a),s||o<128?p[e>>2]|=o<<SHIFT[e++&3]:o<2048?(p[e>>2]|=(192|o>>6)<<SHIFT[e++&3],p[e>>2]|=(128|o&63)<<SHIFT[e++&3]):o<55296||o>=57344?(p[e>>2]|=(224|o>>12)<<SHIFT[e++&3],p[e>>2]|=(128|o>>6&63)<<SHIFT[e++&3],p[e>>2]|=(128|o&63)<<SHIFT[e++&3]):(o=65536+((o&1023)<<10|n.charCodeAt(++a)&1023),p[e>>2]|=(240|o>>18)<<SHIFT[e++&3],p[e>>2]|=(128|o>>12&63)<<SHIFT[e++&3],p[e>>2]|=(128|o>>6&63)<<SHIFT[e++&3],p[e>>2]|=(128|o&63)<<SHIFT[e++&3]);this.lastByteIndex=e,this.bytes+=e-this.start,e>=64?(this.start=e-64,this.hash(),this.hashed=!0):this.start=e}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,s=this.lastByteIndex;n[s>>2]|=EXTRA[s&3],s>=56&&(this.hashed||this.hash(),n[0]=n[16],n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.bytes<<3,n[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var n,s,o,a,e,_,p=this.blocks;this.first?(n=p[0]-680876937,n=(n<<7|n>>>25)-271733879<<0,a=(-1732584194^n&2004318071)+p[1]-117830708,a=(a<<12|a>>>20)+n<<0,o=(-271733879^a&(n^-271733879))+p[2]-1126478375,o=(o<<17|o>>>15)+a<<0,s=(n^o&(a^n))+p[3]-1316259209,s=(s<<22|s>>>10)+o<<0):(n=this.h0,s=this.h1,o=this.h2,a=this.h3,n+=(a^s&(o^a))+p[0]-680876936,n=(n<<7|n>>>25)+s<<0,a+=(o^n&(s^o))+p[1]-389564586,a=(a<<12|a>>>20)+n<<0,o+=(s^a&(n^s))+p[2]+606105819,o=(o<<17|o>>>15)+a<<0,s+=(n^o&(a^n))+p[3]-1044525330,s=(s<<22|s>>>10)+o<<0),n+=(a^s&(o^a))+p[4]-176418897,n=(n<<7|n>>>25)+s<<0,a+=(o^n&(s^o))+p[5]+1200080426,a=(a<<12|a>>>20)+n<<0,o+=(s^a&(n^s))+p[6]-1473231341,o=(o<<17|o>>>15)+a<<0,s+=(n^o&(a^n))+p[7]-45705983,s=(s<<22|s>>>10)+o<<0,n+=(a^s&(o^a))+p[8]+1770035416,n=(n<<7|n>>>25)+s<<0,a+=(o^n&(s^o))+p[9]-1958414417,a=(a<<12|a>>>20)+n<<0,o+=(s^a&(n^s))+p[10]-42063,o=(o<<17|o>>>15)+a<<0,s+=(n^o&(a^n))+p[11]-1990404162,s=(s<<22|s>>>10)+o<<0,n+=(a^s&(o^a))+p[12]+1804603682,n=(n<<7|n>>>25)+s<<0,a+=(o^n&(s^o))+p[13]-40341101,a=(a<<12|a>>>20)+n<<0,o+=(s^a&(n^s))+p[14]-1502002290,o=(o<<17|o>>>15)+a<<0,s+=(n^o&(a^n))+p[15]+1236535329,s=(s<<22|s>>>10)+o<<0,n+=(o^a&(s^o))+p[1]-165796510,n=(n<<5|n>>>27)+s<<0,a+=(s^o&(n^s))+p[6]-1069501632,a=(a<<9|a>>>23)+n<<0,o+=(n^s&(a^n))+p[11]+643717713,o=(o<<14|o>>>18)+a<<0,s+=(a^n&(o^a))+p[0]-373897302,s=(s<<20|s>>>12)+o<<0,n+=(o^a&(s^o))+p[5]-701558691,n=(n<<5|n>>>27)+s<<0,a+=(s^o&(n^s))+p[10]+38016083,a=(a<<9|a>>>23)+n<<0,o+=(n^s&(a^n))+p[15]-660478335,o=(o<<14|o>>>18)+a<<0,s+=(a^n&(o^a))+p[4]-405537848,s=(s<<20|s>>>12)+o<<0,n+=(o^a&(s^o))+p[9]+568446438,n=(n<<5|n>>>27)+s<<0,a+=(s^o&(n^s))+p[14]-1019803690,a=(a<<9|a>>>23)+n<<0,o+=(n^s&(a^n))+p[3]-187363961,o=(o<<14|o>>>18)+a<<0,s+=(a^n&(o^a))+p[8]+1163531501,s=(s<<20|s>>>12)+o<<0,n+=(o^a&(s^o))+p[13]-1444681467,n=(n<<5|n>>>27)+s<<0,a+=(s^o&(n^s))+p[2]-51403784,a=(a<<9|a>>>23)+n<<0,o+=(n^s&(a^n))+p[7]+1735328473,o=(o<<14|o>>>18)+a<<0,s+=(a^n&(o^a))+p[12]-1926607734,s=(s<<20|s>>>12)+o<<0,e=s^o,n+=(e^a)+p[5]-378558,n=(n<<4|n>>>28)+s<<0,a+=(e^n)+p[8]-2022574463,a=(a<<11|a>>>21)+n<<0,_=a^n,o+=(_^s)+p[11]+1839030562,o=(o<<16|o>>>16)+a<<0,s+=(_^o)+p[14]-35309556,s=(s<<23|s>>>9)+o<<0,e=s^o,n+=(e^a)+p[1]-1530992060,n=(n<<4|n>>>28)+s<<0,a+=(e^n)+p[4]+1272893353,a=(a<<11|a>>>21)+n<<0,_=a^n,o+=(_^s)+p[7]-155497632,o=(o<<16|o>>>16)+a<<0,s+=(_^o)+p[10]-1094730640,s=(s<<23|s>>>9)+o<<0,e=s^o,n+=(e^a)+p[13]+681279174,n=(n<<4|n>>>28)+s<<0,a+=(e^n)+p[0]-358537222,a=(a<<11|a>>>21)+n<<0,_=a^n,o+=(_^s)+p[3]-722521979,o=(o<<16|o>>>16)+a<<0,s+=(_^o)+p[6]+76029189,s=(s<<23|s>>>9)+o<<0,e=s^o,n+=(e^a)+p[9]-640364487,n=(n<<4|n>>>28)+s<<0,a+=(e^n)+p[12]-421815835,a=(a<<11|a>>>21)+n<<0,_=a^n,o+=(_^s)+p[15]+530742520,o=(o<<16|o>>>16)+a<<0,s+=(_^o)+p[2]-995338651,s=(s<<23|s>>>9)+o<<0,n+=(o^(s|~a))+p[0]-198630844,n=(n<<6|n>>>26)+s<<0,a+=(s^(n|~o))+p[7]+1126891415,a=(a<<10|a>>>22)+n<<0,o+=(n^(a|~s))+p[14]-1416354905,o=(o<<15|o>>>17)+a<<0,s+=(a^(o|~n))+p[5]-57434055,s=(s<<21|s>>>11)+o<<0,n+=(o^(s|~a))+p[12]+1700485571,n=(n<<6|n>>>26)+s<<0,a+=(s^(n|~o))+p[3]-1894986606,a=(a<<10|a>>>22)+n<<0,o+=(n^(a|~s))+p[10]-1051523,o=(o<<15|o>>>17)+a<<0,s+=(a^(o|~n))+p[1]-2054922799,s=(s<<21|s>>>11)+o<<0,n+=(o^(s|~a))+p[8]+1873313359,n=(n<<6|n>>>26)+s<<0,a+=(s^(n|~o))+p[15]-30611744,a=(a<<10|a>>>22)+n<<0,o+=(n^(a|~s))+p[6]-1560198380,o=(o<<15|o>>>17)+a<<0,s+=(a^(o|~n))+p[13]+1309151649,s=(s<<21|s>>>11)+o<<0,n+=(o^(s|~a))+p[4]-145523070,n=(n<<6|n>>>26)+s<<0,a+=(s^(n|~o))+p[11]-1120210379,a=(a<<10|a>>>22)+n<<0,o+=(n^(a|~s))+p[2]+718787259,o=(o<<15|o>>>17)+a<<0,s+=(a^(o|~n))+p[9]-343485551,s=(s<<21|s>>>11)+o<<0,this.first?(this.h0=n+1732584193<<0,this.h1=s-271733879<<0,this.h2=o-1732584194<<0,this.h3=a+271733878<<0,this.first=!1):(this.h0=this.h0+n<<0,this.h1=this.h1+s<<0,this.h2=this.h2+o<<0,this.h3=this.h3+a<<0)},Md5.prototype.hex=function(){this.finalize();var n=this.h0,s=this.h1,o=this.h2,a=this.h3;return HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(n){if(n==="hex")return this.hex();this.finalize();var s=this.h0,o=this.h1,a=this.h2,e=this.h3,_=[s&255,s>>8&255,s>>16&255,s>>24&255,o&255,o>>8&255,o>>16&255,o>>24&255,a&255,a>>8&255,a>>16&255,a>>24&255,e&255,e>>8&255,e>>16&255,e>>24&255];return _},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(16),s=new Uint32Array(n);return s[0]=this.h0,s[1]=this.h1,s[2]=this.h2,s[3]=this.h3,n},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var n,s,o,a="",e=this.array(),_=0;_<15;)n=e[_++],s=e[_++],o=e[_++],a+=BASE64_ENCODE_CHAR[n>>>2]+BASE64_ENCODE_CHAR[(n<<4|s>>>4)&63]+BASE64_ENCODE_CHAR[(s<<2|o>>>6)&63]+BASE64_ENCODE_CHAR[o&63];return n=e[_],a+=BASE64_ENCODE_CHAR[n>>>2]+BASE64_ENCODE_CHAR[n<<4&63]+"==",a};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==void 0&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__("./node_modules/process/browser.js"),__webpack_require__("./node_modules/webpack/buildin/global.js"),__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./lib/request.js":function(n,s,o){var a=o("./node_modules/@babel/runtime/helpers/typeof.js"),e=function(A){switch(a(A)){case"string":return A;case"boolean":return A?"true":"false";case"number":return isFinite(A)?A:"";default:return""}},_=function(A,F,j,L){return F=F||"&",j=j||"=",A===null&&(A=void 0),a(A)==="object"?Object.keys(A).map(function(P){var N=encodeURIComponent(e(P))+j;return Array.isArray(A[P])?A[P].map(function(T){return N+encodeURIComponent(e(T))}).join(F):N+encodeURIComponent(e(A[P]))}).filter(Boolean).join(F):L?encodeURIComponent(e(L))+j+encodeURIComponent(e(A)):""},p=function(A,F,j){var L={};return F.getAllResponseHeaders().trim().split(`
`).forEach(function(P){if(P){var N=P.indexOf(":"),T=P.substr(0,N).trim().toLowerCase(),B=P.substr(N+1).trim();L[T]=B}}),{error:A,statusCode:F.status,statusMessage:F.statusText,headers:L,body:j}},O=function(A,F){return!F&&F==="text"?A.responseText:A.response},b=function(A,F){var j=(A.method||"GET").toUpperCase(),L=A.url;if(A.qs){var P=_(A.qs);P&&(L+=(L.indexOf("?")===-1?"?":"&")+P)}var N=new XMLHttpRequest;if(N.open(j,L,!0),N.responseType=A.dataType||"text",A.xhrFields)for(var T in A.xhrFields)N[T]=A.xhrFields[T];var B=A.headers;if(B)for(var V in B)B.hasOwnProperty(V)&&V.toLowerCase()!=="content-length"&&V.toLowerCase()!=="user-agent"&&V.toLowerCase()!=="origin"&&V.toLowerCase()!=="host"&&N.setRequestHeader(V,B[V]);return A.onProgress&&N.upload&&(N.upload.onprogress=A.onProgress),A.onDownloadProgress&&(N.onprogress=A.onDownloadProgress),A.timeout&&(N.timeout=A.timeout),N.ontimeout=function(R){var x=new Error("timeout");F(p(x,N))},N.onload=function(){F(p(null,N,O(N,A.dataType)))},N.onerror=function(R){var x=O(N,A.dataType);if(x)F(p(null,N,x));else{var C=N.statusText;!C&&N.status===0&&(C=new Error("CORS blocked or network error")),F(p(C,N,x))}},N.send(A.body||""),N};n.exports=b},"./lib/xml2json.js":function(n,s,o){var a=o("./node_modules/@xmldom/xmldom/lib/index.js").DOMParser,e=function(){this.version="1.3.5";var p={mergeCDATA:!0,normalize:!0,stripElemPrefix:!0},O=new RegExp(/(?!xmlns)^.*:/);return this.grokType=function(b){return/^\s*$/.test(b)?null:/^(?:true|false)$/i.test(b)?b.toLowerCase()==="true":isFinite(b)?parseFloat(b):b},this.parseString=function(b,S){if(b){var A=this.stringToXML(b);return A.getElementsByTagName("parsererror").length?null:this.parseXML(A,S)}else return null},this.parseXML=function(b,S){for(var A in S)p[A]=S[A];var F={},j=0,L="",P=b.childNodes.length;if(P)for(var N,T,B,V=0;V<b.childNodes.length;V++)N=b.childNodes.item(V),N.nodeType===4?p.mergeCDATA&&(L+=N.nodeValue):N.nodeType===3?L+=N.nodeValue:N.nodeType===1&&(j===0&&(F={}),p.stripElemPrefix?T=N.nodeName.replace(O,""):T=N.nodeName,B=e.parseXML(N),F.hasOwnProperty(T)?(F[T].constructor!==Array&&(F[T]=[F[T]]),F[T].push(B)):(F[T]=B,j++));return Object.keys(F).length||(F=L||""),F},this.xmlToString=function(b){try{var S=b.xml?b.xml:new XMLSerializer().serializeToString(b);return S}catch{return null}},this.stringToXML=function(b){try{var S=null;if(window.DOMParser){var A=new a;return S=A.parseFromString(b,"text/xml"),S}else return S=new ActiveXObject("Microsoft.XMLDOM"),S.async=!1,S.loadXML(b),S}catch{return null}},this}.call({}),_=function(O){return e.parseString(O)};n.exports=_},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(n,s){function o(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}n.exports=o,n.exports.__esModule=!0,n.exports.default=n.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(n,s){function o(e,_){for(var p=0;p<_.length;p++){var O=_[p];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(e,O.key,O)}}function a(e,_,p){return _&&o(e.prototype,_),p&&o(e,p),Object.defineProperty(e,"prototype",{writable:!1}),e}n.exports=a,n.exports.__esModule=!0,n.exports.default=n.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(n,s){function o(a){return n.exports=o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n.exports.__esModule=!0,n.exports.default=n.exports,o(a)}n.exports=o,n.exports.__esModule=!0,n.exports.default=n.exports},"./node_modules/@xmldom/xmldom/lib/conventions.js":function(n,s,o){function a(b,S,A){if(A===void 0&&(A=Array.prototype),b&&typeof A.find=="function")return A.find.call(b,S);for(var F=0;F<b.length;F++)if(Object.prototype.hasOwnProperty.call(b,F)){var j=b[F];if(S.call(void 0,j,F,b))return j}}function e(b,S){return S===void 0&&(S=Object),S&&typeof S.freeze=="function"?S.freeze(b):b}function _(b,S){if(b===null||typeof b!="object")throw new TypeError("target is not an object");for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(b[A]=S[A]);return b}var p=e({HTML:"text/html",isHTML:function(b){return b===p.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),O=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(b){return b===O.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});s.assign=_,s.find=a,s.freeze=e,s.MIME_TYPE=p,s.NAMESPACE=O},"./node_modules/@xmldom/xmldom/lib/dom-parser.js":function(n,s,o){var a=o("./node_modules/@xmldom/xmldom/lib/conventions.js"),e=o("./node_modules/@xmldom/xmldom/lib/dom.js"),_=o("./node_modules/@xmldom/xmldom/lib/entities.js"),p=o("./node_modules/@xmldom/xmldom/lib/sax.js"),O=e.DOMImplementation,b=a.NAMESPACE,S=p.ParseError,A=p.XMLReader;function F(R){return R.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function j(R){this.options=R||{locator:{}}}j.prototype.parseFromString=function(R,x){var C=this.options,Z=new A,f=C.domBuilder||new P,$=C.errorHandler,X=C.locator,K=C.xmlns||{},ie=/\/x?html?$/.test(x),I=ie?_.HTML_ENTITIES:_.XML_ENTITIES;X&&f.setDocumentLocator(X),Z.errorHandler=L($,f,X),Z.domBuilder=C.domBuilder||f,ie&&(K[""]=b.HTML),K.xml=K.xml||b.XML;var q=C.normalizeLineEndings||F;return R&&typeof R=="string"?Z.parse(q(R),K,I):Z.errorHandler.error("invalid doc source"),f.doc};function L(R,x,C){if(!R){if(x instanceof P)return x;R=x}var Z={},f=R instanceof Function;C=C||{};function $(X){var K=R[X];!K&&f&&(K=R.length==2?function(ie){R(X,ie)}:R),Z[X]=K&&function(ie){K("[xmldom "+X+"]	"+ie+T(C))}||function(){}}return $("warning"),$("error"),$("fatalError"),Z}function P(){this.cdata=!1}function N(R,x){x.lineNumber=R.lineNumber,x.columnNumber=R.columnNumber}P.prototype={startDocument:function(){this.doc=new O().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(R,x,C,Z){var f=this.doc,$=f.createElementNS(R,C||x),X=Z.length;V(this,$),this.currentElement=$,this.locator&&N(this.locator,$);for(var K=0;K<X;K++){var R=Z.getURI(K),ie=Z.getValue(K),C=Z.getQName(K),I=f.createAttributeNS(R,C);this.locator&&N(Z.getLocator(K),I),I.value=I.nodeValue=ie,$.setAttributeNode(I)}},endElement:function(R,x,C){var Z=this.currentElement;Z.tagName,this.currentElement=Z.parentNode},startPrefixMapping:function(R,x){},endPrefixMapping:function(R){},processingInstruction:function(R,x){var C=this.doc.createProcessingInstruction(R,x);this.locator&&N(this.locator,C),V(this,C)},ignorableWhitespace:function(R,x,C){},characters:function(R,x,C){if(R=B.apply(this,arguments),R){if(this.cdata)var Z=this.doc.createCDATASection(R);else var Z=this.doc.createTextNode(R);this.currentElement?this.currentElement.appendChild(Z):/^\s*$/.test(R)&&this.doc.appendChild(Z),this.locator&&N(this.locator,Z)}},skippedEntity:function(R){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(R){(this.locator=R)&&(R.lineNumber=0)},comment:function(R,x,C){R=B.apply(this,arguments);var Z=this.doc.createComment(R);this.locator&&N(this.locator,Z),V(this,Z)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(R,x,C){var Z=this.doc.implementation;if(Z&&Z.createDocumentType){var f=Z.createDocumentType(R,x,C);this.locator&&N(this.locator,f),V(this,f),this.doc.doctype=f}},warning:function(R){console.warn("[xmldom warning]	"+R,T(this.locator))},error:function(R){console.error("[xmldom error]	"+R,T(this.locator))},fatalError:function(R){throw new S(R,this.locator)}};function T(R){if(R)return`
@`+(R.systemId||"")+"#[line:"+R.lineNumber+",col:"+R.columnNumber+"]"}function B(R,x,C){return typeof R=="string"?R.substr(x,C):R.length>=x+C||x?new java.lang.String(R,x,C)+"":R}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(R){P.prototype[R]=function(){return null}});function V(R,x){R.currentElement?R.currentElement.appendChild(x):R.doc.appendChild(x)}s.__DOMHandler=P,s.normalizeLineEndings=F,s.DOMParser=j},"./node_modules/@xmldom/xmldom/lib/dom.js":function(n,s,o){var a=o("./node_modules/@xmldom/xmldom/lib/conventions.js"),e=a.find,_=a.NAMESPACE;function p(c){return c!==""}function O(c){return c?c.split(/[\t\n\f\r ]+/).filter(p):[]}function b(c,g){return c.hasOwnProperty(g)||(c[g]=!0),c}function S(c){if(!c)return[];var g=O(c);return Object.keys(g.reduce(b,{}))}function A(c){return function(g){return c&&c.indexOf(g)!==-1}}function F(c,g){for(var U in c)Object.prototype.hasOwnProperty.call(c,U)&&(g[U]=c[U])}function j(c,g){var U=c.prototype;if(!(U instanceof g)){let ne=function(){};ne.prototype=g.prototype,ne=new ne,F(U,ne),c.prototype=U=ne}U.constructor!=c&&(typeof c!="function"&&console.error("unknown Class:"+c),U.constructor=c)}var L={},P=L.ELEMENT_NODE=1,N=L.ATTRIBUTE_NODE=2,T=L.TEXT_NODE=3,B=L.CDATA_SECTION_NODE=4,V=L.ENTITY_REFERENCE_NODE=5,R=L.ENTITY_NODE=6,x=L.PROCESSING_INSTRUCTION_NODE=7,C=L.COMMENT_NODE=8,Z=L.DOCUMENT_NODE=9,f=L.DOCUMENT_TYPE_NODE=10,$=L.DOCUMENT_FRAGMENT_NODE=11,X=L.NOTATION_NODE=12,K={},ie={};K.INDEX_SIZE_ERR=(ie[1]="Index size error",1),K.DOMSTRING_SIZE_ERR=(ie[2]="DOMString size error",2);var I=K.HIERARCHY_REQUEST_ERR=(ie[3]="Hierarchy request error",3);K.WRONG_DOCUMENT_ERR=(ie[4]="Wrong document",4),K.INVALID_CHARACTER_ERR=(ie[5]="Invalid character",5),K.NO_DATA_ALLOWED_ERR=(ie[6]="No data allowed",6),K.NO_MODIFICATION_ALLOWED_ERR=(ie[7]="No modification allowed",7);var q=K.NOT_FOUND_ERR=(ie[8]="Not found",8);K.NOT_SUPPORTED_ERR=(ie[9]="Not supported",9);var Q=K.INUSE_ATTRIBUTE_ERR=(ie[10]="Attribute in use",10);K.INVALID_STATE_ERR=(ie[11]="Invalid state",11),K.SYNTAX_ERR=(ie[12]="Syntax error",12),K.INVALID_MODIFICATION_ERR=(ie[13]="Invalid modification",13),K.NAMESPACE_ERR=(ie[14]="Invalid namespace",14),K.INVALID_ACCESS_ERR=(ie[15]="Invalid access",15);function ee(c,g){if(g instanceof Error)var U=g;else U=this,Error.call(this,ie[c]),this.message=ie[c],Error.captureStackTrace&&Error.captureStackTrace(this,ee);return U.code=c,g&&(this.message=this.message+": "+g),U}ee.prototype=Error.prototype,F(K,ee);function re(){}re.prototype={length:0,item:function(c){return this[c]||null},toString:function(c,g){for(var U=[],ne=0;ne<this.length;ne++)Je(this[ne],U,c,g);return U.join("")},filter:function(c){return Array.prototype.filter.call(this,c)},indexOf:function(c){return Array.prototype.indexOf.call(this,c)}};function de(c,g){this._node=c,this._refresh=g,pe(this)}function pe(c){var g=c._node._inc||c._node.ownerDocument._inc;if(c._inc!=g){var U=c._refresh(c._node);Ye(c,"length",U.length),F(U,c),c._inc=g}}de.prototype.item=function(c){return pe(this),this[c]},j(de,re);function W(){}function J(c,g){for(var U=c.length;U--;)if(c[U]===g)return U}function ue(c,g,U,ne){if(ne?g[J(g,ne)]=U:g[g.length++]=U,c){U.ownerElement=c;var Y=c.ownerDocument;Y&&(ne&&Se(Y,c,ne),ye(Y,c,U))}}function fe(c,g,U){var ne=J(g,U);if(ne>=0){for(var Y=g.length-1;ne<Y;)g[ne]=g[++ne];if(g.length=Y,c){var Be=c.ownerDocument;Be&&(Se(Be,c,U),U.ownerElement=null)}}else throw new ee(q,new Error(c.tagName+"@"+U))}W.prototype={length:0,item:re.prototype.item,getNamedItem:function(c){for(var g=this.length;g--;){var U=this[g];if(U.nodeName==c)return U}},setNamedItem:function(c){var g=c.ownerElement;if(g&&g!=this._ownerElement)throw new ee(Q);var U=this.getNamedItem(c.nodeName);return ue(this._ownerElement,this,c,U),U},setNamedItemNS:function(c){var g=c.ownerElement,U;if(g&&g!=this._ownerElement)throw new ee(Q);return U=this.getNamedItemNS(c.namespaceURI,c.localName),ue(this._ownerElement,this,c,U),U},removeNamedItem:function(c){var g=this.getNamedItem(c);return fe(this._ownerElement,this,g),g},removeNamedItemNS:function(c,g){var U=this.getNamedItemNS(c,g);return fe(this._ownerElement,this,U),U},getNamedItemNS:function(c,g){for(var U=this.length;U--;){var ne=this[U];if(ne.localName==g&&ne.namespaceURI==c)return ne}return null}};function ve(){}ve.prototype={hasFeature:function(c,g){return!0},createDocument:function(c,g,U){var ne=new xe;if(ne.implementation=this,ne.childNodes=new re,ne.doctype=U||null,U&&ne.appendChild(U),g){var Y=ne.createElementNS(c,g);ne.appendChild(Y)}return ne},createDocumentType:function(c,g,U){var ne=new De;return ne.name=c,ne.nodeName=c,ne.publicId=g||"",ne.systemId=U||"",ne}};function oe(){}oe.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(c,g){return d(this,c,g)},replaceChild:function(c,g){d(this,c,g,h),g&&this.removeChild(g)},removeChild:function(c){return _e(this,c)},appendChild:function(c){return this.insertBefore(c,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(c){return tt(this.ownerDocument||this,this,c)},normalize:function(){for(var c=this.firstChild;c;){var g=c.nextSibling;g&&g.nodeType==T&&c.nodeType==T?(this.removeChild(g),c.appendData(g.data)):(c.normalize(),c=g)}},isSupported:function(c,g){return this.ownerDocument.implementation.hasFeature(c,g)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(c){for(var g=this;g;){var U=g._nsMap;if(U){for(var ne in U)if(Object.prototype.hasOwnProperty.call(U,ne)&&U[ne]===c)return ne}g=g.nodeType==N?g.ownerDocument:g.parentNode}return null},lookupNamespaceURI:function(c){for(var g=this;g;){var U=g._nsMap;if(U&&Object.prototype.hasOwnProperty.call(U,c))return U[c];g=g.nodeType==N?g.ownerDocument:g.parentNode}return null},isDefaultNamespace:function(c){var g=this.lookupPrefix(c);return g==null}};function le(c){return c=="<"&&"&lt;"||c==">"&&"&gt;"||c=="&"&&"&amp;"||c=='"'&&"&quot;"||"&#"+c.charCodeAt()+";"}F(L,oe),F(L,oe.prototype);function me(c,g){if(g(c))return!0;if(c=c.firstChild)do if(me(c,g))return!0;while(c=c.nextSibling)}function xe(){this.ownerDocument=this}function ye(c,g,U){c&&c._inc++;var ne=U.namespaceURI;ne===_.XMLNS&&(g._nsMap[U.prefix?U.localName:""]=U.value)}function Se(c,g,U,ne){c&&c._inc++;var Y=U.namespaceURI;Y===_.XMLNS&&delete g._nsMap[U.prefix?U.localName:""]}function ke(c,g,U){if(c&&c._inc){c._inc++;var ne=g.childNodes;if(U)ne[ne.length++]=U;else{for(var Y=g.firstChild,Be=0;Y;)ne[Be++]=Y,Y=Y.nextSibling;ne.length=Be,delete ne[ne.length]}}}function _e(c,g){var U=g.previousSibling,ne=g.nextSibling;return U?U.nextSibling=ne:c.firstChild=ne,ne?ne.previousSibling=U:c.lastChild=U,g.parentNode=null,g.previousSibling=null,g.nextSibling=null,ke(c.ownerDocument,c),g}function Ae(c){return c&&(c.nodeType===oe.DOCUMENT_NODE||c.nodeType===oe.DOCUMENT_FRAGMENT_NODE||c.nodeType===oe.ELEMENT_NODE)}function Pe(c){return c&&(Ie(c)||he(c)||Oe(c)||c.nodeType===oe.DOCUMENT_FRAGMENT_NODE||c.nodeType===oe.COMMENT_NODE||c.nodeType===oe.PROCESSING_INSTRUCTION_NODE)}function Oe(c){return c&&c.nodeType===oe.DOCUMENT_TYPE_NODE}function Ie(c){return c&&c.nodeType===oe.ELEMENT_NODE}function he(c){return c&&c.nodeType===oe.TEXT_NODE}function H(c,g){var U=c.childNodes||[];if(e(U,Ie)||Oe(g))return!1;var ne=e(U,Oe);return!(g&&ne&&U.indexOf(ne)>U.indexOf(g))}function te(c,g){var U=c.childNodes||[];function ne(Be){return Ie(Be)&&Be!==g}if(e(U,ne))return!1;var Y=e(U,Oe);return!(g&&Y&&U.indexOf(Y)>U.indexOf(g))}function m(c,g,U){if(!Ae(c))throw new ee(I,"Unexpected parent node type "+c.nodeType);if(U&&U.parentNode!==c)throw new ee(q,"child not in parent");if(!Pe(g)||Oe(g)&&c.nodeType!==oe.DOCUMENT_NODE)throw new ee(I,"Unexpected node type "+g.nodeType+" for parent node type "+c.nodeType)}function l(c,g,U){var ne=c.childNodes||[],Y=g.childNodes||[];if(g.nodeType===oe.DOCUMENT_FRAGMENT_NODE){var Be=Y.filter(Ie);if(Be.length>1||e(Y,he))throw new ee(I,"More than one element or text in fragment");if(Be.length===1&&!H(c,U))throw new ee(I,"Element in fragment can not be inserted before doctype")}if(Ie(g)&&!H(c,U))throw new ee(I,"Only one element can be added and only after doctype");if(Oe(g)){if(e(ne,Oe))throw new ee(I,"Only one doctype is allowed");var Me=e(ne,Ie);if(U&&ne.indexOf(Me)<ne.indexOf(U))throw new ee(I,"Doctype can only be inserted before an element");if(!U&&Me)throw new ee(I,"Doctype can not be appended since element is present")}}function h(c,g,U){var ne=c.childNodes||[],Y=g.childNodes||[];if(g.nodeType===oe.DOCUMENT_FRAGMENT_NODE){var Be=Y.filter(Ie);if(Be.length>1||e(Y,he))throw new ee(I,"More than one element or text in fragment");if(Be.length===1&&!te(c,U))throw new ee(I,"Element in fragment can not be inserted before doctype")}if(Ie(g)&&!te(c,U))throw new ee(I,"Only one element can be added and only after doctype");if(Oe(g)){if(e(ne,function(r){return Oe(r)&&r!==U}))throw new ee(I,"Only one doctype is allowed");var Me=e(ne,Ie);if(U&&ne.indexOf(Me)<ne.indexOf(U))throw new ee(I,"Doctype can only be inserted before an element")}}function d(c,g,U,ne){m(c,g,U),c.nodeType===oe.DOCUMENT_NODE&&(ne||l)(c,g,U);var Y=g.parentNode;if(Y&&Y.removeChild(g),g.nodeType===$){var Be=g.firstChild;if(Be==null)return g;var Me=g.lastChild}else Be=Me=g;var qe=U?U.previousSibling:c.lastChild;Be.previousSibling=qe,Me.nextSibling=U,qe?qe.nextSibling=Be:c.firstChild=Be,U==null?c.lastChild=Me:U.previousSibling=Me;do Be.parentNode=c;while(Be!==Me&&(Be=Be.nextSibling));return ke(c.ownerDocument||c,c),g.nodeType==$&&(g.firstChild=g.lastChild=null),g}function k(c,g){return g.parentNode&&g.parentNode.removeChild(g),g.parentNode=c,g.previousSibling=c.lastChild,g.nextSibling=null,g.previousSibling?g.previousSibling.nextSibling=g:c.firstChild=g,c.lastChild=g,ke(c.ownerDocument,c,g),g}xe.prototype={nodeName:"#document",nodeType:Z,doctype:null,documentElement:null,_inc:1,insertBefore:function(c,g){if(c.nodeType==$){for(var U=c.firstChild;U;){var ne=U.nextSibling;this.insertBefore(U,g),U=ne}return c}return d(this,c,g),c.ownerDocument=this,this.documentElement===null&&c.nodeType===P&&(this.documentElement=c),c},removeChild:function(c){return this.documentElement==c&&(this.documentElement=null),_e(this,c)},replaceChild:function(c,g){d(this,c,g,h),c.ownerDocument=this,g&&this.removeChild(g),Ie(c)&&(this.documentElement=c)},importNode:function(c,g){return it(this,c,g)},getElementById:function(c){var g=null;return me(this.documentElement,function(U){if(U.nodeType==P&&U.getAttribute("id")==c)return g=U,!0}),g},getElementsByClassName:function(c){var g=S(c);return new de(this,function(U){var ne=[];return g.length>0&&me(U.documentElement,function(Y){if(Y!==U&&Y.nodeType===P){var Be=Y.getAttribute("class");if(Be){var Me=c===Be;if(!Me){var qe=S(Be);Me=g.every(A(qe))}Me&&ne.push(Y)}}}),ne})},createElement:function(c){var g=new M;g.ownerDocument=this,g.nodeName=c,g.tagName=c,g.localName=c,g.childNodes=new re;var U=g.attributes=new W;return U._ownerElement=g,g},createDocumentFragment:function(){var c=new $e;return c.ownerDocument=this,c.childNodes=new re,c},createTextNode:function(c){var g=new ge;return g.ownerDocument=this,g.appendData(c),g},createComment:function(c){var g=new Ce;return g.ownerDocument=this,g.appendData(c),g},createCDATASection:function(c){var g=new ce;return g.ownerDocument=this,g.appendData(c),g},createProcessingInstruction:function(c,g){var U=new Ve;return U.ownerDocument=this,U.tagName=U.target=c,U.nodeValue=U.data=g,U},createAttribute:function(c){var g=new G;return g.ownerDocument=this,g.name=c,g.nodeName=c,g.localName=c,g.specified=!0,g},createEntityReference:function(c){var g=new He;return g.ownerDocument=this,g.nodeName=c,g},createElementNS:function(c,g){var U=new M,ne=g.split(":"),Y=U.attributes=new W;return U.childNodes=new re,U.ownerDocument=this,U.nodeName=g,U.tagName=g,U.namespaceURI=c,ne.length==2?(U.prefix=ne[0],U.localName=ne[1]):U.localName=g,Y._ownerElement=U,U},createAttributeNS:function(c,g){var U=new G,ne=g.split(":");return U.ownerDocument=this,U.nodeName=g,U.name=g,U.namespaceURI=c,U.specified=!0,ne.length==2?(U.prefix=ne[0],U.localName=ne[1]):U.localName=g,U}},j(xe,oe);function M(){this._nsMap={}}M.prototype={nodeType:P,hasAttribute:function(c){return this.getAttributeNode(c)!=null},getAttribute:function(c){var g=this.getAttributeNode(c);return g&&g.value||""},getAttributeNode:function(c){return this.attributes.getNamedItem(c)},setAttribute:function(c,g){var U=this.ownerDocument.createAttribute(c);U.value=U.nodeValue=""+g,this.setAttributeNode(U)},removeAttribute:function(c){var g=this.getAttributeNode(c);g&&this.removeAttributeNode(g)},appendChild:function(c){return c.nodeType===$?this.insertBefore(c,null):k(this,c)},setAttributeNode:function(c){return this.attributes.setNamedItem(c)},setAttributeNodeNS:function(c){return this.attributes.setNamedItemNS(c)},removeAttributeNode:function(c){return this.attributes.removeNamedItem(c.nodeName)},removeAttributeNS:function(c,g){var U=this.getAttributeNodeNS(c,g);U&&this.removeAttributeNode(U)},hasAttributeNS:function(c,g){return this.getAttributeNodeNS(c,g)!=null},getAttributeNS:function(c,g){var U=this.getAttributeNodeNS(c,g);return U&&U.value||""},setAttributeNS:function(c,g,U){var ne=this.ownerDocument.createAttributeNS(c,g);ne.value=ne.nodeValue=""+U,this.setAttributeNode(ne)},getAttributeNodeNS:function(c,g){return this.attributes.getNamedItemNS(c,g)},getElementsByTagName:function(c){return new de(this,function(g){var U=[];return me(g,function(ne){ne!==g&&ne.nodeType==P&&(c==="*"||ne.tagName==c)&&U.push(ne)}),U})},getElementsByTagNameNS:function(c,g){return new de(this,function(U){var ne=[];return me(U,function(Y){Y!==U&&Y.nodeType===P&&(c==="*"||Y.namespaceURI===c)&&(g==="*"||Y.localName==g)&&ne.push(Y)}),ne})}},xe.prototype.getElementsByTagName=M.prototype.getElementsByTagName,xe.prototype.getElementsByTagNameNS=M.prototype.getElementsByTagNameNS,j(M,oe);function G(){}G.prototype.nodeType=N,j(G,oe);function ae(){}ae.prototype={data:"",substringData:function(c,g){return this.data.substring(c,c+g)},appendData:function(c){c=this.data+c,this.nodeValue=this.data=c,this.length=c.length},insertData:function(c,g){this.replaceData(c,0,g)},appendChild:function(c){throw new Error(ie[I])},deleteData:function(c,g){this.replaceData(c,g,"")},replaceData:function(c,g,U){var ne=this.data.substring(0,c),Y=this.data.substring(c+g);U=ne+U+Y,this.nodeValue=this.data=U,this.length=U.length}},j(ae,oe);function ge(){}ge.prototype={nodeName:"#text",nodeType:T,splitText:function(c){var g=this.data,U=g.substring(c);g=g.substring(0,c),this.data=this.nodeValue=g,this.length=g.length;var ne=this.ownerDocument.createTextNode(U);return this.parentNode&&this.parentNode.insertBefore(ne,this.nextSibling),ne}},j(ge,ae);function Ce(){}Ce.prototype={nodeName:"#comment",nodeType:C},j(Ce,ae);function ce(){}ce.prototype={nodeName:"#cdata-section",nodeType:B},j(ce,ae);function De(){}De.prototype.nodeType=f,j(De,oe);function Te(){}Te.prototype.nodeType=X,j(Te,oe);function Fe(){}Fe.prototype.nodeType=R,j(Fe,oe);function He(){}He.prototype.nodeType=V,j(He,oe);function $e(){}$e.prototype.nodeName="#document-fragment",$e.prototype.nodeType=$,j($e,oe);function Ve(){}Ve.prototype.nodeType=x,j(Ve,oe);function We(){}We.prototype.serializeToString=function(c,g,U){return Xe.call(c,g,U)},oe.prototype.toString=Xe;function Xe(c,g){var U=[],ne=this.nodeType==9&&this.documentElement||this,Y=ne.prefix,Be=ne.namespaceURI;if(Be&&Y==null){var Y=ne.lookupPrefix(Be);if(Y==null)var Me=[{namespace:Be,prefix:null}]}return Je(this,U,c,g,Me),U.join("")}function Ke(c,g,U){var ne=c.prefix||"",Y=c.namespaceURI;if(!Y||ne==="xml"&&Y===_.XML||Y===_.XMLNS)return!1;for(var Be=U.length;Be--;){var Me=U[Be];if(Me.prefix===ne)return Me.namespace!==Y}return!0}function Ge(c,g,U){c.push(" ",g,'="',U.replace(/[<>&"\t\n\r]/g,le),'"')}function Je(c,g,U,ne,Y){if(Y||(Y=[]),ne)if(c=ne(c),c){if(typeof c=="string"){g.push(c);return}}else return;switch(c.nodeType){case P:var Be=c.attributes,Me=Be.length,we=c.firstChild,qe=c.tagName;U=_.isHTML(c.namespaceURI)||U;var r=qe;if(!U&&!c.prefix&&c.namespaceURI){for(var y,u=0;u<Be.length;u++)if(Be.item(u).name==="xmlns"){y=Be.item(u).value;break}if(!y)for(var v=Y.length-1;v>=0;v--){var E=Y[v];if(E.prefix===""&&E.namespace===c.namespaceURI){y=E.namespace;break}}if(y!==c.namespaceURI)for(var v=Y.length-1;v>=0;v--){var E=Y[v];if(E.namespace===c.namespaceURI){E.prefix&&(r=E.prefix+":"+qe);break}}}g.push("<",r);for(var w=0;w<Me;w++){var D=Be.item(w);D.prefix=="xmlns"?Y.push({prefix:D.localName,namespace:D.value}):D.nodeName=="xmlns"&&Y.push({prefix:"",namespace:D.value})}for(var w=0;w<Me;w++){var D=Be.item(w);if(Ke(D,U,Y)){var z=D.prefix||"",se=D.namespaceURI;Ge(g,z?"xmlns:"+z:"xmlns",se),Y.push({prefix:z,namespace:se})}Je(D,g,U,ne,Y)}if(qe===r&&Ke(c,U,Y)){var z=c.prefix||"",se=c.namespaceURI;Ge(g,z?"xmlns:"+z:"xmlns",se),Y.push({prefix:z,namespace:se})}if(we||U&&!/^(?:meta|link|img|br|hr|input)$/i.test(qe)){if(g.push(">"),U&&/^script$/i.test(qe))for(;we;)we.data?g.push(we.data):Je(we,g,U,ne,Y.slice()),we=we.nextSibling;else for(;we;)Je(we,g,U,ne,Y.slice()),we=we.nextSibling;g.push("</",r,">")}else g.push("/>");return;case Z:case $:for(var we=c.firstChild;we;)Je(we,g,U,ne,Y.slice()),we=we.nextSibling;return;case N:return Ge(g,c.name,c.value);case T:return g.push(c.data.replace(/[<&>]/g,le));case B:return g.push("<![CDATA[",c.data,"]]>");case C:return g.push("<!--",c.data,"-->");case f:var Ee=c.publicId,be=c.systemId;if(g.push("<!DOCTYPE ",c.name),Ee)g.push(" PUBLIC ",Ee),be&&be!="."&&g.push(" ",be),g.push(">");else if(be&&be!=".")g.push(" SYSTEM ",be,">");else{var Re=c.internalSubset;Re&&g.push(" [",Re,"]"),g.push(">")}return;case x:return g.push("<?",c.target," ",c.data,"?>");case V:return g.push("&",c.nodeName,";");default:g.push("??",c.nodeName)}}function it(c,g,U){var ne;switch(g.nodeType){case P:ne=g.cloneNode(!1),ne.ownerDocument=c;case $:break;case N:U=!0;break}if(ne||(ne=g.cloneNode(!1)),ne.ownerDocument=c,ne.parentNode=null,U)for(var Y=g.firstChild;Y;)ne.appendChild(it(c,Y,U)),Y=Y.nextSibling;return ne}function tt(c,g,U){var ne=new g.constructor;for(var Y in g)if(Object.prototype.hasOwnProperty.call(g,Y)){var Be=g[Y];typeof Be!="object"&&Be!=ne[Y]&&(ne[Y]=Be)}switch(g.childNodes&&(ne.childNodes=new re),ne.ownerDocument=c,ne.nodeType){case P:var Me=g.attributes,qe=ne.attributes=new W,r=Me.length;qe._ownerElement=ne;for(var y=0;y<r;y++)ne.setAttributeNode(tt(c,Me.item(y),!0));break;case N:U=!0}if(U)for(var u=g.firstChild;u;)ne.appendChild(tt(c,u,U)),u=u.nextSibling;return ne}function Ye(c,g,U){c[g]=U}try{if(Object.defineProperty){let c=function(g){switch(g.nodeType){case P:case $:var U=[];for(g=g.firstChild;g;)g.nodeType!==7&&g.nodeType!==8&&U.push(c(g)),g=g.nextSibling;return U.join("");default:return g.nodeValue}};Object.defineProperty(de.prototype,"length",{get:function(){return pe(this),this.$$length}}),Object.defineProperty(oe.prototype,"textContent",{get:function(){return c(this)},set:function(g){switch(this.nodeType){case P:case $:for(;this.firstChild;)this.removeChild(this.firstChild);(g||String(g))&&this.appendChild(this.ownerDocument.createTextNode(g));break;default:this.data=g,this.value=g,this.nodeValue=g}}}),Ye=function(g,U,ne){g["$$"+U]=ne}}}catch{}s.DocumentType=De,s.DOMException=ee,s.DOMImplementation=ve,s.Element=M,s.Node=oe,s.NodeList=re,s.XMLSerializer=We},"./node_modules/@xmldom/xmldom/lib/entities.js":function(n,s,o){var a=o("./node_modules/@xmldom/xmldom/lib/conventions.js").freeze;s.XML_ENTITIES=a({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),s.HTML_ENTITIES=a({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),s.entityMap=s.HTML_ENTITIES},"./node_modules/@xmldom/xmldom/lib/index.js":function(n,s,o){var a=o("./node_modules/@xmldom/xmldom/lib/dom.js");s.DOMImplementation=a.DOMImplementation,s.XMLSerializer=a.XMLSerializer,s.DOMParser=o("./node_modules/@xmldom/xmldom/lib/dom-parser.js").DOMParser},"./node_modules/@xmldom/xmldom/lib/sax.js":function(n,s,o){var a=o("./node_modules/@xmldom/xmldom/lib/conventions.js").NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),p=new RegExp("^"+e.source+_.source+"*(?::"+e.source+_.source+"*)?$"),O=0,b=1,S=2,A=3,F=4,j=5,L=6,P=7;function N(I,q){this.message=I,this.locator=q,Error.captureStackTrace&&Error.captureStackTrace(this,N)}N.prototype=new Error,N.prototype.name=N.name;function T(){}T.prototype={parse:function(I,q,Q){var ee=this.domBuilder;ee.startDocument(),f(q,q={}),B(I,q,Q,ee,this.errorHandler),ee.endDocument()}};function B(I,q,Q,ee,re){function de(M){if(M>65535){M-=65536;var G=55296+(M>>10),ae=56320+(M&1023);return String.fromCharCode(G,ae)}else return String.fromCharCode(M)}function pe(M){var G=M.slice(1,-1);return Object.hasOwnProperty.call(Q,G)?Q[G]:G.charAt(0)==="#"?de(parseInt(G.substr(1).replace("x","0x"))):(re.error("entity not found:"+M),M)}function W(M){if(M>xe){var G=I.substring(xe,M).replace(/&#?\w+;/g,pe);oe&&J(xe),ee.characters(G,0,M-xe),xe=M}}function J(M,G){for(;M>=fe&&(G=ve.exec(I));)ue=G.index,fe=ue+G[0].length,oe.lineNumber++;oe.columnNumber=M-ue+1}for(var ue=0,fe=0,ve=/.*(?:\r\n?|\n)|.*$/g,oe=ee.locator,le=[{currentNSMap:q}],me={},xe=0;;){try{var ye=I.indexOf("<",xe);if(ye<0){if(!I.substr(xe).match(/^\s*$/)){var Se=ee.doc,ke=Se.createTextNode(I.substr(xe));Se.appendChild(ke),ee.currentElement=ke}return}switch(ye>xe&&W(ye),I.charAt(ye+1)){case"/":var m=I.indexOf(">",ye+3),_e=I.substring(ye+2,m).replace(/[ \t\n\r]+$/g,""),Ae=le.pop();m<0?(_e=I.substring(ye+2).replace(/[\s<].*/,""),re.error("end tag name: "+_e+" is not complete:"+Ae.tagName),m=ye+1+_e.length):_e.match(/\s</)&&(_e=_e.replace(/[\s<].*/,""),re.error("end tag name: "+_e+" maybe not complete"),m=ye+1+_e.length);var Pe=Ae.localNSMap,Oe=Ae.tagName==_e,Ie=Oe||Ae.tagName&&Ae.tagName.toLowerCase()==_e.toLowerCase();if(Ie){if(ee.endElement(Ae.uri,Ae.localName,_e),Pe)for(var he in Pe)Object.prototype.hasOwnProperty.call(Pe,he)&&ee.endPrefixMapping(he);Oe||re.fatalError("end tag name: "+_e+" is not match the current start tagName:"+Ae.tagName)}else le.push(Ae);m++;break;case"?":oe&&J(ye),m=X(I,ye,ee);break;case"!":oe&&J(ye),m=$(I,ye,ee,re);break;default:oe&&J(ye);var H=new K,te=le[le.length-1].currentNSMap,m=R(I,ye,H,te,pe,re),l=H.length;if(!H.closed&&Z(I,m,H.tagName,me)&&(H.closed=!0,Q.nbsp||re.warning("unclosed xml attribute")),oe&&l){for(var h=V(oe,{}),d=0;d<l;d++){var k=H[d];J(k.offset),k.locator=V(oe,{})}ee.locator=h,x(H,ee,te)&&le.push(H),ee.locator=oe}else x(H,ee,te)&&le.push(H);a.isHTML(H.uri)&&!H.closed?m=C(I,m,H.tagName,pe,ee):m++}}catch(M){if(M instanceof N)throw M;re.error("element parse error: "+M),m=-1}m>xe?xe=m:W(Math.max(ye,xe)+1)}}function V(I,q){return q.lineNumber=I.lineNumber,q.columnNumber=I.columnNumber,q}function R(I,q,Q,ee,re,de){function pe(oe,le,me){Q.attributeNames.hasOwnProperty(oe)&&de.fatalError("Attribute "+oe+" redefined"),Q.addValue(oe,le.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,re),me)}for(var W,J,ue=++q,fe=O;;){var ve=I.charAt(ue);switch(ve){case"=":if(fe===b)W=I.slice(q,ue),fe=A;else if(fe===S)fe=A;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(fe===A||fe===b)if(fe===b&&(de.warning('attribute value must after "="'),W=I.slice(q,ue)),q=ue+1,ue=I.indexOf(ve,q),ue>0)J=I.slice(q,ue),pe(W,J,q-1),fe=j;else throw new Error("attribute value no end '"+ve+"' match");else if(fe==F)J=I.slice(q,ue),pe(W,J,q),de.warning('attribute "'+W+'" missed start quot('+ve+")!!"),q=ue+1,fe=j;else throw new Error('attribute value must after "="');break;case"/":switch(fe){case O:Q.setTagName(I.slice(q,ue));case j:case L:case P:fe=P,Q.closed=!0;case F:case b:case S:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return de.error("unexpected end of input"),fe==O&&Q.setTagName(I.slice(q,ue)),ue;case">":switch(fe){case O:Q.setTagName(I.slice(q,ue));case j:case L:case P:break;case F:case b:J=I.slice(q,ue),J.slice(-1)==="/"&&(Q.closed=!0,J=J.slice(0,-1));case S:fe===S&&(J=W),fe==F?(de.warning('attribute "'+J+'" missed quot(")!'),pe(W,J,q)):((!a.isHTML(ee[""])||!J.match(/^(?:disabled|checked|selected)$/i))&&de.warning('attribute "'+J+'" missed value!! "'+J+'" instead!!'),pe(J,J,q));break;case A:throw new Error("attribute value missed!!")}return ue;case"\x80":ve=" ";default:if(ve<=" ")switch(fe){case O:Q.setTagName(I.slice(q,ue)),fe=L;break;case b:W=I.slice(q,ue),fe=S;break;case F:var J=I.slice(q,ue);de.warning('attribute "'+J+'" missed quot(")!!'),pe(W,J,q);case j:fe=L;break}else switch(fe){case S:Q.tagName,(!a.isHTML(ee[""])||!W.match(/^(?:disabled|checked|selected)$/i))&&de.warning('attribute "'+W+'" missed value!! "'+W+'" instead2!!'),pe(W,W,q),q=ue,fe=b;break;case j:de.warning('attribute space is required"'+W+'"!!');case L:fe=b,q=ue;break;case A:fe=F,q=ue;break;case P:throw new Error("elements closed character '/' and '>' must be connected to")}}ue++}}function x(I,q,Q){for(var ee=I.tagName,re=null,ve=I.length;ve--;){var de=I[ve],pe=de.qName,W=de.value,oe=pe.indexOf(":");if(oe>0)var J=de.prefix=pe.slice(0,oe),ue=pe.slice(oe+1),fe=J==="xmlns"&&ue;else ue=pe,J=null,fe=pe==="xmlns"&&"";de.localName=ue,fe!==!1&&(re==null&&(re={},f(Q,Q={})),Q[fe]=re[fe]=W,de.uri=a.XMLNS,q.startPrefixMapping(fe,W))}for(var ve=I.length;ve--;){de=I[ve];var J=de.prefix;J&&(J==="xml"&&(de.uri=a.XML),J!=="xmlns"&&(de.uri=Q[J||""]))}var oe=ee.indexOf(":");oe>0?(J=I.prefix=ee.slice(0,oe),ue=I.localName=ee.slice(oe+1)):(J=null,ue=I.localName=ee);var le=I.uri=Q[J||""];if(q.startElement(le,ue,ee,I),I.closed){if(q.endElement(le,ue,ee),re)for(J in re)Object.prototype.hasOwnProperty.call(re,J)&&q.endPrefixMapping(J)}else return I.currentNSMap=Q,I.localNSMap=re,!0}function C(I,q,Q,ee,re){if(/^(?:script|textarea)$/i.test(Q)){var de=I.indexOf("</"+Q+">",q),pe=I.substring(q+1,de);if(/[&<]/.test(pe))return/^script$/i.test(Q)?(re.characters(pe,0,pe.length),de):(pe=pe.replace(/&#?\w+;/g,ee),re.characters(pe,0,pe.length),de)}return q+1}function Z(I,q,Q,ee){var re=ee[Q];return re==null&&(re=I.lastIndexOf("</"+Q+">"),re<q&&(re=I.lastIndexOf("</"+Q)),ee[Q]=re),re<q}function f(I,q){for(var Q in I)Object.prototype.hasOwnProperty.call(I,Q)&&(q[Q]=I[Q])}function $(I,q,Q,ee){var re=I.charAt(q+2);switch(re){case"-":if(I.charAt(q+3)==="-"){var de=I.indexOf("-->",q+4);return de>q?(Q.comment(I,q+4,de-q-4),de+3):(ee.error("Unclosed comment"),-1)}else return-1;default:if(I.substr(q+3,6)=="CDATA["){var de=I.indexOf("]]>",q+9);return Q.startCDATA(),Q.characters(I,q+9,de-q-9),Q.endCDATA(),de+3}var pe=ie(I,q),W=pe.length;if(W>1&&/!doctype/i.test(pe[0][0])){var J=pe[1][0],ue=!1,fe=!1;W>3&&(/^public$/i.test(pe[2][0])?(ue=pe[3][0],fe=W>4&&pe[4][0]):/^system$/i.test(pe[2][0])&&(fe=pe[3][0]));var ve=pe[W-1];return Q.startDTD(J,ue,fe),Q.endDTD(),ve.index+ve[0].length}}return-1}function X(I,q,Q){var ee=I.indexOf("?>",q);if(ee){var re=I.substring(q,ee).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return re?(re[0].length,Q.processingInstruction(re[1],re[2]),ee+2):-1}return-1}function K(){this.attributeNames={}}K.prototype={setTagName:function(I){if(!p.test(I))throw new Error("invalid tagName:"+I);this.tagName=I},addValue:function(I,q,Q){if(!p.test(I))throw new Error("invalid attribute:"+I);this.attributeNames[I]=this.length,this[this.length++]={qName:I,value:q,offset:Q}},length:0,getLocalName:function(I){return this[I].localName},getLocator:function(I){return this[I].locator},getQName:function(I){return this[I].qName},getURI:function(I){return this[I].uri},getValue:function(I){return this[I].value}};function ie(I,q){var Q,ee=[],re=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(re.lastIndex=q,re.exec(I);Q=re.exec(I);)if(ee.push(Q),Q[1])return ee}s.XMLReader=T,s.ParseError=N},"./node_modules/process/browser.js":function(n,s){var o=n.exports={},a,e;function _(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=_}catch{a=_}try{typeof clearTimeout=="function"?e=clearTimeout:e=p}catch{e=p}})();function O(B){if(a===setTimeout)return setTimeout(B,0);if((a===_||!a)&&setTimeout)return a=setTimeout,setTimeout(B,0);try{return a(B,0)}catch{try{return a.call(null,B,0)}catch{return a.call(this,B,0)}}}function b(B){if(e===clearTimeout)return clearTimeout(B);if((e===p||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(B);try{return e(B)}catch{try{return e.call(null,B)}catch{return e.call(this,B)}}}var S=[],A=!1,F,j=-1;function L(){!A||!F||(A=!1,F.length?S=F.concat(S):j=-1,S.length&&P())}function P(){if(!A){var B=O(L);A=!0;for(var V=S.length;V;){for(F=S,S=[];++j<V;)F&&F[j].run();j=-1,V=S.length}F=null,A=!1,b(B)}}o.nextTick=function(B){var V=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)V[R-1]=arguments[R];S.push(new N(B,V)),S.length===1&&!A&&O(P)};function N(B,V){this.fun=B,this.array=V}N.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function T(){}o.on=T,o.addListener=T,o.once=T,o.off=T,o.removeListener=T,o.removeAllListeners=T,o.emit=T,o.prependListener=T,o.prependOnceListener=T,o.listeners=function(B){return[]},o.binding=function(B){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(B){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"./node_modules/webpack/buildin/amd-options.js":function(n,s){(function(o){n.exports=o}).call(this,{})},"./node_modules/webpack/buildin/global.js":function(n,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}n.exports=o},"./node_modules/webpack/buildin/module.js":function(n,s){n.exports=function(o){return o.webpackPolyfill||(o.deprecate=function(){},o.paths=[],o.children||(o.children=[]),Object.defineProperty(o,"loaded",{enumerable:!0,get:function(){return o.l}}),Object.defineProperty(o,"id",{enumerable:!0,get:function(){return o.i}}),o.webpackPolyfill=1),o}},"./package.json":function(n){n.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.4.14","description":"JavaScript SDK for [\u817E\u8BAF\u4E91\u5BF9\u8C61\u5B58\u50A8](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"@xmldom/xmldom":"^0.8.6"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(n,s,o){var a=o("./node_modules/@babel/runtime/helpers/typeof.js"),e=o("./src/session.js"),_=o("./src/async.js"),p=o("./src/event.js").EventProxy,O=o("./src/util.js"),b=o("./src/tracker.js");function S(f,$){var X=this,K=new p,ie=f.TaskId,I=f.Bucket,q=f.Region,Q=f.Key,ee=f.Body,re=f.ChunkSize||f.SliceSize||X.options.ChunkSize,de=f.AsyncLimit,pe=f.StorageClass,W=f.ServerSideEncryption,J,ue,fe=f.onHashProgress,ve=f.tracker;ve&&ve.setParams({chunkSize:re}),K.on("error",function(oe){if(!!X._isRunningTask(ie))return oe.UploadId=f.UploadData.UploadId||"",$(oe)}),K.on("upload_complete",function(oe){var le=O.extend({UploadId:f.UploadData.UploadId||""},oe);$(null,le)}),K.on("upload_slice_complete",function(oe){var le={};O.each(f.Headers,function(me,xe){var ye=xe.toLowerCase();(ye.indexOf("x-cos-meta-")===0||ye==="pic-operations")&&(le[xe]=me)}),N.call(X,{Bucket:I,Region:q,Key:Q,UploadId:oe.UploadId,SliceList:oe.SliceList,Headers:le,tracker:ve},function(me,xe){if(!!X._isRunningTask(ie)){if(e.removeUsing(oe.UploadId),me)return ue(null,!0),K.emit("error",me);e.removeUploadId.call(X,oe.UploadId),ue({loaded:J,total:J},!0),K.emit("upload_complete",xe)}})}),K.on("get_upload_data_finish",function(oe){var le=e.getFileId(ee,f.ChunkSize,I,Q);le&&e.saveUploadId.call(X,le,oe.UploadId,X.options.UploadIdCacheLimit),e.setUsing(oe.UploadId),ue(null,!0),L.call(X,{TaskId:ie,Bucket:I,Region:q,Key:Q,Body:ee,FileSize:J,SliceSize:re,AsyncLimit:de,ServerSideEncryption:W,UploadData:oe,Headers:f.Headers,onProgress:ue,tracker:ve},function(me,xe){if(!!X._isRunningTask(ie)){if(me)return ue(null,!0),K.emit("error",me);K.emit("upload_slice_complete",xe)}})}),K.on("get_file_size_finish",function(){if(ue=O.throttleOnProgress.call(X,J,f.onProgress),f.UploadData.UploadId)K.emit("get_upload_data_finish",f.UploadData);else{var oe=O.extend({TaskId:ie,Bucket:I,Region:q,Key:Q,Headers:f.Headers,StorageClass:pe,Body:ee,FileSize:J,SliceSize:re,onHashProgress:fe,tracker:ve},f);A.call(X,oe,function(le,me){if(!!X._isRunningTask(ie)){if(le)return K.emit("error",le);f.UploadData.UploadId=me.UploadId,f.UploadData.PartList=me.PartList,K.emit("get_upload_data_finish",f.UploadData)}})}}),J=f.ContentLength,delete f.ContentLength,!f.Headers&&(f.Headers={}),O.each(f.Headers,function(oe,le){le.toLowerCase()==="content-length"&&delete f.Headers[le]}),function(){for(var oe=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],le=1024*1024,me=0;me<oe.length&&(le=oe[me]*1024*1024,!(J/le<=X.options.MaxPartNumber));me++);f.ChunkSize=f.SliceSize=re=Math.max(re,le)}(),J===0?(f.Body="",f.ContentLength=0,f.SkipTask=!0,X.putObject(f,$)):K.emit("get_file_size_finish")}function A(f,$){var X=f.TaskId,K=f.Bucket,ie=f.Region,I=f.Key,q=f.StorageClass,Q=this,ee={},re=f.FileSize,de=f.SliceSize,pe=Math.ceil(re/de),W=0,J=O.throttleOnProgress.call(Q,re,f.onHashProgress),ue=function(le,me){var xe=de*(le-1),ye=Math.min(xe+de,re),Se=ye-xe;ee[le]?me(null,{PartNumber:le,ETag:ee[le],Size:Se}):O.fileSlice(f.Body,xe,ye,!1,function(ke){O.getFileMd5(ke,function(_e,Ae){if(_e)return me(O.error(_e));var Pe='"'+Ae+'"';ee[le]=Pe,W+=Se,J({loaded:W,total:re}),me(null,{PartNumber:le,ETag:Pe,Size:Se})})})},fe=function(le,me){var xe=le.length;if(xe===0)return me(null,!0);if(xe>pe)return me(null,!1);if(xe>1){var ye=Math.max(le[0].Size,le[1].Size);if(ye!==de)return me(null,!1)}var Se=function ke(_e){if(_e<xe){var Ae=le[_e];ue(Ae.PartNumber,function(Pe,Oe){Oe&&Oe.ETag===Ae.ETag&&Oe.Size===Ae.Size?ke(_e+1):me(null,!1)})}else me(null,!0)};Se(0)},ve=new p;ve.on("error",function(oe){if(!!Q._isRunningTask(X))return $(oe)}),ve.on("upload_id_available",function(oe){var le={},me=[];O.each(oe.PartList,function(Se){le[Se.PartNumber]=Se});for(var xe=1;xe<=pe;xe++){var ye=le[xe];ye?(ye.PartNumber=xe,ye.Uploaded=!0):ye={PartNumber:xe,ETag:null,Uploaded:!1},me.push(ye)}oe.PartList=me,$(null,oe)}),ve.on("no_available_upload_id",function(){if(!!Q._isRunningTask(X)){var oe=O.extend({Bucket:K,Region:ie,Key:I,Query:O.clone(f.Query),StorageClass:q,Body:f.Body,calledBySdk:"sliceUploadFile",tracker:f.tracker},f),le=O.clone(f.Headers);delete le["x-cos-mime-limit"],oe.Headers=le,Q.multipartInit(oe,function(me,xe){if(!!Q._isRunningTask(X)){if(me)return ve.emit("error",me);var ye=xe.UploadId;if(!ye)return $(O.error(new Error("no such upload id")));ve.emit("upload_id_available",{UploadId:ye,PartList:[]})}})}}),ve.on("has_and_check_upload_id",function(oe){oe=oe.reverse(),_.eachLimit(oe,1,function(le,me){if(!!Q._isRunningTask(X)){if(e.using[le]){me();return}j.call(Q,{Bucket:K,Region:ie,Key:I,UploadId:le,tracker:f.tracker},function(xe,ye){if(!!Q._isRunningTask(X)){if(xe)return e.removeUsing(le),ve.emit("error",xe);var Se=ye.PartList;Se.forEach(function(ke){ke.PartNumber*=1,ke.Size*=1,ke.ETag=ke.ETag||""}),fe(Se,function(ke,_e){if(!!Q._isRunningTask(X)){if(ke)return ve.emit("error",ke);_e?me({UploadId:le,PartList:Se}):me()}})}})}},function(le){!Q._isRunningTask(X)||(J(null,!0),le&&le.UploadId?ve.emit("upload_id_available",le):ve.emit("no_available_upload_id"))})}),ve.on("seek_local_avail_upload_id",function(oe){var le=e.getFileId(f.Body,f.ChunkSize,K,I),me=e.getUploadIdList.call(Q,le);if(!le||!me){ve.emit("has_and_check_upload_id",oe);return}var xe=function ye(Se){if(Se>=me.length){ve.emit("has_and_check_upload_id",oe);return}var ke=me[Se];if(!O.isInArray(oe,ke)){e.removeUploadId.call(Q,ke),ye(Se+1);return}if(e.using[ke]){ye(Se+1);return}j.call(Q,{Bucket:K,Region:ie,Key:I,UploadId:ke,tracker:f.tracker},function(_e,Ae){!Q._isRunningTask(X)||(_e?(e.removeUploadId.call(Q,ke),ye(Se+1)):ve.emit("upload_id_available",{UploadId:ke,PartList:Ae.PartList}))})};xe(0)}),ve.on("get_remote_upload_id_list",function(){F.call(Q,{Bucket:K,Region:ie,Key:I,tracker:f.tracker},function(oe,le){if(!!Q._isRunningTask(X)){if(oe)return ve.emit("error",oe);var me=O.filter(le.UploadList,function(Se){return Se.Key===I&&(!q||Se.StorageClass.toUpperCase()===q.toUpperCase())}).reverse().map(function(Se){return Se.UploadId||Se.UploadID});if(me.length)ve.emit("seek_local_avail_upload_id",me);else{var xe=e.getFileId(f.Body,f.ChunkSize,K,I),ye;xe&&(ye=e.getUploadIdList.call(Q,xe))&&O.each(ye,function(Se){e.removeUploadId.call(Q,Se)}),ve.emit("no_available_upload_id")}}})}),ve.emit("get_remote_upload_id_list")}function F(f,$){var X=this,K=[],ie={Bucket:f.Bucket,Region:f.Region,Prefix:f.Key,calledBySdk:f.calledBySdk||"sliceUploadFile",tracker:f.tracker},I=function q(){X.multipartList(ie,function(Q,ee){if(Q)return $(Q);K.push.apply(K,ee.Upload||[]),ee.IsTruncated==="true"?(ie.KeyMarker=ee.NextKeyMarker,ie.UploadIdMarker=ee.NextUploadIdMarker,q()):$(null,{UploadList:K})})};I()}function j(f,$){var X=this,K=[],ie={Bucket:f.Bucket,Region:f.Region,Key:f.Key,UploadId:f.UploadId,calledBySdk:"sliceUploadFile",tracker:f.tracker},I=function q(){X.multipartListPart(ie,function(Q,ee){if(Q)return $(Q);K.push.apply(K,ee.Part||[]),ee.IsTruncated==="true"?(ie.PartNumberMarker=ee.NextPartNumberMarker,q()):$(null,{PartList:K})})};I()}function L(f,$){var X=this,K=f.TaskId,ie=f.Bucket,I=f.Region,q=f.Key,Q=f.UploadData,ee=f.FileSize,re=f.SliceSize,de=Math.min(f.AsyncLimit||X.options.ChunkParallelLimit||1,256),pe=f.Body,W=Math.ceil(ee/re),J=0,ue=f.ServerSideEncryption,fe=f.Headers,ve=O.filter(Q.PartList,function(le){return le.Uploaded&&(J+=le.PartNumber>=W&&ee%re||re),!le.Uploaded}),oe=f.onProgress;_.eachLimit(ve,de,function(le,me){if(!!X._isRunningTask(K)){var xe=le.PartNumber,ye=Math.min(ee,le.PartNumber*re)-(le.PartNumber-1)*re,Se=0;P.call(X,{TaskId:K,Bucket:ie,Region:I,Key:q,SliceSize:re,FileSize:ee,PartNumber:xe,ServerSideEncryption:ue,Body:pe,UploadData:Q,Headers:fe,onProgress:function(_e){J+=_e.loaded-Se,Se=_e.loaded,oe({loaded:J,total:ee})},tracker:f.tracker},function(ke,_e){!X._isRunningTask(K)||(!ke&&!_e.ETag&&(ke='get ETag error, please add "ETag" to CORS ExposeHeader setting.( \u83B7\u53D6ETag\u5931\u8D25\uFF0C\u8BF7\u5728CORS ExposeHeader\u8BBE\u7F6E\u4E2D\u6DFB\u52A0ETag\uFF0C\u8BF7\u53C2\u8003\u6587\u6863\uFF1Ahttps://cloud.tencent.com/document/product/436/13318 )'),ke?J-=Se:(J+=ye-Se,le.ETag=_e.ETag),oe({loaded:J,total:ee}),me(ke||null,_e))})}},function(le){if(!!X._isRunningTask(K)){if(le)return $(le);$(null,{UploadId:Q.UploadId,SliceList:Q.PartList})}})}function P(f,$){var X=this,K=f.TaskId,ie=f.Bucket,I=f.Region,q=f.Key,Q=f.FileSize,ee=f.Body,re=f.PartNumber*1,de=f.SliceSize,pe=f.ServerSideEncryption,W=f.UploadData,J=f.Headers||{},ue=X.options.ChunkRetryTimes+1,fe=de*(re-1),ve=de,oe=fe+de;oe>Q&&(oe=Q,ve=oe-fe);var le=["x-cos-traffic-limit","x-cos-mime-limit"],me={};O.each(J,function(ye,Se){le.indexOf(Se)>-1&&(me[Se]=ye)});var xe=W.PartList[re-1];_.retry(ue,function(ye){!X._isRunningTask(K)||O.fileSlice(ee,fe,oe,!0,function(Se){X.multipartUpload({TaskId:K,Bucket:ie,Region:I,Key:q,ContentLength:ve,PartNumber:re,UploadId:W.UploadId,ServerSideEncryption:pe,Body:Se,Headers:me,onProgress:f.onProgress,calledBySdk:"sliceUploadFile",tracker:f.tracker},function(ke,_e){if(!!X._isRunningTask(K))return ke?ye(ke):(xe.Uploaded=!0,ye(null,_e))})})},function(ye,Se){if(!!X._isRunningTask(K))return $(ye,Se)})}function N(f,$){var X=f.Bucket,K=f.Region,ie=f.Key,I=f.UploadId,q=f.SliceList,Q=this,ee=this.options.ChunkRetryTimes+1,re=f.Headers,de=q.map(function(pe){return{PartNumber:pe.PartNumber,ETag:pe.ETag}});_.retry(ee,function(pe){Q.multipartComplete({Bucket:X,Region:K,Key:ie,UploadId:I,Parts:de,Headers:re,calledBySdk:"sliceUploadFile",tracker:f.tracker},pe)},function(pe,W){$(pe,W)})}function T(f,$){var X=f.Bucket,K=f.Region,ie=f.Key,I=f.UploadId,q=f.Level||"task",Q=f.AsyncLimit,ee=this,re=new p;if(re.on("error",function(de){return $(de)}),re.on("get_abort_array",function(de){B.call(ee,{Bucket:X,Region:K,Key:ie,Headers:f.Headers,AsyncLimit:Q,AbortArray:de},$)}),q==="bucket")F.call(ee,{Bucket:X,Region:K,calledBySdk:"abortUploadTask"},function(de,pe){if(de)return $(de);re.emit("get_abort_array",pe.UploadList||[])});else if(q==="file"){if(!ie)return $(O.error(new Error("abort_upload_task_no_key")));F.call(ee,{Bucket:X,Region:K,Key:ie,calledBySdk:"abortUploadTask"},function(de,pe){if(de)return $(de);re.emit("get_abort_array",pe.UploadList||[])})}else if(q==="task"){if(!I)return $(O.error(new Error("abort_upload_task_no_id")));if(!ie)return $(O.error(new Error("abort_upload_task_no_key")));re.emit("get_abort_array",[{Key:ie,UploadId:I}])}else return $(O.error(new Error("abort_unknown_level")))}function B(f,$){var X=f.Bucket,K=f.Region,ie=f.Key,I=f.AbortArray,q=f.AsyncLimit||1,Q=this,ee=0,re=new Array(I.length);_.eachLimit(I,q,function(de,pe){var W=ee;if(ie&&ie!==de.Key){re[W]={error:{KeyNotMatch:!0}},pe(null);return}var J=de.UploadId||de.UploadID;Q.multipartAbort({Bucket:X,Region:K,Key:de.Key,Headers:f.Headers,UploadId:J},function(ue){var fe={Bucket:X,Region:K,Key:de.Key,UploadId:J};re[W]={error:ue,task:fe},pe(null)}),ee++},function(de){if(de)return $(de);for(var pe=[],W=[],J=0,ue=re.length;J<ue;J++){var fe=re[J];fe.task&&(fe.error?W.push(fe.task):pe.push(fe.task))}return $(null,{successList:pe,errorList:W})})}function V(f,$){var X=this,K=f.SliceSize===void 0?X.options.SliceSize:f.SliceSize,ie=[],I=f.Body,q=I.size||I.length||0,Q={TaskId:""};if(X.options.EnableTracker){var ee=X.options.UseAccelerate||typeof X.options.Domain=="string"&&X.options.Domain.includes("accelerate.");f.tracker=new b({bucket:f.Bucket,region:f.Region,apiName:"uploadFile",fileKey:f.Key,fileSize:q,accelerate:ee,deepTracker:X.options.DeepTracker,customId:X.options.CustomId,delay:X.options.TrackerDelay})}O.each(f,function(ue,fe){a(ue)!=="object"&&typeof ue!="function"&&(Q[fe]=ue)});var re=f.onTaskReady,de=function(fe){Q.TaskId=fe,re&&re(fe)};f.onTaskReady=de;var pe=q>K?"sliceUploadFile":"putObject",W=f.onFileFinish,J=function(fe,ve){f.tracker&&f.tracker.formatResult(fe,ve),W&&W(fe,ve,Q),$&&$(fe,ve)};ie.push({api:pe,params:f,callback:J}),X._addTasks(ie)}function R(f,$){var X=this,K=f.SliceSize===void 0?X.options.SliceSize:f.SliceSize,ie=0,I=0,q=O.throttleOnProgress.call(X,I,f.onProgress),Q=f.files.length,ee=f.onFileFinish,re=Array(Q),de=function(J,ue,fe){q(null,!0),ee&&ee(J,ue,fe),re[fe.Index]={options:fe,error:J,data:ue},--Q<=0&&$&&$(null,{files:re})},pe=[];O.each(f.files,function(W,J){(function(){var ue=W.Body,fe=ue.size||ue.length||0,ve={Index:J,TaskId:""};if(ie+=fe,X.options.EnableTracker){var oe=X.options.UseAccelerate||typeof X.options.Domain=="string"&&X.options.Domain.includes("accelerate.");W.tracker=new b({bucket:W.Bucket,region:W.Region,apiName:"uploadFiles",fileKey:W.Key,fileSize:fe,accelerate:oe,deepTracker:X.options.DeepTracker,customId:X.options.CustomId,delay:X.options.TrackerDelay})}O.each(W,function(Pe,Oe){a(Pe)!=="object"&&typeof Pe!="function"&&(ve[Oe]=Pe)});var le=W.onTaskReady,me=function(Oe){ve.TaskId=Oe,le&&le(Oe)};W.onTaskReady=me;var xe=0,ye=W.onProgress,Se=function(Oe){I=I-xe+Oe.loaded,xe=Oe.loaded,ye&&ye(Oe),q({loaded:I,total:ie})};W.onProgress=Se;var ke=fe>K?"sliceUploadFile":"putObject",_e=W.onFileFinish,Ae=function(Oe,Ie){W.tracker&&W.tracker.formatResult(Oe,Ie),_e&&_e(Oe,Ie),de&&de(Oe,Ie,ve)};pe.push({api:ke,params:W,callback:Ae})})()}),X._addTasks(pe)}function x(f,$){var X=new p,K=this,ie=f.Bucket,I=f.Region,q=f.Key,Q=f.CopySource,ee=O.getSourceParams.call(this,Q);if(!ee){$(O.error(new Error("CopySource format error")));return}var re=ee.Bucket,de=ee.Region,pe=decodeURIComponent(ee.Key),W=f.CopySliceSize===void 0?K.options.CopySliceSize:f.CopySliceSize;W=Math.max(0,W);var J=f.CopyChunkSize||this.options.CopyChunkSize,ue=this.options.CopyChunkParallelLimit,fe=this.options.ChunkRetryTimes+1,ve=0,oe=0,le,me,xe={},ye={},Se={};X.on("copy_slice_complete",function(ke){O.each(f.Headers,function(Ae,Pe){Pe.toLowerCase().indexOf("x-cos-meta-")});var _e=O.map(ke.PartList,function(Ae){return{PartNumber:Ae.PartNumber,ETag:Ae.ETag}});_.retry(fe,function(Ae){K.multipartComplete({Bucket:ie,Region:I,Key:q,UploadId:ke.UploadId,Parts:_e,calledBySdk:"sliceCopyFile"},Ae)},function(Ae,Pe){if(e.removeUsing(ke.UploadId),Ae)return me(null,!0),$(Ae);e.removeUploadId(ke.UploadId),me({loaded:le,total:le},!0),$(null,Pe)})}),X.on("get_copy_data_finish",function(ke){var _e=e.getCopyFileId(Q,xe,J,ie,q);_e&&e.saveUploadId(_e,ke.UploadId,K.options.UploadIdCacheLimit),e.setUsing(ke.UploadId);var Ae=O.filter(ke.PartList,function(Pe){return Pe.Uploaded&&(oe+=Pe.PartNumber>=ve&&le%J||J),!Pe.Uploaded});_.eachLimit(Ae,ue,function(Pe,Oe){var Ie=Pe.PartNumber,he=Pe.CopySourceRange,H=Pe.end-Pe.start;_.retry(fe,function(te){C.call(K,{Bucket:ie,Region:I,Key:q,CopySource:Q,UploadId:ke.UploadId,PartNumber:Ie,CopySourceRange:he},te)},function(te,m){if(te)return Oe(te);oe+=H,me({loaded:oe,total:le}),Pe.ETag=m.ETag,Oe(te||null,m)})},function(Pe){if(Pe)return e.removeUsing(ke.UploadId),me(null,!0),$(Pe);X.emit("copy_slice_complete",ke)})}),X.on("get_chunk_size_finish",function(){var ke=function(){K.multipartInit({Bucket:ie,Region:I,Key:q,Headers:Se},function(Ie,he){if(Ie)return $(Ie);f.UploadId=he.UploadId,X.emit("get_copy_data_finish",{UploadId:f.UploadId,PartList:f.PartList})})},_e=e.getCopyFileId(Q,xe,J,ie,q),Ae=e.getUploadIdList(_e);if(!_e||!Ae)return ke();var Pe=function Oe(Ie){if(Ie>=Ae.length)return ke();var he=Ae[Ie];if(e.using[he])return Oe(Ie+1);j.call(K,{Bucket:ie,Region:I,Key:q,UploadId:he},function(H,te){if(H)e.removeUploadId(he),Oe(Ie+1);else{if(e.using[he])return Oe(Ie+1);var m={},l=0;O.each(te.PartList,function(h){var d=parseInt(h.Size),k=l+d-1;m[h.PartNumber+"|"+l+"|"+k]=h.ETag,l+=d}),O.each(f.PartList,function(h){var d=m[h.PartNumber+"|"+h.start+"|"+h.end];d&&(h.ETag=d,h.Uploaded=!0)}),X.emit("get_copy_data_finish",{UploadId:he,PartList:f.PartList})}})};Pe(0)}),X.on("get_file_size_finish",function(){if(function(){for(var _e=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],Ae=1024*1024,Pe=0;Pe<_e.length&&(Ae=_e[Pe]*1024*1024,!(le/Ae<=K.options.MaxPartNumber));Pe++);f.ChunkSize=J=Math.max(J,Ae),ve=Math.ceil(le/J);for(var Oe=[],Ie=1;Ie<=ve;Ie++){var he=(Ie-1)*J,H=Ie*J<le?Ie*J-1:le-1,te={PartNumber:Ie,start:he,end:H,CopySourceRange:"bytes="+he+"-"+H};Oe.push(te)}f.PartList=Oe}(),f.Headers["x-cos-metadata-directive"]==="Replaced"?Se=f.Headers:Se=ye,Se["x-cos-storage-class"]=f.Headers["x-cos-storage-class"]||ye["x-cos-storage-class"],Se=O.clearKey(Se),ye["x-cos-storage-class"]==="ARCHIVE"||ye["x-cos-storage-class"]==="DEEP_ARCHIVE"){var ke=ye["x-cos-restore"];if(!ke||ke==='ongoing-request="true"'){$(O.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete Se["x-cos-copy-source"],delete Se["x-cos-metadata-directive"],delete Se["x-cos-copy-source-If-Modified-Since"],delete Se["x-cos-copy-source-If-Unmodified-Since"],delete Se["x-cos-copy-source-If-Match"],delete Se["x-cos-copy-source-If-None-Match"],X.emit("get_chunk_size_finish")}),K.headObject({Bucket:re,Region:de,Key:pe},function(ke,_e){if(ke){ke.statusCode&&ke.statusCode===404?$(O.error(ke,{ErrorStatus:pe+" Not Exist"})):$(ke);return}if(le=f.FileSize=_e.headers["content-length"],le===void 0||!le){$(O.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.\uFF08 \u83B7\u53D6Content-Length\u5931\u8D25\uFF0C\u8BF7\u5728CORS ExposeHeader\u8BBE\u7F6E\u4E2D\u6DFB\u52A0Content-Length\uFF0C\u8BF7\u53C2\u8003\u6587\u6863\uFF1Ahttps://cloud.tencent.com/document/product/436/13318 \uFF09')));return}if(me=O.throttleOnProgress.call(K,le,f.onProgress),le<=W)f.Headers["x-cos-metadata-directive"]||(f.Headers["x-cos-metadata-directive"]="Copy"),K.putObjectCopy(f,function(Pe,Oe){if(Pe)return me(null,!0),$(Pe);me({loaded:le,total:le},!0),$(Pe,Oe)});else{var Ae=_e.headers;xe=Ae,ye={"Cache-Control":Ae["cache-control"],"Content-Disposition":Ae["content-disposition"],"Content-Encoding":Ae["content-encoding"],"Content-Type":Ae["content-type"],Expires:Ae.expires,"x-cos-storage-class":Ae["x-cos-storage-class"]},O.each(Ae,function(Pe,Oe){var Ie="x-cos-meta-";Oe.indexOf(Ie)===0&&Oe.length>Ie.length&&(ye[Oe]=Pe)}),X.emit("get_file_size_finish")}})}function C(f,$){var X=f.TaskId,K=f.Bucket,ie=f.Region,I=f.Key,q=f.CopySource,Q=f.UploadId,ee=f.PartNumber*1,re=f.CopySourceRange,de=this.options.ChunkRetryTimes+1,pe=this;_.retry(de,function(W){pe.uploadPartCopy({TaskId:X,Bucket:K,Region:ie,Key:I,CopySource:q,UploadId:Q,PartNumber:ee,CopySourceRange:re},function(J,ue){W(J||null,ue)})},function(W,J){return $(W,J)})}var Z={sliceUploadFile:S,abortUploadTask:T,uploadFile:V,uploadFiles:R,sliceCopyFile:x};n.exports.init=function(f,$){$.transferToTaskMethod(Z,"sliceUploadFile"),O.each(Z,function(X,K){f.prototype[K]=O.apiWrapper(K,X)})}},"./src/async.js":function(n,s){var o=function(p,O,b,S){if(S=S||function(){},!p.length||O<=0)return S();var A=0,F=0,j=0;(function L(){if(A>=p.length)return S();for(;j<O&&F<p.length;)F+=1,j+=1,b(p[F-1],function(P){P?(S(P),S=function(){}):(A+=1,j-=1,A>=p.length?S():L())})})()},a=function(p,O,b){var S=function A(F){O(function(j,L){j&&F<p?A(F+1):b(j,L)})};p<1?b():S(1)},e={eachLimit:o,retry:a};n.exports=e},"./src/base.js":function(n,s,o){var a=o("./lib/request.js"),e=o("./src/util.js");function _(r,y){typeof r=="function"&&(y=r,r={});var u=this.options.Protocol||(e.isBrowser&&location.protocol==="http:"?"http:":"https:"),v=this.options.ServiceDomain,E=r.AppId||this.options.appId,w=r.Region;v?(v=v.replace(/\{\{AppId\}\}/ig,E||"").replace(/\{\{Region\}\}/ig,w||"").replace(/\{\{.*?\}\}/ig,""),/^[a-zA-Z]+:\/\//.test(v)||(v=u+"//"+v),v.slice(-1)==="/"&&(v=v.slice(0,-1))):w?v=u+"//cos."+w+".myqcloud.com":v=u+"//service.cos.myqcloud.com";var D="",z=w?"cos."+w+".myqcloud.com":"service.cos.myqcloud.com",se=v.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");z===se&&(D=z),Y.call(this,{Action:"name/cos:GetService",url:v,method:"GET",headers:r.Headers,SignHost:D},function(we,Ee){if(we)return y(we);var be=Ee&&Ee.ListAllMyBucketsResult&&Ee.ListAllMyBucketsResult.Buckets&&Ee.ListAllMyBucketsResult.Buckets.Bucket||[];be=e.isArray(be)?be:[be];var Re=Ee&&Ee.ListAllMyBucketsResult&&Ee.ListAllMyBucketsResult.Owner||{};y(null,{Buckets:be,Owner:Re,statusCode:Ee.statusCode,headers:Ee.headers})})}function p(r,y){var u=this,v="";if(r.BucketAZConfig){var E={BucketAZConfig:r.BucketAZConfig};v=e.json2xml({CreateBucketConfiguration:E})}Y.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,body:v},function(w,D){if(w)return y(w);var z=c({protocol:u.options.Protocol,domain:u.options.Domain,bucket:r.Bucket,region:r.Region,isLocation:!0});y(null,{Location:z,statusCode:D.statusCode,headers:D.headers})})}function O(r,y){Y.call(this,{Action:"name/cos:HeadBucket",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,method:"HEAD"},y)}function b(r,y){var u={};u.prefix=r.Prefix||"",u.delimiter=r.Delimiter,u.marker=r.Marker,u["max-keys"]=r.MaxKeys,u["encoding-type"]=r.EncodingType,Y.call(this,{Action:"name/cos:GetBucket",ResourceKey:u.prefix,method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,qs:u},function(v,E){if(v)return y(v);var w=E.ListBucketResult||{},D=w.Contents||[],z=w.CommonPrefixes||[];D=e.isArray(D)?D:[D],z=e.isArray(z)?z:[z];var se=e.clone(w);e.extend(se,{Contents:D,CommonPrefixes:z,statusCode:E.statusCode,headers:E.headers}),y(null,se)})}function S(r,y){Y.call(this,{Action:"name/cos:DeleteBucket",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,method:"DELETE"},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode,headers:v.headers})})}function A(r,y){var u=r.Headers,v="";if(r.AccessControlPolicy){var E=e.clone(r.AccessControlPolicy||{}),w=E.Grants||E.Grant;w=e.isArray(w)?w:[w],delete E.Grant,delete E.Grants,E.AccessControlList={Grant:w},v=e.json2xml({AccessControlPolicy:E}),u["Content-Type"]="application/xml",u["Content-MD5"]=e.binaryBase64(e.md5(v))}e.each(u,function(D,z){z.indexOf("x-cos-grant-")===0&&(u[z]=Ye(u[z]))}),Y.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:r.Bucket,Region:r.Region,headers:u,action:"acl",body:v},function(D,z){if(D)return y(D);y(null,{statusCode:z.statusCode,headers:z.headers})})}function F(r,y){Y.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"acl"},function(u,v){if(u)return y(u);var E=v.AccessControlPolicy||{},w=E.Owner||{},D=E.AccessControlList.Grant||[];D=e.isArray(D)?D:[D];var z=tt(E);v.headers&&v.headers["x-cos-acl"]&&(z.ACL=v.headers["x-cos-acl"]),z=e.extend(z,{Owner:w,Grants:D,statusCode:v.statusCode,headers:v.headers}),y(null,z)})}function j(r,y){var u=r.CORSConfiguration||{},v=u.CORSRules||r.CORSRules||[];v=e.clone(e.isArray(v)?v:[v]),e.each(v,function(z){e.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(se){var we=se+"s",Ee=z[we]||z[se]||[];delete z[we],z[se]=e.isArray(Ee)?Ee:[Ee]})});var E={CORSRule:v};r.ResponseVary&&(E.ResponseVary=r.ResponseVary);var w=e.json2xml({CORSConfiguration:E}),D=r.Headers;D["Content-Type"]="application/xml",D["Content-MD5"]=e.binaryBase64(e.md5(w)),Y.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:w,action:"cors",headers:D},function(z,se){if(z)return y(z);y(null,{statusCode:se.statusCode,headers:se.headers})})}function L(r,y){Y.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"cors"},function(u,v){if(u){if(u.statusCode===404&&u.error&&u.error.Code==="NoSuchCORSConfiguration"){var E={CORSRules:[],statusCode:u.statusCode};u.headers&&(E.headers=u.headers),y(null,E)}else y(u);return}var w=v.CORSConfiguration||{},D=w.CORSRules||w.CORSRule||[];D=e.clone(e.isArray(D)?D:[D]);var z=w.ResponseVary;e.each(D,function(se){e.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(we){var Ee=we+"s",be=se[Ee]||se[we]||[];delete se[we],se[Ee]=e.isArray(be)?be:[be]})}),y(null,{CORSRules:D,ResponseVary:z,statusCode:v.statusCode,headers:v.headers})})}function P(r,y){Y.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"cors"},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode||u.statusCode,headers:v.headers})})}function N(r,y){Y.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"location"},y)}function T(r,y){var u=r.Policy;try{typeof u=="string"&&(u=JSON.parse(u))}catch{}if(!u||typeof u=="string")return y(e.error(new Error("Policy format error")));var v=JSON.stringify(u);u.version||(u.version="2.0");var E=r.Headers;E["Content-Type"]="application/json",E["Content-MD5"]=e.binaryBase64(e.md5(v)),Y.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:r.Bucket,Region:r.Region,action:"policy",body:v,headers:E},function(w,D){if(w&&w.statusCode===204)return y(null,{statusCode:w.statusCode});if(w)return y(w);y(null,{statusCode:D.statusCode,headers:D.headers})})}function B(r,y){Y.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"policy",rawBody:!0},function(u,v){if(u)return u.statusCode&&u.statusCode===403?y(e.error(u,{ErrorStatus:"Access Denied"})):u.statusCode&&u.statusCode===405?y(e.error(u,{ErrorStatus:"Method Not Allowed"})):u.statusCode&&u.statusCode===404?y(e.error(u,{ErrorStatus:"Policy Not Found"})):y(u);var E={};try{E=JSON.parse(v.body)}catch{}y(null,{Policy:E,statusCode:v.statusCode,headers:v.headers})})}function V(r,y){Y.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"policy"},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode||u.statusCode,headers:v.headers})})}function R(r,y){var u=r.Tagging||{},v=u.TagSet||u.Tags||r.Tags||[];v=e.clone(e.isArray(v)?v:[v]);var E=e.json2xml({Tagging:{TagSet:{Tag:v}}}),w=r.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(E)),Y.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:E,action:"tagging",headers:w},function(D,z){if(D&&D.statusCode===204)return y(null,{statusCode:D.statusCode});if(D)return y(D);y(null,{statusCode:z.statusCode,headers:z.headers})})}function x(r,y){Y.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"tagging"},function(u,v){if(u){if(u.statusCode===404&&u.error&&(u.error==="Not Found"||u.error.Code==="NoSuchTagSet")){var E={Tags:[],statusCode:u.statusCode};u.headers&&(E.headers=u.headers),y(null,E)}else y(u);return}var w=[];try{w=v.Tagging.TagSet.Tag||[]}catch{}w=e.clone(e.isArray(w)?w:[w]),y(null,{Tags:w,statusCode:v.statusCode,headers:v.headers})})}function C(r,y){Y.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"tagging"},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode,headers:v.headers})})}function Z(r,y){var u=r.LifecycleConfiguration||{},v=u.Rules||r.Rules||[];v=e.clone(v);var E=e.json2xml({LifecycleConfiguration:{Rule:v}}),w=r.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(E)),Y.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:E,action:"lifecycle",headers:w},function(D,z){if(D&&D.statusCode===204)return y(null,{statusCode:D.statusCode});if(D)return y(D);y(null,{statusCode:z.statusCode,headers:z.headers})})}function f(r,y){Y.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"lifecycle"},function(u,v){if(u){if(u.statusCode===404&&u.error&&u.error.Code==="NoSuchLifecycleConfiguration"){var E={Rules:[],statusCode:u.statusCode};u.headers&&(E.headers=u.headers),y(null,E)}else y(u);return}var w=[];try{w=v.LifecycleConfiguration.Rule||[]}catch{}w=e.clone(e.isArray(w)?w:[w]),y(null,{Rules:w,statusCode:v.statusCode,headers:v.headers})})}function $(r,y){Y.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"lifecycle"},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode,headers:v.headers})})}function X(r,y){if(!r.VersioningConfiguration){y(e.error(new Error("missing param VersioningConfiguration")));return}var u=r.VersioningConfiguration||{},v=e.json2xml({VersioningConfiguration:u}),E=r.Headers;E["Content-Type"]="application/xml",E["Content-MD5"]=e.binaryBase64(e.md5(v)),Y.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:v,action:"versioning",headers:E},function(w,D){if(w&&w.statusCode===204)return y(null,{statusCode:w.statusCode});if(w)return y(w);y(null,{statusCode:D.statusCode,headers:D.headers})})}function K(r,y){Y.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"versioning"},function(u,v){u||!v.VersioningConfiguration&&(v.VersioningConfiguration={}),y(u,v)})}function ie(r,y){var u=e.clone(r.ReplicationConfiguration),v=e.json2xml({ReplicationConfiguration:u});v=v.replace(/<(\/?)Rules>/ig,"<$1Rule>"),v=v.replace(/<(\/?)Tags>/ig,"<$1Tag>");var E=r.Headers;E["Content-Type"]="application/xml",E["Content-MD5"]=e.binaryBase64(e.md5(v)),Y.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:v,action:"replication",headers:E},function(w,D){if(w&&w.statusCode===204)return y(null,{statusCode:w.statusCode});if(w)return y(w);y(null,{statusCode:D.statusCode,headers:D.headers})})}function I(r,y){Y.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"replication"},function(u,v){if(u){if(u.statusCode===404&&u.error&&(u.error==="Not Found"||u.error.Code==="ReplicationConfigurationnotFoundError")){var E={ReplicationConfiguration:{Rules:[]},statusCode:u.statusCode};u.headers&&(E.headers=u.headers),y(null,E)}else y(u);return}!v.ReplicationConfiguration&&(v.ReplicationConfiguration={}),v.ReplicationConfiguration.Rule&&(v.ReplicationConfiguration.Rules=e.makeArray(v.ReplicationConfiguration.Rule),delete v.ReplicationConfiguration.Rule),y(u,v)})}function q(r,y){Y.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"replication"},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode,headers:v.headers})})}function Q(r,y){if(!r.WebsiteConfiguration){y(e.error(new Error("missing param WebsiteConfiguration")));return}var u=e.clone(r.WebsiteConfiguration||{}),v=u.RoutingRules||u.RoutingRule||[];v=e.isArray(v)?v:[v],delete u.RoutingRule,delete u.RoutingRules,v.length&&(u.RoutingRules={RoutingRule:v});var E=e.json2xml({WebsiteConfiguration:u}),w=r.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(E)),Y.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:E,action:"website",headers:w},function(D,z){if(D&&D.statusCode===204)return y(null,{statusCode:D.statusCode});if(D)return y(D);y(null,{statusCode:z.statusCode,headers:z.headers})})}function ee(r,y){Y.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:r.Bucket,Region:r.Region,Key:r.Key,headers:r.Headers,action:"website"},function(u,v){if(u){if(u.statusCode===404&&u.error.Code==="NoSuchWebsiteConfiguration"){var E={WebsiteConfiguration:{},statusCode:u.statusCode};u.headers&&(E.headers=u.headers),y(null,E)}else y(u);return}var w=v.WebsiteConfiguration||{};if(w.RoutingRules){var D=e.clone(w.RoutingRules.RoutingRule||[]);D=e.makeArray(D),w.RoutingRules=D}y(null,{WebsiteConfiguration:w,statusCode:v.statusCode,headers:v.headers})})}function re(r,y){Y.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"website"},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode,headers:v.headers})})}function de(r,y){if(!r.RefererConfiguration){y(e.error(new Error("missing param RefererConfiguration")));return}var u=e.clone(r.RefererConfiguration||{}),v=u.DomainList||{},E=v.Domains||v.Domain||[];E=e.isArray(E)?E:[E],E.length&&(u.DomainList={Domain:E});var w=e.json2xml({RefererConfiguration:u}),D=r.Headers;D["Content-Type"]="application/xml",D["Content-MD5"]=e.binaryBase64(e.md5(w)),Y.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:w,action:"referer",headers:D},function(z,se){if(z&&z.statusCode===204)return y(null,{statusCode:z.statusCode});if(z)return y(z);y(null,{statusCode:se.statusCode,headers:se.headers})})}function pe(r,y){Y.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:r.Bucket,Region:r.Region,Key:r.Key,headers:r.Headers,action:"referer"},function(u,v){if(u){if(u.statusCode===404&&u.error.Code==="NoSuchRefererConfiguration"){var E={WebsiteConfiguration:{},statusCode:u.statusCode};u.headers&&(E.headers=u.headers),y(null,E)}else y(u);return}var w=v.RefererConfiguration||{};if(w.DomainList){var D=e.makeArray(w.DomainList.Domain||[]);w.DomainList={Domains:D}}y(null,{RefererConfiguration:w,statusCode:v.statusCode,headers:v.headers})})}function W(r,y){var u=r.DomainConfiguration||{},v=u.DomainRule||r.DomainRule||[];v=e.clone(v);var E=e.json2xml({DomainConfiguration:{DomainRule:v}}),w=r.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(E)),Y.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:E,action:"domain",headers:w},function(D,z){if(D&&D.statusCode===204)return y(null,{statusCode:D.statusCode});if(D)return y(D);y(null,{statusCode:z.statusCode,headers:z.headers})})}function J(r,y){Y.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"domain"},function(u,v){if(u)return y(u);var E=[];try{E=v.DomainConfiguration.DomainRule||[]}catch{}E=e.clone(e.isArray(E)?E:[E]),y(null,{DomainRule:E,statusCode:v.statusCode,headers:v.headers})})}function ue(r,y){Y.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"domain"},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode,headers:v.headers})})}function fe(r,y){var u=r.OriginConfiguration||{},v=u.OriginRule||r.OriginRule||[];v=e.clone(v);var E=e.json2xml({OriginConfiguration:{OriginRule:v}}),w=r.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(E)),Y.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:E,action:"origin",headers:w},function(D,z){if(D&&D.statusCode===204)return y(null,{statusCode:D.statusCode});if(D)return y(D);y(null,{statusCode:z.statusCode,headers:z.headers})})}function ve(r,y){Y.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"origin"},function(u,v){if(u)return y(u);var E=[];try{E=v.OriginConfiguration.OriginRule||[]}catch{}E=e.clone(e.isArray(E)?E:[E]),y(null,{OriginRule:E,statusCode:v.statusCode,headers:v.headers})})}function oe(r,y){Y.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"origin"},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode,headers:v.headers})})}function le(r,y){var u=e.json2xml({BucketLoggingStatus:r.BucketLoggingStatus||""}),v=r.Headers;v["Content-Type"]="application/xml",v["Content-MD5"]=e.binaryBase64(e.md5(u)),Y.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:u,action:"logging",headers:v},function(E,w){if(E&&E.statusCode===204)return y(null,{statusCode:E.statusCode});if(E)return y(E);y(null,{statusCode:w.statusCode,headers:w.headers})})}function me(r,y){Y.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"logging"},function(u,v){if(u)return y(u);y(null,{BucketLoggingStatus:v.BucketLoggingStatus,statusCode:v.statusCode,headers:v.headers})})}function xe(r,y){var u=e.clone(r.InventoryConfiguration);if(u.OptionalFields){var v=u.OptionalFields||[];u.OptionalFields={Field:v}}if(u.Destination&&u.Destination.COSBucketDestination&&u.Destination.COSBucketDestination.Encryption){var E=u.Destination.COSBucketDestination.Encryption;Object.keys(E).indexOf("SSECOS")>-1&&(E["SSE-COS"]=E.SSECOS,delete E.SSECOS)}var w=e.json2xml({InventoryConfiguration:u}),D=r.Headers;D["Content-Type"]="application/xml",D["Content-MD5"]=e.binaryBase64(e.md5(w)),Y.call(this,{Action:"name/cos:PutBucketInventory",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:w,action:"inventory",qs:{id:r.Id},headers:D},function(z,se){if(z&&z.statusCode===204)return y(null,{statusCode:z.statusCode});if(z)return y(z);y(null,{statusCode:se.statusCode,headers:se.headers})})}function ye(r,y){Y.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"inventory",qs:{id:r.Id}},function(u,v){if(u)return y(u);var E=v.InventoryConfiguration;if(E&&E.OptionalFields&&E.OptionalFields.Field){var w=E.OptionalFields.Field;e.isArray(w)||(w=[w]),E.OptionalFields=w}if(E.Destination&&E.Destination.COSBucketDestination&&E.Destination.COSBucketDestination.Encryption){var D=E.Destination.COSBucketDestination.Encryption;Object.keys(D).indexOf("SSE-COS")>-1&&(D.SSECOS=D["SSE-COS"],delete D["SSE-COS"])}y(null,{InventoryConfiguration:E,statusCode:v.statusCode,headers:v.headers})})}function Se(r,y){Y.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"inventory",qs:{"continuation-token":r.ContinuationToken}},function(u,v){if(u)return y(u);var E=v.ListInventoryConfigurationResult,w=E.InventoryConfiguration||[];w=e.isArray(w)?w:[w],delete E.InventoryConfiguration,e.each(w,function(D){if(D&&D.OptionalFields&&D.OptionalFields.Field){var z=D.OptionalFields.Field;e.isArray(z)||(z=[z]),D.OptionalFields=z}if(D.Destination&&D.Destination.COSBucketDestination&&D.Destination.COSBucketDestination.Encryption){var se=D.Destination.COSBucketDestination.Encryption;Object.keys(se).indexOf("SSE-COS")>-1&&(se.SSECOS=se["SSE-COS"],delete se["SSE-COS"])}}),E.InventoryConfigurations=w,e.extend(E,{statusCode:v.statusCode,headers:v.headers}),y(null,E)})}function ke(r,y){Y.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"inventory",qs:{id:r.Id}},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode,headers:v.headers})})}function _e(r,y){if(!r.AccelerateConfiguration){y(e.error(new Error("missing param AccelerateConfiguration")));return}var u={AccelerateConfiguration:r.AccelerateConfiguration||{}},v=e.json2xml(u),E={};E["Content-Type"]="application/xml",E["Content-MD5"]=e.binaryBase64(e.md5(v)),Y.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:v,action:"accelerate",headers:E},function(w,D){if(w)return y(w);y(null,{statusCode:D.statusCode,headers:D.headers})})}function Ae(r,y){Y.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:r.Bucket,Region:r.Region,action:"accelerate"},function(u,v){u||!v.AccelerateConfiguration&&(v.AccelerateConfiguration={}),y(u,v)})}function Pe(r,y){var u=r.ServerSideEncryptionConfiguration||{},v=u.Rule||u.Rules||[],E=e.json2xml({ServerSideEncryptionConfiguration:{Rule:v}}),w=r.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(E)),Y.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:r.Bucket,Region:r.Region,body:E,action:"encryption",headers:w},function(D,z){if(D&&D.statusCode===204)return y(null,{statusCode:D.statusCode});if(D)return y(D);y(null,{statusCode:z.statusCode,headers:z.headers})})}function Oe(r,y){Y.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"encryption"},function(u,v){if(u){if(u.statusCode===404&&u.code==="NoSuchEncryptionConfiguration"){var E={EncryptionConfiguration:{Rules:[]},statusCode:u.statusCode};u.headers&&(E.headers=u.headers),y(null,E)}else y(u);return}var w=e.makeArray(v.EncryptionConfiguration&&v.EncryptionConfiguration.Rule||[]);v.EncryptionConfiguration={Rules:w},y(u,v)})}function Ie(r,y){Y.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"encryption"},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode,headers:v.headers})})}function he(r,y){Y.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:r.Bucket,Region:r.Region,Key:r.Key,VersionId:r.VersionId,headers:r.Headers},function(u,v){if(u){var E=u.statusCode;return r.Headers["If-Modified-Since"]&&E&&E===304?y(null,{NotModified:!0,statusCode:E}):y(u)}v.ETag=e.attr(v.headers,"etag",""),y(null,v)})}function H(r,y){var u={};u.prefix=r.Prefix||"",u.delimiter=r.Delimiter,u["key-marker"]=r.KeyMarker,u["version-id-marker"]=r.VersionIdMarker,u["max-keys"]=r.MaxKeys,u["encoding-type"]=r.EncodingType,Y.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:u.prefix,method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,qs:u,action:"versions"},function(v,E){if(v)return y(v);var w=E.ListVersionsResult||{},D=w.DeleteMarker||[];D=e.isArray(D)?D:[D];var z=w.Version||[];z=e.isArray(z)?z:[z];var se=e.clone(w);delete se.DeleteMarker,delete se.Version,e.extend(se,{DeleteMarkers:D,Versions:z,statusCode:E.statusCode,headers:E.headers}),y(null,se)})}function te(r,y){var u=r.Query||{},v=r.QueryString||"",E=e.throttleOnProgress.call(this,0,r.onProgress),w=r.tracker;w&&w.setParams({signStartTime:new Date().getTime()}),u["response-content-type"]=r.ResponseContentType,u["response-content-language"]=r.ResponseContentLanguage,u["response-expires"]=r.ResponseExpires,u["response-cache-control"]=r.ResponseCacheControl,u["response-content-disposition"]=r.ResponseContentDisposition,u["response-content-encoding"]=r.ResponseContentEncoding,Y.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:r.Bucket,Region:r.Region,Key:r.Key,VersionId:r.VersionId,DataType:r.DataType,headers:r.Headers,qs:u,qsStr:v,rawBody:!0,onDownloadProgress:E,tracker:w},function(D,z){if(E(null,!0),D){var se=D.statusCode;return r.Headers["If-Modified-Since"]&&se&&se===304?y(null,{NotModified:!0}):y(D)}y(null,{Body:z.body,ETag:e.attr(z.headers,"etag",""),statusCode:z.statusCode,headers:z.headers})})}function m(r,y){var u=this,v=r.ContentLength,E=e.throttleOnProgress.call(u,v,r.onProgress),w=r.Headers;!w["Cache-Control"]&&!w["cache-control"]&&(w["Cache-Control"]=""),!w["Content-Type"]&&!w["content-type"]&&(w["Content-Type"]=r.Body&&r.Body.type||"");var D=r.UploadAddMetaMd5||u.options.UploadAddMetaMd5||u.options.UploadCheckContentMd5,z=r.tracker;D&&z&&z.setParams({md5StartTime:new Date().getTime()}),e.getBodyMd5(D,r.Body,function(se){se&&(z&&z.setParams({md5EndTime:new Date().getTime()}),u.options.UploadCheckContentMd5&&(w["Content-MD5"]=e.binaryBase64(se)),(r.UploadAddMetaMd5||u.options.UploadAddMetaMd5)&&(w["x-cos-meta-md5"]=se)),r.ContentLength!==void 0&&(w["Content-Length"]=r.ContentLength),E(null,!0),Y.call(u,{Action:"name/cos:PutObject",TaskId:r.TaskId,method:"PUT",Bucket:r.Bucket,Region:r.Region,Key:r.Key,headers:r.Headers,qs:r.Query,body:r.Body,onProgress:E,tracker:z},function(we,Ee){if(we)return E(null,!0),y(we);E({loaded:v,total:v},!0);var be=c({ForcePathStyle:u.options.ForcePathStyle,protocol:u.options.Protocol,domain:u.options.Domain,bucket:r.Bucket,region:u.options.UseAccelerate?"accelerate":r.Region,object:r.Key});be=be.substr(be.indexOf("://")+3),Ee.Location=be,Ee.ETag=e.attr(Ee.headers,"etag",""),y(null,Ee)})},r.onHashProgress)}function l(r,y){Y.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:r.Bucket,Region:r.Region,Key:r.Key,headers:r.Headers,VersionId:r.VersionId,action:r.Recursive?"recursive":""},function(u,v){if(u){var E=u.statusCode;return E&&E===404?y(null,{BucketNotFound:!0,statusCode:E}):y(u)}y(null,{statusCode:v.statusCode,headers:v.headers})})}function h(r,y){var u={};r.VersionId&&(u.versionId=r.VersionId),Y.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:r.Bucket,Region:r.Region,Key:r.Key,headers:r.Headers,qs:u,action:"acl"},function(v,E){if(v)return y(v);var w=E.AccessControlPolicy||{},D=w.Owner||{},z=w.AccessControlList&&w.AccessControlList.Grant||[];z=e.isArray(z)?z:[z];var se=tt(w);delete se.GrantWrite,E.headers&&E.headers["x-cos-acl"]&&(se.ACL=E.headers["x-cos-acl"]),se=e.extend(se,{Owner:D,Grants:z,statusCode:E.statusCode,headers:E.headers}),y(null,se)})}function d(r,y){var u=r.Headers,v="";if(r.AccessControlPolicy){var E=e.clone(r.AccessControlPolicy||{}),w=E.Grants||E.Grant;w=e.isArray(w)?w:[w],delete E.Grant,delete E.Grants,E.AccessControlList={Grant:w},v=e.json2xml({AccessControlPolicy:E}),u["Content-Type"]="application/xml",u["Content-MD5"]=e.binaryBase64(e.md5(v))}e.each(u,function(D,z){z.indexOf("x-cos-grant-")===0&&(u[z]=Ye(u[z]))}),Y.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:r.Bucket,Region:r.Region,Key:r.Key,action:"acl",headers:u,body:v},function(D,z){if(D)return y(D);y(null,{statusCode:z.statusCode,headers:z.headers})})}function k(r,y){var u=r.Headers;u.Origin=r.Origin,u["Access-Control-Request-Method"]=r.AccessControlRequestMethod,u["Access-Control-Request-Headers"]=r.AccessControlRequestHeaders,Y.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:r.Bucket,Region:r.Region,Key:r.Key,headers:u},function(v,E){if(v)return v.statusCode&&v.statusCode===403?y(null,{OptionsForbidden:!0,statusCode:v.statusCode}):y(v);var w=E.headers||{};y(null,{AccessControlAllowOrigin:w["access-control-allow-origin"],AccessControlAllowMethods:w["access-control-allow-methods"],AccessControlAllowHeaders:w["access-control-allow-headers"],AccessControlExposeHeaders:w["access-control-expose-headers"],AccessControlMaxAge:w["access-control-max-age"],statusCode:E.statusCode,headers:E.headers})})}function M(r,y){var u=this,v=r.Headers;!v["Cache-Control"]&&!v["cache-control"]&&(v["Cache-Control"]="");var E=r.CopySource||"",w=e.getSourceParams.call(this,E);if(!w){y(e.error(new Error("CopySource format error")));return}var D=w.Bucket,z=w.Region,se=decodeURIComponent(w.Key);Y.call(this,{Scope:[{action:"name/cos:GetObject",bucket:D,region:z,prefix:se},{action:"name/cos:PutObject",bucket:r.Bucket,region:r.Region,prefix:r.Key}],method:"PUT",Bucket:r.Bucket,Region:r.Region,Key:r.Key,VersionId:r.VersionId,headers:r.Headers},function(we,Ee){if(we)return y(we);var be=e.clone(Ee.CopyObjectResult||{}),Re=c({ForcePathStyle:u.options.ForcePathStyle,protocol:u.options.Protocol,domain:u.options.Domain,bucket:r.Bucket,region:r.Region,object:r.Key,isLocation:!0});e.extend(be,{Location:Re,statusCode:Ee.statusCode,headers:Ee.headers}),y(null,be)})}function G(r,y){var u=r.CopySource||"",v=e.getSourceParams.call(this,u);if(!v){y(e.error(new Error("CopySource format error")));return}var E=v.Bucket,w=v.Region,D=decodeURIComponent(v.Key);Y.call(this,{Scope:[{action:"name/cos:GetObject",bucket:E,region:w,prefix:D},{action:"name/cos:PutObject",bucket:r.Bucket,region:r.Region,prefix:r.Key}],method:"PUT",Bucket:r.Bucket,Region:r.Region,Key:r.Key,VersionId:r.VersionId,qs:{partNumber:r.PartNumber,uploadId:r.UploadId},headers:r.Headers},function(z,se){if(z)return y(z);var we=e.clone(se.CopyPartResult||{});e.extend(we,{statusCode:se.statusCode,headers:se.headers}),y(null,we)})}function ae(r,y){var u=r.Objects||[],v=r.Quiet;u=e.isArray(u)?u:[u];var E=e.json2xml({Delete:{Object:u,Quiet:v||!1}}),w=r.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(E));var D=e.map(u,function(z){return{action:"name/cos:DeleteObject",bucket:r.Bucket,region:r.Region,prefix:z.Key}});Y.call(this,{Scope:D,method:"POST",Bucket:r.Bucket,Region:r.Region,body:E,action:"delete",headers:w},function(z,se){if(z)return y(z);var we=se.DeleteResult||{},Ee=we.Deleted||[],be=we.Error||[];Ee=e.isArray(Ee)?Ee:[Ee],be=e.isArray(be)?be:[be];var Re=e.clone(we);e.extend(Re,{Error:be,Deleted:Ee,statusCode:se.statusCode,headers:se.headers}),y(null,Re)})}function ge(r,y){var u=r.Headers;if(!r.RestoreRequest){y(e.error(new Error("missing param RestoreRequest")));return}var v=r.RestoreRequest||{},E=e.json2xml({RestoreRequest:v});u["Content-Type"]="application/xml",u["Content-MD5"]=e.binaryBase64(e.md5(E)),Y.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:r.Bucket,Region:r.Region,Key:r.Key,VersionId:r.VersionId,body:E,action:"restore",headers:u},y)}function Ce(r,y){var u=r.Tagging||{},v=u.TagSet||u.Tags||r.Tags||[];v=e.clone(e.isArray(v)?v:[v]);var E=e.json2xml({Tagging:{TagSet:{Tag:v}}}),w=r.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(E)),Y.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:r.Bucket,Key:r.Key,Region:r.Region,body:E,action:"tagging",headers:w,VersionId:r.VersionId},function(D,z){if(D&&D.statusCode===204)return y(null,{statusCode:D.statusCode});if(D)return y(D);y(null,{statusCode:z.statusCode,headers:z.headers})})}function ce(r,y){Y.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:r.Key,Bucket:r.Bucket,Region:r.Region,headers:r.Headers,action:"tagging",VersionId:r.VersionId},function(u,v){if(u){if(u.statusCode===404&&u.error&&(u.error==="Not Found"||u.error.Code==="NoSuchTagSet")){var E={Tags:[],statusCode:u.statusCode};u.headers&&(E.headers=u.headers),y(null,E)}else y(u);return}var w=[];try{w=v.Tagging.TagSet.Tag||[]}catch{}w=e.clone(e.isArray(w)?w:[w]),y(null,{Tags:w,statusCode:v.statusCode,headers:v.headers})})}function De(r,y){Y.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:r.Bucket,Region:r.Region,Key:r.Key,headers:r.Headers,action:"tagging",VersionId:r.VersionId},function(u,v){if(u&&u.statusCode===204)return y(null,{statusCode:u.statusCode});if(u)return y(u);y(null,{statusCode:v.statusCode,headers:v.headers})})}function Te(r,y){var u=r.SelectType;if(!u)return y(e.error(new Error("missing param SelectType")));var v=r.SelectRequest||{},E=e.json2xml({SelectRequest:v}),w=r.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(E)),Y.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:r.Bucket,Region:r.Region,Key:r.Key,headers:r.Headers,action:"select",qs:{"select-type":r.SelectType},VersionId:r.VersionId,body:E,DataType:"arraybuffer",rawBody:!0},function(D,z){if(D&&D.statusCode===204)return y(null,{statusCode:D.statusCode});if(D)return y(D);var se=e.parseSelectPayload(z.body);y(null,{statusCode:z.statusCode,headers:z.headers,Body:se.body,Payload:se.payload})})}function Fe(r,y){var u=this,v=r.Headers,E=r.tracker;!v["Cache-Control"]&&!v["cache-control"]&&(v["Cache-Control"]=""),!v["Content-Type"]&&!v["content-type"]&&(v["Content-Type"]=r.Body&&r.Body.type||"");var w=r.Body&&(r.UploadAddMetaMd5||u.options.UploadAddMetaMd5);w&&E&&E.setParams({md5StartTime:new Date().getTime()}),e.getBodyMd5(w,r.Body,function(D){D&&(r.Headers["x-cos-meta-md5"]=D),w&&E&&E.setParams({md5EndTime:new Date().getTime()}),Y.call(u,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:r.Bucket,Region:r.Region,Key:r.Key,action:"uploads",headers:r.Headers,qs:r.Query,tracker:E},function(z,se){if(z)return E&&E.parent&&E.parent.setParams({errorNode:"multipartInit"}),y(z);if(se=e.clone(se||{}),se&&se.InitiateMultipartUploadResult)return y(null,e.extend(se.InitiateMultipartUploadResult,{statusCode:se.statusCode,headers:se.headers}));y(null,se)})},r.onHashProgress)}function He(r,y){var u=this;e.getFileSize("multipartUpload",r,function(){var v=r.tracker,E=u.options.UploadCheckContentMd5;E&&v&&v.setParams({md5StartTime:new Date().getTime()}),e.getBodyMd5(E,r.Body,function(w){w&&(r.Headers["Content-MD5"]=e.binaryBase64(w)),E&&v&&v.setParams({md5EndTime:new Date().getTime()}),v&&v.setParams({partNumber:r.PartNumber}),Y.call(u,{Action:"name/cos:UploadPart",TaskId:r.TaskId,method:"PUT",Bucket:r.Bucket,Region:r.Region,Key:r.Key,qs:{partNumber:r.PartNumber,uploadId:r.UploadId},headers:r.Headers,onProgress:r.onProgress,body:r.Body||null,tracker:v},function(D,z){if(D)return v&&v.parent&&v.parent.setParams({errorNode:"multipartUpload"}),y(D);y(null,{ETag:e.attr(z.headers,"etag",""),statusCode:z.statusCode,headers:z.headers})})})})}function $e(r,y){for(var u=this,v=r.UploadId,E=r.Parts,w=r.tracker,D=0,z=E.length;D<z;D++)E[D].ETag&&E[D].ETag.indexOf('"')===0||(E[D].ETag='"'+E[D].ETag+'"');var se=e.json2xml({CompleteMultipartUpload:{Part:E}});se=se.replace(/\n\s*/g,"");var we=r.Headers;we["Content-Type"]="application/xml",we["Content-MD5"]=e.binaryBase64(e.md5(se)),Y.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:r.Bucket,Region:r.Region,Key:r.Key,qs:{uploadId:v},body:se,headers:we,tracker:w},function(Ee,be){if(Ee)return w&&w.parent&&w.parent.setParams({errorNode:"multipartComplete"}),y(Ee);var Re=c({ForcePathStyle:u.options.ForcePathStyle,protocol:u.options.Protocol,domain:u.options.Domain,bucket:r.Bucket,region:r.Region,object:r.Key,isLocation:!0}),je=be.CompleteMultipartUploadResult||{};je.ProcessResults&&je&&je.ProcessResults&&(je.UploadResult={OriginalInfo:{Key:je.Key,Location:Re,ETag:je.ETag,ImageInfo:je.ImageInfo},ProcessResults:je.ProcessResults},delete je.ImageInfo,delete je.ProcessResults);var Qe=e.extend(je,{Location:Re,statusCode:be.statusCode,headers:be.headers});y(null,Qe)})}function Ve(r,y){var u={};u.delimiter=r.Delimiter,u["encoding-type"]=r.EncodingType,u.prefix=r.Prefix||"",u["max-uploads"]=r.MaxUploads,u["key-marker"]=r.KeyMarker,u["upload-id-marker"]=r.UploadIdMarker,u=e.clearKey(u);var v=r.tracker;v&&v.setParams({signStartTime:new Date().getTime()}),Y.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:u.prefix,method:"GET",Bucket:r.Bucket,Region:r.Region,headers:r.Headers,qs:u,action:"uploads",tracker:v},function(E,w){if(E)return v&&v.parent&&v.parent.setParams({errorNode:"multipartList"}),y(E);if(w&&w.ListMultipartUploadsResult){var D=w.ListMultipartUploadsResult.Upload||[];D=e.isArray(D)?D:[D],w.ListMultipartUploadsResult.Upload=D}var z=e.clone(w.ListMultipartUploadsResult||{});e.extend(z,{statusCode:w.statusCode,headers:w.headers}),y(null,z)})}function We(r,y){var u={},v=r.tracker;u.uploadId=r.UploadId,u["encoding-type"]=r.EncodingType,u["max-parts"]=r.MaxParts,u["part-number-marker"]=r.PartNumberMarker,Y.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:r.Bucket,Region:r.Region,Key:r.Key,headers:r.Headers,qs:u},function(E,w){if(E)return v&&v.parent&&v.parent.setParams({errorNode:"multipartListPart"}),y(E);var D=w.ListPartsResult||{},z=D.Part||[];z=e.isArray(z)?z:[z],D.Part=z;var se=e.clone(D);e.extend(se,{statusCode:w.statusCode,headers:w.headers}),y(null,se)})}function Xe(r,y){var u={};u.uploadId=r.UploadId,Y.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:r.Bucket,Region:r.Region,Key:r.Key,headers:r.Headers,qs:u},function(v,E){if(v)return y(v);y(null,{statusCode:E.statusCode,headers:E.headers})})}function Ke(r,y){Y.call(this,{method:r.Method,Bucket:r.Bucket,Region:r.Region,Key:r.Key,action:r.Action,headers:r.Headers,qs:r.Query,body:r.Body,Url:r.Url,rawBody:r.RawBody,DataType:r.DataType},function(u,v){if(u)return y(u);v&&v.body&&(v.Body=v.body,delete v.body),y(u,v)})}function Ge(r,y){var u=r.Headers;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]=""),!u["Content-Type"]&&!u["content-type"]&&(u["Content-Type"]=r.Body&&r.Body.type||""),Y.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:r.Bucket,Region:r.Region,action:"append",Key:r.Key,body:r.Body,qs:{position:r.Position},headers:r.Headers},function(v,E){if(v)return y(v);y(null,E)})}function Je(r){var y=this;return e.getAuth({SecretId:r.SecretId||this.options.SecretId||"",SecretKey:r.SecretKey||this.options.SecretKey||"",Bucket:r.Bucket,Region:r.Region,Method:r.Method,Key:r.Key,Query:r.Query,Headers:r.Headers,Expires:r.Expires,UseRawKey:y.options.UseRawKey,SystemClockOffset:y.options.SystemClockOffset})}function it(r,y){var u=this,v=r.UseAccelerate===void 0?u.options.UseAccelerate:r.UseAccelerate,E=c({ForcePathStyle:u.options.ForcePathStyle,protocol:r.Protocol||u.options.Protocol,domain:r.Domain||u.options.Domain,bucket:r.Bucket,region:v?"accelerate":r.Region,object:r.Key}),w="";r.Query&&(w+=e.obj2str(r.Query)),r.QueryString&&(w+=(w?"&":"")+r.QueryString);var D=E;if(r.Sign!==void 0&&!r.Sign)return w&&(D+="?"+w),y(null,{Url:D}),D;var z=g.call(this,{Bucket:r.Bucket,Region:r.Region,UseAccelerate:r.UseAccelerate,Url:E}),se=U.call(this,{Action:(r.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:r.Bucket||"",Region:r.Region||"",Method:r.Method||"get",Key:r.Key,Expires:r.Expires,Headers:r.Headers,Query:r.Query,SignHost:z,ForceSignHost:r.ForceSignHost===!1?!1:u.options.ForceSignHost},function(we,Ee){if(!!y){if(we){y(we);return}var be=function(Qe){var rt=Qe.match(/q-url-param-list.*?(?=&)/g)[0],nt="q-url-param-list="+encodeURIComponent(rt.replace(/q-url-param-list=/,"")).toLowerCase(),Ze=new RegExp(rt,"g"),ot=Qe.replace(Ze,nt);return ot},Re=E;Re+="?"+(Ee.Authorization.indexOf("q-signature")>-1?be(Ee.Authorization):"sign="+encodeURIComponent(Ee.Authorization)),Ee.SecurityToken&&(Re+="&x-cos-security-token="+Ee.SecurityToken),Ee.ClientIP&&(Re+="&clientIP="+Ee.ClientIP),Ee.ClientUA&&(Re+="&clientUA="+Ee.ClientUA),Ee.Token&&(Re+="&token="+Ee.Token),w&&(Re+="&"+w),setTimeout(function(){y(null,{Url:Re})})}});return se?(D+="?"+se.Authorization+(se.SecurityToken?"&x-cos-security-token="+se.SecurityToken:""),w&&(D+="&"+w)):w&&(D+="?"+w),D}function tt(r){var y={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},u={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},v=r&&r.AccessControlList||{},E=v.Grant;E&&(E=e.isArray(E)?E:[E]);var w={READ:0,WRITE:0,FULL_CONTROL:0};return E&&E.length&&e.each(E,function(D){D.Grantee.ID==="qcs::cam::anyone:anyone"||D.Grantee.URI==="http://cam.qcloud.com/groups/global/AllUsers"?w[D.Permission]=1:D.Grantee.ID!==r.Owner.ID&&y[u[D.Permission]].push('id="'+D.Grantee.ID+'"')}),w.FULL_CONTROL||w.WRITE&&w.READ?y.ACL="public-read-write":w.READ?y.ACL="public-read":y.ACL="private",e.each(u,function(D){y[D]=Ye(y[D].join(","))}),y}function Ye(r){var y=r.split(","),u={},v,E;for(v=0;v<y.length;)E=y[v].trim(),u[E]?y.splice(v,1):(u[E]=!0,y[v]=E,v++);return y.join(",")}function c(r){var y=r.region||"",u=r.bucket||"",v=u.substr(0,u.lastIndexOf("-")),E=u.substr(u.lastIndexOf("-")+1),w=r.domain,D=r.object;typeof w=="function"&&(w=w({Bucket:u,Region:y})),["http","https"].includes(r.protocol)&&(r.protocol=r.protocol+":");var z=r.protocol||(e.isBrowser&&location.protocol==="http:"?"http:":"https:");w||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(y)>-1?w="{Region}.myqcloud.com":w="cos.{Region}.myqcloud.com",r.ForcePathStyle||(w="{Bucket}."+w)),w=w.replace(/\{\{AppId\}\}/ig,E).replace(/\{\{Bucket\}\}/ig,v).replace(/\{\{Region\}\}/ig,y).replace(/\{\{.*?\}\}/ig,""),w=w.replace(/\{AppId\}/ig,E).replace(/\{BucketName\}/ig,v).replace(/\{Bucket\}/ig,u).replace(/\{Region\}/ig,y).replace(/\{.*?\}/ig,""),/^[a-zA-Z]+:\/\//.test(w)||(w=z+"//"+w),w.slice(-1)==="/"&&(w=w.slice(0,-1));var se=w;return r.ForcePathStyle&&(se+="/"+u),se+="/",D&&(se+=e.camSafeUrlEncode(D).replace(/%2F/g,"/")),r.isLocation&&(se=se.replace(/^https?:\/\//,"")),se}var g=function(y){if(!y.Bucket||!y.Region)return"";var u=y.UseAccelerate===void 0?this.options.UseAccelerate:y.UseAccelerate,v=y.Url||c({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:y.Bucket,region:u?"accelerate":y.Region}),E=v.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1"),w=new RegExp("^([a-z\\d-]+-\\d+\\.)?(cos|cosv6|ci|pic)\\.([a-z\\d-]+)\\.myqcloud\\.com$");return w.test(E)?E:""};function U(r,y){var u=e.clone(r.Headers),v="";e.each(u,function(Ue,Ne){(Ue===""||["content-type","cache-control","expires"].indexOf(Ne.toLowerCase())>-1)&&delete u[Ne],Ne.toLowerCase()==="host"&&(v=Ue)});var E=r.ForceSignHost!==!1;!v&&r.SignHost&&E&&(u.Host=r.SignHost);var w=!1,D=function(Ne,Le){w||(w=!0,Le&&Le.XCosSecurityToken&&!Le.SecurityToken&&(Le=e.clone(Le),Le.SecurityToken=Le.XCosSecurityToken,delete Le.XCosSecurityToken),y&&y(Ne,Le))},z=this,se=r.Bucket||"",we=r.Region||"",Ee=r.Key||"";z.options.ForcePathStyle&&se&&(Ee=se+"/"+Ee);var be="/"+Ee,Re={},je=r.Scope;if(!je){var Qe=r.Action||"",rt=r.ResourceKey||r.Key||"";je=r.Scope||[{action:Qe,bucket:se,region:we,prefix:rt}]}var nt=e.md5(JSON.stringify(je));z._StsCache=z._StsCache||[],function(){var Ue,Ne;for(Ue=z._StsCache.length-1;Ue>=0;Ue--){Ne=z._StsCache[Ue];var Le=Math.round(e.getSkewTime(z.options.SystemClockOffset)/1e3)+30;if(Ne.StartTime&&Le<Ne.StartTime||Le>=Ne.ExpiredTime){z._StsCache.splice(Ue,1);continue}if(!Ne.ScopeLimit||Ne.ScopeLimit&&Ne.ScopeKey===nt){Re=Ne;break}}}();var Ze=function(){var Ne="";Re.StartTime&&r.Expires?Ne=Re.StartTime+";"+(Re.StartTime+r.Expires*1):Re.StartTime&&Re.ExpiredTime&&(Ne=Re.StartTime+";"+Re.ExpiredTime);var Le=e.getAuth({SecretId:Re.TmpSecretId,SecretKey:Re.TmpSecretKey,Method:r.Method,Pathname:be,Query:r.Query,Headers:u,Expires:r.Expires,UseRawKey:z.options.UseRawKey,SystemClockOffset:z.options.SystemClockOffset,KeyTime:Ne,ForceSignHost:E}),ze={Authorization:Le,SecurityToken:Re.SecurityToken||Re.XCosSecurityToken||"",Token:Re.Token||"",ClientIP:Re.ClientIP||"",ClientUA:Re.ClientUA||""};D(null,ze)},ot=function(Ne){if(Ne.Authorization){var Le=!1,ze=Ne.Authorization;if(ze)if(ze.indexOf(" ")>-1)Le=!1;else if(ze.indexOf("q-sign-algorithm=")>-1&&ze.indexOf("q-ak=")>-1&&ze.indexOf("q-sign-time=")>-1&&ze.indexOf("q-key-time=")>-1&&ze.indexOf("q-url-param-list=")>-1)Le=!0;else try{ze=atob(ze),ze.indexOf("a=")>-1&&ze.indexOf("k=")>-1&&ze.indexOf("t=")>-1&&ze.indexOf("r=")>-1&&ze.indexOf("b=")>-1&&(Le=!0)}catch{}if(!Le)return e.error(new Error("getAuthorization callback params format error"))}else{if(!Ne.TmpSecretId)return e.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!Ne.TmpSecretKey)return e.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!Ne.SecurityToken&&!Ne.XCosSecurityToken)return e.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!Ne.ExpiredTime)return e.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(Ne.ExpiredTime&&Ne.ExpiredTime.toString().length!==10)return e.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(Ne.StartTime&&Ne.StartTime.toString().length!==10)return e.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(Re.ExpiredTime&&Re.ExpiredTime-e.getSkewTime(z.options.SystemClockOffset)/1e3>60)Ze();else if(z.options.getAuthorization)z.options.getAuthorization.call(z,{Bucket:se,Region:we,Method:r.Method,Key:Ee,Pathname:be,Query:r.Query,Headers:u,Scope:je,SystemClockOffset:z.options.SystemClockOffset,ForceSignHost:E},function(Ue){typeof Ue=="string"&&(Ue={Authorization:Ue});var Ne=ot(Ue);if(Ne)return D(Ne);Ue.Authorization?D(null,Ue):(Re=Ue||{},Re.Scope=je,Re.ScopeKey=nt,z._StsCache.push(Re),Ze())});else if(z.options.getSTS)z.options.getSTS.call(z,{Bucket:se,Region:we},function(Ue){Re=Ue||{},Re.Scope=je,Re.ScopeKey=nt,Re.TmpSecretId||(Re.TmpSecretId=Re.SecretId),Re.TmpSecretKey||(Re.TmpSecretKey=Re.SecretKey);var Ne=ot(Re);if(Ne)return D(Ne);z._StsCache.push(Re),Ze()});else return function(){var Ue=e.getAuth({SecretId:r.SecretId||z.options.SecretId,SecretKey:r.SecretKey||z.options.SecretKey,Method:r.Method,Pathname:be,Query:r.Query,Headers:u,Expires:r.Expires,UseRawKey:z.options.UseRawKey,SystemClockOffset:z.options.SystemClockOffset,ForceSignHost:E}),Ne={Authorization:Ue,SecurityToken:z.options.SecurityToken||z.options.XCosSecurityToken};return D(null,Ne),Ne}();return""}function ne(r){var y=!1,u=!1,v=r.headers&&(r.headers.date||r.headers.Date)||r.error&&r.error.ServerTime;try{var E=r.error.Code,w=r.error.Message;(E==="RequestTimeTooSkewed"||E==="AccessDenied"&&w==="Request has expired")&&(u=!0)}catch{}if(r)if(u&&v){var D=Date.parse(v);this.options.CorrectClockSkew&&Math.abs(e.getSkewTime(this.options.SystemClockOffset)-D)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=D-Date.now(),y=!0)}else Math.floor(r.statusCode/100)===5&&(y=!0);return y}function Y(r,y){var u=this;!r.headers&&(r.headers={}),!r.qs&&(r.qs={}),r.VersionId&&(r.qs.versionId=r.VersionId),r.qs=e.clearKey(r.qs),r.headers&&(r.headers=e.clearKey(r.headers)),r.qs&&(r.qs=e.clearKey(r.qs));var v=e.clone(r.qs);r.action&&(v[r.action]="");var E=r.url||r.Url,w=r.SignHost||g.call(this,{Bucket:r.Bucket,Region:r.Region,Url:E}),D=r.tracker,z=function se(we){var Ee=u.options.SystemClockOffset;D&&D.setParams({signStartTime:new Date().getTime(),retryTimes:we-1}),U.call(u,{Bucket:r.Bucket||"",Region:r.Region||"",Method:r.method,Key:r.Key,Query:v,Headers:r.headers,SignHost:w,Action:r.Action,ResourceKey:r.ResourceKey,Scope:r.Scope,ForceSignHost:u.options.ForceSignHost},function(be,Re){if(be){y(be);return}D&&D.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),r.AuthData=Re,Be.call(u,r,function(je,Qe){D&&D.setParams({httpEndTime:new Date().getTime()}),je&&we<2&&(Ee!==u.options.SystemClockOffset||ne.call(u,je))?(r.headers&&(delete r.headers.Authorization,delete r.headers.token,delete r.headers.clientIP,delete r.headers.clientUA,r.headers["x-cos-security-token"]&&delete r.headers["x-cos-security-token"],r.headers["x-ci-security-token"]&&delete r.headers["x-ci-security-token"]),se(we+1)):y(je,Qe)})})};z(1)}function Be(r,y){var u=this,v=r.TaskId;if(!(v&&!u._isRunningTask(v))){var E=r.Bucket,w=r.Region,D=r.Key,z=r.method||"GET",se=r.Url||r.url,we=r.body,Ee=r.rawBody;u.options.UseAccelerate&&(w="accelerate"),se=se||c({ForcePathStyle:u.options.ForcePathStyle,protocol:u.options.Protocol,domain:u.options.Domain,bucket:E,region:w,object:D}),r.action&&(se=se+"?"+(e.isIOS_QQ?"".concat(r.action,"="):r.action)),r.qsStr&&(se.indexOf("?")>-1?se=se+"&"+r.qsStr:se=se+"?"+r.qsStr);var be={method:z,url:se,headers:r.headers,qs:r.qs,body:we},Re="x-cos-security-token";if(e.isCIHost(se)&&(Re="x-ci-security-token"),be.headers.Authorization=r.AuthData.Authorization,r.AuthData.Token&&(be.headers.token=r.AuthData.Token),r.AuthData.ClientIP&&(be.headers.clientIP=r.AuthData.ClientIP),r.AuthData.ClientUA&&(be.headers.clientUA=r.AuthData.ClientUA),r.AuthData.SecurityToken&&(be.headers[Re]=r.AuthData.SecurityToken),be.headers&&(be.headers=e.clearKey(be.headers)),be=e.clearKey(be),r.onProgress&&typeof r.onProgress=="function"){var je=we&&(we.size||we.length)||0;be.onProgress=function(Ue){if(!(v&&!u._isRunningTask(v))){var Ne=Ue?Ue.loaded:0;r.onProgress({loaded:Ne,total:je})}}}r.onDownloadProgress&&(be.onDownloadProgress=r.onDownloadProgress),r.DataType&&(be.dataType=r.DataType),this.options.Timeout&&(be.timeout=this.options.Timeout),u.options.ForcePathStyle&&(be.pathStyle=u.options.ForcePathStyle),u.emit("before-send",be);var Qe=be.url.includes("accelerate."),rt=be.qs?Object.keys(be.qs).map(function(Ue){return"".concat(Ue,"=").concat(be.qs[Ue])}).join("&"):"",nt=rt?be.url+"?"+rt:be.url;r.tracker&&r.tracker.setParams({reqUrl:nt,accelerate:Qe?"Y":"N"}),r.tracker&&r.tracker.parent&&r.tracker.parent.setParams({reqUrl:nt,accelerate:Qe?"Y":"N"});var Ze=(u.options.Request||a)(be,function(Ue){if(!(Ue&&Ue.error==="abort")){var Ne={options:be,error:Ue&&Ue.error,statusCode:Ue&&Ue.statusCode||0,statusMessage:Ue&&Ue.statusMessage||"",headers:Ue&&Ue.headers||{},body:Ue&&Ue.body};u.emit("after-receive",Ne);var Le=Ne.error,ze=Ne.body,et={statusCode:Ne.statusCode,statusMessage:Ne.statusMessage,headers:Ne.headers},ht,st=function(lt,ft){if(v&&u.off("inner-kill-task",ot),!ht){ht=!0;var dt={};et&&et.statusCode&&(dt.statusCode=et.statusCode),et&&et.headers&&(dt.headers=et.headers),lt?(lt=e.extend(lt||{},dt),y(lt,null)):(ft=e.extend(ft||{},dt),y(null,ft)),Ze=null}};if(Le)return st(e.error(Le));var ut=et.statusCode,pt=Math.floor(ut/100)===2;if(Ee&&pt)return st(null,{body:ze});var at;try{at=ze&&ze.indexOf("<")>-1&&ze.indexOf(">")>-1&&e.xml2json(ze)||{}}catch{at={}}var ct=at&&at.Error;pt?st(null,at):ct?st(e.error(new Error(ct.Message),{code:ct.Code,error:ct})):ut?st(e.error(new Error(et.statusMessage),{code:""+ut})):ut&&st(e.error(new Error("statusCode error")))}}),ot=function Ue(Ne){Ne.TaskId===v&&(Ze&&Ze.abort&&Ze.abort(),u.off("inner-kill-task",Ue))};v&&u.on("inner-kill-task",ot)}}var Me={getService:_,putBucket:p,headBucket:O,getBucket:b,deleteBucket:S,putBucketAcl:A,getBucketAcl:F,putBucketCors:j,getBucketCors:L,deleteBucketCors:P,getBucketLocation:N,getBucketPolicy:B,putBucketPolicy:T,deleteBucketPolicy:V,putBucketTagging:R,getBucketTagging:x,deleteBucketTagging:C,putBucketLifecycle:Z,getBucketLifecycle:f,deleteBucketLifecycle:$,putBucketVersioning:X,getBucketVersioning:K,putBucketReplication:ie,getBucketReplication:I,deleteBucketReplication:q,putBucketWebsite:Q,getBucketWebsite:ee,deleteBucketWebsite:re,putBucketReferer:de,getBucketReferer:pe,putBucketDomain:W,getBucketDomain:J,deleteBucketDomain:ue,putBucketOrigin:fe,getBucketOrigin:ve,deleteBucketOrigin:oe,putBucketLogging:le,getBucketLogging:me,putBucketInventory:xe,getBucketInventory:ye,listBucketInventory:Se,deleteBucketInventory:ke,putBucketAccelerate:_e,getBucketAccelerate:Ae,putBucketEncryption:Pe,getBucketEncryption:Oe,deleteBucketEncryption:Ie,getObject:te,headObject:he,listObjectVersions:H,putObject:m,deleteObject:l,getObjectAcl:h,putObjectAcl:d,optionsObject:k,putObjectCopy:M,deleteMultipleObject:ae,restoreObject:ge,putObjectTagging:Ce,getObjectTagging:ce,deleteObjectTagging:De,selectObjectContent:Te,appendObject:Ge,uploadPartCopy:G,multipartInit:Fe,multipartUpload:He,multipartComplete:$e,multipartList:Ve,multipartListPart:We,multipartAbort:Xe,request:Ke,getObjectUrl:it,getAuth:Je};function qe(r,y,u){e.each(["Cors","Acl"],function(v){if(r.slice(-v.length)===v){var E=r.slice(0,-v.length)+v.toUpperCase(),w=e.apiWrapper(r,y),D=!1;u[E]=function(){!D&&console.warn("warning: cos."+E+" has been deprecated. Please Use cos."+r+" instead."),D=!0,w.apply(this,arguments)}}})}n.exports.init=function(r,y){y.transferToTaskMethod(Me,"putObject"),e.each(Me,function(u,v){r.prototype[v]=e.apiWrapper(v,u),qe(v,u,r.prototype)})}},"./src/cos.js":function(n,s,o){var a=o("./src/util.js"),e=o("./src/event.js"),_=o("./src/task.js"),p=o("./src/base.js"),O=o("./src/advance.js"),b=o("./package.json"),S={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,EnableTracker:!1,DeepTracker:!1,TrackerDelay:5e3,CustomId:""},A=function(j){this.options=a.extend(a.clone(S),j||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1&&(console.error("error: SecretId\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1&&(console.error("error: SecretKey\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5"),console.error("error: SecretKey format is incorrect. Please check")),a.isNode()&&(console.warn("warning: cos-js-sdk-v5 \u4E0D\u652F\u6301 nodejs \u73AF\u5883\u4F7F\u7528\uFF0C\u8BF7\u6539\u7528 cos-nodejs-sdk-v5\uFF0C\u53C2\u8003\u6587\u6863\uFF1A https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),e.init(this),_.init(this)};p.init(A,_),O.init(A,_),A.util={md5:a.md5,xml2json:a.xml2json,json2xml:a.json2xml},A.getAuthorization=a.getAuth,A.version=b.version,n.exports=A},"./src/event.js":function(n,s){var o=function(_){var p={},O=function(S){return!p[S]&&(p[S]=[]),p[S]};_.on=function(b,S){b==="task-list-update"&&console.warn('warning: Event "'+b+'" has been deprecated. Please use "list-update" instead.'),O(b).push(S)},_.off=function(b,S){for(var A=O(b),F=A.length-1;F>=0;F--)S===A[F]&&A.splice(F,1)},_.emit=function(b,S){for(var A=O(b).map(function(j){return j}),F=0;F<A.length;F++)A[F](S)}},a=function(){o(this)};n.exports.init=o,n.exports.EventProxy=a},"./src/session.js":function(n,s,o){var a=o("./src/util.js"),e="cos_sdk_upload_cache",_=30*24*3600,p,O,b=function(){try{var P=JSON.parse(localStorage.getItem(e))}catch{}P||(P=[]),p=P},S=function(){try{p.length?localStorage.setItem(e,JSON.stringify(p)):localStorage.removeItem(e)}catch{}},A=function(){if(!p){b.call(this);for(var P=!1,N=Math.round(Date.now()/1e3),T=p.length-1;T>=0;T--){var B=p[T][2];(!B||B+_<N)&&(p.splice(T,1),P=!0)}P&&S()}},F=function(){O||(O=setTimeout(function(){S(),O=null},400))},j={using:{},setUsing:function(P){j.using[P]=!0},removeUsing:function(P){delete j.using[P]},getFileId:function(P,N,T,B){return P.name&&P.size&&P.lastModifiedDate&&N?a.md5([P.name,P.size,P.lastModifiedDate,N,T,B].join("::")):null},getCopyFileId:function(P,N,T,B,V){var R=N["content-length"],x=N.etag||"",C=N["last-modified"];return P&&T?a.md5([P,R,x,C,T,B,V].join("::")):null},getUploadIdList:function(P){if(!P)return null;A.call(this);for(var N=[],T=0;T<p.length;T++)p[T][0]===P&&N.push(p[T][1]);return N.length?N:null},saveUploadId:function(P,N,T){if(A.call(this),!!P){for(var B=p.length-1;B>=0;B--){var V=p[B];V[0]===P&&V[1]===N&&p.splice(B,1)}p.unshift([P,N,Math.round(Date.now()/1e3)]),p.length>T&&p.splice(T),F()}},removeUploadId:function(P){A.call(this),delete j.using[P];for(var N=p.length-1;N>=0;N--)p[N][1]===P&&p.splice(N,1);F()}};n.exports=j},"./src/task.js":function(n,s,o){var a=o("./src/session.js"),e=o("./src/util.js"),_={},p=function(S,A){_[A]=S[A],S[A]=function(F,j){F.SkipTask?_[A].call(this,F,j):this._addTask(A,F,j)}},O=function(S){var A=[],F={},j=0,L=0,P=function(C){var Z={id:C.id,Bucket:C.Bucket,Region:C.Region,Key:C.Key,FilePath:C.FilePath,state:C.state,loaded:C.loaded,size:C.size,speed:C.speed,percent:C.percent,hashPercent:C.hashPercent,error:C.error};return C.FilePath&&(Z.FilePath=C.FilePath),C._custom&&(Z._custom=C._custom),Z},N=function(){var x,C=function(){x=0,S.emit("task-list-update",{list:e.map(A,P)}),S.emit("list-update",{list:e.map(A,P)})};return function(){x||(x=setTimeout(C))}}(),T=function(){if(!(A.length<=S.options.UploadQueueSize)){for(var C=0;C<L&&C<A.length&&A.length>S.options.UploadQueueSize;){var Z=A[C].state==="waiting"||A[C].state==="checking"||A[C].state==="uploading";!A[C]||!Z?(F[A[C].id]&&delete F[A[C].id],A.splice(C,1),L--):C++}N()}},B=function x(){if(!(j>=S.options.FileParallelLimit)){for(;A[L]&&A[L].state!=="waiting";)L++;if(!(L>=A.length)){var C=A[L];L++,j++,C.state="checking",C.params.onTaskStart&&C.params.onTaskStart(P(C)),!C.params.UploadData&&(C.params.UploadData={});var Z=e.formatParams(C.api,C.params);_[C.api].call(S,Z,function(f,$){!S._isRunningTask(C.id)||((C.state==="checking"||C.state==="uploading")&&(C.state=f?"error":"success",f&&(C.error=f),j--,N(),x(),C.callback&&C.callback(f,$),C.state==="success"&&(C.params&&(delete C.params.UploadData,delete C.params.Body,delete C.params),delete C.callback)),T())}),N(),setTimeout(x)}}},V=function(C,Z){var f=F[C];if(!!f){var $=f&&f.state==="waiting",X=f&&(f.state==="checking"||f.state==="uploading");if(Z==="canceled"&&f.state!=="canceled"||Z==="paused"&&$||Z==="paused"&&X){if(Z==="paused"&&f.params.Body&&typeof f.params.Body.pipe=="function"){console.error("stream not support pause");return}f.state=Z,S.emit("inner-kill-task",{TaskId:C,toState:Z});try{var K=f&&f.params&&f.params.UploadData.UploadId}catch{}Z==="canceled"&&K&&a.removeUsing(K),N(),X&&(j--,B()),Z==="canceled"&&(f.params&&(delete f.params.UploadData,delete f.params.Body,delete f.params),delete f.callback)}T()}};S._addTasks=function(x){e.each(x,function(C){S._addTask(C.api,C.params,C.callback,!0)}),N()};var R=!0;S._addTask=function(x,C,Z,f){C=e.formatParams(x,C);var $=e.uuid();C.TaskId=$,C.onTaskReady&&C.onTaskReady($),C.TaskReady&&(C.TaskReady($),R&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),R=!1);var X={params:C,callback:Z,api:x,index:A.length,id:$,Bucket:C.Bucket,Region:C.Region,Key:C.Key,FilePath:C.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:C._custom},K=C.onHashProgress;C.onHashProgress=function(I){!S._isRunningTask(X.id)||(X.hashPercent=I.percent,K&&K(I),N())};var ie=C.onProgress;return C.onProgress=function(I){!S._isRunningTask(X.id)||(X.state==="checking"&&(X.state="uploading"),X.loaded=I.loaded,X.speed=I.speed,X.percent=I.percent,ie&&ie(I),N())},e.getFileSize(x,C,function(I,q){if(I)return Z(e.error(I));F[$]=X,A.push(X),X.size=q,!f&&N(),B(),T()}),$},S._isRunningTask=function(x){var C=F[x];return!!(C&&(C.state==="checking"||C.state==="uploading"))},S.getTaskList=function(){return e.map(A,P)},S.cancelTask=function(x){V(x,"canceled")},S.pauseTask=function(x){V(x,"paused")},S.restartTask=function(x){var C=F[x];C&&(C.state==="paused"||C.state==="error")&&(C.state="waiting",N(),L=Math.min(L,C.index),B())},S.isUploadRunning=function(){return j||L<A.length}};n.exports.transferToTaskMethod=p,n.exports.init=O},"./src/tracker.js":function(n,s,o){var a=o("./node_modules/@babel/runtime/helpers/classCallCheck.js"),e=o("./node_modules/@babel/runtime/helpers/createClass.js"),_=o("./node_modules/@babel/runtime/helpers/typeof.js"),p=o("./package.json"),O=null,b=function(x){if(!O){var C=o("./lib/beacon.min.js");O=new C({appkey:"0AND0VEVB24UBGDU",versionCode:p.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:x,sessionDuration:60*1e3})}return O},S={getUid:function(){var x=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return x()+x()+"-"+x()+"-"+x()+"-"+x()+"-"+x()+x()+x()},getNetType:function(){if((typeof navigator=="undefined"?"undefined":_(navigator))==="object"){var x=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(x==null?void 0:x.type)||(x==null?void 0:x.effectiveType)||"unknown"}return"unknown"},getOsType:function(){if((typeof navigator=="undefined"?"undefined":_(navigator))!=="object")return"unknown os";var x=navigator.userAgent.toLowerCase(),C=/macintosh|mac os x/i.test(navigator.userAgent);return x.indexOf("win32")>=0||x.indexOf("wow32")>=0?"win32":x.indexOf("win64")>=0||x.indexOf("wow64")>=0?"win64":C?"mac":"unknown os"},isMobile:function(){var x=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator=="undefined"?"undefined":_(navigator))==="object"&&navigator.userAgent.match(x))},isAndroid:function(){var x=/(Android|Adr|Linux)/i;return!!((typeof navigator=="undefined"?"undefined":_(navigator))==="object"&&navigator.userAgent.match(x))},isIOS:function(){var x=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator=="undefined"?"undefined":_(navigator))==="object"&&navigator.userAgent.match(x))},isOtherMobile:function(){return isMobile&&!isAndroid&&!isIOS},getDeviceName:function(){if((typeof navigator=="undefined"?"undefined":_(navigator))!=="object")return"unknown device";var x=navigator.userAgent.toLowerCase();if(x.includes("app/tencent_wemeet"))return"tencent_wemeet";if(x.indexOf("maxthon")>=0){var C=x.match(/maxthon\/([\d.]+)/),Z=C&&C[1]||"";return"\u50B2\u6E38\u6D4F\u89C8\u5668 ".concat(Z).trim()}if(x.indexOf("qqbrowser")>=0){var f=x.match(/qqbrowser\/([\d.]+)/),$=f&&f[1]||"";return"QQ\u6D4F\u89C8\u5668 ".concat($).trim()}if(x.indexOf("se 2.x")>=0)return"\u641C\u72D7\u6D4F\u89C8\u5668";if(x.indexOf("wxwork")>=0)return"\u5FAE\u4FE1\u5185\u7F6E\u6D4F\u89C8\u5668";if(x.indexOf("msie")>=0){var X=x.match(/msie ([\d.]+)/),K=X&&X[1]||"";return"IE ".concat(K).trim()}if(x.indexOf("firefox")>=0){var ie=x.match(/firefox\/([\d.]+)/),I=ie&&ie[1]||"";return"Firefox ".concat(I).trim()}if(x.indexOf("chrome")>=0){var q=x.match(/chrome\/([\d.]+)/),Q=q&&q[1]||"";return"Chrome ".concat(Q).trim()}if(x.indexOf("opera")>=0){var ee=x.match(/opera.([\d.]+)/),re=ee&&ee[1]||"";return"Opera ".concat(re).trim()}if(x.indexOf("safari")>=0){var de=x.match(/version\/([\d.]+)/),pe=de&&de[1]||"";return"Safari ".concat(pe).trim()}if(x.indexOf("edge")>=0){var W=x.match(/edge\/([\d.]+)/),J=W&&W[1]||"";return"edge ".concat(J).trim()}return x.substr(0,200)}},A={isMobile:S.isMobile(),isBrowser:!S.isMobile(),mobileOsType:S.isAndroid()?"android":S.isIOS?"ios":"other_mobile",pcOsType:S.getOsType()},F={deviceType:A.isMobile?"mobile":A.isBrowser?"browser":"unknown",devicePlatform:A.isMobile?A.mobileOsType:A.pcOsType,deviceName:S.getDeviceName()},j=["multipartInit","multipartUpload","multipartComplete","multipartList","multipartListPart","multipartAbort"],L=["putObject","postObject","appendObject","sliceUploadFile","uploadFile","uploadFiles"].concat(j),P=["getObject"];function N(R){return L.includes(R)?"cos_upload":P.includes(R)?"cos_download":"base_service"}function T(R){return R.replace(/([A-Z])/g,"_$1").toLowerCase()}function B(R){var x={},C=["tracePlatform","cossdkVersion","region","networkType","host","accelerate","requestPath","size","httpMd5","httpSign","httpFull","name","result","tookTime","errorNode","errorCode","errorMessage","errorRequestId","errorStatusCode","errorServiceName","errorType","traceId","bucket","appid","partNumber","retryTimes","reqUrl","customId","fullError","deviceType","devicePlatform","deviceName"],Z=["tracePlatform","cossdkVersion","region","bucket","appid","networkType","host","accelerate","requestPath","partNumber","size","name","result","tookTime","errorRequestId","retryTimes","reqUrl","customId","deviceType","devicePlatform","deviceName"],f=R.result==="Success"?Z:C;for(var $ in R)if(!!f.includes($)){var X=T($);x[X]=R[$]}return x}var V=function(){function R(x){a(this,R);var C=x.parent,Z=x.traceId,f=x.bucket,$=x.region,X=x.apiName,K=x.fileKey,ie=x.fileSize,I=x.accelerate,q=x.customId,Q=x.delay,ee=x.deepTracker,re=f&&f.substr(f.lastIndexOf("-")+1)||"";this.parent=C,this.deepTracker=ee,this.delay=Q,this.params={cossdkVersion:p.version,region:$,networkType:"",host:"",accelerate:I?"Y":"N",requestPath:K||"",size:ie||-1,httpMd5:0,httpSign:0,httpFull:0,name:X||"",result:"",tookTime:0,errorNode:"",errorCode:"",errorMessage:"",errorRequestId:"",errorStatusCode:0,errorServiceName:"",tracePlatform:"cos-js-sdk-v5",traceId:Z||S.getUid(),bucket:f,appid:re,partNumber:0,retryTimes:0,reqUrl:"",customId:q||"",deviceType:F.deviceType,devicePlatform:F.devicePlatform,deviceName:F.deviceName,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0},this.beacon=b(Q)}return e(R,[{key:"formatResult",value:function(C,Z){var f,$,X,K,ie,I,q=new Date().getTime(),Q=q-this.params.startTime,ee=S.getNetType(),re=C?(C==null?void 0:C.code)||(C==null||(f=C.error)===null||f===void 0?void 0:f.code)||(C==null||($=C.error)===null||$===void 0?void 0:$.Code):"",de=C?(C==null?void 0:C.message)||(C==null||(X=C.error)===null||X===void 0?void 0:X.message)||(C==null||(K=C.error)===null||K===void 0?void 0:K.Message):"",pe=C?(C==null?void 0:C.resource)||(C==null||(ie=C.error)===null||ie===void 0?void 0:ie.resource)||(C==null||(I=C.error)===null||I===void 0?void 0:I.Resource):"",W=C?C==null?void 0:C.statusCode:Z.statusCode,J=C?(C==null?void 0:C.headers)&&(C==null?void 0:C.headers["x-cos-request-id"]):(Z==null?void 0:Z.headers)&&(Z==null?void 0:Z.headers["x-cos-request-id"]),ue=C?J?"Server":"Client":"";if(Object.assign(this.params,{tookTime:Q,networkType:ee,httpMd5:this.params.md5EndTime-this.params.md5StartTime,httpSign:this.params.signEndTime-this.params.signStartTime,httpFull:this.params.httpEndTime-this.params.httpStartTime,result:C?"Fail":"Success",errorType:ue,errorCode:re,errorStatusCode:W,errorMessage:de,errorServiceName:pe,errorRequestId:J}),C&&(!re||!de)&&(this.params.fullError=C?JSON.stringify(C):""),this.params.name==="getObject"&&(this.params.size=Z?Z.headers&&Z.headers["content-length"]:-1),this.params.reqUrl)try{var fe=/^http(s)?:\/\/(.*?)\//.exec(this.params.reqUrl);this.params.host=fe[2]}catch{this.params.host=this.params.reqUrl}this.sendEvents()}},{key:"setParams",value:function(C){Object.assign(this.params,C)}},{key:"sendEvents",value:function(){if(!(j.includes(this.params.name)&&!this.deepTracker)){var C=N(this.params.name),Z=B(this.params);this.beacon||(this.beacon=b(this.delay||5e3)),this.delay===0?this.beacon&&this.beacon.onDirectUserAction(C,Z):this.beacon&&this.beacon.onUserAction(C,Z)}}},{key:"generateSubTracker",value:function(C){return Object.assign(C,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay}),new R(C)}}]),R}();n.exports=V},"./src/util.js":function(n,s,o){(function(a){var e=o("./node_modules/@babel/runtime/helpers/typeof.js"),_=o("./lib/md5.js"),p=o("./lib/crypto.js"),O=o("./lib/xml2json.js"),b=o("./lib/json2xml.js"),S=o("./src/tracker.js");function A(he){return encodeURIComponent(he).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function F(he,H){var te=[];for(var m in he)he.hasOwnProperty(m)&&te.push(H?A(m).toLowerCase():m);return te.sort(function(l,h){return l=l.toLowerCase(),h=h.toLowerCase(),l===h?0:l>h?1:-1})}var j=function(H,te){var m,l,h,d=[],k=F(H);for(m=0;m<k.length;m++)l=k[m],h=H[l]===void 0||H[l]===null?"":""+H[l],l=te?A(l).toLowerCase():A(l),h=A(h)||"",d.push(l+"="+h);return d.join("&")},L=["content-disposition","content-encoding","content-length","content-md5","expect","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","response-cache-control","response-content-disposition","response-content-encoding","response-content-language","response-content-type","response-expires","transfer-encoding","versionid"],P=function(H){var te={};for(var m in H){var l=m.toLowerCase();(l.indexOf("x-cos-")>-1||L.indexOf(l)>-1)&&(te[m]=H[m])}return te},N=function(H){H=H||{};var te=H.SecretId,m=H.SecretKey,l=H.KeyTime,h=(H.method||H.Method||"get").toLowerCase(),d=I(H.Query||H.params||{}),k=P(I(H.Headers||H.headers||{})),M=H.Key||"",G;H.UseRawKey?G=H.Pathname||H.pathname||"/"+M:(G=H.Pathname||H.pathname||M,G.indexOf("/")!==0&&(G="/"+G));var ae=H.ForceSignHost!==!1;if(!k.Host&&!k.host&&H.Bucket&&H.Region&&ae&&(k.Host=H.Bucket+".cos."+H.Region+".myqcloud.com"),!te)throw new Error("missing param SecretId");if(!m)throw new Error("missing param SecretKey");var ge=Math.round(ye(H.SystemClockOffset)/1e3)-1,Ce=ge,ce=H.Expires||H.expires;ce===void 0?Ce+=900:Ce+=ce*1||0;var De="sha1",Te=te,Fe=l||ge+";"+Ce,He=l||ge+";"+Ce,$e=F(k,!0).join(";").toLowerCase(),Ve=F(d,!0).join(";").toLowerCase(),We=p.HmacSHA1(He,m).toString(),Xe=[h,G,Ie.obj2str(d,!0),Ie.obj2str(k,!0),""].join(`
`),Ke=["sha1",Fe,p.SHA1(Xe).toString(),""].join(`
`),Ge=p.HmacSHA1(Ke,We).toString(),Je=["q-sign-algorithm="+De,"q-ak="+Te,"q-sign-time="+Fe,"q-key-time="+He,"q-header-list="+$e,"q-url-param-list="+Ve,"q-signature="+Ge].join("&");return Je},T=function(H,te,m){var l=te/8,h=H.slice(m,m+l);return new Uint8Array(h).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[te](h)[0]},B=function(H,te,m,l){var h=H.slice(te,m),d="";return new Uint8Array(h).forEach(function(k){d+=String.fromCharCode(k)}),l&&(d=decodeURIComponent(escape(d))),d},V=function(H){for(var te={},m=B(H),l={records:[]};H.byteLength;){var h=T(H,32,0),d=T(H,32,4),k=h-d-16,M=0,G;for(H=H.slice(12);M<d;){var ae=T(H,8,M),ge=B(H,M+1,M+1+ae),Ce=T(H,16,M+ae+2),ce=B(H,M+ae+4,M+ae+4+Ce);te[ge]=ce,M+=ae+4+Ce}if(te[":event-type"]==="Records")G=B(H,M,M+k,!0),l.records.push(G);else if(te[":event-type"]==="Stats")G=B(H,M,M+k,!0),l.stats=Ie.xml2json(G).Stats;else if(te[":event-type"]==="error"){var De=te[":error-code"],Te=te[":error-message"],Fe=new Error(Te);Fe.message=Te,Fe.name=Fe.code=De,l.error=Fe}H=H.slice(M+k+4)}return{payload:l.records.join(""),body:m}},R=function(H){var te=this.options.CopySourceParser;if(te)return te(H);var m=H.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return m?{Bucket:m[1],Region:m[3],Key:m[7]}:null},x=function(){},C=function(H){var te={};for(var m in H)H.hasOwnProperty(m)&&H[m]!==void 0&&H[m]!==null&&(te[m]=H[m]);return te},Z=function(H,te){var m,l=new FileReader;FileReader.prototype.readAsBinaryString?(m=FileReader.prototype.readAsBinaryString,l.onload=function(){te(this.result)}):FileReader.prototype.readAsArrayBuffer?m=function(d){var k="",M=new FileReader;M.onload=function(G){for(var ae=new Uint8Array(M.result),ge=ae.byteLength,Ce=0;Ce<ge;Ce++)k+=String.fromCharCode(ae[Ce]);te(k)},M.readAsArrayBuffer(d)}:console.error("FileReader not support readAsBinaryString"),m.call(l,H)},f=function(){var he=function(m,l){m=m.split("."),l=l.split(".");for(var h=0;h<l.length;h++)if(m[h]!==l[h])return parseInt(m[h])>parseInt(l[h])?1:-1;return 0},H=function(m){if(!m)return!1;var l=(m.match(/Chrome\/([.\d]+)/)||[])[1],h=(m.match(/QBCore\/([.\d]+)/)||[])[1],d=(m.match(/QQBrowser\/([.\d]+)/)||[])[1],k=l&&he(l,"53.0.2785.116")<0&&h&&he(h,"3.53.991.400")<0&&d&&he(d,"9.0.2524.400")<=0||!1;return k};return H(typeof navigator!="undefined"&&navigator.userAgent)}(),$=function(H,te,m,l,h){var d;if(H.slice?d=H.slice(te,m):H.mozSlice?d=H.mozSlice(te,m):H.webkitSlice&&(d=H.webkitSlice(te,m)),l&&f){var k=new FileReader;k.onload=function(M){d=null,h(new Blob([k.result]))},k.readAsArrayBuffer(d)}else h(d)},X=function(H,te,m,l){m=m||x,H?typeof te=="string"?m(Ie.md5(te,!0)):Blob&&te instanceof Blob?Ie.getFileMd5(te,function(h,d){m(d)},l):m():m()},K=1024*1024,ie=function(H,te,m){var l=H.size,h=0,d=_.getCtx(),k=function M(G){if(G>=l){var ae=d.digest("hex");te(null,ae);return}var ge=Math.min(l,G+K);Ie.fileSlice(H,G,ge,!1,function(Ce){Z(Ce,function(ce){Ce=null,d=d.update(ce,!0),h+=ce.length,ce=null,m&&m({loaded:h,total:l,percent:Math.round(h/l*1e4)/1e4}),M(G+K)})})};k(0)};function I(he){return W(he,function(H){return e(H)==="object"&&H!==null?I(H):H})}function q(he,H,te){return he&&H in he?he[H]:te}function Q(he,H){return pe(H,function(te,m){he[m]=H[m]}),he}function ee(he){return he instanceof Array}function re(he,H){for(var te=!1,m=0;m<he.length;m++)if(H===he[m]){te=!0;break}return te}function de(he){return ee(he)?he:[he]}function pe(he,H){for(var te in he)he.hasOwnProperty(te)&&H(he[te],te)}function W(he,H){var te=ee(he)?[]:{};for(var m in he)he.hasOwnProperty(m)&&(te[m]=H(he[m],m));return te}function J(he,H){var te=ee(he),m=te?[]:{};for(var l in he)he.hasOwnProperty(l)&&H(he[l],l)&&(te?m.push(he[l]):m[l]=he[l]);return m}var ue=function(H){var te,m,l,h="";for(te=0,m=H.length/2;te<m;te++)l=parseInt(H[te*2]+H[te*2+1],16),h+=String.fromCharCode(l);return btoa(h)},fe=function(){var H=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return H()+H()+"-"+H()+"-"+H()+"-"+H()+"-"+H()+H()+H()},ve=function(H,te){var m=te.Bucket,l=te.Region,h=te.Key,d=this.options.Domain,k=!d||typeof d=="string"&&d.indexOf("{Bucket}")>-1,M=!d||typeof d=="string"&&d.indexOf("{Region}")>-1;if(H.indexOf("Bucket")>-1||H==="deleteMultipleObject"||H==="multipartList"||H==="listObjectVersions"){if(k&&!m)return"Bucket";if(M&&!l)return"Region"}else if(H.indexOf("Object")>-1||H.indexOf("multipart")>-1||H==="sliceUploadFile"||H==="abortUploadTask"){if(k&&!m)return"Bucket";if(M&&!l)return"Region";if(!h)return"Key"}return!1},oe=function(H,te){if(te=Q({},te),H!=="getAuth"&&H!=="getV4Auth"&&H!=="getObjectUrl"){var m=te.Headers||{};if(te&&e(te)==="object"){(function(){for(var h in te)te.hasOwnProperty(h)&&h.indexOf("x-cos-")>-1&&(m[h]=te[h])})();var l={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations"};Ie.each(l,function(h,d){te[h]!==void 0&&(m[d]=te[h])}),te.Headers=C(m)}}return te},le=function(H,te){return function(m,l){var h=this;typeof m=="function"&&(l=m,m={}),m=oe(H,m);var d;if(h.options.EnableTracker)if(m.calledBySdk==="sliceUploadFile")d=m.tracker&&m.tracker.generateSubTracker({apiName:H});else if(["uploadFile","uploadFiles"].includes(H))d=null;else{var k=-1;m.Body&&(k=typeof m.Body=="string"?m.Body.length:m.Body.size||m.Body.byteLength||-1),d=new S({bucket:m.Bucket,region:m.Region,apiName:H,fileKey:m.Key,fileSize:k,deepTracker:h.options.DeepTracker,customId:h.options.CustomId,delay:h.options.TrackerDelay})}m.tracker=d;var M=function(Te){return Te&&Te.headers&&(Te.headers["x-cos-request-id"]&&(Te.RequestId=Te.headers["x-cos-request-id"]),Te.headers["x-ci-request-id"]&&(Te.RequestId=Te.headers["x-ci-request-id"]),Te.headers["x-cos-version-id"]&&(Te.VersionId=Te.headers["x-cos-version-id"]),Te.headers["x-cos-delete-marker"]&&(Te.DeleteMarker=Te.headers["x-cos-delete-marker"])),Te},G=function(Te,Fe){d&&d.formatResult(Te,Fe),l&&l(M(Te),M(Fe))},ae=function(){if(H!=="getService"&&H!=="abortUploadTask"){var Te=ve.call(h,H,m);if(Te)return"missing param "+Te;if(m.Region){if(h.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(m.Region))return"Region format error."}else{if(m.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(m.Region))return"Region format error."}!h.options.CompatibilityMode&&m.Region.indexOf("-")===-1&&m.Region!=="yfb"&&m.Region!=="default"&&m.Region!=="accelerate"&&console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(m.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(m.Bucket))if(m.AppId)m.Bucket=m.Bucket+"-"+m.AppId;else if(h.options.AppId)m.Bucket=m.Bucket+"-"+h.options.AppId;else return'Bucket should format as "test-1250000000".';m.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete m.AppId)}!h.options.UseRawKey&&m.Key&&m.Key.substr(0,1)==="/"&&(m.Key=m.Key.substr(1))}},ge=ae(),Ce=["getAuth","getObjectUrl"].includes(H);if(typeof Promise=="function"&&!Ce&&!l)return new Promise(function(De,Te){if(l=function(He,$e){He?Te(He):De($e)},ge)return G(Ie.error(new Error(ge)));te.call(h,m,G)});if(ge)return G(Ie.error(new Error(ge)));var ce=te.call(h,m,G);if(Ce)return ce}},me=function(H,te){var m=this,l=0,h=0,d=Date.now(),k,M;function G(){if(M=0,te&&typeof te=="function"){k=Date.now();var ae=Math.max(0,Math.round((h-l)/((k-d)/1e3)*100)/100)||0,ge;h===0&&H===0?ge=1:ge=Math.floor(h/H*100)/100||0,d=k,l=h;try{te({loaded:h,total:H,speed:ae,percent:ge})}catch{}}}return function(ae,ge){if(ae&&(h=ae.loaded,H=ae.total),ge)clearTimeout(M),G();else{if(M)return;M=setTimeout(G,m.options.ProgressInterval)}}},xe=function(H,te,m){var l;if(typeof te.Body=="string"?te.Body=new Blob([te.Body],{type:"text/plain"}):te.Body instanceof ArrayBuffer&&(te.Body=new Blob([te.Body])),te.Body&&(te.Body instanceof Blob||te.Body.toString()==="[object File]"||te.Body.toString()==="[object Blob]"))l=te.Body.size;else{m(Ie.error(new Error("params body format error, Only allow File|Blob|String.")));return}te.ContentLength=l,m(null,l)},ye=function(H){return Date.now()+(H||0)},Se=function(H,te){var m=H;return H.message=H.message||null,typeof te=="string"?(H.error=te,H.message=te):e(te)==="object"&&te!==null&&(Q(H,te),(te.code||te.name)&&(H.code=te.code||te.name),te.message&&(H.message=te.message),te.stack&&(H.stack=te.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(H,"name",{writable:!0,enumerable:!1}),Object.defineProperty(H,"message",{enumerable:!0})),H.name=te&&te.name||H.name||H.code||"Error",H.code||(H.code=H.name),H.error||(H.error=I(m)),H},ke=function(){return(typeof globalThis=="undefined"?"undefined":e(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},_e=function(){return(typeof window=="undefined"?"undefined":e(window))!=="object"&&(typeof a=="undefined"?"undefined":e(a))==="object"&&!0&&!ke()},Ae=function(H){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(H)},Pe=function(){if((typeof navigator=="undefined"?"undefined":e(navigator))!=="object")return!1;var he=navigator.userAgent,H=!!he.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return H}(),Oe=function(){return(typeof navigator=="undefined"?"undefined":e(navigator))!=="object"?!1:/\sQQ/i.test(navigator.userAgent)}(),Ie={noop:x,formatParams:oe,apiWrapper:le,xml2json:O,json2xml:b,md5:_,clearKey:C,fileSlice:$,getBodyMd5:X,getFileMd5:ie,binaryBase64:ue,extend:Q,isArray:ee,isInArray:re,makeArray:de,each:pe,map:W,filter:J,clone:I,attr:q,uuid:fe,camSafeUrlEncode:A,throttleOnProgress:me,getFileSize:xe,getSkewTime:ye,error:Se,obj2str:j,getAuth:N,parseSelectPayload:V,getSourceParams:R,isBrowser:!0,isNode:_e,isCIHost:Ae,isIOS_QQ:Pe&&Oe};n.exports=Ie}).call(this,o("./node_modules/process/browser.js"))}})})})(cosJsSdkV5);var eventemitter3={exports:{}};(function(n){var s=Object.prototype.hasOwnProperty,o="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(o=!1));function e(b,S,A){this.fn=b,this.context=S,this.once=A||!1}function _(b,S,A,F,j){if(typeof A!="function")throw new TypeError("The listener must be a function");var L=new e(A,F||b,j),P=o?o+S:S;return b._events[P]?b._events[P].fn?b._events[P]=[b._events[P],L]:b._events[P].push(L):(b._events[P]=L,b._eventsCount++),b}function p(b,S){--b._eventsCount===0?b._events=new a:delete b._events[S]}function O(){this._events=new a,this._eventsCount=0}O.prototype.eventNames=function(){var S=[],A,F;if(this._eventsCount===0)return S;for(F in A=this._events)s.call(A,F)&&S.push(o?F.slice(1):F);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(A)):S},O.prototype.listeners=function(S){var A=o?o+S:S,F=this._events[A];if(!F)return[];if(F.fn)return[F.fn];for(var j=0,L=F.length,P=new Array(L);j<L;j++)P[j]=F[j].fn;return P},O.prototype.listenerCount=function(S){var A=o?o+S:S,F=this._events[A];return F?F.fn?1:F.length:0},O.prototype.emit=function(S,A,F,j,L,P){var N=o?o+S:S;if(!this._events[N])return!1;var T=this._events[N],B=arguments.length,V,R;if(T.fn){switch(T.once&&this.removeListener(S,T.fn,void 0,!0),B){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,A),!0;case 3:return T.fn.call(T.context,A,F),!0;case 4:return T.fn.call(T.context,A,F,j),!0;case 5:return T.fn.call(T.context,A,F,j,L),!0;case 6:return T.fn.call(T.context,A,F,j,L,P),!0}for(R=1,V=new Array(B-1);R<B;R++)V[R-1]=arguments[R];T.fn.apply(T.context,V)}else{var x=T.length,C;for(R=0;R<x;R++)switch(T[R].once&&this.removeListener(S,T[R].fn,void 0,!0),B){case 1:T[R].fn.call(T[R].context);break;case 2:T[R].fn.call(T[R].context,A);break;case 3:T[R].fn.call(T[R].context,A,F);break;case 4:T[R].fn.call(T[R].context,A,F,j);break;default:if(!V)for(C=1,V=new Array(B-1);C<B;C++)V[C-1]=arguments[C];T[R].fn.apply(T[R].context,V)}}return!0},O.prototype.on=function(S,A,F){return _(this,S,A,F,!1)},O.prototype.once=function(S,A,F){return _(this,S,A,F,!0)},O.prototype.removeListener=function(S,A,F,j){var L=o?o+S:S;if(!this._events[L])return this;if(!A)return p(this,L),this;var P=this._events[L];if(P.fn)P.fn===A&&(!j||P.once)&&(!F||P.context===F)&&p(this,L);else{for(var N=0,T=[],B=P.length;N<B;N++)(P[N].fn!==A||j&&!P[N].once||F&&P[N].context!==F)&&T.push(P[N]);T.length?this._events[L]=T.length===1?T[0]:T:p(this,L)}return this},O.prototype.removeAllListeners=function(S){var A;return S?(A=o?o+S:S,this._events[A]&&p(this,A)):(this._events=new a,this._eventsCount=0),this},O.prototype.off=O.prototype.removeListener,O.prototype.addListener=O.prototype.on,O.prefixed=o,O.EventEmitter=O,n.exports=O})(eventemitter3);var axios$2={exports:{}},bind$2=function n(s,o){return function(){for(var e=new Array(arguments.length),_=0;_<e.length;_++)e[_]=arguments[_];return s.apply(o,e)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray(n){return toString.call(n)==="[object Array]"}function isUndefined(n){return typeof n=="undefined"}function isBuffer(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function isArrayBuffer(n){return toString.call(n)==="[object ArrayBuffer]"}function isFormData(n){return typeof FormData!="undefined"&&n instanceof FormData}function isArrayBufferView(n){var s;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?s=ArrayBuffer.isView(n):s=n&&n.buffer&&n.buffer instanceof ArrayBuffer,s}function isString(n){return typeof n=="string"}function isNumber(n){return typeof n=="number"}function isObject(n){return n!==null&&typeof n=="object"}function isPlainObject(n){if(toString.call(n)!=="[object Object]")return!1;var s=Object.getPrototypeOf(n);return s===null||s===Object.prototype}function isDate(n){return toString.call(n)==="[object Date]"}function isFile(n){return toString.call(n)==="[object File]"}function isBlob(n){return toString.call(n)==="[object Blob]"}function isFunction(n){return toString.call(n)==="[object Function]"}function isStream(n){return isObject(n)&&isFunction(n.pipe)}function isURLSearchParams(n){return typeof URLSearchParams!="undefined"&&n instanceof URLSearchParams}function trim(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(n,s){if(!(n===null||typeof n=="undefined"))if(typeof n!="object"&&(n=[n]),isArray(n))for(var o=0,a=n.length;o<a;o++)s.call(null,n[o],o,n);else for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&s.call(null,n[e],e,n)}function merge(){var n={};function s(e,_){isPlainObject(n[_])&&isPlainObject(e)?n[_]=merge(n[_],e):isPlainObject(e)?n[_]=merge({},e):isArray(e)?n[_]=e.slice():n[_]=e}for(var o=0,a=arguments.length;o<a;o++)forEach(arguments[o],s);return n}function extend(n,s,o){return forEach(s,function(e,_){o&&typeof e=="function"?n[_]=bind$1(e,o):n[_]=e}),n}function stripBOM(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}var utils$d={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM},utils$c=utils$d;function encode(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function n(s,o,a){if(!o)return s;var e;if(a)e=a(o);else if(utils$c.isURLSearchParams(o))e=o.toString();else{var _=[];utils$c.forEach(o,function(b,S){b===null||typeof b=="undefined"||(utils$c.isArray(b)?S=S+"[]":b=[b],utils$c.forEach(b,function(F){utils$c.isDate(F)?F=F.toISOString():utils$c.isObject(F)&&(F=JSON.stringify(F)),_.push(encode(S)+"="+encode(F))}))}),e=_.join("&")}if(e){var p=s.indexOf("#");p!==-1&&(s=s.slice(0,p)),s+=(s.indexOf("?")===-1?"?":"&")+e}return s},utils$b=utils$d;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function n(s,o,a){return this.handlers.push({fulfilled:s,rejected:o,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function n(s){this.handlers[s]&&(this.handlers[s]=null)};InterceptorManager$1.prototype.forEach=function n(s){utils$b.forEach(this.handlers,function(a){a!==null&&s(a)})};var InterceptorManager_1=InterceptorManager$1,utils$a=utils$d,normalizeHeaderName$1=function n(s,o){utils$a.forEach(s,function(e,_){_!==o&&_.toUpperCase()===o.toUpperCase()&&(s[o]=e,delete s[_])})},enhanceError$2=function n(s,o,a,e,_){return s.config=o,a&&(s.code=a),s.request=e,s.response=_,s.isAxiosError=!0,s.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},s},enhanceError$1=enhanceError$2,createError$2=function n(s,o,a,e,_){var p=new Error(s);return enhanceError$1(p,o,a,e,_)},createError$1=createError$2,settle$1=function n(s,o,a){var e=a.config.validateStatus;!a.status||!e||e(a.status)?s(a):o(createError$1("Request failed with status code "+a.status,a.config,null,a.request,a))},utils$9=utils$d,cookies$1=utils$9.isStandardBrowserEnv()?function n(){return{write:function(o,a,e,_,p,O){var b=[];b.push(o+"="+encodeURIComponent(a)),utils$9.isNumber(e)&&b.push("expires="+new Date(e).toGMTString()),utils$9.isString(_)&&b.push("path="+_),utils$9.isString(p)&&b.push("domain="+p),O===!0&&b.push("secure"),document.cookie=b.join("; ")},read:function(o){var a=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function n(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function n(s){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(s)},combineURLs$1=function n(s,o){return o?s.replace(/\/+$/,"")+"/"+o.replace(/^\/+/,""):s},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function n(s,o){return s&&!isAbsoluteURL(o)?combineURLs(s,o):o},utils$8=utils$d,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function n(s){var o={},a,e,_;return s&&utils$8.forEach(s.split(`
`),function(O){if(_=O.indexOf(":"),a=utils$8.trim(O.substr(0,_)).toLowerCase(),e=utils$8.trim(O.substr(_+1)),a){if(o[a]&&ignoreDuplicateOf.indexOf(a)>=0)return;a==="set-cookie"?o[a]=(o[a]?o[a]:[]).concat([e]):o[a]=o[a]?o[a]+", "+e:e}}),o},utils$7=utils$d,isURLSameOrigin$1=utils$7.isStandardBrowserEnv()?function n(){var s=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),a;function e(_){var p=_;return s&&(o.setAttribute("href",p),p=o.href),o.setAttribute("href",p),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return a=e(window.location.href),function(p){var O=utils$7.isString(p)?e(p):p;return O.protocol===a.protocol&&O.host===a.host}}():function n(){return function(){return!0}}(),utils$6=utils$d,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,xhr=function n(s){return new Promise(function(a,e){var _=s.data,p=s.headers,O=s.responseType;utils$6.isFormData(_)&&delete p["Content-Type"];var b=new XMLHttpRequest;if(s.auth){var S=s.auth.username||"",A=s.auth.password?unescape(encodeURIComponent(s.auth.password)):"";p.Authorization="Basic "+btoa(S+":"+A)}var F=buildFullPath(s.baseURL,s.url);b.open(s.method.toUpperCase(),buildURL$1(F,s.params,s.paramsSerializer),!0),b.timeout=s.timeout;function j(){if(!!b){var P="getAllResponseHeaders"in b?parseHeaders(b.getAllResponseHeaders()):null,N=!O||O==="text"||O==="json"?b.responseText:b.response,T={data:N,status:b.status,statusText:b.statusText,headers:P,config:s,request:b};settle(a,e,T),b=null}}if("onloadend"in b?b.onloadend=j:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(j)},b.onabort=function(){!b||(e(createError("Request aborted",s,"ECONNABORTED",b)),b=null)},b.onerror=function(){e(createError("Network Error",s,null,b)),b=null},b.ontimeout=function(){var N="timeout of "+s.timeout+"ms exceeded";s.timeoutErrorMessage&&(N=s.timeoutErrorMessage),e(createError(N,s,s.transitional&&s.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},utils$6.isStandardBrowserEnv()){var L=(s.withCredentials||isURLSameOrigin(F))&&s.xsrfCookieName?cookies.read(s.xsrfCookieName):void 0;L&&(p[s.xsrfHeaderName]=L)}"setRequestHeader"in b&&utils$6.forEach(p,function(N,T){typeof _=="undefined"&&T.toLowerCase()==="content-type"?delete p[T]:b.setRequestHeader(T,N)}),utils$6.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),O&&O!=="json"&&(b.responseType=s.responseType),typeof s.onDownloadProgress=="function"&&b.addEventListener("progress",s.onDownloadProgress),typeof s.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",s.onUploadProgress),s.cancelToken&&s.cancelToken.promise.then(function(N){!b||(b.abort(),e(N),b=null)}),_||(_=null),b.send(_)})},utils$5=utils$d,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(n,s){!utils$5.isUndefined(n)&&utils$5.isUndefined(n["Content-Type"])&&(n["Content-Type"]=s)}function getDefaultAdapter(){var n;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(n=xhr),n}function stringifySafely(n,s,o){if(utils$5.isString(n))try{return(s||JSON.parse)(n),utils$5.trim(n)}catch(a){if(a.name!=="SyntaxError")throw a}return(o||JSON.stringify)(n)}var defaults$3={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function n(s,o){return normalizeHeaderName(o,"Accept"),normalizeHeaderName(o,"Content-Type"),utils$5.isFormData(s)||utils$5.isArrayBuffer(s)||utils$5.isBuffer(s)||utils$5.isStream(s)||utils$5.isFile(s)||utils$5.isBlob(s)?s:utils$5.isArrayBufferView(s)?s.buffer:utils$5.isURLSearchParams(s)?(setContentTypeIfUnset(o,"application/x-www-form-urlencoded;charset=utf-8"),s.toString()):utils$5.isObject(s)||o&&o["Content-Type"]==="application/json"?(setContentTypeIfUnset(o,"application/json"),stringifySafely(s)):s}],transformResponse:[function n(s){var o=this.transitional,a=o&&o.silentJSONParsing,e=o&&o.forcedJSONParsing,_=!a&&this.responseType==="json";if(_||e&&utils$5.isString(s)&&s.length)try{return JSON.parse(s)}catch(p){if(_)throw p.name==="SyntaxError"?enhanceError(p,this,"E_JSON_PARSE"):p}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function n(s){return s>=200&&s<300}};defaults$3.headers={common:{Accept:"application/json, text/plain, */*"}};utils$5.forEach(["delete","get","head"],function n(s){defaults$3.headers[s]={}});utils$5.forEach(["post","put","patch"],function n(s){defaults$3.headers[s]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$4=utils$d,defaults$2=defaults_1,transformData$1=function n(s,o,a){var e=this||defaults$2;return utils$4.forEach(a,function(p){s=p.call(e,s,o)}),s},isCancel$1=function n(s){return!!(s&&s.__CANCEL__)},utils$3=utils$d,transformData=transformData$1,isCancel=isCancel$1,defaults$1=defaults_1;function throwIfCancellationRequested(n){n.cancelToken&&n.cancelToken.throwIfRequested()}var dispatchRequest$1=function n(s){throwIfCancellationRequested(s),s.headers=s.headers||{},s.data=transformData.call(s,s.data,s.headers,s.transformRequest),s.headers=utils$3.merge(s.headers.common||{},s.headers[s.method]||{},s.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(e){delete s.headers[e]});var o=s.adapter||defaults$1.adapter;return o(s).then(function(e){return throwIfCancellationRequested(s),e.data=transformData.call(s,e.data,e.headers,s.transformResponse),e},function(e){return isCancel(e)||(throwIfCancellationRequested(s),e&&e.response&&(e.response.data=transformData.call(s,e.response.data,e.response.headers,s.transformResponse))),Promise.reject(e)})},utils$2=utils$d,mergeConfig$2=function n(s,o){o=o||{};var a={},e=["url","method","data"],_=["headers","auth","proxy","params"],p=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],O=["validateStatus"];function b(j,L){return utils$2.isPlainObject(j)&&utils$2.isPlainObject(L)?utils$2.merge(j,L):utils$2.isPlainObject(L)?utils$2.merge({},L):utils$2.isArray(L)?L.slice():L}function S(j){utils$2.isUndefined(o[j])?utils$2.isUndefined(s[j])||(a[j]=b(void 0,s[j])):a[j]=b(s[j],o[j])}utils$2.forEach(e,function(L){utils$2.isUndefined(o[L])||(a[L]=b(void 0,o[L]))}),utils$2.forEach(_,S),utils$2.forEach(p,function(L){utils$2.isUndefined(o[L])?utils$2.isUndefined(s[L])||(a[L]=b(void 0,s[L])):a[L]=b(void 0,o[L])}),utils$2.forEach(O,function(L){L in o?a[L]=b(s[L],o[L]):L in s&&(a[L]=b(void 0,s[L]))});var A=e.concat(_).concat(p).concat(O),F=Object.keys(s).concat(Object.keys(o)).filter(function(L){return A.indexOf(L)===-1});return utils$2.forEach(F,S),a};const name$1="axios",version$1="0.21.4",description$1="Promise based HTTP client for the browser and node.js",main$1="index.js",scripts$1={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository$1={type:"git",url:"https://github.com/axios/axios.git"},keywords$1=["xhr","http","ajax","promise","node"],author$1="Matt Zabriskie",license$1="MIT",bugs$1={url:"https://github.com/axios/axios/issues"},homepage$1="https://axios-http.com",devDependencies$1={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr="dist/axios.min.js",unpkg$1="dist/axios.min.js",typings$1="./index.d.ts",dependencies$1={"follow-redirects":"^1.14.0"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}];var require$$0={name:name$1,version:version$1,description:description$1,main:main$1,scripts:scripts$1,repository:repository$1,keywords:keywords$1,author:author$1,license:license$1,bugs:bugs$1,homepage:homepage$1,devDependencies:devDependencies$1,browser,jsdelivr,unpkg:unpkg$1,typings:typings$1,dependencies:dependencies$1,bundlesize},pkg=require$$0,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(n,s){validators$1[n]=function(a){return typeof a===n||"a"+(s<1?"n ":" ")+n}});var deprecatedWarnings={},currentVerArr=pkg.version.split(".");function isOlderVersion(n,s){for(var o=s?s.split("."):currentVerArr,a=n.split("."),e=0;e<3;e++){if(o[e]>a[e])return!0;if(o[e]<a[e])return!1}return!1}validators$1.transitional=function n(s,o,a){var e=o&&isOlderVersion(o);function _(p,O){return"[Axios v"+pkg.version+"] Transitional option '"+p+"'"+O+(a?". "+a:"")}return function(p,O,b){if(s===!1)throw new Error(_(O," has been removed in "+o));return e&&!deprecatedWarnings[O]&&(deprecatedWarnings[O]=!0,console.warn(_(O," has been deprecated since v"+o+" and will be removed in the near future"))),s?s(p,O,b):!0}};function assertOptions(n,s,o){if(typeof n!="object")throw new TypeError("options must be an object");for(var a=Object.keys(n),e=a.length;e-- >0;){var _=a[e],p=s[_];if(p){var O=n[_],b=O===void 0||p(O,_,n);if(b!==!0)throw new TypeError("option "+_+" must be "+b);continue}if(o!==!0)throw Error("Unknown option "+_)}}var validator$1={isOlderVersion,assertOptions,validators:validators$1},utils$1=utils$d,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(n){this.defaults=n,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function n(s){typeof s=="string"?(s=arguments[1]||{},s.url=arguments[0]):s=s||{},s=mergeConfig$1(this.defaults,s),s.method?s.method=s.method.toLowerCase():this.defaults.method?s.method=this.defaults.method.toLowerCase():s.method="get";var o=s.transitional;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean,"1.0.0"),forcedJSONParsing:validators.transitional(validators.boolean,"1.0.0"),clarifyTimeoutError:validators.transitional(validators.boolean,"1.0.0")},!1);var a=[],e=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(s)===!1||(e=e&&j.synchronous,a.unshift(j.fulfilled,j.rejected))});var _=[];this.interceptors.response.forEach(function(j){_.push(j.fulfilled,j.rejected)});var p;if(!e){var O=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(O,a),O=O.concat(_),p=Promise.resolve(s);O.length;)p=p.then(O.shift(),O.shift());return p}for(var b=s;a.length;){var S=a.shift(),A=a.shift();try{b=S(b)}catch(F){A(F);break}}try{p=dispatchRequest(b)}catch(F){return Promise.reject(F)}for(;_.length;)p=p.then(_.shift(),_.shift());return p};Axios$1.prototype.getUri=function n(s){return s=mergeConfig$1(this.defaults,s),buildURL(s.url,s.params,s.paramsSerializer).replace(/^\?/,"")};utils$1.forEach(["delete","get","head","options"],function n(s){Axios$1.prototype[s]=function(o,a){return this.request(mergeConfig$1(a||{},{method:s,url:o,data:(a||{}).data}))}});utils$1.forEach(["post","put","patch"],function n(s){Axios$1.prototype[s]=function(o,a,e){return this.request(mergeConfig$1(e||{},{method:s,url:o,data:a}))}});var Axios_1=Axios$1;function Cancel$1(n){this.message=n}Cancel$1.prototype.toString=function n(){return"Cancel"+(this.message?": "+this.message:"")};Cancel$1.prototype.__CANCEL__=!0;var Cancel_1=Cancel$1,Cancel=Cancel_1;function CancelToken(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(e){s=e});var o=this;n(function(e){o.reason||(o.reason=new Cancel(e),s(o.reason))})}CancelToken.prototype.throwIfRequested=function n(){if(this.reason)throw this.reason};CancelToken.source=function n(){var s,o=new CancelToken(function(e){s=e});return{token:o,cancel:s}};var CancelToken_1=CancelToken,spread=function n(s){return function(a){return s.apply(null,a)}},isAxiosError=function n(s){return typeof s=="object"&&s.isAxiosError===!0},utils=utils$d,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(n){var s=new Axios(n),o=bind(Axios.prototype.request,s);return utils.extend(o,Axios.prototype,s),utils.extend(o,s),o}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.create=function n(s){return createInstance(mergeConfig(axios$1.defaults,s))};axios$1.Cancel=Cancel_1;axios$1.CancelToken=CancelToken_1;axios$1.isCancel=isCancel$1;axios$1.all=function n(s){return Promise.all(s)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axios=axios$2.exports,util={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.HOST=void 0;function s(b){return Object.prototype.toString.call(b)=="[object File]"}function o(b){return typeof b=="function"}function a(b){return typeof b=="string"}function e(){}function _(b){return new Promise(function(S){setTimeout(function(){S()},b)})}function p(){return Math.floor(Date.now()/1e3)}var O;(function(b){b[b.UPLOAD_FAIL=1]="UPLOAD_FAIL"})(O||(O={})),function(b){b.MAIN="vod2.qcloud.com",b.BACKUP="vod2.dnsv1.com"}(n.HOST||(n.HOST={})),n.default={isFile:s,isFunction:o,isString:a,noop:e,delay:_,getUnix:p,isTest:!1,isDev:!1,CLIENT_ERROR_CODE:O}})(util);var vod_reporter={};const name="vod-js-sdk-v6",version="1.4.16",description="tencent cloud vod js sdk v6",main="lib/src/tc_vod.js",unpkg="dist/vod-js-sdk-v6.js",typings="lib/src/tc_vod.d.ts",scripts={test:"cross-env NODE_ENV=test mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts",cover:"cross-env NODE_ENV=test nyc mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts",dev:"webpack --config webpack.dev.config.js --watch",dist:"webpack --config webpack.config.js",build:"npm run test && npm run dist && npm run compile",compile:"tsc -p tsconfig.json",prepublish:"npm run build",lint:"tsc --noEmit && eslint 'src/**/*.{js,ts,tsx}' --quiet --fix"},repository={type:"git",url:"git+https://github.com/tencentyun/vod-js-sdk-v6.git"},keywords=["tencentcloud","sdk","vod"],author="alsotang <alsotang@gmail.com>",license="MIT",bugs={url:"https://github.com/tencentyun/vod-js-sdk-v6/issues"},homepage="https://github.com/tencentyun/vod-js-sdk-v6#readme",dependencies={axios:"^0.21.1","cos-js-sdk-v5":"^1.3.7",eventemitter3:"^4.0.7","js-sha1":"^0.6.0",uuid:"^3.3.2"},devDependencies={"@types/mocha":"^5.2.5","@types/semver":"^6.0.0","@types/sha1":"^1.1.1","@types/uuid":"^3.4.4","@typescript-eslint/eslint-plugin":"^1.9.0","@typescript-eslint/parser":"^1.9.0","cross-env":"^6.0.3",eslint:"^5.16.0","eslint-config-prettier":"^4.3.0","eslint-plugin-prettier":"^3.1.0","espower-typescript":"^9.0.1",jsdom:"^13.1.0","jsdom-global":"^3.0.2",mm:"^2.4.1",mocha:"^5.2.0",nyc:"^13.1.0","power-assert":"^1.6.1",prettier:"^1.17.1",semver:"^6.1.1","ts-loader":"^5.3.3",typescript:"^3.5.3",webpack:"^4.28.1","webpack-cli":"^3.3.12"},nyc={extension:[".ts",".tsx"],include:["src"],reporter:["html"],all:!0};var require$$1={name,version,description,main,unpkg,typings,scripts,repository,keywords,author,license,bugs,homepage,dependencies,devDependencies,nyc};(function(n){var s=commonjsGlobal&&commonjsGlobal.__assign||function(){return s=Object.assign||function(b){for(var S,A=1,F=arguments.length;A<F;A++){S=arguments[A];for(var j in S)Object.prototype.hasOwnProperty.call(S,j)&&(b[j]=S[j])}return b},s.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.VodReporter=n.VodReportEvent=void 0;var o=uploader,a=require$$1,e=util,_;(function(b){b.report_apply="report_apply",b.report_cos_upload="report_cos_upload",b.report_commit="report_commit",b.report_done="report_done"})(_=n.VodReportEvent||(n.VodReportEvent={}));var p;(function(b){b[b.apply=10001]="apply",b[b.cos_upload=20001]="cos_upload",b[b.commit=10002]="commit",b[b.done=40001]="done"})(p||(p={}));var O=function(){function b(S,A){this.baseReportData={version:a.version,platform:3e3,device:navigator.userAgent},this.reportUrl="https://vodreport.qcloud.com/ugcupload_new",this.uploader=S,this.options=A,this.init()}return b.prototype.init=function(){this.uploader.on(_.report_apply,this.onApply.bind(this)),this.uploader.on(_.report_cos_upload,this.onCosUpload.bind(this)),this.uploader.on(_.report_commit,this.onCommit.bind(this)),this.uploader.on(_.report_done,this.onDone.bind(this))},b.prototype.onApply=function(S){try{var A=this.uploader;if(!A.videoFile)return;Object.assign(this.baseReportData,{appId:A.appId,fileSize:A.videoFile.size,fileName:A.videoFile.name,fileType:A.videoFile.type,vodSessionKey:A.vodSessionKey,reqKey:A.reqKey,reportId:A.reportId});var F={reqType:p.apply,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(S.requestStartTime),reqTime:Number(S.requestStartTime)};S.err&&(F.errCode=1,F.vodErrCode=S.err.code,F.errMsg=S.err.message),S.data&&(this.baseReportData.cosRegion=S.data.storageRegionV5),this.report(F)}catch(j){if(console.error("onApply",j),e.default.isTest)throw j}},b.prototype.onCosUpload=function(S){try{var A={reqType:p.cos_upload,errCode:0,cosErrCode:"",errMsg:"",reqTimeCost:Number(new Date)-Number(S.requestStartTime),reqTime:Number(S.requestStartTime)};S.err&&(A.errCode=1,A.cosErrCode=S.err.error?S.err.error.Code:S.err,S.err&&S.err.error==="error"&&(A.cosErrCode="cors error"),A.errMsg=JSON.stringify(S.err)),this.report(A)}catch(F){if(console.error("onCosUpload",F),e.default.isTest)throw F}},b.prototype.onCommit=function(S){try{var A={reqType:p.commit,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(S.requestStartTime),reqTime:Number(S.requestStartTime)};S.err&&(A.errCode=1,A.vodErrCode=S.err.code,A.errMsg=S.err.message),S.data&&(this.baseReportData.fileId=S.data.fileId),this.report(A)}catch(F){if(console.error("onCommit",F),e.default.isTest)throw F}},b.prototype.onDone=function(S){try{var A={reqType:p.done,errCode:S.err&&S.err.code,reqTimeCost:Number(new Date)-Number(S.requestStartTime),reqTime:Number(S.requestStartTime)};this.report(A)}catch(F){if(console.error("onDone",F),e.default.isTest)throw F}},b.prototype.report=function(S){S=s(s({},this.baseReportData),S),this.send(S)},b.prototype.send=function(S){if(e.default.isDev||e.default.isTest){console.log("send reportData",S);return}o.vodAxios.post(this.reportUrl,S,{withCredentials:!1})},b}();n.VodReporter=O})(vod_reporter);var rngBrowser={exports:{}},getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);rngBrowser.exports=function(){return getRandomValues(rnds8),rnds8}}else{var rnds=new Array(16);rngBrowser.exports=function(){for(var s=0,o;s<16;s++)(s&3)===0&&(o=Math.random()*4294967296),rnds[s]=o>>>((s&3)<<3)&255;return rnds}}var byteToHex=[];for(var i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);function bytesToUuid$1(n,s){var o=s||0,a=byteToHex;return[a[n[o++]],a[n[o++]],a[n[o++]],a[n[o++]],"-",a[n[o++]],a[n[o++]],"-",a[n[o++]],a[n[o++]],"-",a[n[o++]],a[n[o++]],"-",a[n[o++]],a[n[o++]],a[n[o++]],a[n[o++]],a[n[o++]],a[n[o++]]].join("")}var bytesToUuid_1=bytesToUuid$1,rng=rngBrowser.exports,bytesToUuid=bytesToUuid_1;function v4(n,s,o){var a=s&&o||0;typeof n=="string"&&(s=n==="binary"?new Array(16):null,n=null),n=n||{};var e=n.random||(n.rng||rng)();if(e[6]=e[6]&15|64,e[8]=e[8]&63|128,s)for(var _=0;_<16;++_)s[a+_]=e[_];return s||bytesToUuid(e)}var v4_1=v4;(function(n){var s=commonjsGlobal&&commonjsGlobal.__extends||function(){var P=function(N,T){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,V){B.__proto__=V}||function(B,V){for(var R in V)V.hasOwnProperty(R)&&(B[R]=V[R])},P(N,T)};return function(N,T){P(N,T);function B(){this.constructor=N}N.prototype=T===null?Object.create(T):(B.prototype=T.prototype,new B)}}(),o=commonjsGlobal&&commonjsGlobal.__assign||function(){return o=Object.assign||function(P){for(var N,T=1,B=arguments.length;T<B;T++){N=arguments[T];for(var V in N)Object.prototype.hasOwnProperty.call(N,V)&&(P[V]=N[V])}return P},o.apply(this,arguments)},a=commonjsGlobal&&commonjsGlobal.__awaiter||function(P,N,T,B){function V(R){return R instanceof T?R:new T(function(x){x(R)})}return new(T||(T=Promise))(function(R,x){function C($){try{f(B.next($))}catch(X){x(X)}}function Z($){try{f(B.throw($))}catch(X){x(X)}}function f($){$.done?R($.value):V($.value).then(C,Z)}f((B=B.apply(P,N||[])).next())})},e=commonjsGlobal&&commonjsGlobal.__generator||function(P,N){var T={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},B,V,R,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(f){return function($){return Z([f,$])}}function Z(f){if(B)throw new TypeError("Generator is already executing.");for(;T;)try{if(B=1,V&&(R=f[0]&2?V.return:f[0]?V.throw||((R=V.return)&&R.call(V),0):V.next)&&!(R=R.call(V,f[1])).done)return R;switch(V=0,R&&(f=[f[0]&2,R.value]),f[0]){case 0:case 1:R=f;break;case 4:return T.label++,{value:f[1],done:!1};case 5:T.label++,V=f[1],f=[0];continue;case 7:f=T.ops.pop(),T.trys.pop();continue;default:if(R=T.trys,!(R=R.length>0&&R[R.length-1])&&(f[0]===6||f[0]===2)){T=0;continue}if(f[0]===3&&(!R||f[1]>R[0]&&f[1]<R[3])){T.label=f[1];break}if(f[0]===6&&T.label<R[1]){T.label=R[1],R=f;break}if(R&&T.label<R[2]){T.label=R[2],T.ops.push(f);break}R[2]&&T.ops.pop(),T.trys.pop();continue}f=N.call(P,T)}catch($){f=[6,$],V=0}finally{B=R=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.UploaderEvent=n.vodAxios=void 0;var _=sha1.exports,p=cosJsSdkV5.exports,O=eventemitter3.exports,b=axios,S=util,A=vod_reporter,F=v4_1;n.vodAxios=b.default.create(),n.vodAxios.interceptors.response.use(function(P){return P},function(P){return isNaN(P.code)&&(P.code=500),Promise.reject(P)});var j;(function(P){P.video_progress="video_progress",P.media_progress="media_progress",P.video_upload="video_upload",P.media_upload="media_upload",P.cover_progress="cover_progress",P.cover_upload="cover_upload"})(j=n.UploaderEvent||(n.UploaderEvent={}));var L=function(P){s(N,P);function N(T){var B=P.call(this)||this;return B.sessionName="",B.vodSessionKey="",B.appId=0,B.reqKey=F(),B.reportId="",B.enableResume=!0,B.applyRequestTimeout=5e3,B.applyRequestRetryCount=3,B.commitRequestTimeout=5e3,B.commitRequestRetryCount=3,B.retryDelay=1e3,B.validateInitParams(T),B.videoFile=T.mediaFile||T.videoFile,B.getSignature=T.getSignature,B.cosStrategy=B.getCosStrategy(T),B.enableResume=T.enableResume,B.videoName=T.mediaName||T.videoName,B.coverFile=T.coverFile,B.fileId=T.fileId,B.applyRequestTimeout=T.applyRequestTimeout||B.applyRequestTimeout,B.commitRequestTimeout=T.commitRequestTimeout||B.commitRequestTimeout,B.retryDelay=T.retryDelay||B.retryDelay,B.appId=T.appId||B.appId,B.reportId=T.reportId||B.reportId,B.cosAuthTime=0,B.genFileInfo(),B}return N.prototype.getCosStrategy=function(T){var B={FileParallelLimit:T.fileParallelLimit,ChunkParallelLimit:T.chunkParallelLimit||6,ChunkRetryTimes:T.chunkRetryTimes,ChunkSize:T.chunkSize||8388608,SliceSize:T.sliceSize,CopyChunkParallelLimit:T.copyChunkParallelLimit,CopyChunkSize:T.copyChunkSize,CopySliceSize:T.copySliceSize,ProgressInterval:T.progressInterval},V=Object.keys(B).filter(function(R){return B[R]!==void 0}).reduce(function(R,x){var C;return o(o({},R),(C={},C[x]=B[x],C))},{});return V},N.prototype.setStorage=function(T,B){if(!!T){var V="webugc_"+_(T);try{localStorage.setItem(V,B)}catch{}}},N.prototype.getStorage=function(T){if(!!T){var B="webugc_"+_(T),V=null;try{V=localStorage.getItem(B)}catch{}return V}},N.prototype.delStorage=function(T){if(!!T){var B="webugc_"+_(T);try{localStorage.removeItem(B)}catch{}}},N.prototype.validateInitParams=function(T){if(!S.default.isFunction(T.getSignature))throw new Error("getSignature must be a function");if(T.videoFile&&!S.default.isFile(T.videoFile))throw new Error("videoFile must be a File")},N.prototype.genFileInfo=function(){var T=this.videoFile;if(T){var B=T.name.lastIndexOf("."),V="";if(this.videoName)if(S.default.isString(this.videoName)){if(/[:*?<>\"\\/|]/g.test(this.videoName))throw new Error('Cant use these chars in filename: \\ / : * ? " < > |');V=this.videoName}else throw new Error("mediaName must be a string");else V=T.name.substring(0,B);this.videoInfo={name:V,type:T.name.substring(B+1).toLowerCase(),size:T.size},this.sessionName+=T.name+"_"+T.size+";"}var R=this.coverFile;if(R){var x=R.name,C=x.lastIndexOf(".");this.coverInfo={name:x.substring(0,C),type:x.substring(C+1).toLowerCase(),size:R.size},this.sessionName+=R.name+"_"+R.size+";"}},N.prototype.applyUploadUGC=function(T){return T===void 0&&(T=0),a(this,void 0,void 0,function(){function B(ee){return a(this,void 0,void 0,function(){return e(this,function(re){switch(re.label){case 0:if(ee.code===500&&(N.host=N.host===S.HOST.MAIN?S.HOST.BACKUP:S.HOST.MAIN),V.emit(A.VodReportEvent.report_apply,{err:ee,requestStartTime:$}),V.delStorage(V.sessionName),V.applyRequestRetryCount==T)throw ee||new Error("apply upload failed");return[4,S.default.delay(V.retryDelay)];case 1:return re.sent(),[2,V.applyUploadUGC(T+1)]}})})}var V,R,x,C,Z,f,$,X,K,ie,I,q,Q;return e(this,function(ee){switch(ee.label){case 0:return V=this,[4,this.getSignature()];case 1:if(R=ee.sent(),C=this.videoInfo,Z=this.coverInfo,f=this.vodSessionKey||this.enableResume&&this.getStorage(this.sessionName),f)x={signature:R,vodSessionKey:f};else if(C)x={signature:R,videoName:C.name,videoType:C.type,videoSize:C.size},Z&&(x.coverName=Z.name,x.coverType=Z.type,x.coverSize=Z.size);else if(this.fileId&&Z)x={signature:R,fileId:this.fileId,coverName:Z.name,coverType:Z.type,coverSize:Z.size};else throw"Wrong params, please check and try again";x.uploadFromWeb=!0,$=new Date,ee.label=2;case 2:return ee.trys.push([2,4,,5]),[4,n.vodAxios.post("https://"+N.host+"/v3/index.php?Action=ApplyUploadUGC",x,{timeout:this.applyRequestTimeout,withCredentials:!1})];case 3:return X=ee.sent(),[3,5];case 4:return K=ee.sent(),[2,B(K)];case 5:return ie=X.data,ie.code==0?(I=ie.data,q=I.vodSessionKey,this.setStorage(this.sessionName,q),this.vodSessionKey=q,this.appId=I.appId,this.emit(A.VodReportEvent.report_apply,{data:I,requestStartTime:$}),[2,I]):(Q=new Error(ie.message),Q.code=ie.code,[2,B(Q)])}})})},N.prototype.uploadToCos=function(T){return a(this,void 0,void 0,function(){var B,V,R,x,C,Z,f,$;return e(this,function(X){switch(X.label){case 0:return B=this,V={bucket:T.storageBucket+"-"+T.storageAppId,region:T.storageRegionV5},R=new p(Object.assign({getAuthorization:function(K,ie){return a(this,void 0,void 0,function(){var I,q;return e(this,function(Q){switch(Q.label){case 0:return I=S.default.getUnix(),q=(T.tempCertificate.expiredTime-T.timestamp)*.9,B.cosAuthTime!==0?[3,1]:(B.cosAuthTime=I,[3,3]);case 1:return B.cosAuthTime&&I-B.cosAuthTime>=q?[4,B.applyUploadUGC()]:[3,3];case 2:T=Q.sent(),B.cosAuthTime=S.default.getUnix(),Q.label=3;case 3:return ie({TmpSecretId:T.tempCertificate.secretId,TmpSecretKey:T.tempCertificate.secretKey,XCosSecurityToken:T.tempCertificate.token,StartTime:T.timestamp,ExpiredTime:T.tempCertificate.expiredTime}),[2]}})})}},this.cosStrategy)),this.cos=R,x=[],this.videoFile&&(C=o(o({},V),{file:this.videoFile,key:T.video.storagePath,onProgress:function(K){B.emit(j.video_progress,K),B.emit(j.media_progress,K)},onUpload:function(K){B.emit(j.video_upload,K),B.emit(j.media_upload,K)},onTaskReady:function(K){B.taskId=K}}),x.push(C)),this.coverFile&&(Z=o(o({},V),{file:this.coverFile,key:T.cover.storagePath,onProgress:function(K){B.emit(j.cover_progress,K)},onUpload:function(K){B.emit(j.cover_upload,K)},onTaskReady:S.default.noop}),x.push(Z)),f=new Date,$=x.map(function(K){return new Promise(function(ie,I){R.sliceUploadFile({Bucket:K.bucket,Region:K.region,Key:K.key,Body:K.file,onTaskReady:K.onTaskReady,onProgress:K.onProgress},function(q,Q){if(K.file===B.videoFile&&B.emit(A.VodReportEvent.report_cos_upload,{err:q,requestStartTime:f}),!q)return K.onUpload(Q),ie();if(B.delStorage(B.sessionName),JSON.stringify(q)==='{"error":"error","headers":{}}')return I(new Error("cors error"));I(q)})})}),[4,Promise.all($)];case 1:return[2,X.sent()]}})})},N.prototype.commitUploadUGC=function(T){return T===void 0&&(T=0),a(this,void 0,void 0,function(){function B(K){return a(this,void 0,void 0,function(){return e(this,function(ie){switch(ie.label){case 0:if(K.code===500&&(N.host=N.host===S.HOST.MAIN?S.HOST.BACKUP:S.HOST.MAIN),V.emit(A.VodReportEvent.report_commit,{err:K,requestStartTime:C}),V.commitRequestRetryCount==T)throw K||new Error("commit upload failed");return[4,S.default.delay(V.retryDelay)];case 1:return ie.sent(),[2,V.commitUploadUGC(T+1)]}})})}var V,R,x,C,Z,f,$,X;return e(this,function(K){switch(K.label){case 0:return V=this,[4,this.getSignature()];case 1:R=K.sent(),this.delStorage(this.sessionName),x=this.vodSessionKey,C=new Date,K.label=2;case 2:return K.trys.push([2,4,,5]),[4,n.vodAxios.post("https://"+N.host+"/v3/index.php?Action=CommitUploadUGC",{signature:R,vodSessionKey:x},{timeout:this.commitRequestTimeout,withCredentials:!1})];case 3:return Z=K.sent(),[3,5];case 4:return f=K.sent(),[2,B(f)];case 5:return $=Z.data,$.code==0?(this.emit(A.VodReportEvent.report_commit,{data:$.data,requestStartTime:C}),[2,$.data]):(X=new Error($.message),X.code=$.code,[2,B(X)])}})})},N.prototype.start=function(){var T=this,B=new Date;this.donePromise=this._start().then(function(V){return T.emit(A.VodReportEvent.report_done,{err:{code:0},requestStartTime:B}),V}).catch(function(V){throw T.emit(A.VodReportEvent.report_done,{err:{code:V&&V.code||S.default.CLIENT_ERROR_CODE.UPLOAD_FAIL},requestStartTime:B}),V})},N.prototype._start=function(){return a(this,void 0,void 0,function(){var T;return e(this,function(B){switch(B.label){case 0:return[4,this.applyUploadUGC()];case 1:return T=B.sent(),[4,this.uploadToCos(T)];case 2:return B.sent(),[4,this.commitUploadUGC()];case 3:return[2,B.sent()]}})})},N.prototype.done=function(){return this.donePromise},N.prototype.cancel=function(){this.cos.cancelTask(this.taskId)},N.host=S.HOST.MAIN,N}(O.EventEmitter);n.default=L})(uploader);var __assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(n){for(var s,o=1,a=arguments.length;o<a;o++){s=arguments[o];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(n[e]=s[e])}return n},__assign.apply(this,arguments)};Object.defineProperty(tc_vod,"__esModule",{value:!0});var uploader_1=uploader,vod_reporter_1=vod_reporter,TcVod=function(){function n(s){this.allowReport=!0,this.enableResume=!0,this.getSignature=s.getSignature,s.allowReport!==void 0&&(this.allowReport=s.allowReport),s.enableResume!==void 0&&(this.enableResume=s.enableResume),this.appId=s.appId,this.reportId=s.reportId}return n.prototype.upload=function(s){var o=__assign({getSignature:this.getSignature,appId:this.appId,reportId:this.reportId,enableResume:this.enableResume},s),a=new uploader_1.default(o);return this.allowReport&&this.initReporter(a),a.start(),a},n.prototype.initReporter=function(s){new vod_reporter_1.VodReporter(s)},n}(),_default=tc_vod.default=TcVod,uploading_vue_vue_type_style_index_0_scoped_true_lang=(()=>`.container[data-v-067c19fe]{width:100vw;background:#bce2d5;min-height:100vh}.container header[data-v-067c19fe]{width:100vw;min-height:88.533333vw;background:url(https://imgcdn.dahebao.cn/20221130/20221130200720395972.png);background-repeat:no-repeat;background-size:100%}.container header img[data-v-067c19fe]{float:left;margin:1.333333vw 0 0 4.133333vw;width:15.333333vw;height:2.666667vw}.container main[data-v-067c19fe]{width:100vw;padding-bottom:6.666667vw;box-sizing:border-box;text-align:center}.container main .title[data-v-067c19fe]{margin:0 auto;width:88.266667vw;height:21.6vw;background:url(https://imgcdn.dahebao.cn/20221115/20221115161716948436.png);background-size:100%;background-repeat:no-repeat}.container main .van-form[data-v-067c19fe]{margin:-7.466667vw auto 1.333333vw;width:80vw;z-index:100;color:red;padding-bottom:4vw;box-sizing:border-box;border-radius:0 0 2.666667vw 2.666667vw;background:#fff}.container main .van-form .group[data-v-067c19fe]{color:red}.van-cell-group--inset[data-v-067c19fe]{margin:0;padding-top:2.666667vw}.van-button[data-v-067c19fe]{margin:0 auto;width:58.933333vw;height:9.6vw}[data-v-067c19fe] .van-field__label{width:16vw}video[data-v-067c19fe]::-webkit-media-controls-timeline{display:none}video[data-v-067c19fe]::-webkit-media-controls-mute-button{display:none}video[data-v-067c19fe]::-webkit-media-controls-volume-slider{display:none}
`)();const _withScopeId=n=>(pushScopeId("data-v-067c19fe"),n=n(),popScopeId(),n),_hoisted_1={class:"container"},_hoisted_2=_withScopeId(()=>createBaseVNode("header",null,null,-1)),_hoisted_3=_withScopeId(()=>createBaseVNode("div",{class:"title"},null,-1)),_hoisted_4={style:{margin:"16px"}},_hoisted_5=createTextVNode(" \u63D0\u4EA4\u62A5\u540D "),_sfc_main=defineComponent({__name:"uploading",setup(n){const s=useCounterStore(),o=reactive({accept:"video/*,image/*",max:9,info:[{isNull:!1,name:"\u6807\u9898",length:20,value:""},{isNull:!1,name:"\u4E0A\u4F20",length:20,value:"",type:1}],file:[]}),a=ref(!1),e=reactive({posts_title:"",posts_img:"",posts_video:"",posts_video_img:"",posts_content:"#2022\u6CB3\u5357\u65B0\u5730\u6807# ",user_id:s.$state.userId,tecent_video_id:"",source:"0",activityNo:s.$state.activityNo,location_address:s.$state.city.city_name,creatorType:s.$state.city.city_id,creator_type:s.$state.city.city_id}),_=P=>{if(o.max==9&&o.file[0].url){let N=[];o.file.map(T=>{N.push({imgUrl:T.url,imgWidth:"750",imgHeight:"560",imgType:2})}),e.posts_img=JSON.stringify(N),e.posts_video="",e.tecent_video_id=""}e.posts_title=o.info[0].value,A()},p=P=>{P.file.type.indexOf("image")!=-1?(o.accept="image/*",o.max=9,O(P)):(o.max=1,S(P.file)),Toast.loading({duration:0,message:"\u6B63\u5728\u4E0A\u4F20",forbidClick:!0})};function O(P){let N=new FormData;N.append("file",P.file),axios$3.post("https://news.dahebao.cn/dahe/app/announce/uploadImg",N,{headers:{"content-type":"multipart/form-data"}}).then(T=>{T.state==1?(P.url=T.data.fileUrl,P.id=T.data.fileId,delete e.posts_video_img,Toast.clear()):(Toast("\u4E0A\u4F20\u5931\u8D25"),o.file=[])})}async function b(){return await axios$3.post("https://news.dahebao.cn/dahe/appshortvideocb/getsignature")}function S(P){new _default({getSignature:b}).upload({mediaFile:P}).done().then(B=>{e.tecent_video_id=B.fileId,e.posts_video=B.video.url,delete e.posts_img,e.posts_video_img="",L(B.video.url),Toast.clear()}).catch(function(){Toast("\u4E0A\u4F20\u5931\u8D25,\u8BF7\u91CD\u65B0\u4E0A\u4F20\u89C6\u9891")})}function A(){saveCity(e).then(P=>{P.state==1?(Toast(P.data),o.info.map(N=>{N.value=""}),o.file=[],o.accept="image/*,video/*",o.max=9,e.location_address="",e.posts_img="",e.posts_video_img="",e.posts_video="",e.tecent_video_id=""):Toast(P.message)})}function F(){o.file.length==0&&(o.accept="video/*,image/*")}function j(P){a.value=!1,e.location_address=P.city_name,e.creator_type=P.creatorType,e.creatorType=P.creatorType}function L(P){return new Promise(function(N,T){let B="",V=document.createElement("video");V.setAttribute("crossOrigin","anonymous"),V.setAttribute("src",P),V.setAttribute("width","400"),V.setAttribute("height","240"),V.setAttribute("preload","auto"),V.addEventListener("loadeddata",function(){var Z;let R=document.createElement("canvas"),x=V.width,C=V.height;R.width=x,R.height=C,(Z=R.getContext("2d"))==null||Z.drawImage(V,0,0,x,C),B=R.toDataURL("image/jpeg"),o.file[0].content=B,o.file[0].file=""})})}return onMounted(()=>{}),(P,N)=>{const T=Field,B=Picker,V=Popup,R=Uploader,x=CellGroup,C=Button,Z=Form;return openBlock(),createElementBlock("div",_hoisted_1,[_hoisted_2,createBaseVNode("main",null,[_hoisted_3,createVNode(Z,{onSubmit:_},{default:withCtx(()=>[createVNode(x,{class:"group",inset:""},{default:withCtx(()=>[createVNode(T,{modelValue:e.location_address,"onUpdate:modelValue":N[0]||(N[0]=f=>e.location_address=f),"is-link":"",readonly:"",label:"\u57CE\u5E02",required:!0,placeholder:"\u9009\u62E9\u57CE\u5E02",onClick:N[1]||(N[1]=f=>a.value=!0)},null,8,["modelValue"]),createVNode(V,{show:a.value,"onUpdate:show":N[3]||(N[3]=f=>a.value=f),round:"",position:"bottom"},{default:withCtx(()=>[createVNode(B,{columns:unref(s).$state.citys,onCancel:N[2]||(N[2]=f=>a.value=!1),onConfirm:j},null,8,["columns"])]),_:1},8,["show"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.info,(f,$)=>(openBlock(),createBlock(T,{key:$,rules:[{required:!f.isNull,message:`\u8BF7\u586B\u5199${f.name}`}],label:`${f.name}:`,required:!f.isNull,name:f.name,placeholder:`\u8BF7\u8F93\u5165${f.name}`,maxlength:f.length,type:Number(f.length)>200?"textarea":"text",autosize:"",modelValue:f.value,"onUpdate:modelValue":X=>f.value=X},createSlots({_:2},[f.type==1?{name:"input",fn:withCtx(()=>[createVNode(R,{"preview-full-image":!1,modelValue:o.file,"onUpdate:modelValue":N[4]||(N[4]=X=>o.file=X),accept:o.accept,ResultType:"file","max-count":o.max,"after-read":p,onDelete:F},null,8,["modelValue","accept","max-count"])])}:void 0]),1032,["rules","label","required","name","placeholder","maxlength","type","modelValue","onUpdate:modelValue"]))),128))]),_:1}),createBaseVNode("div",_hoisted_4,[createVNode(C,{round:"",block:"",color:"#FF7700","native-type":"submit"},{default:withCtx(()=>[_hoisted_5]),_:1})])]),_:1})])])}}});var uploading=_export_sfc(_sfc_main,[["__scopeId","data-v-067c19fe"]]);export{uploading as default};
