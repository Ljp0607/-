/* empty css              *//* empty css              */import{B as Button}from"./index.68f2ff4e.js";import{F as Field,C as CellGroup,a as Form}from"./index.a0f57fcd.js";import"./index.7887f763.js";/* empty css              */import"./index.45c30aaf.js";import{U as Uploader}from"./index.e7d5810f.js";import{a as Tabs,T as Tab}from"./index.24f2b48f.js";import"./index.ccf5f842.js";import{e as extend$1,c as createNamespace,$ as isDef,ak as clamp,d as defineComponent,n as numericProp,a0 as makeRequiredProp,aK as makeArrayProp,E as ref,ag as useTouch,f as useParent,a1 as useExpose,aL as watchEffect,W as useEventListener,a as createVNode,aj as preventDefault,aM as HAPTICS_FEEDBACK,u as useChildren,i as mergeProps,m as makeNumericProp,t as truthProp,X as makeStringProp,g as computed,S as unitToPx,V as watch,aw as Loading,aN as BORDER_UNSET_TOP_BOTTOM,a6 as pick,aO as isSameValue,a5 as nextTick,w as withInstall,_ as _export_sfc,z as useCounterStore,r as reactive,G as onMounted,at as Popup,o as openBlock,l as createElementBlock,p as createBaseVNode,q as withCtx,C as pushScopeId,D as popScopeId,T as Toast,x as unref,F as Fragment,s as renderList,v as createBlock,aP as createSlots,aq as createTextVNode,H as axios$3}from"./index.4a3d8a83.js";import{a as saveCity}from"./index.6d9d4489.js";import"./use-route.323992c4.js";import"./use-id.ea8c8a7a.js";import"./mount-component.3d7f85dd.js";import"./use-tab-status.a8e54c32.js";import"./request.e54a2d6e.js";var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};const[name$5,bem$2,t]=createNamespace("picker"),getFirstEnabledOption=n=>n.find(s=>!s.disabled)||n[0];function getColumnsType(n,s){const r=n[0];if(r){if(Array.isArray(r))return"multiple";if(s.children in r)return"cascade"}return"default"}function findIndexOfEnabledOption(n,s){s=clamp(s,0,n.length);for(let r=s;r<n.length;r++)if(!n[r].disabled)return r;for(let r=s-1;r>=0;r--)if(!n[r].disabled)return r;return 0}const isOptionExist=(n,s,r)=>s!==void 0&&!!n.find(a=>a[r.value]===s);function findOptionByValue(n,s,r){const a=n.findIndex(O=>O[r.value]===s),e=findIndexOfEnabledOption(n,a);return n[e]}function formatCascadeColumns(n,s,r){const a=[];let e={[s.children]:n},O=0;for(;e&&e[s.children];){const f=e[s.children],R=r.value[O];if(e=isDef(R)?findOptionByValue(f,R,s):void 0,!e&&f.length){const S=getFirstEnabledOption(f)[s.value];e=findOptionByValue(f,S,s)}O++,a.push(f)}return a}function getElementTranslateY(n){const{transform:s}=window.getComputedStyle(n),r=s.slice(7,s.length-1).split(", ")[5];return Number(r)}function assignDefaultFields(n){return extend$1({text:"text",value:"value",children:"children"},n)}const DEFAULT_DURATION=200,MOMENTUM_TIME=300,MOMENTUM_DISTANCE=15,[name$4,bem$1]=createNamespace("picker-column"),PICKER_KEY=Symbol(name$4);var stdin_default$2=defineComponent({name:name$4,props:{value:numericProp,fields:makeRequiredProp(Object),options:makeArrayProp(),readonly:Boolean,allowHtml:Boolean,optionHeight:makeRequiredProp(Number),swipeDuration:makeRequiredProp(numericProp),visibleOptionNum:makeRequiredProp(numericProp)},emits:["change","clickOption"],setup(n,{emit:s,slots:r}){let a,e,O,f,R;const S=ref(),T=ref(),E=ref(0),F=ref(0),L=useTouch(),K=()=>n.options.length,P=()=>n.optionHeight*(+n.visibleOptionNum-1)/2,N=$=>{const j=findIndexOfEnabledOption(n.options,$),W=-j*n.optionHeight,I=()=>{const X=n.options[j][n.fields.value];X!==n.value&&s("change",X)};a&&W!==E.value?R=I:I(),E.value=W},b=()=>n.readonly||!n.options.length,B=$=>{a||b()||(R=null,F.value=DEFAULT_DURATION,N($),s("clickOption",n.options[$]))},G=$=>clamp(Math.round(-$/n.optionHeight),0,K()-1),A=($,j)=>{const W=Math.abs($/j);$=E.value+W/.003*($<0?-1:1);const I=G($);F.value=+n.swipeDuration,N(I)},x=()=>{a=!1,F.value=0,R&&(R(),R=null)},C=$=>{if(!b()){if(L.start($),a){const j=getElementTranslateY(T.value);E.value=Math.min(0,j-P())}F.value=0,e=E.value,O=Date.now(),f=e,R=null}},Q=$=>{if(b())return;L.move($),L.isVertical()&&(a=!0,preventDefault($,!0)),E.value=clamp(e+L.deltaY.value,-(K()*n.optionHeight),n.optionHeight);const j=Date.now();j-O>MOMENTUM_TIME&&(O=j,f=E.value)},h=()=>{if(b())return;const $=E.value-f,j=Date.now()-O;if(j<MOMENTUM_TIME&&Math.abs($)>MOMENTUM_DISTANCE){A($,j);return}const I=G(E.value);F.value=DEFAULT_DURATION,N(I),setTimeout(()=>{a=!1},0)},q=()=>{const $={height:`${n.optionHeight}px`};return n.options.map((j,W)=>{const I=j[n.fields.text],{disabled:X}=j,te=j[n.fields.value],Y={role:"button",style:$,tabindex:X?-1:0,class:[bem$1("item",{disabled:X,selected:te===n.value}),j.className],onClick:()=>B(W)},ne={class:"van-ellipsis",[n.allowHtml?"innerHTML":"textContent"]:I};return createVNode("li",Y,[r.option?r.option(j):createVNode("div",ne,null)])})};return useParent(PICKER_KEY),useExpose({stopMomentum:x}),watchEffect(()=>{const $=n.options.findIndex(I=>I[n.fields.value]===n.value),W=-findIndexOfEnabledOption(n.options,$)*n.optionHeight;E.value=W}),useEventListener("touchmove",Q,{target:S}),()=>createVNode("div",{ref:S,class:bem$1(),onTouchstartPassive:C,onTouchend:h,onTouchcancel:h},[createVNode("ul",{ref:T,style:{transform:`translate3d(0, ${E.value+P()}px, 0)`,transitionDuration:`${F.value}ms`,transitionProperty:F.value?"all":"none"},class:bem$1("wrapper"),onTransitionend:x},[q()])])}});const[name$3]=createNamespace("picker-toolbar"),pickerToolbarProps={title:String,cancelButtonText:String,confirmButtonText:String},pickerToolbarSlots=["cancel","confirm","title","toolbar"],pickerToolbarPropKeys=Object.keys(pickerToolbarProps);var stdin_default$1=defineComponent({name:name$3,props:pickerToolbarProps,emits:["confirm","cancel"],setup(n,{emit:s,slots:r}){const a=()=>{if(r.title)return r.title();if(n.title)return createVNode("div",{class:[bem$2("title"),"van-ellipsis"]},[n.title])},e=()=>s("cancel"),O=()=>s("confirm"),f=()=>{const S=n.cancelButtonText||t("cancel");return createVNode("button",{type:"button",class:[bem$2("cancel"),HAPTICS_FEEDBACK],onClick:e},[r.cancel?r.cancel():S])},R=()=>{const S=n.confirmButtonText||t("confirm");return createVNode("button",{type:"button",class:[bem$2("confirm"),HAPTICS_FEEDBACK],onClick:O},[r.confirm?r.confirm():S])};return()=>createVNode("div",{class:bem$2("toolbar")},[r.toolbar?r.toolbar():[f(),a(),R()]])}});const[name$2,bem]=createNamespace("picker-group"),PICKER_GROUP_KEY=Symbol(name$2),pickerGroupProps=extend$1({tabs:makeArrayProp()},pickerToolbarProps);defineComponent({name:name$2,props:pickerGroupProps,emits:["confirm","cancel"],setup(n,{emit:s,slots:r}){const{children:a,linkChildren:e}=useChildren(PICKER_GROUP_KEY);e();const O=()=>{s("confirm",a.map(R=>R.confirm()))},f=()=>s("cancel");return()=>{var R;const S=(R=r.default)==null?void 0:R.call(r);return createVNode("div",{class:bem()},[createVNode(stdin_default$1,mergeProps(n,{onConfirm:O,onCancel:f}),null),createVNode(Tabs,{shrink:!0,class:bem("tabs"),animated:!0},{default:()=>[n.tabs.map((T,E)=>createVNode(Tab,{title:T,titleClass:bem("tab-title")},{default:()=>[S==null?void 0:S[E]]}))]})])}}});const pickerSharedProps=extend$1({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:makeNumericProp(44),showToolbar:truthProp,swipeDuration:makeNumericProp(1e3),visibleOptionNum:makeNumericProp(6)},pickerToolbarProps),pickerProps=extend$1({},pickerSharedProps,{columns:makeArrayProp(),modelValue:makeArrayProp(),toolbarPosition:makeStringProp("top"),columnsFieldNames:Object});var stdin_default=defineComponent({name:name$5,props:pickerProps,emits:["confirm","cancel","change","clickOption","update:modelValue"],setup(n,{emit:s,slots:r}){const a=ref(),e=ref(n.modelValue.slice(0)),{parent:O}=useParent(PICKER_GROUP_KEY),{children:f,linkChildren:R}=useChildren(PICKER_KEY);R();const S=computed(()=>assignDefaultFields(n.columnsFieldNames)),T=computed(()=>unitToPx(n.optionHeight)),E=computed(()=>getColumnsType(n.columns,S.value)),F=computed(()=>{const{columns:W}=n;switch(E.value){case"multiple":return W;case"cascade":return formatCascadeColumns(W,S.value,e);default:return[W]}}),L=computed(()=>F.value.some(W=>W.length)),K=computed(()=>F.value.map((W,I)=>findOptionByValue(W,e.value[I],S.value))),P=computed(()=>F.value.map((W,I)=>W.findIndex(X=>X[S.value.value]===e.value[I]))),N=(W,I)=>{if(e.value[W]!==I){const X=e.value.slice(0);X[W]=I,e.value=X}},b=()=>({selectedValues:e.value.slice(0),selectedOptions:K.value,selectedIndexes:P.value}),B=(W,I)=>{N(I,W),E.value==="cascade"&&e.value.forEach((X,te)=>{const Y=F.value[te];isOptionExist(Y,X,S.value)||N(te,Y.length?Y[0][S.value.value]:void 0)}),s("change",extend$1({columnIndex:I},b()))},G=(W,I)=>s("clickOption",extend$1({columnIndex:I,currentOption:W},b())),A=()=>{f.forEach(I=>I.stopMomentum());const W=b();return nextTick(()=>{s("confirm",W)}),W},x=()=>s("cancel",b()),C=()=>F.value.map((W,I)=>createVNode(stdin_default$2,{value:e.value[I],fields:S.value,options:W,readonly:n.readonly,allowHtml:n.allowHtml,optionHeight:T.value,swipeDuration:n.swipeDuration,visibleOptionNum:n.visibleOptionNum,onChange:X=>B(X,I),onClickOption:X=>G(X,I)},{option:r.option})),Q=W=>{if(L.value){const I={height:`${T.value}px`},X={backgroundSize:`100% ${(W-T.value)/2}px`};return[createVNode("div",{class:bem$2("mask"),style:X},null),createVNode("div",{class:[BORDER_UNSET_TOP_BOTTOM,bem$2("frame")],style:I},null)]}},h=()=>{const W=T.value*+n.visibleOptionNum,I={height:`${W}px`};return createVNode("div",{ref:a,class:bem$2("columns"),style:I},[C(),Q(W)])},q=()=>{if(n.showToolbar&&!O)return createVNode(stdin_default$1,mergeProps(pick(n,pickerToolbarPropKeys),{onConfirm:A,onCancel:x}),pick(r,pickerToolbarSlots))};watch(F,W=>{W.forEach((I,X)=>{I.length&&!isOptionExist(I,e.value[X],S.value)&&N(X,getFirstEnabledOption(I)[S.value.value])})},{immediate:!0});let $;return watch(()=>n.modelValue,W=>{!isSameValue(W,e.value)&&!isSameValue(W,$)&&(e.value=W.slice(0))},{deep:!0}),watch(e,W=>{isSameValue(W,n.modelValue)||($=W.slice(0),s("update:modelValue",$))},{immediate:!0}),useEventListener("touchmove",preventDefault,{target:a}),useExpose({confirm:A,getSelectedOptions:()=>K.value}),()=>{var W,I;return createVNode("div",{class:bem$2()},[n.toolbarPosition==="top"?q():null,n.loading?createVNode(Loading,{class:bem$2("loading")},null):null,(W=r["columns-top"])==null?void 0:W.call(r),h(),(I=r["columns-bottom"])==null?void 0:I.call(r),n.toolbarPosition==="bottom"?q():null])}}});const Picker=withInstall(stdin_default);var index$1=(()=>`:root{--van-picker-group-background: var(--van-background-2)}.van-picker-group{background:var(--van-picker-group-background)}.van-picker-group__tabs{margin-top:var(--van-padding-base)}.van-picker-group__tab-title{margin-right:16px}
`)(),index=(()=>`:root{--van-picker-background: var(--van-background-2);--van-picker-toolbar-height: 44px;--van-picker-title-font-size: var(--van-font-size-lg);--van-picker-title-line-height: var(--van-line-height-md);--van-picker-action-padding: 0 var(--van-padding-md);--van-picker-action-font-size: var(--van-font-size-md);--van-picker-confirm-action-color: var(--van-link-color);--van-picker-cancel-action-color: var(--van-text-color-2);--van-picker-option-font-size: var(--van-font-size-lg);--van-picker-option-padding: 0 var(--van-padding-base);--van-picker-option-text-color: var(--van-text-color);--van-picker-option-disabled-opacity: .3;--van-picker-loading-icon-color: var(--van-primary-color);--van-picker-loading-mask-color: rgba(255, 255, 255, .9);--van-picker-mask-color: linear-gradient(180deg, rgba(255, 255, 255, .9), rgba(255, 255, 255, .4)), linear-gradient(0deg, rgba(255, 255, 255, .9), rgba(255, 255, 255, .4))}.van-theme-dark{--van-picker-mask-color: linear-gradient(180deg, rgba(0, 0, 0, .6), rgba(0, 0, 0, .1)), linear-gradient(0deg, rgba(0, 0, 0, .6), rgba(0, 0, 0, .1))}.van-picker{position:relative;background:var(--van-picker-background);-webkit-user-select:none;user-select:none}.van-picker__toolbar{display:flex;align-items:center;justify-content:space-between;height:var(--van-picker-toolbar-height)}.van-picker__cancel,.van-picker__confirm{height:100%;padding:var(--van-picker-action-padding);font-size:var(--van-picker-action-font-size);background-color:transparent;border:none}.van-picker__confirm{color:var(--van-picker-confirm-action-color)}.van-picker__cancel{color:var(--van-picker-cancel-action-color)}.van-picker__title{color:var(--van-text-color);max-width:50%;font-weight:var(--van-font-bold);font-size:var(--van-picker-title-font-size);line-height:var(--van-picker-title-line-height);text-align:center}.van-picker__columns{position:relative;display:flex;cursor:-webkit-grab;cursor:grab}.van-picker__loading{position:absolute;top:0;right:0;bottom:0;left:0;z-index:3;display:flex;align-items:center;justify-content:center;color:var(--van-picker-loading-icon-color);background:var(--van-picker-loading-mask-color)}.van-picker__frame{position:absolute;top:50%;right:var(--van-padding-md);left:var(--van-padding-md);z-index:2;transform:translateY(-50%);pointer-events:none}.van-picker__mask{position:absolute;top:0;left:0;z-index:1;width:100%;height:100%;background-image:var(--van-picker-mask-color);background-repeat:no-repeat;background-position:top,bottom;transform:translateZ(0);pointer-events:none}.van-picker-column{flex:1;overflow:hidden;font-size:var(--van-picker-option-font-size)}.van-picker-column__wrapper{transition-timing-function:cubic-bezier(.23,1,.68,1)}.van-picker-column__item{display:flex;align-items:center;justify-content:center;padding:var(--van-picker-option-padding);color:var(--van-picker-option-text-color)}.van-picker-column__item--disabled{cursor:not-allowed;opacity:var(--van-picker-option-disabled-opacity)}
`)(),tc_vod={},uploader={},sha1={exports:{}};/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var root=typeof window=="object"?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS&&(root=commonjsGlobal);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&!0&&module.exports,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(n){return function(s){return new Sha1(!0).update(s)[n]()}},createMethod=function(){var n=createOutputMethod("hex");NODE_JS&&(n=nodeWrap(n)),n.create=function(){return new Sha1},n.update=function(a){return n.create().update(a)};for(var s=0;s<OUTPUT_TYPES.length;++s){var r=OUTPUT_TYPES[s];n[r]=createOutputMethod(r)}return n},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(n){if(typeof n=="string")return crypto.createHash("sha1").update(n,"utf8").digest("hex");if(n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(n.length===void 0)return method(n);return crypto.createHash("sha1").update(new Buffer(n)).digest("hex")};return nodeMethod};function Sha1(n){n?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(n){if(!this.finalized){var s=typeof n!="string";s&&n.constructor===root.ArrayBuffer&&(n=new Uint8Array(n));for(var r,a=0,e,O=n.length||0,f=this.blocks;a<O;){if(this.hashed&&(this.hashed=!1,f[0]=this.block,f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0),s)for(e=this.start;a<O&&e<64;++a)f[e>>2]|=n[a]<<SHIFT[e++&3];else for(e=this.start;a<O&&e<64;++a)r=n.charCodeAt(a),r<128?f[e>>2]|=r<<SHIFT[e++&3]:r<2048?(f[e>>2]|=(192|r>>6)<<SHIFT[e++&3],f[e>>2]|=(128|r&63)<<SHIFT[e++&3]):r<55296||r>=57344?(f[e>>2]|=(224|r>>12)<<SHIFT[e++&3],f[e>>2]|=(128|r>>6&63)<<SHIFT[e++&3],f[e>>2]|=(128|r&63)<<SHIFT[e++&3]):(r=65536+((r&1023)<<10|n.charCodeAt(++a)&1023),f[e>>2]|=(240|r>>18)<<SHIFT[e++&3],f[e>>2]|=(128|r>>12&63)<<SHIFT[e++&3],f[e>>2]|=(128|r>>6&63)<<SHIFT[e++&3],f[e>>2]|=(128|r&63)<<SHIFT[e++&3]);this.lastByteIndex=e,this.bytes+=e-this.start,e>=64?(this.block=f[16],this.start=e-64,this.hash(),this.hashed=!0):this.start=e}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,s=this.lastByteIndex;n[16]=this.block,n[s>>2]|=EXTRA[s&3],this.block=n[16],s>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var n=this.h0,s=this.h1,r=this.h2,a=this.h3,e=this.h4,O,f,R,S=this.blocks;for(f=16;f<80;++f)R=S[f-3]^S[f-8]^S[f-14]^S[f-16],S[f]=R<<1|R>>>31;for(f=0;f<20;f+=5)O=s&r|~s&a,R=n<<5|n>>>27,e=R+O+e+1518500249+S[f]<<0,s=s<<30|s>>>2,O=n&s|~n&r,R=e<<5|e>>>27,a=R+O+a+1518500249+S[f+1]<<0,n=n<<30|n>>>2,O=e&n|~e&s,R=a<<5|a>>>27,r=R+O+r+1518500249+S[f+2]<<0,e=e<<30|e>>>2,O=a&e|~a&n,R=r<<5|r>>>27,s=R+O+s+1518500249+S[f+3]<<0,a=a<<30|a>>>2,O=r&a|~r&e,R=s<<5|s>>>27,n=R+O+n+1518500249+S[f+4]<<0,r=r<<30|r>>>2;for(;f<40;f+=5)O=s^r^a,R=n<<5|n>>>27,e=R+O+e+1859775393+S[f]<<0,s=s<<30|s>>>2,O=n^s^r,R=e<<5|e>>>27,a=R+O+a+1859775393+S[f+1]<<0,n=n<<30|n>>>2,O=e^n^s,R=a<<5|a>>>27,r=R+O+r+1859775393+S[f+2]<<0,e=e<<30|e>>>2,O=a^e^n,R=r<<5|r>>>27,s=R+O+s+1859775393+S[f+3]<<0,a=a<<30|a>>>2,O=r^a^e,R=s<<5|s>>>27,n=R+O+n+1859775393+S[f+4]<<0,r=r<<30|r>>>2;for(;f<60;f+=5)O=s&r|s&a|r&a,R=n<<5|n>>>27,e=R+O+e-1894007588+S[f]<<0,s=s<<30|s>>>2,O=n&s|n&r|s&r,R=e<<5|e>>>27,a=R+O+a-1894007588+S[f+1]<<0,n=n<<30|n>>>2,O=e&n|e&s|n&s,R=a<<5|a>>>27,r=R+O+r-1894007588+S[f+2]<<0,e=e<<30|e>>>2,O=a&e|a&n|e&n,R=r<<5|r>>>27,s=R+O+s-1894007588+S[f+3]<<0,a=a<<30|a>>>2,O=r&a|r&e|a&e,R=s<<5|s>>>27,n=R+O+n-1894007588+S[f+4]<<0,r=r<<30|r>>>2;for(;f<80;f+=5)O=s^r^a,R=n<<5|n>>>27,e=R+O+e-899497514+S[f]<<0,s=s<<30|s>>>2,O=n^s^r,R=e<<5|e>>>27,a=R+O+a-899497514+S[f+1]<<0,n=n<<30|n>>>2,O=e^n^s,R=a<<5|a>>>27,r=R+O+r-899497514+S[f+2]<<0,e=e<<30|e>>>2,O=a^e^n,R=r<<5|r>>>27,s=R+O+s-899497514+S[f+3]<<0,a=a<<30|a>>>2,O=r^a^e,R=s<<5|s>>>27,n=R+O+n-899497514+S[f+4]<<0,r=r<<30|r>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+s<<0,this.h2=this.h2+r<<0,this.h3=this.h3+a<<0,this.h4=this.h4+e<<0},Sha1.prototype.hex=function(){this.finalize();var n=this.h0,s=this.h1,r=this.h2,a=this.h3,e=this.h4;return HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var n=this.h0,s=this.h1,r=this.h2,a=this.h3,e=this.h4;return[n>>24&255,n>>16&255,n>>8&255,n&255,s>>24&255,s>>16&255,s>>8&255,s&255,r>>24&255,r>>16&255,r>>8&255,r&255,a>>24&255,a>>16&255,a>>8&255,a&255,e>>24&255,e>>16&255,e>>8&255,e&255]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(20),s=new DataView(n);return s.setUint32(0,this.h0),s.setUint32(4,this.h1),s.setUint32(8,this.h2),s.setUint32(12,this.h3),s.setUint32(16,this.h4),n};var exports=createMethod();COMMON_JS?module.exports=exports:root.sha1=exports})()})(sha1);var cosJsSdkV5={exports:{}};(function(module,exports){(function(s,r){module.exports=r()})(window,function(){return function(n){var s={};function r(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return n[a].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=s,r.d=function(a,e,O){r.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:O})},r.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},r.t=function(a,e){if(e&1&&(a=r(a)),e&8||e&4&&typeof a=="object"&&a&&a.__esModule)return a;var O=Object.create(null);if(r.r(O),Object.defineProperty(O,"default",{enumerable:!0,value:a}),e&2&&typeof a!="string")for(var f in a)r.d(O,f,function(R){return a[R]}.bind(null,f));return O},r.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(e,"a",e),e},r.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},r.p="/dist/",r(r.s="./index.js")}({"./index.js":function(n,s,r){var a=r("./src/cos.js");n.exports=a},"./lib/beacon.min.js":function(n,s,r){var a,e,O=r("./node_modules/@babel/runtime/helpers/typeof.js");(function(f,R){O(s)=="object"&&typeof n!="undefined"?n.exports=R():(a=R,e=typeof a=="function"?a.call(s,r,s,n):a,e!==void 0&&(n.exports=e))})(this,function(){var f=function(l,p){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,k){d.__proto__=k}||function(d,k){for(var M in k)Object.prototype.hasOwnProperty.call(k,M)&&(d[M]=k[M])},f(l,p)},R=function(){return R=Object.assign||function(l){for(var p,d=1,k=arguments.length;d<k;d++)for(var M in p=arguments[d])Object.prototype.hasOwnProperty.call(p,M)&&(l[M]=p[M]);return l},R.apply(this,arguments)};function S(y,l,p,d){return new(p||(p=Promise))(function(k,M){function V(me){try{ve(d.next(me))}catch(ae){M(ae)}}function ie(me){try{ve(d.throw(me))}catch(ae){M(ae)}}function ve(me){var ae;me.done?k(me.value):(ae=me.value,ae instanceof p?ae:new p(function(De){De(ae)})).then(V,ie)}ve((d=d.apply(y,l||[])).next())})}function T(y,l){var p,d,k,M,V={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return M={next:ie(0),throw:ie(1),return:ie(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function ie(ve){return function(me){return function(ae){if(p)throw new TypeError("Generator is already executing.");for(;V;)try{if(p=1,d&&(k=2&ae[0]?d.return:ae[0]?d.throw||((k=d.return)&&k.call(d),0):d.next)&&!(k=k.call(d,ae[1])).done)return k;switch(d=0,k&&(ae=[2&ae[0],k.value]),ae[0]){case 0:case 1:k=ae;break;case 4:return V.label++,{value:ae[1],done:!1};case 5:V.label++,d=ae[1],ae=[0];continue;case 7:ae=V.ops.pop(),V.trys.pop();continue;default:if(k=V.trys,!((k=k.length>0&&k[k.length-1])||ae[0]!==6&&ae[0]!==2)){V=0;continue}if(ae[0]===3&&(!k||ae[1]>k[0]&&ae[1]<k[3])){V.label=ae[1];break}if(ae[0]===6&&V.label<k[1]){V.label=k[1],k=ae;break}if(k&&V.label<k[2]){V.label=k[2],V.ops.push(ae);break}k[2]&&V.ops.pop(),V.trys.pop();continue}ae=l.call(y,V)}catch(De){ae=[6,De],d=0}finally{p=k=0}if(5&ae[0])throw ae[1];return{value:ae[0]?ae[1]:void 0,done:!0}}([ve,me])}}}var E="__BEACON_",F="__BEACON_deviceId",L="last_report_time",K="sending_event_ids",P="beacon_config",N="beacon_config_request_time",b=function(){function y(){var l=this;this.emit=function(p,d){if(l){var k,M=l.__EventsList[p];if(M!=null&&M.length){M=M.slice();for(var V=0;V<M.length;V++){k=M[V];try{var ie=k.callback.apply(l,[d]);if(k.type===1&&l.remove(p,k.callback),ie===!1)break}catch(ve){throw ve}}}return l}},this.__EventsList={}}return y.prototype.indexOf=function(l,p){for(var d=0;d<l.length;d++)if(l[d].callback===p)return d;return-1},y.prototype.on=function(l,p,d){if(d===void 0&&(d=0),this){var k=this.__EventsList[l];if(k||(k=this.__EventsList[l]=[]),this.indexOf(k,p)===-1){var M={name:l,type:d||0,callback:p};return k.push(M),this}return this}},y.prototype.one=function(l,p){this.on(l,p,1)},y.prototype.remove=function(l,p){if(this){var d=this.__EventsList[l];if(!d)return null;if(!p){try{delete this.__EventsList[l]}catch{}return null}if(d.length){var k=this.indexOf(d,p);d.splice(k,1)}return this}},y}();function B(y,l){for(var p={},d=0,k=Object.keys(y);d<k.length;d++){var M=k[d],V=y[M];if(typeof V=="string")p[G(M)]=G(V);else{if(l)throw new Error("value mast be string  !!!!");p[G(String(M))]=G(String(V))}}return p}function G(y){if(typeof y!="string")return y;try{return y.replace(new RegExp("\\|","g"),"%7C").replace(new RegExp("\\&","g"),"%26").replace(new RegExp("\\=","g"),"%3D").replace(new RegExp("\\+","g"),"%2B")}catch{return""}}function A(y){return String(y.A99)+String(y.A100)}var x=function(){},C=function(){function y(l){var p=this;this.lifeCycle=new b,this.uploadJobQueue=[],this.additionalParams={},this.delayTime=0,this._normalLogPipeline=function(d){if(!d||!d.reduce||!d.length)throw new TypeError("createPipeline \u65B9\u6CD5\u9700\u8981\u4F20\u5165\u81F3\u5C11\u6709\u4E00\u4E2A pipe \u7684\u6570\u7EC4");return d.length===1?function(k,M){d[0](k,M||x)}:d.reduce(function(k,M){return function(V,ie){return ie===void 0&&(ie=x),k(V,function(ve){return M==null?void 0:M(ve,ie)})}})}([function(d){p.send({url:p.strategy.getUploadUrl(),data:d,method:"post",contentType:"application/json;charset=UTF-8"},function(){var k=p.config.onReportSuccess;typeof k=="function"&&k(JSON.stringify(d.events))},function(){var k=p.config.onReportFail;typeof k=="function"&&k(JSON.stringify(d.events))})}]),function(d,k){if(!d)throw k instanceof Error?k:new Error(k)}(Boolean(l.appkey),"appkey must be initial"),this.config=R({},l)}return y.prototype.onUserAction=function(l,p){this.preReport(l,p,!1)},y.prototype.onDirectUserAction=function(l,p){this.preReport(l,p,!0)},y.prototype.preReport=function(l,p,d){l?this.strategy.isEventUpOnOff()&&(this.strategy.isBlackEvent(l)||this.strategy.isSampleEvent(l)||this.onReport(l,p,d)):this.errorReport.reportError("602"," no eventCode")},y.prototype.addAdditionalParams=function(l){for(var p=0,d=Object.keys(l);p<d.length;p++){var k=d[p];this.additionalParams[k]=l[k]}},y.prototype.setChannelId=function(l){this.commonInfo.channelID=String(l)},y.prototype.setOpenId=function(l){this.commonInfo.openid=String(l)},y.prototype.setUnionid=function(l){this.commonInfo.unid=String(l)},y.prototype.getDeviceId=function(){return this.commonInfo.deviceId},y.prototype.getCommonInfo=function(){return this.commonInfo},y.prototype.removeSendingId=function(l){try{var p=JSON.parse(this.storage.getItem(K)),d=p.indexOf(l);d!=-1&&(p.splice(d,1),this.storage.setItem(K,JSON.stringify(p)))}catch{}},y}(),Q=function(){function y(l,p,d,k){this.requestParams={},this.network=k,this.requestParams.attaid="00400014144",this.requestParams.token="6478159937",this.requestParams.product_id=l.appkey,this.requestParams.platform=d,this.requestParams.uin=p.deviceId,this.requestParams.model="",this.requestParams.os=d,this.requestParams.app_version=l.appVersion,this.requestParams.sdk_version=p.sdkVersion,this.requestParams.error_stack="",this.uploadUrl=l.isOversea?"https://htrace.wetvinfo.com/kv":"https://h.trace.qq.com/kv"}return y.prototype.reportError=function(l,p){this.requestParams._dc=Math.random(),this.requestParams.error_msg=p,this.requestParams.error_code=l,this.network.get(this.uploadUrl,{params:this.requestParams}).catch(function(d){})},y}(),h=function(){function y(l,p,d,k,M){this.strategy={isEventUpOnOff:!0,httpsUploadUrl:"https://otheve.beacon.qq.com/analytics/v2_upload",requestInterval:30,blacklist:[],samplelist:[]},this.realSample={},this.appkey="",this.needQueryConfig=!0,this.appkey=p.appkey,this.storage=k,this.needQueryConfig=l;try{var V=JSON.parse(this.storage.getItem(P));V&&this.processData(V)}catch{}p.isOversea&&(this.strategy.httpsUploadUrl="https://svibeacon.onezapp.com/analytics/v2_upload"),!p.isOversea&&this.needRequestConfig()&&this.requestConfig(p.appVersion,d,M)}return y.prototype.requestConfig=function(l,p,d){var k=this;this.storage.setItem(N,Date.now().toString()),d.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig",{platformId:typeof wx=="undefined"?"3":"4",mainAppKey:this.appkey,appVersion:l,sdkVersion:p.sdkVersion,osVersion:p.userAgent,model:"",packageName:"",params:{A3:p.deviceId}}).then(function(M){if(M.data.ret==0)try{var V=JSON.parse(M.data.beaconConfig);V&&(k.processData(V),k.storage.setItem(P,M.data.beaconConfig))}catch{}else k.processData(null),k.storage.setItem(P,"")}).catch(function(M){})},y.prototype.processData=function(l){var p,d,k,M,V;this.strategy.isEventUpOnOff=(p=l==null?void 0:l.isEventUpOnOff)!==null&&p!==void 0?p:this.strategy.isEventUpOnOff,this.strategy.httpsUploadUrl=(d=l==null?void 0:l.httpsUploadUrl)!==null&&d!==void 0?d:this.strategy.httpsUploadUrl,this.strategy.requestInterval=(k=l==null?void 0:l.requestInterval)!==null&&k!==void 0?k:this.strategy.requestInterval,this.strategy.blacklist=(M=l==null?void 0:l.blacklist)!==null&&M!==void 0?M:this.strategy.blacklist,this.strategy.samplelist=(V=l==null?void 0:l.samplelist)!==null&&V!==void 0?V:this.strategy.samplelist;for(var ie=0,ve=this.strategy.samplelist;ie<ve.length;ie++){var me=ve[ie].split(",");me.length==2&&(this.realSample[me[0]]=me[1])}},y.prototype.needRequestConfig=function(){if(!this.needQueryConfig)return!1;var l=Number(this.storage.getItem(N));return Date.now()-l>60*this.strategy.requestInterval*1e3},y.prototype.getUploadUrl=function(){return this.strategy.httpsUploadUrl+"?appkey="+this.appkey},y.prototype.isBlackEvent=function(l){return this.strategy.blacklist.indexOf(l)!=-1},y.prototype.isEventUpOnOff=function(){return this.strategy.isEventUpOnOff},y.prototype.isSampleEvent=function(l){return!!Object.prototype.hasOwnProperty.call(this.realSample,l)&&this.realSample[l]<Math.floor(Math.random()*Math.floor(1e4))},y}(),q="session_storage_key",$=function(){function y(l,p,d){this.getSessionStackDepth=0,this.beacon=d,this.storage=l,this.duration=p,this.appkey=d.config.appkey}return y.prototype.getSession=function(){this.getSessionStackDepth+=1;var l=this.storage.getItem(q);if(!l)return this.createSession();var p="",d=0;try{var k=JSON.parse(l)||{sessionId:void 0,sessionStart:void 0};if(!k.sessionId||!k.sessionStart)return this.createSession();var M=Number(this.storage.getItem(L));if(Date.now()-M>this.duration)return this.createSession();p=k.sessionId,d=k.sessionStart,this.getSessionStackDepth=0}catch{}return{sessionId:p,sessionStart:d}},y.prototype.createSession=function(){var l=Date.now(),p={sessionId:this.appkey+"_"+l.toString(),sessionStart:l};this.storage.setItem(q,JSON.stringify(p)),this.storage.setItem(L,l.toString());var d="is_new_user",k=this.storage.getItem(d);return this.getSessionStackDepth<=1&&this.beacon.onDirectUserAction("rqd_applaunched",{A21:k?"N":"Y"}),this.storage.setItem(d,JSON.stringify(!1)),p},y}();function j(){var y=navigator.userAgent,l=y.indexOf("compatible")>-1&&y.indexOf("MSIE")>-1,p=y.indexOf("Edge")>-1&&!l,d=y.indexOf("Trident")>-1&&y.indexOf("rv:11.0")>-1;if(l){new RegExp("MSIE (\\d+\\.\\d+);").test(y);var k=parseFloat(RegExp.$1);return k==7?7:k==8?8:k==9?9:k==10?10:6}return p?-2:d?11:-1}function W(y,l){var p,d;return(p="https://tun-cos-1258344701.file.myqcloud.com/fp.js",d===void 0&&(d=Date.now()+"-"+Math.random()),new Promise(function(k,M){if(document.getElementById(d))k(void 0);else{var V=document.getElementsByTagName("head")[0],ie=document.createElement("script");ie.onload=function(){return function(){ie.onload=null,k(void 0)}},ie.onerror=function(ve){ie.onerror=null,V.removeChild(ie),M(ve)},ie.src=p,ie.id=d,V.appendChild(ie)}})).then(function(){new Fingerprint().getQimei36(y,l)}).catch(function(k){}),""}var I=function(){return(I=Object.assign||function(l){for(var p,d=1,k=arguments.length;d<k;d++)for(var M in p=arguments[d])Object.prototype.hasOwnProperty.call(p,M)&&(l[M]=p[M]);return l}).apply(this,arguments)},X,te=function(){function y(l,p){p===void 0&&(p={}),this.reportOptions={},this.config=l,this.reportOptions=p}return y.canUseDB=function(){return!!(window!=null&&window.indexedDB)},y.prototype.openDB=function(){var l=this;return new Promise(function(p,d){if(!y.canUseDB())return d({message:"\u5F53\u524D\u4E0D\u652F\u6301 indexeddb"});var k=l.config,M=k.name,V=k.version,ie=k.stores,ve=indexedDB.open(M,V);ve.onsuccess=function(){l.db=ve.result,p(),I({result:1,func:"open",params:JSON.stringify(l.config)},l.reportOptions)},ve.onerror=function(me){var ae,De;d(me),I({result:0,func:"open",params:JSON.stringify(l.config),error_msg:(De=(ae=me.target)===null||ae===void 0?void 0:ae.error)===null||De===void 0?void 0:De.message},l.reportOptions)},ve.onupgradeneeded=function(){l.db=ve.result;try{ie==null||ie.forEach(function(me){l.createStore(me)})}catch(me){I({result:0,func:"open",params:JSON.stringify(l.config),error_msg:me.message},l.reportOptions),d(me)}}})},y.prototype.useStore=function(l){return this.storeName=l,this},y.prototype.deleteDB=function(){var l=this;return this.closeDB(),new Promise(function(p,d){var k=indexedDB.deleteDatabase(l.config.name);k.onsuccess=function(){return p()},k.onerror=d})},y.prototype.closeDB=function(){var l;(l=this.db)===null||l===void 0||l.close(),this.db=null},y.prototype.getStoreCount=function(){var l=this;return new Promise(function(p,d){var k=l.getStore("readonly").count();k.onsuccess=function(){return p(k.result)},k.onerror=d})},y.prototype.clearStore=function(){var l=this;return new Promise(function(p,d){var k=l.getStore("readwrite").clear();k.onsuccess=function(){return p()},k.onerror=d})},y.prototype.add=function(l,p){var d=this;return new Promise(function(k,M){var V=d.getStore("readwrite").add(l,p);V.onsuccess=function(){k(V.result)},V.onerror=M})},y.prototype.put=function(l,p){var d=this;return new Promise(function(k,M){var V=d.getStore("readwrite").put(l,p);V.onsuccess=function(){k(V.result)},V.onerror=M})},y.prototype.getStoreAllData=function(){var l=this;return new Promise(function(p,d){var k=l.getStore("readonly").openCursor(),M=[];k.onsuccess=function(){var V;if(!((V=k.result)===null||V===void 0)&&V.value){var ie=k.result.value;M.push(ie),k.result.continue()}else p(M)},k.onerror=d})},y.prototype.getDataRangeByIndex=function(l,p,d,k,M){var V=this;return new Promise(function(ie,ve){var me=V.getStore().index(l),ae=IDBKeyRange.bound(p,d,k,M),De=[],Te=me.openCursor(ae);Te.onsuccess=function(){var Fe;!((Fe=Te==null?void 0:Te.result)===null||Fe===void 0)&&Fe.value?(De.push(Te==null?void 0:Te.result.value),Te==null||Te.result.continue()):ie(De)},Te.onerror=ve})},y.prototype.removeDataByIndex=function(l,p,d,k,M){var V=this;return new Promise(function(ie,ve){var me=V.getStore("readwrite").index(l),ae=IDBKeyRange.bound(p,d,k,M),De=me.openCursor(ae),Te=0;De.onsuccess=function(Fe){var He=Fe.target.result;He?(Te+=1,He.delete(),He.continue()):ie(Te)},De.onerror=ve})},y.prototype.createStore=function(l){var p=l.name,d=l.indexes,k=d===void 0?[]:d,M=l.options;if(this.db){this.db.objectStoreNames.contains(p)&&this.db.deleteObjectStore(p);var V=this.db.createObjectStore(p,M);k.forEach(function(ie){V.createIndex(ie.indexName,ie.keyPath,ie.options)})}},y.prototype.getStore=function(l){var p;return l===void 0&&(l="readonly"),(p=this.db)===null||p===void 0?void 0:p.transaction(this.storeName,l).objectStore(this.storeName)},y}(),Y="event_table_v3",ne="eventId",ce=function(){function y(l){this.isReady=!1,this.taskQueue=Promise.resolve(),this.db=new te({name:"Beacon_"+l+"_V3",version:1,stores:[{name:Y,options:{keyPath:ne},indexes:[{indexName:ne,keyPath:ne,options:{unique:!0}}]}]}),this.open()}return y.prototype.getCount=function(){var l=this;return this.readyExec(function(){return l.db.getStoreCount()})},y.prototype.setItem=function(l,p){var d=this;return this.readyExec(function(){return d.db.add({eventId:l,value:p})})},y.prototype.getItem=function(l){return S(this,void 0,void 0,function(){var p=this;return T(this,function(d){return[2,this.readyExec(function(){return p.db.getDataRangeByIndex(ne,l,l)})]})})},y.prototype.removeItem=function(l){var p=this;return this.readyExec(function(){return p.db.removeDataByIndex(ne,l,l)})},y.prototype.updateItem=function(l,p){var d=this;return this.readyExec(function(){return d.db.put({eventId:l,value:p})})},y.prototype.iterate=function(l){var p=this;return this.readyExec(function(){return p.db.getStoreAllData().then(function(d){d.forEach(function(k){l(k.value)})})})},y.prototype.open=function(){return S(this,void 0,void 0,function(){var l=this;return T(this,function(p){switch(p.label){case 0:return this.taskQueue=this.taskQueue.then(function(){return l.db.openDB()}),[4,this.taskQueue];case 1:return p.sent(),this.isReady=!0,this.db.useStore(Y),[2]}})})},y.prototype.readyExec=function(l){return this.isReady?l():(this.taskQueue=this.taskQueue.then(function(){return l()}),this.taskQueue)},y}(),he=function(){function y(l){this.keyObject={},this.storage=l}return y.prototype.getCount=function(){return this.storage.getStoreCount()},y.prototype.removeItem=function(l){this.storage.removeItem(l),delete this.keyObject[l]},y.prototype.setItem=function(l,p){var d=JSON.stringify(p);this.storage.setItem(l,d),this.keyObject[l]=p},y.prototype.iterate=function(l){for(var p=Object.keys(this.keyObject),d=0;d<p.length;d++){var k=this.storage.getItem(p[d]);l(JSON.parse(k))}},y}(),de=function(){function y(l,p){var d=this;this.dbEventCount=0,j()>0||!window.indexedDB||/X5Lite/.test(navigator.userAgent)?(this.store=new he(p),this.dbEventCount=this.store.getCount()):(this.store=new ce(l),this.getCount().then(function(k){d.dbEventCount=k}).catch(function(k){}))}return y.prototype.getCount=function(){return S(this,void 0,void 0,function(){return T(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.store.getCount()];case 1:return[2,l.sent()];case 2:return l.sent(),[2,Promise.reject()];case 3:return[2]}})})},y.prototype.insertEvent=function(l,p){return S(this,void 0,void 0,function(){var d,k;return T(this,function(M){switch(M.label){case 0:if(this.dbEventCount>=1e4)return[2,Promise.reject()];d=A(l.mapValue),M.label=1;case 1:return M.trys.push([1,3,,4]),this.dbEventCount++,[4,this.store.setItem(d,l)];case 2:return[2,M.sent()];case 3:return k=M.sent(),p&&p(k,l),this.dbEventCount--,[2,Promise.reject()];case 4:return[2]}})})},y.prototype.getEvents=function(){return S(this,void 0,void 0,function(){var l;return T(this,function(p){switch(p.label){case 0:l=[],p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.store.iterate(function(d){l.push(d)})];case 2:return p.sent(),[2,Promise.all(l)];case 3:return p.sent(),[2,Promise.all(l)];case 4:return[2]}})})},y.prototype.removeEvent=function(l){return S(this,void 0,void 0,function(){var p;return T(this,function(d){switch(d.label){case 0:p=A(l.mapValue),d.label=1;case 1:return d.trys.push([1,3,,4]),this.dbEventCount--,[4,this.store.removeItem(p)];case 2:return[2,d.sent()];case 3:return d.sent(),this.dbEventCount++,[2,Promise.reject()];case 4:return[2]}})})},y}(),se=function(){return(se=Object.assign||function(l){for(var p,d=1,k=arguments.length;d<k;d++)for(var M in p=arguments[d])Object.prototype.hasOwnProperty.call(p,M)&&(l[M]=p[M]);return l}).apply(this,arguments)};function pe(y){try{return decodeURIComponent(y.replace(/\+/g," "))}catch{return null}}function fe(y,l){var p=[null,void 0,"",NaN].includes(y);if(l.isSkipEmpty&&p)return null;var d=!l.isSkipEmpty&&p?"":y;try{return l.encode?encodeURIComponent(d):d}catch{return null}}function Se(y,l){l===void 0&&(l={encode:!0,isSkipEmpty:!1});var p=y.url,d=y.query,k=d===void 0?{}:d,M=y.hash,V=p.split("#"),ie=V[0],ve=V[1],me=ve===void 0?"":ve,ae=ie.split("?")[0],De=[],Te=fe(M||me,l),Fe=se(se({},function(He){var Ke=He.split("#"),Ve=Ke[0],We=Ke[1],Xe=We===void 0?"":We,ze=Ve.split("?"),Ge=ze[0],Je=ze[1],it=Je===void 0?"":Je,tt=pe(Xe),Ye=Object.create(null);return it.split("&").forEach(function(c){var g=c.split("="),U=g[0],ee=g[1],J=ee===void 0?"":ee,Be=pe(U),Me=pe(J);Be===null||Me===null||Be===""&&Me===""||Ye[Be]||(Ye[Be]=Me)}),{url:Ge,query:Ye,hash:tt}}(p).query),k);return Object.keys(Fe).forEach(function(He){var Ke=fe(He,l),Ve=fe(Fe[He],l);Ke!==null&&Ve!==null&&De.push(Ke+"="+Ve)}),ae+(De.length?"?"+De.join("&"):"")+(Te?"#"+Te:"")}function re(y,l){return new Promise(function(p,d){if(l&&document.querySelectorAll("script[data-tag="+l+"]").length)return p();var k=document.createElement("script"),M=se({type:"text/javascript",charset:"utf-8"},y);Object.keys(M).forEach(function(V){return function(ie,ve,me){if(ie)return me===void 0?ie.getAttribute(ve):ie.setAttribute(ve,me)}(k,V,M[V])}),l&&(k.dataset.tag=l),k.onload=function(){return p()},k.onreadystatechange=function(){var V=k.readyState;["complete","loaded"].includes(V)&&(k.onreadystatechange=null,p())},k.onerror=d,document.body.appendChild(k)})}(function(y){y[y.equal=0]="equal",y[y.low=-1]="low",y[y.high=1]="high"})(X||(X={}));var ue=function(){return(ue=Object.assign||function(l){for(var p,d=1,k=arguments.length;d<k;d++)for(var M in p=arguments[d])Object.prototype.hasOwnProperty.call(p,M)&&(l[M]=p[M]);return l}).apply(this,arguments)};function ge(y,l,p,d){return new(p||(p=Promise))(function(k,M){function V(me){try{ve(d.next(me))}catch(ae){M(ae)}}function ie(me){try{ve(d.throw(me))}catch(ae){M(ae)}}function ve(me){var ae;me.done?k(me.value):(ae=me.value,ae instanceof p?ae:new p(function(De){De(ae)})).then(V,ie)}ve((d=d.apply(y,l||[])).next())})}function xe(y,l){var p,d,k,M,V={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return M={next:ie(0),throw:ie(1),return:ie(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function ie(ve){return function(me){return function(ae){if(p)throw new TypeError("Generator is already executing.");for(;V;)try{if(p=1,d&&(k=2&ae[0]?d.return:ae[0]?d.throw||((k=d.return)&&k.call(d),0):d.next)&&!(k=k.call(d,ae[1])).done)return k;switch(d=0,k&&(ae=[2&ae[0],k.value]),ae[0]){case 0:case 1:k=ae;break;case 4:return V.label++,{value:ae[1],done:!1};case 5:V.label++,d=ae[1],ae=[0];continue;case 7:ae=V.ops.pop(),V.trys.pop();continue;default:if(!((k=(k=V.trys).length>0&&k[k.length-1])||ae[0]!==6&&ae[0]!==2)){V=0;continue}if(ae[0]===3&&(!k||ae[1]>k[0]&&ae[1]<k[3])){V.label=ae[1];break}if(ae[0]===6&&V.label<k[1]){V.label=k[1],k=ae;break}if(k&&V.label<k[2]){V.label=k[2],V.ops.push(ae);break}k[2]&&V.ops.pop(),V.trys.pop();continue}ae=l.call(y,V)}catch(De){ae=[6,De],d=0}finally{p=k=0}if(5&ae[0])throw ae[1];return{value:ae[0]?ae[1]:void 0,done:!0}}([ve,me])}}}var ye=function(){function y(){this.interceptors=[]}return y.prototype.use=function(l,p){return this.interceptors.push({resolved:l,rejected:p}),this.interceptors.length-1},y.prototype.traverse=function(l,p){p===void 0&&(p=!1);var d=Promise.resolve(l);return(p?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,function(k,M){if(M){var V=M.resolved,ie=M.rejected;d=d.then(V,ie)}return k},""),d},y.prototype.eject=function(l){this.interceptors[l]&&(this.interceptors[l]=null)},y}(),Ce={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new ye,response:new ye}},be=/^([a-z][a-z\d+\-.]*:)?\/\//i,we=Object.prototype.toString;function Ae(y){return ge(this,void 0,void 0,function(){var l;return xe(this,function(p){switch(p.label){case 0:if(window.fetch)return[2];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,re({src:y})];case 2:return p.sent(),[3,4];case 3:throw l=p.sent(),new Error("\u52A0\u8F7D polyfill "+y+" \u5931\u8D25: "+l.message);case 4:return[2]}})})}function Pe(y){return["Accept","Content-Type"].forEach(function(l){return p=l,void((d=y.headers)&&Object.keys(d).forEach(function(k){k!==p&&k.toUpperCase()===p.toUpperCase()&&(d[p]=d[k],delete d[k])}));var p,d}),function(l){if(we.call(l)!=="[object Object]")return!1;var p=Object.getPrototypeOf(l);return p===null||p===Object.prototype}(y.body)&&(y.body=JSON.stringify(y.body),y.headers&&(y.headers["Content-Type"]="application/json;charset=utf-8")),y}function Oe(y){return ge(this,void 0,void 0,function(){var l,p,d,k,M,V,ie,ve,me,ae,De,Te,Fe,He,Ke,Ve,We;return xe(this,function(Xe){switch(Xe.label){case 0:return l=Ce.baseURL,p=Ce.defaults,d=Ce.interceptors,[4,Ae(Ce.polyfillUrl)];case 1:return Xe.sent(),(k=ue(ue({},p),y)).headers||(k.headers=function(ze){ze===void 0&&(ze="GET");var Ge=Ce.headers[ze]||{};return ue(ue({},Ce.headers.common),Ge)}(k.method)),Pe(k),[4,d.request.traverse(k,!0)];case 2:if((M=Xe.sent())instanceof Error)throw M;return M.url=function(ze,Ge){return!ze||be.test(Ge)?Ge:ze.replace(/\/+$/,"")+"/"+Ge.replace(/^\/+/,"")}(l,M.url),V=M.url,ie=M.timeout,ve=M.params,me=M.method,ae=["GET","DELETE","OPTIONS","HEAD"].includes(me===void 0?"GET":me)&&!!ve,De=ae?Se({url:V,query:ve}):V,Te=[],ie&&!M.signal&&(Ke=new Promise(function(ze){Fe=setTimeout(function(){ze(new Error("timeout"))},ie)}),Te.push(Ke),He=new AbortController,M.signal=He.signal),Te.push(fetch(De,M).catch(function(ze){return ze})),[4,Promise.race(Te)];case 3:return Ve=Xe.sent(),Fe&&clearTimeout(Fe),[4,d.response.traverse(Ve)];case 4:if((We=Xe.sent())instanceof Error)throw He==null||He.abort(),We;return[2,We]}})})}var Ie=function(){function y(l){Ce.interceptors.request.use(function(p){var d=p.url,k=p.method,M=p.body,V=M;if(l.onReportBeforeSend){var ie=l.onReportBeforeSend({url:d,method:k,data:M?JSON.parse(M):null});V=ie!=null&&ie.data?JSON.stringify(ie.data):null}return k!="GET"&&V?R(R({},p),{body:V}):p})}return y.prototype.get=function(l,p){return S(this,void 0,void 0,function(){var d,k;return T(this,function(M){switch(M.label){case 0:return[4,Oe(R({url:l},p))];case 1:return[4,(d=M.sent()).json()];case 2:return k=M.sent(),[2,Promise.resolve({data:k,status:d.status,statusText:d.statusText,headers:d.headers})]}})})},y.prototype.post=function(l,p,d){return S(this,void 0,void 0,function(){var k,M;return T(this,function(V){switch(V.label){case 0:return[4,Oe(R({url:l,body:p,method:"POST"},d))];case 1:return[4,(k=V.sent()).json()];case 2:return M=V.sent(),[2,Promise.resolve({data:M,status:k.status,statusText:k.statusText,headers:k.headers})]}})})},y}(),le=function(){function y(l){this.appkey=l}return y.prototype.getItem=function(l){try{return window.localStorage.getItem(this.getStoreKey(l))}catch{return""}},y.prototype.removeItem=function(l){try{window.localStorage.removeItem(this.getStoreKey(l))}catch{}},y.prototype.setItem=function(l,p){try{window.localStorage.setItem(this.getStoreKey(l),p)}catch{}},y.prototype.setSessionItem=function(l,p){try{window.sessionStorage.setItem(this.getStoreKey(l),p)}catch{}},y.prototype.getSessionItem=function(l){try{return window.sessionStorage.getItem(this.getStoreKey(l))}catch{return""}},y.prototype.getStoreKey=function(l){return E+this.appkey+"_"+l},y.prototype.createDeviceId=function(){try{var l=window.localStorage.getItem(F);return l||(l=function(p){for(var d="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",k="",M=0;M<p;M++)k+=d.charAt(Math.floor(Math.random()*d.length));return k}(32),window.localStorage.setItem(F,l)),l}catch{return""}},y.prototype.clear=function(){try{for(var l=window.localStorage.length,p=0;p<l;p++){var d=window.localStorage.key(p);(d==null?void 0:d.substr(0,9))==E&&window.localStorage.removeItem(d)}}catch{}},y.prototype.getStoreCount=function(){var l=0;try{l=window.localStorage.length}catch{}return l},y}(),H="logid_start",Z="4.5.14-web";return function(y){function l(p){var d=y.call(this,p)||this;d.qimei36="",d.uselessCycleTaskNum=0,d.underWeakNet=!1,d.pauseSearching=!1,d.send=function(ie,ve,me){d.storage.setItem(L,Date.now().toString()),d.network.post(d.uploadUrl||d.strategy.getUploadUrl(),ie.data).then(function(ae){var De;((De=ae==null?void 0:ae.data)===null||De===void 0?void 0:De.result)==100?d.delayTime=1e3*ae.data.delayTime:d.delayTime=0,ve&&ve(ie.data),ie.data.events.forEach(function(Te){d.store.removeEvent(Te).then(function(){d.removeSendingId(A(Te.mapValue))})}),d.doCustomCycleTask()}).catch(function(ae){var De=ie.data.events;d.errorReport.reportError(ae.code?ae.code.toString():"600",ae.message),me&&me(ie.data);var Te=JSON.parse(d.storage.getItem(K));De.forEach(function(Fe){Te&&Te.indexOf(A(Fe))!=-1&&d.store.insertEvent(Fe,function(He,Ke){He&&d.errorReport.reportError("604","insertEvent fail!")}),d.removeSendingId(A(Fe))}),d.monitorUploadFailed()})};var k,M,V=j();return d.isUnderIE8=V>0&&V<8,d.isUnderIE8||(d.isUnderIE=V>0,p.needInitQimei&&W(p.appkey,function(ie){d.qimei36=ie.q36}),d.network=new Ie(p),d.storage=new le(p.appkey),d.initCommonInfo(p),d.store=new de(p.appkey,d.storage),d.errorReport=new Q(d.config,d.commonInfo,"web",d.network),d.strategy=new h(p.needQueryConfig==null||p.needQueryConfig,d.config,d.commonInfo,d.storage,d.network),d.logidStartTime=d.storage.getItem(H),d.logidStartTime||(d.logidStartTime=Date.now().toString(),d.storage.setItem(H,d.logidStartTime)),k=d.logidStartTime,M=Date.now()-Number.parseFloat(k),Math.floor(M/864e5)>=365&&d.storage.clear(),d.initSession(p),d.onDirectUserAction("rqd_js_init",{}),setTimeout(function(){return d.lifeCycle.emit("init")},0),d.initDelayTime=p.delay?p.delay:1e3,d.cycleTask(d.initDelayTime)),d}return function(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function k(){this.constructor=p}f(p,d),p.prototype=d===null?Object.create(d):(k.prototype=d.prototype,new k)}(l,y),l.prototype.initSession=function(p){var d=18e5;p.sessionDuration&&p.sessionDuration>3e4&&(d=p.sessionDuration),this.beaconSession=new $(this.storage,d,this)},l.prototype.initCommonInfo=function(p){var d=Number(this.storage.getItem(L));try{var k=JSON.parse(this.storage.getItem(K));(Date.now()-d>3e4||!k)&&this.storage.setItem(K,JSON.stringify([]))}catch{}p.uploadUrl&&(this.uploadUrl=p.uploadUrl+"?appkey="+p.appkey);var M=[window.screen.width,window.screen.height];window.devicePixelRatio&&M.push(window.devicePixelRatio),this.commonInfo={deviceId:this.storage.createDeviceId(),language:navigator&&navigator.language||"zh_CN",query:window.location.search,userAgent:navigator.userAgent,pixel:M.join("*"),channelID:p.channelID?String(p.channelID):"",openid:p.openid?String(p.openid):"",unid:p.unionid?String(p.unionid):"",sdkVersion:Z},this.config.appVersion=p.versionCode?String(p.versionCode):"",this.config.strictMode=p.strictMode},l.prototype.cycleTask=function(p){var d=this;this.intervalID=window.setInterval(function(){d.pauseSearching||d.store.getEvents().then(function(k){k.length==0&&(d.pauseSearching=!0);var M=[],V=JSON.parse(d.storage.getItem(K));V||(V=[]),k&&k.forEach(function(ie){var ve=A(ie.mapValue);V.indexOf(ve)==-1&&(M.push(ie),V.push(ve))}),M.length!=0&&(d.storage.setItem(K,JSON.stringify(V)),d._normalLogPipeline(d.assembleData(M)))}).catch(function(k){})},p)},l.prototype.onReport=function(p,d,k){var M=this;if(this.isUnderIE8)this.errorReport.reportError("601","UnderIE8");else{this.pauseSearching=!1;var V=this.generateData(p,d,k);if(k&&this.delayTime==0&&!this.underWeakNet)this._normalLogPipeline(this.assembleData(V));else{var ie=V.shift();ie&&this.store.insertEvent(ie,function(ve){ve&&M.errorReport.reportError("604","insertEvent fail!")}).catch(function(ve){M._normalLogPipeline(M.assembleData(V))})}}},l.prototype.onSendBeacon=function(p,d){if(this.isUnderIE)this.errorReport.reportError("605","UnderIE");else{this.pauseSearching=!1;var k=this.assembleData(this.generateData(p,d,!0));typeof navigator.sendBeacon=="function"&&navigator.sendBeacon(this.uploadUrl||this.strategy.getUploadUrl(),JSON.stringify(k))}},l.prototype.generateData=function(p,d,k){var M=[],V="4.5.14-web_"+(k?"direct_log_id":"normal_log_id"),ie=Number(this.storage.getItem(V));return ie=ie||1,d=R(R({},d),{A99:k?"Y":"N",A100:ie.toString(),A72:Z,A88:this.logidStartTime}),ie++,this.storage.setItem(V,ie.toString()),M.push({eventCode:p,eventTime:Date.now().toString(),mapValue:B(d,this.config.strictMode)}),M},l.prototype.assembleData=function(p){var d=this.beaconSession.getSession();return{appVersion:this.config.appVersion?G(this.config.appVersion):"",sdkId:"js",sdkVersion:Z,mainAppKey:this.config.appkey,platformId:3,common:B(R(R({},this.additionalParams),{A2:this.commonInfo.deviceId,A8:this.commonInfo.openid,A12:this.commonInfo.language,A17:this.commonInfo.pixel,A23:this.commonInfo.channelID,A50:this.commonInfo.unid,A76:d.sessionId,A101:this.commonInfo.userAgent,A102:window.location.href,A104:document.referrer,A119:this.commonInfo.query,A153:this.qimei36}),!1),events:p}},l.prototype.monitorUploadFailed=function(){this.uselessCycleTaskNum++,this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(6e4),this.underWeakNet=!0)},l.prototype.doCustomCycleTask=function(){this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(this.initDelayTime)),this.uselessCycleTaskNum=0,this.underWeakNet=!1},l}(C)})},"./lib/crypto.js":function(n,s,r){(function(a){var e=r("./node_modules/@babel/runtime/helpers/typeof.js"),O=O||function(f,R){var S={},T=S.lib={},E=function(){},F=T.Base={extend:function(x){E.prototype=this;var C=new E;return x&&C.mixIn(x),C.hasOwnProperty("init")||(C.init=function(){C.$super.init.apply(this,arguments)}),C.init.prototype=C,C.$super=this,C},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var C in x)x.hasOwnProperty(C)&&(this[C]=x[C]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}},L=T.WordArray=F.extend({init:function(x,C){x=this.words=x||[],this.sigBytes=C!=R?C:4*x.length},toString:function(x){return(x||P).stringify(this)},concat:function(x){var C=this.words,Q=x.words,h=this.sigBytes;if(x=x.sigBytes,this.clamp(),h%4)for(var q=0;q<x;q++)C[h+q>>>2]|=(Q[q>>>2]>>>24-8*(q%4)&255)<<24-8*((h+q)%4);else if(65535<Q.length)for(q=0;q<x;q+=4)C[h+q>>>2]=Q[q>>>2];else C.push.apply(C,Q);return this.sigBytes+=x,this},clamp:function(){var x=this.words,C=this.sigBytes;x[C>>>2]&=4294967295<<32-8*(C%4),x.length=f.ceil(C/4)},clone:function(){var x=F.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var C=[],Q=0;Q<x;Q+=4)C.push(4294967296*f.random()|0);return new L.init(C,x)}}),K=S.enc={},P=K.Hex={stringify:function(x){var C=x.words;x=x.sigBytes;for(var Q=[],h=0;h<x;h++){var q=C[h>>>2]>>>24-8*(h%4)&255;Q.push((q>>>4).toString(16)),Q.push((q&15).toString(16))}return Q.join("")},parse:function(x){for(var C=x.length,Q=[],h=0;h<C;h+=2)Q[h>>>3]|=parseInt(x.substr(h,2),16)<<24-4*(h%8);return new L.init(Q,C/2)}},N=K.Latin1={stringify:function(x){var C=x.words;x=x.sigBytes;for(var Q=[],h=0;h<x;h++)Q.push(String.fromCharCode(C[h>>>2]>>>24-8*(h%4)&255));return Q.join("")},parse:function(x){for(var C=x.length,Q=[],h=0;h<C;h++)Q[h>>>2]|=(x.charCodeAt(h)&255)<<24-8*(h%4);return new L.init(Q,C)}},b=K.Utf8={stringify:function(x){try{return decodeURIComponent(escape(N.stringify(x)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(x){return N.parse(unescape(encodeURIComponent(x)))}},B=T.BufferedBlockAlgorithm=F.extend({reset:function(){this._data=new L.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=b.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var C=this._data,Q=C.words,h=C.sigBytes,q=this.blockSize,$=h/(4*q),$=x?f.ceil($):f.max(($|0)-this._minBufferSize,0);if(x=$*q,h=f.min(4*x,h),x){for(var j=0;j<x;j+=q)this._doProcessBlock(Q,j);j=Q.splice(0,x),C.sigBytes-=h}return new L.init(j,h)},clone:function(){var x=F.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});T.Hasher=B.extend({cfg:F.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){B.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){return x&&this._append(x),this._doFinalize()},blockSize:16,_createHelper:function(x){return function(C,Q){return new x.init(Q).finalize(C)}},_createHmacHelper:function(x){return function(C,Q){return new G.HMAC.init(x,Q).finalize(C)}}});var G=S.algo={};return S}(Math);(function(){var f=O,E=f.lib,R=E.WordArray,S=E.Hasher,T=[],E=f.algo.SHA1=S.extend({_doReset:function(){this._hash=new R.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(L,K){for(var P=this._hash.words,N=P[0],b=P[1],B=P[2],G=P[3],A=P[4],x=0;80>x;x++){if(16>x)T[x]=L[K+x]|0;else{var C=T[x-3]^T[x-8]^T[x-14]^T[x-16];T[x]=C<<1|C>>>31}C=(N<<5|N>>>27)+A+T[x],C=20>x?C+((b&B|~b&G)+1518500249):40>x?C+((b^B^G)+1859775393):60>x?C+((b&B|b&G|B&G)-1894007588):C+((b^B^G)-899497514),A=G,G=B,B=b<<30|b>>>2,b=N,N=C}P[0]=P[0]+N|0,P[1]=P[1]+b|0,P[2]=P[2]+B|0,P[3]=P[3]+G|0,P[4]=P[4]+A|0},_doFinalize:function(){var L=this._data,K=L.words,P=8*this._nDataBytes,N=8*L.sigBytes;return K[N>>>5]|=128<<24-N%32,K[(N+64>>>9<<4)+14]=Math.floor(P/4294967296),K[(N+64>>>9<<4)+15]=P,L.sigBytes=4*K.length,this._process(),this._hash},clone:function(){var L=S.clone.call(this);return L._hash=this._hash.clone(),L}});f.SHA1=S._createHelper(E),f.HmacSHA1=S._createHmacHelper(E)})(),function(){var f=O,R=f.enc.Utf8;f.algo.HMAC=f.lib.Base.extend({init:function(T,E){T=this._hasher=new T.init,typeof E=="string"&&(E=R.parse(E));var F=T.blockSize,L=4*F;E.sigBytes>L&&(E=T.finalize(E)),E.clamp();for(var K=this._oKey=E.clone(),P=this._iKey=E.clone(),N=K.words,b=P.words,B=0;B<F;B++)N[B]^=1549556828,b[B]^=909522486;K.sigBytes=P.sigBytes=L,this.reset()},reset:function(){var T=this._hasher;T.reset(),T.update(this._iKey)},update:function(T){return this._hasher.update(T),this},finalize:function(T){var E=this._hasher;return T=E.finalize(T),E.reset(),E.finalize(this._oKey.clone().concat(T))}})}(),function(){var f=O,R=f.lib,S=R.WordArray,T=f.enc;T.Base64={stringify:function(F){var L=F.words,K=F.sigBytes,P=this._map;F.clamp();for(var N=[],b=0;b<K;b+=3)for(var B=L[b>>>2]>>>24-b%4*8&255,G=L[b+1>>>2]>>>24-(b+1)%4*8&255,A=L[b+2>>>2]>>>24-(b+2)%4*8&255,x=B<<16|G<<8|A,C=0;C<4&&b+C*.75<K;C++)N.push(P.charAt(x>>>6*(3-C)&63));var Q=P.charAt(64);if(Q)for(;N.length%4;)N.push(Q);return N.join("")},parse:function(F){var L=F.length,K=this._map,P=K.charAt(64);if(P){var N=F.indexOf(P);N!=-1&&(L=N)}for(var b=[],B=0,G=0;G<L;G++)if(G%4){var A=K.indexOf(F.charAt(G-1))<<G%4*2,x=K.indexOf(F.charAt(G))>>>6-G%4*2;b[B>>>2]|=(A|x)<<24-B%4*8,B++}return S.create(b,B)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e(a)==="object"?a.exports=O:window.CryptoJS=O}).call(this,r("./node_modules/webpack/buildin/module.js")(n))},"./lib/json2xml.js":function(n,s,r){var a=r("./node_modules/@babel/runtime/helpers/typeof.js"),e="a-zA-Z_\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FFF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",O="-.0-9\xB7\u0300-\u036F\u203F\u2040",f=new RegExp("^([^"+e+"])|^((x|X)(m|M)(l|L))|([^"+e+O+"])","g"),R=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,S=function(K){var P=[];if(K instanceof Object)for(var N in K)K.hasOwnProperty(N)&&P.push(N);return P},T=function(K,P){var N=function(B,G,A,x,C){var Q=P.indent!==void 0?P.indent:"	",h=P.prettyPrint?`
`+new Array(x).join(Q):"";P.removeIllegalNameCharacters&&(B=B.replace(f,"_"));var q=[h,"<",B,A||""];return G&&G.length>0?(q.push(">"),q.push(G),C&&q.push(h),q.push("</"),q.push(B),q.push(">")):q.push("/>"),q.join("")};return function b(B,G,A){var x=a(B);switch((Array.isArray?Array.isArray(B):B instanceof Array)?x="array":B instanceof Date&&(x="date"),x){case"array":var C=[];return B.map(function($){C.push(b($,1,A+1))}),P.prettyPrint&&C.push(`
`),C.join("");case"date":return B.toJSON?B.toJSON():B+"";case"object":var Q=[];for(var h in B)if(B.hasOwnProperty(h))if(B[h]instanceof Array)for(var q=0;q<B[h].length;q++)B[h].hasOwnProperty(q)&&Q.push(N(h,b(B[h][q],0,A+1),null,A+1,S(B[h][q]).length));else Q.push(N(h,b(B[h],0,A+1),null,A+1));return P.prettyPrint&&Q.length>0&&Q.push(`
`),Q.join("");case"function":return B();default:return P.escape?F(B):""+B}}(K,0,0)},E=function(K){var P=['<?xml version="1.0" encoding="UTF-8"'];return K&&P.push(' standalone="yes"'),P.push("?>"),P.join("")};function F(L){return(""+L).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(R,"")}n.exports=function(L,K){if(K||(K={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  ",escape:!0}),typeof L=="string")try{L=JSON.parse(L.toString())}catch{return!1}var P="",N="";K&&(a(K)=="object"?(K.xmlHeader&&(P=E(!!K.xmlHeader.standalone)),typeof K.docType!="undefined"&&(N="<!DOCTYPE "+K.docType+">")):P=E()),K=K||{};var b=[P,K.prettyPrint&&N?`
`:"",N,T(L,K)];return b.join("").replace(/\n{2,}/g,`
`).replace(/\s+$/g,"")}},"./lib/md5.js":function(module,exports,__webpack_require__){(function(process,global,module){var __WEBPACK_AMD_DEFINE_RESULT__,_typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/typeof.js");(function(){var ERROR="input is invalid type",WINDOW=(typeof window=="undefined"?"undefined":_typeof(window))==="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&(typeof self=="undefined"?"undefined":_typeof(self))==="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&(typeof process=="undefined"?"undefined":_typeof(process))==="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&_typeof(module)==="object"&&module.exports,AMD=__webpack_require__("./node_modules/webpack/buildin/amd-options.js"),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return _typeof(n)==="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});var createOutputMethod=function(s){return function(r,a){return new Md5(!0).update(r,a)[s]()}},createMethod=function(){var s=createOutputMethod("hex");NODE_JS&&(s=nodeWrap(s)),s.getCtx=s.create=function(){return new Md5},s.update=function(e){return s.create().update(e)};for(var r=0;r<OUTPUT_TYPES.length;++r){var a=OUTPUT_TYPES[r];s[a]=createOutputMethod(a)}return s},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function n(s){if(typeof s=="string")return crypto.createHash("md5").update(s,"utf8").digest("hex");if(s==null)throw ERROR;return s.constructor===ArrayBuffer&&(s=new Uint8Array(s)),Array.isArray(s)||ArrayBuffer.isView(s)||s.constructor===Buffer?crypto.createHash("md5").update(new Buffer(s)).digest("hex"):method(s)};return nodeMethod};function Md5(n){if(n)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var s=new ArrayBuffer(68);this.buffer8=new Uint8Array(s),this.blocks=new Uint32Array(s)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(n,s){if(!this.finalized){for(var r,a=0,e,O=n.length,f=this.blocks,R=this.buffer8;a<O;){if(this.hashed&&(this.hashed=!1,f[0]=f[16],f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0),ARRAY_BUFFER)for(e=this.start;a<O&&e<64;++a)r=n.charCodeAt(a),s||r<128?R[e++]=r:r<2048?(R[e++]=192|r>>6,R[e++]=128|r&63):r<55296||r>=57344?(R[e++]=224|r>>12,R[e++]=128|r>>6&63,R[e++]=128|r&63):(r=65536+((r&1023)<<10|n.charCodeAt(++a)&1023),R[e++]=240|r>>18,R[e++]=128|r>>12&63,R[e++]=128|r>>6&63,R[e++]=128|r&63);else for(e=this.start;a<O&&e<64;++a)r=n.charCodeAt(a),s||r<128?f[e>>2]|=r<<SHIFT[e++&3]:r<2048?(f[e>>2]|=(192|r>>6)<<SHIFT[e++&3],f[e>>2]|=(128|r&63)<<SHIFT[e++&3]):r<55296||r>=57344?(f[e>>2]|=(224|r>>12)<<SHIFT[e++&3],f[e>>2]|=(128|r>>6&63)<<SHIFT[e++&3],f[e>>2]|=(128|r&63)<<SHIFT[e++&3]):(r=65536+((r&1023)<<10|n.charCodeAt(++a)&1023),f[e>>2]|=(240|r>>18)<<SHIFT[e++&3],f[e>>2]|=(128|r>>12&63)<<SHIFT[e++&3],f[e>>2]|=(128|r>>6&63)<<SHIFT[e++&3],f[e>>2]|=(128|r&63)<<SHIFT[e++&3]);this.lastByteIndex=e,this.bytes+=e-this.start,e>=64?(this.start=e-64,this.hash(),this.hashed=!0):this.start=e}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,s=this.lastByteIndex;n[s>>2]|=EXTRA[s&3],s>=56&&(this.hashed||this.hash(),n[0]=n[16],n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.bytes<<3,n[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var n,s,r,a,e,O,f=this.blocks;this.first?(n=f[0]-680876937,n=(n<<7|n>>>25)-271733879<<0,a=(-1732584194^n&2004318071)+f[1]-117830708,a=(a<<12|a>>>20)+n<<0,r=(-271733879^a&(n^-271733879))+f[2]-1126478375,r=(r<<17|r>>>15)+a<<0,s=(n^r&(a^n))+f[3]-1316259209,s=(s<<22|s>>>10)+r<<0):(n=this.h0,s=this.h1,r=this.h2,a=this.h3,n+=(a^s&(r^a))+f[0]-680876936,n=(n<<7|n>>>25)+s<<0,a+=(r^n&(s^r))+f[1]-389564586,a=(a<<12|a>>>20)+n<<0,r+=(s^a&(n^s))+f[2]+606105819,r=(r<<17|r>>>15)+a<<0,s+=(n^r&(a^n))+f[3]-1044525330,s=(s<<22|s>>>10)+r<<0),n+=(a^s&(r^a))+f[4]-176418897,n=(n<<7|n>>>25)+s<<0,a+=(r^n&(s^r))+f[5]+1200080426,a=(a<<12|a>>>20)+n<<0,r+=(s^a&(n^s))+f[6]-1473231341,r=(r<<17|r>>>15)+a<<0,s+=(n^r&(a^n))+f[7]-45705983,s=(s<<22|s>>>10)+r<<0,n+=(a^s&(r^a))+f[8]+1770035416,n=(n<<7|n>>>25)+s<<0,a+=(r^n&(s^r))+f[9]-1958414417,a=(a<<12|a>>>20)+n<<0,r+=(s^a&(n^s))+f[10]-42063,r=(r<<17|r>>>15)+a<<0,s+=(n^r&(a^n))+f[11]-1990404162,s=(s<<22|s>>>10)+r<<0,n+=(a^s&(r^a))+f[12]+1804603682,n=(n<<7|n>>>25)+s<<0,a+=(r^n&(s^r))+f[13]-40341101,a=(a<<12|a>>>20)+n<<0,r+=(s^a&(n^s))+f[14]-1502002290,r=(r<<17|r>>>15)+a<<0,s+=(n^r&(a^n))+f[15]+1236535329,s=(s<<22|s>>>10)+r<<0,n+=(r^a&(s^r))+f[1]-165796510,n=(n<<5|n>>>27)+s<<0,a+=(s^r&(n^s))+f[6]-1069501632,a=(a<<9|a>>>23)+n<<0,r+=(n^s&(a^n))+f[11]+643717713,r=(r<<14|r>>>18)+a<<0,s+=(a^n&(r^a))+f[0]-373897302,s=(s<<20|s>>>12)+r<<0,n+=(r^a&(s^r))+f[5]-701558691,n=(n<<5|n>>>27)+s<<0,a+=(s^r&(n^s))+f[10]+38016083,a=(a<<9|a>>>23)+n<<0,r+=(n^s&(a^n))+f[15]-660478335,r=(r<<14|r>>>18)+a<<0,s+=(a^n&(r^a))+f[4]-405537848,s=(s<<20|s>>>12)+r<<0,n+=(r^a&(s^r))+f[9]+568446438,n=(n<<5|n>>>27)+s<<0,a+=(s^r&(n^s))+f[14]-1019803690,a=(a<<9|a>>>23)+n<<0,r+=(n^s&(a^n))+f[3]-187363961,r=(r<<14|r>>>18)+a<<0,s+=(a^n&(r^a))+f[8]+1163531501,s=(s<<20|s>>>12)+r<<0,n+=(r^a&(s^r))+f[13]-1444681467,n=(n<<5|n>>>27)+s<<0,a+=(s^r&(n^s))+f[2]-51403784,a=(a<<9|a>>>23)+n<<0,r+=(n^s&(a^n))+f[7]+1735328473,r=(r<<14|r>>>18)+a<<0,s+=(a^n&(r^a))+f[12]-1926607734,s=(s<<20|s>>>12)+r<<0,e=s^r,n+=(e^a)+f[5]-378558,n=(n<<4|n>>>28)+s<<0,a+=(e^n)+f[8]-2022574463,a=(a<<11|a>>>21)+n<<0,O=a^n,r+=(O^s)+f[11]+1839030562,r=(r<<16|r>>>16)+a<<0,s+=(O^r)+f[14]-35309556,s=(s<<23|s>>>9)+r<<0,e=s^r,n+=(e^a)+f[1]-1530992060,n=(n<<4|n>>>28)+s<<0,a+=(e^n)+f[4]+1272893353,a=(a<<11|a>>>21)+n<<0,O=a^n,r+=(O^s)+f[7]-155497632,r=(r<<16|r>>>16)+a<<0,s+=(O^r)+f[10]-1094730640,s=(s<<23|s>>>9)+r<<0,e=s^r,n+=(e^a)+f[13]+681279174,n=(n<<4|n>>>28)+s<<0,a+=(e^n)+f[0]-358537222,a=(a<<11|a>>>21)+n<<0,O=a^n,r+=(O^s)+f[3]-722521979,r=(r<<16|r>>>16)+a<<0,s+=(O^r)+f[6]+76029189,s=(s<<23|s>>>9)+r<<0,e=s^r,n+=(e^a)+f[9]-640364487,n=(n<<4|n>>>28)+s<<0,a+=(e^n)+f[12]-421815835,a=(a<<11|a>>>21)+n<<0,O=a^n,r+=(O^s)+f[15]+530742520,r=(r<<16|r>>>16)+a<<0,s+=(O^r)+f[2]-995338651,s=(s<<23|s>>>9)+r<<0,n+=(r^(s|~a))+f[0]-198630844,n=(n<<6|n>>>26)+s<<0,a+=(s^(n|~r))+f[7]+1126891415,a=(a<<10|a>>>22)+n<<0,r+=(n^(a|~s))+f[14]-1416354905,r=(r<<15|r>>>17)+a<<0,s+=(a^(r|~n))+f[5]-57434055,s=(s<<21|s>>>11)+r<<0,n+=(r^(s|~a))+f[12]+1700485571,n=(n<<6|n>>>26)+s<<0,a+=(s^(n|~r))+f[3]-1894986606,a=(a<<10|a>>>22)+n<<0,r+=(n^(a|~s))+f[10]-1051523,r=(r<<15|r>>>17)+a<<0,s+=(a^(r|~n))+f[1]-2054922799,s=(s<<21|s>>>11)+r<<0,n+=(r^(s|~a))+f[8]+1873313359,n=(n<<6|n>>>26)+s<<0,a+=(s^(n|~r))+f[15]-30611744,a=(a<<10|a>>>22)+n<<0,r+=(n^(a|~s))+f[6]-1560198380,r=(r<<15|r>>>17)+a<<0,s+=(a^(r|~n))+f[13]+1309151649,s=(s<<21|s>>>11)+r<<0,n+=(r^(s|~a))+f[4]-145523070,n=(n<<6|n>>>26)+s<<0,a+=(s^(n|~r))+f[11]-1120210379,a=(a<<10|a>>>22)+n<<0,r+=(n^(a|~s))+f[2]+718787259,r=(r<<15|r>>>17)+a<<0,s+=(a^(r|~n))+f[9]-343485551,s=(s<<21|s>>>11)+r<<0,this.first?(this.h0=n+1732584193<<0,this.h1=s-271733879<<0,this.h2=r-1732584194<<0,this.h3=a+271733878<<0,this.first=!1):(this.h0=this.h0+n<<0,this.h1=this.h1+s<<0,this.h2=this.h2+r<<0,this.h3=this.h3+a<<0)},Md5.prototype.hex=function(){this.finalize();var n=this.h0,s=this.h1,r=this.h2,a=this.h3;return HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(n){if(n==="hex")return this.hex();this.finalize();var s=this.h0,r=this.h1,a=this.h2,e=this.h3,O=[s&255,s>>8&255,s>>16&255,s>>24&255,r&255,r>>8&255,r>>16&255,r>>24&255,a&255,a>>8&255,a>>16&255,a>>24&255,e&255,e>>8&255,e>>16&255,e>>24&255];return O},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(16),s=new Uint32Array(n);return s[0]=this.h0,s[1]=this.h1,s[2]=this.h2,s[3]=this.h3,n},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var n,s,r,a="",e=this.array(),O=0;O<15;)n=e[O++],s=e[O++],r=e[O++],a+=BASE64_ENCODE_CHAR[n>>>2]+BASE64_ENCODE_CHAR[(n<<4|s>>>4)&63]+BASE64_ENCODE_CHAR[(s<<2|r>>>6)&63]+BASE64_ENCODE_CHAR[r&63];return n=e[O],a+=BASE64_ENCODE_CHAR[n>>>2]+BASE64_ENCODE_CHAR[n<<4&63]+"==",a};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==void 0&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__("./node_modules/process/browser.js"),__webpack_require__("./node_modules/webpack/buildin/global.js"),__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./lib/request.js":function(n,s,r){var a=r("./node_modules/@babel/runtime/helpers/typeof.js"),e=function(E){switch(a(E)){case"string":return E;case"boolean":return E?"true":"false";case"number":return isFinite(E)?E:"";default:return""}},O=function(E,F,L,K){return F=F||"&",L=L||"=",E===null&&(E=void 0),a(E)==="object"?Object.keys(E).map(function(P){var N=encodeURIComponent(e(P))+L;return Array.isArray(E[P])?E[P].map(function(b){return N+encodeURIComponent(e(b))}).join(F):N+encodeURIComponent(e(E[P]))}).filter(Boolean).join(F):K?encodeURIComponent(e(K))+L+encodeURIComponent(e(E)):""},f=function(E,F,L){var K={};return F.getAllResponseHeaders().trim().split(`
`).forEach(function(P){if(P){var N=P.indexOf(":"),b=P.substr(0,N).trim().toLowerCase(),B=P.substr(N+1).trim();K[b]=B}}),{error:E,statusCode:F.status,statusMessage:F.statusText,headers:K,body:L}},R=function(E,F){return!F&&F==="text"?E.responseText:E.response},S=function(E,F){var L=(E.method||"GET").toUpperCase(),K=E.url;if(E.qs){var P=O(E.qs);P&&(K+=(K.indexOf("?")===-1?"?":"&")+P)}var N=new XMLHttpRequest;if(N.open(L,K,!0),N.responseType=E.dataType||"text",E.xhrFields)for(var b in E.xhrFields)N[b]=E.xhrFields[b];var B=E.headers;if(B)for(var G in B)B.hasOwnProperty(G)&&G.toLowerCase()!=="content-length"&&G.toLowerCase()!=="user-agent"&&G.toLowerCase()!=="origin"&&G.toLowerCase()!=="host"&&N.setRequestHeader(G,B[G]);return E.onProgress&&N.upload&&(N.upload.onprogress=E.onProgress),E.onDownloadProgress&&(N.onprogress=E.onDownloadProgress),E.timeout&&(N.timeout=E.timeout),N.ontimeout=function(A){var x=new Error("timeout");F(f(x,N))},N.onload=function(){F(f(null,N,R(N,E.dataType)))},N.onerror=function(A){var x=R(N,E.dataType);if(x)F(f(null,N,x));else{var C=N.statusText;!C&&N.status===0&&(C=new Error("CORS blocked or network error")),F(f(C,N,x))}},N.send(E.body||""),N};n.exports=S},"./lib/xml2json.js":function(n,s,r){var a=r("./node_modules/@xmldom/xmldom/lib/index.js").DOMParser,e=function(){this.version="1.3.5";var f={mergeCDATA:!0,normalize:!0,stripElemPrefix:!0},R=new RegExp(/(?!xmlns)^.*:/);return this.grokType=function(S){return/^\s*$/.test(S)?null:/^(?:true|false)$/i.test(S)?S.toLowerCase()==="true":isFinite(S)?parseFloat(S):S},this.parseString=function(S,T){if(S){var E=this.stringToXML(S);return E.getElementsByTagName("parsererror").length?null:this.parseXML(E,T)}else return null},this.parseXML=function(S,T){for(var E in T)f[E]=T[E];var F={},L=0,K="",P=S.childNodes.length;if(P)for(var N,b,B,G=0;G<S.childNodes.length;G++)N=S.childNodes.item(G),N.nodeType===4?f.mergeCDATA&&(K+=N.nodeValue):N.nodeType===3?K+=N.nodeValue:N.nodeType===1&&(L===0&&(F={}),f.stripElemPrefix?b=N.nodeName.replace(R,""):b=N.nodeName,B=e.parseXML(N),F.hasOwnProperty(b)?(F[b].constructor!==Array&&(F[b]=[F[b]]),F[b].push(B)):(F[b]=B,L++));return Object.keys(F).length||(F=K||""),F},this.xmlToString=function(S){try{var T=S.xml?S.xml:new XMLSerializer().serializeToString(S);return T}catch{return null}},this.stringToXML=function(S){try{var T=null;if(window.DOMParser){var E=new a;return T=E.parseFromString(S,"text/xml"),T}else return T=new ActiveXObject("Microsoft.XMLDOM"),T.async=!1,T.loadXML(S),T}catch{return null}},this}.call({}),O=function(R){return e.parseString(R)};n.exports=O},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(n,s){function r(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(n,s){function r(e,O){for(var f=0;f<O.length;f++){var R=O[f];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(e,R.key,R)}}function a(e,O,f){return O&&r(e.prototype,O),f&&r(e,f),Object.defineProperty(e,"prototype",{writable:!1}),e}n.exports=a,n.exports.__esModule=!0,n.exports.default=n.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(n,s){function r(a){return n.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n.exports.__esModule=!0,n.exports.default=n.exports,r(a)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports},"./node_modules/@xmldom/xmldom/lib/conventions.js":function(n,s,r){function a(S,T,E){if(E===void 0&&(E=Array.prototype),S&&typeof E.find=="function")return E.find.call(S,T);for(var F=0;F<S.length;F++)if(Object.prototype.hasOwnProperty.call(S,F)){var L=S[F];if(T.call(void 0,L,F,S))return L}}function e(S,T){return T===void 0&&(T=Object),T&&typeof T.freeze=="function"?T.freeze(S):S}function O(S,T){if(S===null||typeof S!="object")throw new TypeError("target is not an object");for(var E in T)Object.prototype.hasOwnProperty.call(T,E)&&(S[E]=T[E]);return S}var f=e({HTML:"text/html",isHTML:function(S){return S===f.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),R=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(S){return S===R.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});s.assign=O,s.find=a,s.freeze=e,s.MIME_TYPE=f,s.NAMESPACE=R},"./node_modules/@xmldom/xmldom/lib/dom-parser.js":function(n,s,r){var a=r("./node_modules/@xmldom/xmldom/lib/conventions.js"),e=r("./node_modules/@xmldom/xmldom/lib/dom.js"),O=r("./node_modules/@xmldom/xmldom/lib/entities.js"),f=r("./node_modules/@xmldom/xmldom/lib/sax.js"),R=e.DOMImplementation,S=a.NAMESPACE,T=f.ParseError,E=f.XMLReader;function F(A){return A.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function L(A){this.options=A||{locator:{}}}L.prototype.parseFromString=function(A,x){var C=this.options,Q=new E,h=C.domBuilder||new P,q=C.errorHandler,$=C.locator,j=C.xmlns||{},W=/\/x?html?$/.test(x),I=W?O.HTML_ENTITIES:O.XML_ENTITIES;$&&h.setDocumentLocator($),Q.errorHandler=K(q,h,$),Q.domBuilder=C.domBuilder||h,W&&(j[""]=S.HTML),j.xml=j.xml||S.XML;var X=C.normalizeLineEndings||F;return A&&typeof A=="string"?Q.parse(X(A),j,I):Q.errorHandler.error("invalid doc source"),h.doc};function K(A,x,C){if(!A){if(x instanceof P)return x;A=x}var Q={},h=A instanceof Function;C=C||{};function q($){var j=A[$];!j&&h&&(j=A.length==2?function(W){A($,W)}:A),Q[$]=j&&function(W){j("[xmldom "+$+"]	"+W+b(C))}||function(){}}return q("warning"),q("error"),q("fatalError"),Q}function P(){this.cdata=!1}function N(A,x){x.lineNumber=A.lineNumber,x.columnNumber=A.columnNumber}P.prototype={startDocument:function(){this.doc=new R().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(A,x,C,Q){var h=this.doc,q=h.createElementNS(A,C||x),$=Q.length;G(this,q),this.currentElement=q,this.locator&&N(this.locator,q);for(var j=0;j<$;j++){var A=Q.getURI(j),W=Q.getValue(j),C=Q.getQName(j),I=h.createAttributeNS(A,C);this.locator&&N(Q.getLocator(j),I),I.value=I.nodeValue=W,q.setAttributeNode(I)}},endElement:function(A,x,C){var Q=this.currentElement;Q.tagName,this.currentElement=Q.parentNode},startPrefixMapping:function(A,x){},endPrefixMapping:function(A){},processingInstruction:function(A,x){var C=this.doc.createProcessingInstruction(A,x);this.locator&&N(this.locator,C),G(this,C)},ignorableWhitespace:function(A,x,C){},characters:function(A,x,C){if(A=B.apply(this,arguments),A){if(this.cdata)var Q=this.doc.createCDATASection(A);else var Q=this.doc.createTextNode(A);this.currentElement?this.currentElement.appendChild(Q):/^\s*$/.test(A)&&this.doc.appendChild(Q),this.locator&&N(this.locator,Q)}},skippedEntity:function(A){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(A){(this.locator=A)&&(A.lineNumber=0)},comment:function(A,x,C){A=B.apply(this,arguments);var Q=this.doc.createComment(A);this.locator&&N(this.locator,Q),G(this,Q)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(A,x,C){var Q=this.doc.implementation;if(Q&&Q.createDocumentType){var h=Q.createDocumentType(A,x,C);this.locator&&N(this.locator,h),G(this,h),this.doc.doctype=h}},warning:function(A){console.warn("[xmldom warning]	"+A,b(this.locator))},error:function(A){console.error("[xmldom error]	"+A,b(this.locator))},fatalError:function(A){throw new T(A,this.locator)}};function b(A){if(A)return`
@`+(A.systemId||"")+"#[line:"+A.lineNumber+",col:"+A.columnNumber+"]"}function B(A,x,C){return typeof A=="string"?A.substr(x,C):A.length>=x+C||x?new java.lang.String(A,x,C)+"":A}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(A){P.prototype[A]=function(){return null}});function G(A,x){A.currentElement?A.currentElement.appendChild(x):A.doc.appendChild(x)}s.__DOMHandler=P,s.normalizeLineEndings=F,s.DOMParser=L},"./node_modules/@xmldom/xmldom/lib/dom.js":function(n,s,r){var a=r("./node_modules/@xmldom/xmldom/lib/conventions.js"),e=a.find,O=a.NAMESPACE;function f(c){return c!==""}function R(c){return c?c.split(/[\t\n\f\r ]+/).filter(f):[]}function S(c,g){return c.hasOwnProperty(g)||(c[g]=!0),c}function T(c){if(!c)return[];var g=R(c);return Object.keys(g.reduce(S,{}))}function E(c){return function(g){return c&&c.indexOf(g)!==-1}}function F(c,g){for(var U in c)Object.prototype.hasOwnProperty.call(c,U)&&(g[U]=c[U])}function L(c,g){var U=c.prototype;if(!(U instanceof g)){let ee=function(){};ee.prototype=g.prototype,ee=new ee,F(U,ee),c.prototype=U=ee}U.constructor!=c&&(typeof c!="function"&&console.error("unknown Class:"+c),U.constructor=c)}var K={},P=K.ELEMENT_NODE=1,N=K.ATTRIBUTE_NODE=2,b=K.TEXT_NODE=3,B=K.CDATA_SECTION_NODE=4,G=K.ENTITY_REFERENCE_NODE=5,A=K.ENTITY_NODE=6,x=K.PROCESSING_INSTRUCTION_NODE=7,C=K.COMMENT_NODE=8,Q=K.DOCUMENT_NODE=9,h=K.DOCUMENT_TYPE_NODE=10,q=K.DOCUMENT_FRAGMENT_NODE=11,$=K.NOTATION_NODE=12,j={},W={};j.INDEX_SIZE_ERR=(W[1]="Index size error",1),j.DOMSTRING_SIZE_ERR=(W[2]="DOMString size error",2);var I=j.HIERARCHY_REQUEST_ERR=(W[3]="Hierarchy request error",3);j.WRONG_DOCUMENT_ERR=(W[4]="Wrong document",4),j.INVALID_CHARACTER_ERR=(W[5]="Invalid character",5),j.NO_DATA_ALLOWED_ERR=(W[6]="No data allowed",6),j.NO_MODIFICATION_ALLOWED_ERR=(W[7]="No modification allowed",7);var X=j.NOT_FOUND_ERR=(W[8]="Not found",8);j.NOT_SUPPORTED_ERR=(W[9]="Not supported",9);var te=j.INUSE_ATTRIBUTE_ERR=(W[10]="Attribute in use",10);j.INVALID_STATE_ERR=(W[11]="Invalid state",11),j.SYNTAX_ERR=(W[12]="Syntax error",12),j.INVALID_MODIFICATION_ERR=(W[13]="Invalid modification",13),j.NAMESPACE_ERR=(W[14]="Invalid namespace",14),j.INVALID_ACCESS_ERR=(W[15]="Invalid access",15);function Y(c,g){if(g instanceof Error)var U=g;else U=this,Error.call(this,W[c]),this.message=W[c],Error.captureStackTrace&&Error.captureStackTrace(this,Y);return U.code=c,g&&(this.message=this.message+": "+g),U}Y.prototype=Error.prototype,F(j,Y);function ne(){}ne.prototype={length:0,item:function(c){return this[c]||null},toString:function(c,g){for(var U=[],ee=0;ee<this.length;ee++)Je(this[ee],U,c,g);return U.join("")},filter:function(c){return Array.prototype.filter.call(this,c)},indexOf:function(c){return Array.prototype.indexOf.call(this,c)}};function ce(c,g){this._node=c,this._refresh=g,he(this)}function he(c){var g=c._node._inc||c._node.ownerDocument._inc;if(c._inc!=g){var U=c._refresh(c._node);Ye(c,"length",U.length),F(U,c),c._inc=g}}ce.prototype.item=function(c){return he(this),this[c]},L(ce,ne);function de(){}function se(c,g){for(var U=c.length;U--;)if(c[U]===g)return U}function pe(c,g,U,ee){if(ee?g[se(g,ee)]=U:g[g.length++]=U,c){U.ownerElement=c;var J=c.ownerDocument;J&&(ee&&Ce(J,c,ee),ye(J,c,U))}}function fe(c,g,U){var ee=se(g,U);if(ee>=0){for(var J=g.length-1;ee<J;)g[ee]=g[++ee];if(g.length=J,c){var Be=c.ownerDocument;Be&&(Ce(Be,c,U),U.ownerElement=null)}}else throw new Y(X,new Error(c.tagName+"@"+U))}de.prototype={length:0,item:ne.prototype.item,getNamedItem:function(c){for(var g=this.length;g--;){var U=this[g];if(U.nodeName==c)return U}},setNamedItem:function(c){var g=c.ownerElement;if(g&&g!=this._ownerElement)throw new Y(te);var U=this.getNamedItem(c.nodeName);return pe(this._ownerElement,this,c,U),U},setNamedItemNS:function(c){var g=c.ownerElement,U;if(g&&g!=this._ownerElement)throw new Y(te);return U=this.getNamedItemNS(c.namespaceURI,c.localName),pe(this._ownerElement,this,c,U),U},removeNamedItem:function(c){var g=this.getNamedItem(c);return fe(this._ownerElement,this,g),g},removeNamedItemNS:function(c,g){var U=this.getNamedItemNS(c,g);return fe(this._ownerElement,this,U),U},getNamedItemNS:function(c,g){for(var U=this.length;U--;){var ee=this[U];if(ee.localName==g&&ee.namespaceURI==c)return ee}return null}};function Se(){}Se.prototype={hasFeature:function(c,g){return!0},createDocument:function(c,g,U){var ee=new xe;if(ee.implementation=this,ee.childNodes=new ne,ee.doctype=U||null,U&&ee.appendChild(U),g){var J=ee.createElementNS(c,g);ee.appendChild(J)}return ee},createDocumentType:function(c,g,U){var ee=new De;return ee.name=c,ee.nodeName=c,ee.publicId=g||"",ee.systemId=U||"",ee}};function re(){}re.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(c,g){return d(this,c,g)},replaceChild:function(c,g){d(this,c,g,p),g&&this.removeChild(g)},removeChild:function(c){return we(this,c)},appendChild:function(c){return this.insertBefore(c,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(c){return tt(this.ownerDocument||this,this,c)},normalize:function(){for(var c=this.firstChild;c;){var g=c.nextSibling;g&&g.nodeType==b&&c.nodeType==b?(this.removeChild(g),c.appendData(g.data)):(c.normalize(),c=g)}},isSupported:function(c,g){return this.ownerDocument.implementation.hasFeature(c,g)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(c){for(var g=this;g;){var U=g._nsMap;if(U){for(var ee in U)if(Object.prototype.hasOwnProperty.call(U,ee)&&U[ee]===c)return ee}g=g.nodeType==N?g.ownerDocument:g.parentNode}return null},lookupNamespaceURI:function(c){for(var g=this;g;){var U=g._nsMap;if(U&&Object.prototype.hasOwnProperty.call(U,c))return U[c];g=g.nodeType==N?g.ownerDocument:g.parentNode}return null},isDefaultNamespace:function(c){var g=this.lookupPrefix(c);return g==null}};function ue(c){return c=="<"&&"&lt;"||c==">"&&"&gt;"||c=="&"&&"&amp;"||c=='"'&&"&quot;"||"&#"+c.charCodeAt()+";"}F(K,re),F(K,re.prototype);function ge(c,g){if(g(c))return!0;if(c=c.firstChild)do if(ge(c,g))return!0;while(c=c.nextSibling)}function xe(){this.ownerDocument=this}function ye(c,g,U){c&&c._inc++;var ee=U.namespaceURI;ee===O.XMLNS&&(g._nsMap[U.prefix?U.localName:""]=U.value)}function Ce(c,g,U,ee){c&&c._inc++;var J=U.namespaceURI;J===O.XMLNS&&delete g._nsMap[U.prefix?U.localName:""]}function be(c,g,U){if(c&&c._inc){c._inc++;var ee=g.childNodes;if(U)ee[ee.length++]=U;else{for(var J=g.firstChild,Be=0;J;)ee[Be++]=J,J=J.nextSibling;ee.length=Be,delete ee[ee.length]}}}function we(c,g){var U=g.previousSibling,ee=g.nextSibling;return U?U.nextSibling=ee:c.firstChild=ee,ee?ee.previousSibling=U:c.lastChild=U,g.parentNode=null,g.previousSibling=null,g.nextSibling=null,be(c.ownerDocument,c),g}function Ae(c){return c&&(c.nodeType===re.DOCUMENT_NODE||c.nodeType===re.DOCUMENT_FRAGMENT_NODE||c.nodeType===re.ELEMENT_NODE)}function Pe(c){return c&&(Ie(c)||le(c)||Oe(c)||c.nodeType===re.DOCUMENT_FRAGMENT_NODE||c.nodeType===re.COMMENT_NODE||c.nodeType===re.PROCESSING_INSTRUCTION_NODE)}function Oe(c){return c&&c.nodeType===re.DOCUMENT_TYPE_NODE}function Ie(c){return c&&c.nodeType===re.ELEMENT_NODE}function le(c){return c&&c.nodeType===re.TEXT_NODE}function H(c,g){var U=c.childNodes||[];if(e(U,Ie)||Oe(g))return!1;var ee=e(U,Oe);return!(g&&ee&&U.indexOf(ee)>U.indexOf(g))}function Z(c,g){var U=c.childNodes||[];function ee(Be){return Ie(Be)&&Be!==g}if(e(U,ee))return!1;var J=e(U,Oe);return!(g&&J&&U.indexOf(J)>U.indexOf(g))}function y(c,g,U){if(!Ae(c))throw new Y(I,"Unexpected parent node type "+c.nodeType);if(U&&U.parentNode!==c)throw new Y(X,"child not in parent");if(!Pe(g)||Oe(g)&&c.nodeType!==re.DOCUMENT_NODE)throw new Y(I,"Unexpected node type "+g.nodeType+" for parent node type "+c.nodeType)}function l(c,g,U){var ee=c.childNodes||[],J=g.childNodes||[];if(g.nodeType===re.DOCUMENT_FRAGMENT_NODE){var Be=J.filter(Ie);if(Be.length>1||e(J,le))throw new Y(I,"More than one element or text in fragment");if(Be.length===1&&!H(c,U))throw new Y(I,"Element in fragment can not be inserted before doctype")}if(Ie(g)&&!H(c,U))throw new Y(I,"Only one element can be added and only after doctype");if(Oe(g)){if(e(ee,Oe))throw new Y(I,"Only one doctype is allowed");var Me=e(ee,Ie);if(U&&ee.indexOf(Me)<ee.indexOf(U))throw new Y(I,"Doctype can only be inserted before an element");if(!U&&Me)throw new Y(I,"Doctype can not be appended since element is present")}}function p(c,g,U){var ee=c.childNodes||[],J=g.childNodes||[];if(g.nodeType===re.DOCUMENT_FRAGMENT_NODE){var Be=J.filter(Ie);if(Be.length>1||e(J,le))throw new Y(I,"More than one element or text in fragment");if(Be.length===1&&!Z(c,U))throw new Y(I,"Element in fragment can not be inserted before doctype")}if(Ie(g)&&!Z(c,U))throw new Y(I,"Only one element can be added and only after doctype");if(Oe(g)){if(e(ee,function(o){return Oe(o)&&o!==U}))throw new Y(I,"Only one doctype is allowed");var Me=e(ee,Ie);if(U&&ee.indexOf(Me)<ee.indexOf(U))throw new Y(I,"Doctype can only be inserted before an element")}}function d(c,g,U,ee){y(c,g,U),c.nodeType===re.DOCUMENT_NODE&&(ee||l)(c,g,U);var J=g.parentNode;if(J&&J.removeChild(g),g.nodeType===q){var Be=g.firstChild;if(Be==null)return g;var Me=g.lastChild}else Be=Me=g;var qe=U?U.previousSibling:c.lastChild;Be.previousSibling=qe,Me.nextSibling=U,qe?qe.nextSibling=Be:c.firstChild=Be,U==null?c.lastChild=Me:U.previousSibling=Me;do Be.parentNode=c;while(Be!==Me&&(Be=Be.nextSibling));return be(c.ownerDocument||c,c),g.nodeType==q&&(g.firstChild=g.lastChild=null),g}function k(c,g){return g.parentNode&&g.parentNode.removeChild(g),g.parentNode=c,g.previousSibling=c.lastChild,g.nextSibling=null,g.previousSibling?g.previousSibling.nextSibling=g:c.firstChild=g,c.lastChild=g,be(c.ownerDocument,c,g),g}xe.prototype={nodeName:"#document",nodeType:Q,doctype:null,documentElement:null,_inc:1,insertBefore:function(c,g){if(c.nodeType==q){for(var U=c.firstChild;U;){var ee=U.nextSibling;this.insertBefore(U,g),U=ee}return c}return d(this,c,g),c.ownerDocument=this,this.documentElement===null&&c.nodeType===P&&(this.documentElement=c),c},removeChild:function(c){return this.documentElement==c&&(this.documentElement=null),we(this,c)},replaceChild:function(c,g){d(this,c,g,p),c.ownerDocument=this,g&&this.removeChild(g),Ie(c)&&(this.documentElement=c)},importNode:function(c,g){return it(this,c,g)},getElementById:function(c){var g=null;return ge(this.documentElement,function(U){if(U.nodeType==P&&U.getAttribute("id")==c)return g=U,!0}),g},getElementsByClassName:function(c){var g=T(c);return new ce(this,function(U){var ee=[];return g.length>0&&ge(U.documentElement,function(J){if(J!==U&&J.nodeType===P){var Be=J.getAttribute("class");if(Be){var Me=c===Be;if(!Me){var qe=T(Be);Me=g.every(E(qe))}Me&&ee.push(J)}}}),ee})},createElement:function(c){var g=new M;g.ownerDocument=this,g.nodeName=c,g.tagName=c,g.localName=c,g.childNodes=new ne;var U=g.attributes=new de;return U._ownerElement=g,g},createDocumentFragment:function(){var c=new Ke;return c.ownerDocument=this,c.childNodes=new ne,c},createTextNode:function(c){var g=new ve;return g.ownerDocument=this,g.appendData(c),g},createComment:function(c){var g=new me;return g.ownerDocument=this,g.appendData(c),g},createCDATASection:function(c){var g=new ae;return g.ownerDocument=this,g.appendData(c),g},createProcessingInstruction:function(c,g){var U=new Ve;return U.ownerDocument=this,U.tagName=U.target=c,U.nodeValue=U.data=g,U},createAttribute:function(c){var g=new V;return g.ownerDocument=this,g.name=c,g.nodeName=c,g.localName=c,g.specified=!0,g},createEntityReference:function(c){var g=new He;return g.ownerDocument=this,g.nodeName=c,g},createElementNS:function(c,g){var U=new M,ee=g.split(":"),J=U.attributes=new de;return U.childNodes=new ne,U.ownerDocument=this,U.nodeName=g,U.tagName=g,U.namespaceURI=c,ee.length==2?(U.prefix=ee[0],U.localName=ee[1]):U.localName=g,J._ownerElement=U,U},createAttributeNS:function(c,g){var U=new V,ee=g.split(":");return U.ownerDocument=this,U.nodeName=g,U.name=g,U.namespaceURI=c,U.specified=!0,ee.length==2?(U.prefix=ee[0],U.localName=ee[1]):U.localName=g,U}},L(xe,re);function M(){this._nsMap={}}M.prototype={nodeType:P,hasAttribute:function(c){return this.getAttributeNode(c)!=null},getAttribute:function(c){var g=this.getAttributeNode(c);return g&&g.value||""},getAttributeNode:function(c){return this.attributes.getNamedItem(c)},setAttribute:function(c,g){var U=this.ownerDocument.createAttribute(c);U.value=U.nodeValue=""+g,this.setAttributeNode(U)},removeAttribute:function(c){var g=this.getAttributeNode(c);g&&this.removeAttributeNode(g)},appendChild:function(c){return c.nodeType===q?this.insertBefore(c,null):k(this,c)},setAttributeNode:function(c){return this.attributes.setNamedItem(c)},setAttributeNodeNS:function(c){return this.attributes.setNamedItemNS(c)},removeAttributeNode:function(c){return this.attributes.removeNamedItem(c.nodeName)},removeAttributeNS:function(c,g){var U=this.getAttributeNodeNS(c,g);U&&this.removeAttributeNode(U)},hasAttributeNS:function(c,g){return this.getAttributeNodeNS(c,g)!=null},getAttributeNS:function(c,g){var U=this.getAttributeNodeNS(c,g);return U&&U.value||""},setAttributeNS:function(c,g,U){var ee=this.ownerDocument.createAttributeNS(c,g);ee.value=ee.nodeValue=""+U,this.setAttributeNode(ee)},getAttributeNodeNS:function(c,g){return this.attributes.getNamedItemNS(c,g)},getElementsByTagName:function(c){return new ce(this,function(g){var U=[];return ge(g,function(ee){ee!==g&&ee.nodeType==P&&(c==="*"||ee.tagName==c)&&U.push(ee)}),U})},getElementsByTagNameNS:function(c,g){return new ce(this,function(U){var ee=[];return ge(U,function(J){J!==U&&J.nodeType===P&&(c==="*"||J.namespaceURI===c)&&(g==="*"||J.localName==g)&&ee.push(J)}),ee})}},xe.prototype.getElementsByTagName=M.prototype.getElementsByTagName,xe.prototype.getElementsByTagNameNS=M.prototype.getElementsByTagNameNS,L(M,re);function V(){}V.prototype.nodeType=N,L(V,re);function ie(){}ie.prototype={data:"",substringData:function(c,g){return this.data.substring(c,c+g)},appendData:function(c){c=this.data+c,this.nodeValue=this.data=c,this.length=c.length},insertData:function(c,g){this.replaceData(c,0,g)},appendChild:function(c){throw new Error(W[I])},deleteData:function(c,g){this.replaceData(c,g,"")},replaceData:function(c,g,U){var ee=this.data.substring(0,c),J=this.data.substring(c+g);U=ee+U+J,this.nodeValue=this.data=U,this.length=U.length}},L(ie,re);function ve(){}ve.prototype={nodeName:"#text",nodeType:b,splitText:function(c){var g=this.data,U=g.substring(c);g=g.substring(0,c),this.data=this.nodeValue=g,this.length=g.length;var ee=this.ownerDocument.createTextNode(U);return this.parentNode&&this.parentNode.insertBefore(ee,this.nextSibling),ee}},L(ve,ie);function me(){}me.prototype={nodeName:"#comment",nodeType:C},L(me,ie);function ae(){}ae.prototype={nodeName:"#cdata-section",nodeType:B},L(ae,ie);function De(){}De.prototype.nodeType=h,L(De,re);function Te(){}Te.prototype.nodeType=$,L(Te,re);function Fe(){}Fe.prototype.nodeType=A,L(Fe,re);function He(){}He.prototype.nodeType=G,L(He,re);function Ke(){}Ke.prototype.nodeName="#document-fragment",Ke.prototype.nodeType=q,L(Ke,re);function Ve(){}Ve.prototype.nodeType=x,L(Ve,re);function We(){}We.prototype.serializeToString=function(c,g,U){return Xe.call(c,g,U)},re.prototype.toString=Xe;function Xe(c,g){var U=[],ee=this.nodeType==9&&this.documentElement||this,J=ee.prefix,Be=ee.namespaceURI;if(Be&&J==null){var J=ee.lookupPrefix(Be);if(J==null)var Me=[{namespace:Be,prefix:null}]}return Je(this,U,c,g,Me),U.join("")}function ze(c,g,U){var ee=c.prefix||"",J=c.namespaceURI;if(!J||ee==="xml"&&J===O.XML||J===O.XMLNS)return!1;for(var Be=U.length;Be--;){var Me=U[Be];if(Me.prefix===ee)return Me.namespace!==J}return!0}function Ge(c,g,U){c.push(" ",g,'="',U.replace(/[<>&"\t\n\r]/g,ue),'"')}function Je(c,g,U,ee,J){if(J||(J=[]),ee)if(c=ee(c),c){if(typeof c=="string"){g.push(c);return}}else return;switch(c.nodeType){case P:var Be=c.attributes,Me=Be.length,Ee=c.firstChild,qe=c.tagName;U=O.isHTML(c.namespaceURI)||U;var o=qe;if(!U&&!c.prefix&&c.namespaceURI){for(var m,u=0;u<Be.length;u++)if(Be.item(u).name==="xmlns"){m=Be.item(u).value;break}if(!m)for(var v=J.length-1;v>=0;v--){var _=J[v];if(_.prefix===""&&_.namespace===c.namespaceURI){m=_.namespace;break}}if(m!==c.namespaceURI)for(var v=J.length-1;v>=0;v--){var _=J[v];if(_.namespace===c.namespaceURI){_.prefix&&(o=_.prefix+":"+qe);break}}}g.push("<",o);for(var w=0;w<Me;w++){var D=Be.item(w);D.prefix=="xmlns"?J.push({prefix:D.localName,namespace:D.value}):D.nodeName=="xmlns"&&J.push({prefix:"",namespace:D.value})}for(var w=0;w<Me;w++){var D=Be.item(w);if(ze(D,U,J)){var z=D.prefix||"",oe=D.namespaceURI;Ge(g,z?"xmlns:"+z:"xmlns",oe),J.push({prefix:z,namespace:oe})}Je(D,g,U,ee,J)}if(qe===o&&ze(c,U,J)){var z=c.prefix||"",oe=c.namespaceURI;Ge(g,z?"xmlns:"+z:"xmlns",oe),J.push({prefix:z,namespace:oe})}if(Ee||U&&!/^(?:meta|link|img|br|hr|input)$/i.test(qe)){if(g.push(">"),U&&/^script$/i.test(qe))for(;Ee;)Ee.data?g.push(Ee.data):Je(Ee,g,U,ee,J.slice()),Ee=Ee.nextSibling;else for(;Ee;)Je(Ee,g,U,ee,J.slice()),Ee=Ee.nextSibling;g.push("</",o,">")}else g.push("/>");return;case Q:case q:for(var Ee=c.firstChild;Ee;)Je(Ee,g,U,ee,J.slice()),Ee=Ee.nextSibling;return;case N:return Ge(g,c.name,c.value);case b:return g.push(c.data.replace(/[<&>]/g,ue));case B:return g.push("<![CDATA[",c.data,"]]>");case C:return g.push("<!--",c.data,"-->");case h:var Re=c.publicId,ke=c.systemId;if(g.push("<!DOCTYPE ",c.name),Re)g.push(" PUBLIC ",Re),ke&&ke!="."&&g.push(" ",ke),g.push(">");else if(ke&&ke!=".")g.push(" SYSTEM ",ke,">");else{var _e=c.internalSubset;_e&&g.push(" [",_e,"]"),g.push(">")}return;case x:return g.push("<?",c.target," ",c.data,"?>");case G:return g.push("&",c.nodeName,";");default:g.push("??",c.nodeName)}}function it(c,g,U){var ee;switch(g.nodeType){case P:ee=g.cloneNode(!1),ee.ownerDocument=c;case q:break;case N:U=!0;break}if(ee||(ee=g.cloneNode(!1)),ee.ownerDocument=c,ee.parentNode=null,U)for(var J=g.firstChild;J;)ee.appendChild(it(c,J,U)),J=J.nextSibling;return ee}function tt(c,g,U){var ee=new g.constructor;for(var J in g)if(Object.prototype.hasOwnProperty.call(g,J)){var Be=g[J];typeof Be!="object"&&Be!=ee[J]&&(ee[J]=Be)}switch(g.childNodes&&(ee.childNodes=new ne),ee.ownerDocument=c,ee.nodeType){case P:var Me=g.attributes,qe=ee.attributes=new de,o=Me.length;qe._ownerElement=ee;for(var m=0;m<o;m++)ee.setAttributeNode(tt(c,Me.item(m),!0));break;case N:U=!0}if(U)for(var u=g.firstChild;u;)ee.appendChild(tt(c,u,U)),u=u.nextSibling;return ee}function Ye(c,g,U){c[g]=U}try{if(Object.defineProperty){let c=function(g){switch(g.nodeType){case P:case q:var U=[];for(g=g.firstChild;g;)g.nodeType!==7&&g.nodeType!==8&&U.push(c(g)),g=g.nextSibling;return U.join("");default:return g.nodeValue}};Object.defineProperty(ce.prototype,"length",{get:function(){return he(this),this.$$length}}),Object.defineProperty(re.prototype,"textContent",{get:function(){return c(this)},set:function(g){switch(this.nodeType){case P:case q:for(;this.firstChild;)this.removeChild(this.firstChild);(g||String(g))&&this.appendChild(this.ownerDocument.createTextNode(g));break;default:this.data=g,this.value=g,this.nodeValue=g}}}),Ye=function(g,U,ee){g["$$"+U]=ee}}}catch{}s.DocumentType=De,s.DOMException=Y,s.DOMImplementation=Se,s.Element=M,s.Node=re,s.NodeList=ne,s.XMLSerializer=We},"./node_modules/@xmldom/xmldom/lib/entities.js":function(n,s,r){var a=r("./node_modules/@xmldom/xmldom/lib/conventions.js").freeze;s.XML_ENTITIES=a({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),s.HTML_ENTITIES=a({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),s.entityMap=s.HTML_ENTITIES},"./node_modules/@xmldom/xmldom/lib/index.js":function(n,s,r){var a=r("./node_modules/@xmldom/xmldom/lib/dom.js");s.DOMImplementation=a.DOMImplementation,s.XMLSerializer=a.XMLSerializer,s.DOMParser=r("./node_modules/@xmldom/xmldom/lib/dom-parser.js").DOMParser},"./node_modules/@xmldom/xmldom/lib/sax.js":function(n,s,r){var a=r("./node_modules/@xmldom/xmldom/lib/conventions.js").NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),f=new RegExp("^"+e.source+O.source+"*(?::"+e.source+O.source+"*)?$"),R=0,S=1,T=2,E=3,F=4,L=5,K=6,P=7;function N(I,X){this.message=I,this.locator=X,Error.captureStackTrace&&Error.captureStackTrace(this,N)}N.prototype=new Error,N.prototype.name=N.name;function b(){}b.prototype={parse:function(I,X,te){var Y=this.domBuilder;Y.startDocument(),h(X,X={}),B(I,X,te,Y,this.errorHandler),Y.endDocument()}};function B(I,X,te,Y,ne){function ce(M){if(M>65535){M-=65536;var V=55296+(M>>10),ie=56320+(M&1023);return String.fromCharCode(V,ie)}else return String.fromCharCode(M)}function he(M){var V=M.slice(1,-1);return Object.hasOwnProperty.call(te,V)?te[V]:V.charAt(0)==="#"?ce(parseInt(V.substr(1).replace("x","0x"))):(ne.error("entity not found:"+M),M)}function de(M){if(M>xe){var V=I.substring(xe,M).replace(/&#?\w+;/g,he);re&&se(xe),Y.characters(V,0,M-xe),xe=M}}function se(M,V){for(;M>=fe&&(V=Se.exec(I));)pe=V.index,fe=pe+V[0].length,re.lineNumber++;re.columnNumber=M-pe+1}for(var pe=0,fe=0,Se=/.*(?:\r\n?|\n)|.*$/g,re=Y.locator,ue=[{currentNSMap:X}],ge={},xe=0;;){try{var ye=I.indexOf("<",xe);if(ye<0){if(!I.substr(xe).match(/^\s*$/)){var Ce=Y.doc,be=Ce.createTextNode(I.substr(xe));Ce.appendChild(be),Y.currentElement=be}return}switch(ye>xe&&de(ye),I.charAt(ye+1)){case"/":var y=I.indexOf(">",ye+3),we=I.substring(ye+2,y).replace(/[ \t\n\r]+$/g,""),Ae=ue.pop();y<0?(we=I.substring(ye+2).replace(/[\s<].*/,""),ne.error("end tag name: "+we+" is not complete:"+Ae.tagName),y=ye+1+we.length):we.match(/\s</)&&(we=we.replace(/[\s<].*/,""),ne.error("end tag name: "+we+" maybe not complete"),y=ye+1+we.length);var Pe=Ae.localNSMap,Oe=Ae.tagName==we,Ie=Oe||Ae.tagName&&Ae.tagName.toLowerCase()==we.toLowerCase();if(Ie){if(Y.endElement(Ae.uri,Ae.localName,we),Pe)for(var le in Pe)Object.prototype.hasOwnProperty.call(Pe,le)&&Y.endPrefixMapping(le);Oe||ne.fatalError("end tag name: "+we+" is not match the current start tagName:"+Ae.tagName)}else ue.push(Ae);y++;break;case"?":re&&se(ye),y=$(I,ye,Y);break;case"!":re&&se(ye),y=q(I,ye,Y,ne);break;default:re&&se(ye);var H=new j,Z=ue[ue.length-1].currentNSMap,y=A(I,ye,H,Z,he,ne),l=H.length;if(!H.closed&&Q(I,y,H.tagName,ge)&&(H.closed=!0,te.nbsp||ne.warning("unclosed xml attribute")),re&&l){for(var p=G(re,{}),d=0;d<l;d++){var k=H[d];se(k.offset),k.locator=G(re,{})}Y.locator=p,x(H,Y,Z)&&ue.push(H),Y.locator=re}else x(H,Y,Z)&&ue.push(H);a.isHTML(H.uri)&&!H.closed?y=C(I,y,H.tagName,he,Y):y++}}catch(M){if(M instanceof N)throw M;ne.error("element parse error: "+M),y=-1}y>xe?xe=y:de(Math.max(ye,xe)+1)}}function G(I,X){return X.lineNumber=I.lineNumber,X.columnNumber=I.columnNumber,X}function A(I,X,te,Y,ne,ce){function he(re,ue,ge){te.attributeNames.hasOwnProperty(re)&&ce.fatalError("Attribute "+re+" redefined"),te.addValue(re,ue.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,ne),ge)}for(var de,se,pe=++X,fe=R;;){var Se=I.charAt(pe);switch(Se){case"=":if(fe===S)de=I.slice(X,pe),fe=E;else if(fe===T)fe=E;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(fe===E||fe===S)if(fe===S&&(ce.warning('attribute value must after "="'),de=I.slice(X,pe)),X=pe+1,pe=I.indexOf(Se,X),pe>0)se=I.slice(X,pe),he(de,se,X-1),fe=L;else throw new Error("attribute value no end '"+Se+"' match");else if(fe==F)se=I.slice(X,pe),he(de,se,X),ce.warning('attribute "'+de+'" missed start quot('+Se+")!!"),X=pe+1,fe=L;else throw new Error('attribute value must after "="');break;case"/":switch(fe){case R:te.setTagName(I.slice(X,pe));case L:case K:case P:fe=P,te.closed=!0;case F:case S:case T:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return ce.error("unexpected end of input"),fe==R&&te.setTagName(I.slice(X,pe)),pe;case">":switch(fe){case R:te.setTagName(I.slice(X,pe));case L:case K:case P:break;case F:case S:se=I.slice(X,pe),se.slice(-1)==="/"&&(te.closed=!0,se=se.slice(0,-1));case T:fe===T&&(se=de),fe==F?(ce.warning('attribute "'+se+'" missed quot(")!'),he(de,se,X)):((!a.isHTML(Y[""])||!se.match(/^(?:disabled|checked|selected)$/i))&&ce.warning('attribute "'+se+'" missed value!! "'+se+'" instead!!'),he(se,se,X));break;case E:throw new Error("attribute value missed!!")}return pe;case"\x80":Se=" ";default:if(Se<=" ")switch(fe){case R:te.setTagName(I.slice(X,pe)),fe=K;break;case S:de=I.slice(X,pe),fe=T;break;case F:var se=I.slice(X,pe);ce.warning('attribute "'+se+'" missed quot(")!!'),he(de,se,X);case L:fe=K;break}else switch(fe){case T:te.tagName,(!a.isHTML(Y[""])||!de.match(/^(?:disabled|checked|selected)$/i))&&ce.warning('attribute "'+de+'" missed value!! "'+de+'" instead2!!'),he(de,de,X),X=pe,fe=S;break;case L:ce.warning('attribute space is required"'+de+'"!!');case K:fe=S,X=pe;break;case E:fe=F,X=pe;break;case P:throw new Error("elements closed character '/' and '>' must be connected to")}}pe++}}function x(I,X,te){for(var Y=I.tagName,ne=null,Se=I.length;Se--;){var ce=I[Se],he=ce.qName,de=ce.value,re=he.indexOf(":");if(re>0)var se=ce.prefix=he.slice(0,re),pe=he.slice(re+1),fe=se==="xmlns"&&pe;else pe=he,se=null,fe=he==="xmlns"&&"";ce.localName=pe,fe!==!1&&(ne==null&&(ne={},h(te,te={})),te[fe]=ne[fe]=de,ce.uri=a.XMLNS,X.startPrefixMapping(fe,de))}for(var Se=I.length;Se--;){ce=I[Se];var se=ce.prefix;se&&(se==="xml"&&(ce.uri=a.XML),se!=="xmlns"&&(ce.uri=te[se||""]))}var re=Y.indexOf(":");re>0?(se=I.prefix=Y.slice(0,re),pe=I.localName=Y.slice(re+1)):(se=null,pe=I.localName=Y);var ue=I.uri=te[se||""];if(X.startElement(ue,pe,Y,I),I.closed){if(X.endElement(ue,pe,Y),ne)for(se in ne)Object.prototype.hasOwnProperty.call(ne,se)&&X.endPrefixMapping(se)}else return I.currentNSMap=te,I.localNSMap=ne,!0}function C(I,X,te,Y,ne){if(/^(?:script|textarea)$/i.test(te)){var ce=I.indexOf("</"+te+">",X),he=I.substring(X+1,ce);if(/[&<]/.test(he))return/^script$/i.test(te)?(ne.characters(he,0,he.length),ce):(he=he.replace(/&#?\w+;/g,Y),ne.characters(he,0,he.length),ce)}return X+1}function Q(I,X,te,Y){var ne=Y[te];return ne==null&&(ne=I.lastIndexOf("</"+te+">"),ne<X&&(ne=I.lastIndexOf("</"+te)),Y[te]=ne),ne<X}function h(I,X){for(var te in I)Object.prototype.hasOwnProperty.call(I,te)&&(X[te]=I[te])}function q(I,X,te,Y){var ne=I.charAt(X+2);switch(ne){case"-":if(I.charAt(X+3)==="-"){var ce=I.indexOf("-->",X+4);return ce>X?(te.comment(I,X+4,ce-X-4),ce+3):(Y.error("Unclosed comment"),-1)}else return-1;default:if(I.substr(X+3,6)=="CDATA["){var ce=I.indexOf("]]>",X+9);return te.startCDATA(),te.characters(I,X+9,ce-X-9),te.endCDATA(),ce+3}var he=W(I,X),de=he.length;if(de>1&&/!doctype/i.test(he[0][0])){var se=he[1][0],pe=!1,fe=!1;de>3&&(/^public$/i.test(he[2][0])?(pe=he[3][0],fe=de>4&&he[4][0]):/^system$/i.test(he[2][0])&&(fe=he[3][0]));var Se=he[de-1];return te.startDTD(se,pe,fe),te.endDTD(),Se.index+Se[0].length}}return-1}function $(I,X,te){var Y=I.indexOf("?>",X);if(Y){var ne=I.substring(X,Y).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return ne?(ne[0].length,te.processingInstruction(ne[1],ne[2]),Y+2):-1}return-1}function j(){this.attributeNames={}}j.prototype={setTagName:function(I){if(!f.test(I))throw new Error("invalid tagName:"+I);this.tagName=I},addValue:function(I,X,te){if(!f.test(I))throw new Error("invalid attribute:"+I);this.attributeNames[I]=this.length,this[this.length++]={qName:I,value:X,offset:te}},length:0,getLocalName:function(I){return this[I].localName},getLocator:function(I){return this[I].locator},getQName:function(I){return this[I].qName},getURI:function(I){return this[I].uri},getValue:function(I){return this[I].value}};function W(I,X){var te,Y=[],ne=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(ne.lastIndex=X,ne.exec(I);te=ne.exec(I);)if(Y.push(te),te[1])return Y}s.XMLReader=b,s.ParseError=N},"./node_modules/process/browser.js":function(n,s){var r=n.exports={},a,e;function O(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=O}catch{a=O}try{typeof clearTimeout=="function"?e=clearTimeout:e=f}catch{e=f}})();function R(B){if(a===setTimeout)return setTimeout(B,0);if((a===O||!a)&&setTimeout)return a=setTimeout,setTimeout(B,0);try{return a(B,0)}catch{try{return a.call(null,B,0)}catch{return a.call(this,B,0)}}}function S(B){if(e===clearTimeout)return clearTimeout(B);if((e===f||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(B);try{return e(B)}catch{try{return e.call(null,B)}catch{return e.call(this,B)}}}var T=[],E=!1,F,L=-1;function K(){!E||!F||(E=!1,F.length?T=F.concat(T):L=-1,T.length&&P())}function P(){if(!E){var B=R(K);E=!0;for(var G=T.length;G;){for(F=T,T=[];++L<G;)F&&F[L].run();L=-1,G=T.length}F=null,E=!1,S(B)}}r.nextTick=function(B){var G=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)G[A-1]=arguments[A];T.push(new N(B,G)),T.length===1&&!E&&R(P)};function N(B,G){this.fun=B,this.array=G}N.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function b(){}r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(B){return[]},r.binding=function(B){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(B){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"./node_modules/webpack/buildin/amd-options.js":function(n,s){(function(r){n.exports=r}).call(this,{})},"./node_modules/webpack/buildin/global.js":function(n,s){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},"./node_modules/webpack/buildin/module.js":function(n,s){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},"./package.json":function(n){n.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.4.14","description":"JavaScript SDK for [\u817E\u8BAF\u4E91\u5BF9\u8C61\u5B58\u50A8](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"@xmldom/xmldom":"^0.8.6"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(n,s,r){var a=r("./node_modules/@babel/runtime/helpers/typeof.js"),e=r("./src/session.js"),O=r("./src/async.js"),f=r("./src/event.js").EventProxy,R=r("./src/util.js"),S=r("./src/tracker.js");function T(h,q){var $=this,j=new f,W=h.TaskId,I=h.Bucket,X=h.Region,te=h.Key,Y=h.Body,ne=h.ChunkSize||h.SliceSize||$.options.ChunkSize,ce=h.AsyncLimit,he=h.StorageClass,de=h.ServerSideEncryption,se,pe,fe=h.onHashProgress,Se=h.tracker;Se&&Se.setParams({chunkSize:ne}),j.on("error",function(re){if(!!$._isRunningTask(W))return re.UploadId=h.UploadData.UploadId||"",q(re)}),j.on("upload_complete",function(re){var ue=R.extend({UploadId:h.UploadData.UploadId||""},re);q(null,ue)}),j.on("upload_slice_complete",function(re){var ue={};R.each(h.Headers,function(ge,xe){var ye=xe.toLowerCase();(ye.indexOf("x-cos-meta-")===0||ye==="pic-operations")&&(ue[xe]=ge)}),N.call($,{Bucket:I,Region:X,Key:te,UploadId:re.UploadId,SliceList:re.SliceList,Headers:ue,tracker:Se},function(ge,xe){if(!!$._isRunningTask(W)){if(e.removeUsing(re.UploadId),ge)return pe(null,!0),j.emit("error",ge);e.removeUploadId.call($,re.UploadId),pe({loaded:se,total:se},!0),j.emit("upload_complete",xe)}})}),j.on("get_upload_data_finish",function(re){var ue=e.getFileId(Y,h.ChunkSize,I,te);ue&&e.saveUploadId.call($,ue,re.UploadId,$.options.UploadIdCacheLimit),e.setUsing(re.UploadId),pe(null,!0),K.call($,{TaskId:W,Bucket:I,Region:X,Key:te,Body:Y,FileSize:se,SliceSize:ne,AsyncLimit:ce,ServerSideEncryption:de,UploadData:re,Headers:h.Headers,onProgress:pe,tracker:Se},function(ge,xe){if(!!$._isRunningTask(W)){if(ge)return pe(null,!0),j.emit("error",ge);j.emit("upload_slice_complete",xe)}})}),j.on("get_file_size_finish",function(){if(pe=R.throttleOnProgress.call($,se,h.onProgress),h.UploadData.UploadId)j.emit("get_upload_data_finish",h.UploadData);else{var re=R.extend({TaskId:W,Bucket:I,Region:X,Key:te,Headers:h.Headers,StorageClass:he,Body:Y,FileSize:se,SliceSize:ne,onHashProgress:fe,tracker:Se},h);E.call($,re,function(ue,ge){if(!!$._isRunningTask(W)){if(ue)return j.emit("error",ue);h.UploadData.UploadId=ge.UploadId,h.UploadData.PartList=ge.PartList,j.emit("get_upload_data_finish",h.UploadData)}})}}),se=h.ContentLength,delete h.ContentLength,!h.Headers&&(h.Headers={}),R.each(h.Headers,function(re,ue){ue.toLowerCase()==="content-length"&&delete h.Headers[ue]}),function(){for(var re=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],ue=1024*1024,ge=0;ge<re.length&&(ue=re[ge]*1024*1024,!(se/ue<=$.options.MaxPartNumber));ge++);h.ChunkSize=h.SliceSize=ne=Math.max(ne,ue)}(),se===0?(h.Body="",h.ContentLength=0,h.SkipTask=!0,$.putObject(h,q)):j.emit("get_file_size_finish")}function E(h,q){var $=h.TaskId,j=h.Bucket,W=h.Region,I=h.Key,X=h.StorageClass,te=this,Y={},ne=h.FileSize,ce=h.SliceSize,he=Math.ceil(ne/ce),de=0,se=R.throttleOnProgress.call(te,ne,h.onHashProgress),pe=function(ue,ge){var xe=ce*(ue-1),ye=Math.min(xe+ce,ne),Ce=ye-xe;Y[ue]?ge(null,{PartNumber:ue,ETag:Y[ue],Size:Ce}):R.fileSlice(h.Body,xe,ye,!1,function(be){R.getFileMd5(be,function(we,Ae){if(we)return ge(R.error(we));var Pe='"'+Ae+'"';Y[ue]=Pe,de+=Ce,se({loaded:de,total:ne}),ge(null,{PartNumber:ue,ETag:Pe,Size:Ce})})})},fe=function(ue,ge){var xe=ue.length;if(xe===0)return ge(null,!0);if(xe>he)return ge(null,!1);if(xe>1){var ye=Math.max(ue[0].Size,ue[1].Size);if(ye!==ce)return ge(null,!1)}var Ce=function be(we){if(we<xe){var Ae=ue[we];pe(Ae.PartNumber,function(Pe,Oe){Oe&&Oe.ETag===Ae.ETag&&Oe.Size===Ae.Size?be(we+1):ge(null,!1)})}else ge(null,!0)};Ce(0)},Se=new f;Se.on("error",function(re){if(!!te._isRunningTask($))return q(re)}),Se.on("upload_id_available",function(re){var ue={},ge=[];R.each(re.PartList,function(Ce){ue[Ce.PartNumber]=Ce});for(var xe=1;xe<=he;xe++){var ye=ue[xe];ye?(ye.PartNumber=xe,ye.Uploaded=!0):ye={PartNumber:xe,ETag:null,Uploaded:!1},ge.push(ye)}re.PartList=ge,q(null,re)}),Se.on("no_available_upload_id",function(){if(!!te._isRunningTask($)){var re=R.extend({Bucket:j,Region:W,Key:I,Query:R.clone(h.Query),StorageClass:X,Body:h.Body,calledBySdk:"sliceUploadFile",tracker:h.tracker},h),ue=R.clone(h.Headers);delete ue["x-cos-mime-limit"],re.Headers=ue,te.multipartInit(re,function(ge,xe){if(!!te._isRunningTask($)){if(ge)return Se.emit("error",ge);var ye=xe.UploadId;if(!ye)return q(R.error(new Error("no such upload id")));Se.emit("upload_id_available",{UploadId:ye,PartList:[]})}})}}),Se.on("has_and_check_upload_id",function(re){re=re.reverse(),O.eachLimit(re,1,function(ue,ge){if(!!te._isRunningTask($)){if(e.using[ue]){ge();return}L.call(te,{Bucket:j,Region:W,Key:I,UploadId:ue,tracker:h.tracker},function(xe,ye){if(!!te._isRunningTask($)){if(xe)return e.removeUsing(ue),Se.emit("error",xe);var Ce=ye.PartList;Ce.forEach(function(be){be.PartNumber*=1,be.Size*=1,be.ETag=be.ETag||""}),fe(Ce,function(be,we){if(!!te._isRunningTask($)){if(be)return Se.emit("error",be);we?ge({UploadId:ue,PartList:Ce}):ge()}})}})}},function(ue){!te._isRunningTask($)||(se(null,!0),ue&&ue.UploadId?Se.emit("upload_id_available",ue):Se.emit("no_available_upload_id"))})}),Se.on("seek_local_avail_upload_id",function(re){var ue=e.getFileId(h.Body,h.ChunkSize,j,I),ge=e.getUploadIdList.call(te,ue);if(!ue||!ge){Se.emit("has_and_check_upload_id",re);return}var xe=function ye(Ce){if(Ce>=ge.length){Se.emit("has_and_check_upload_id",re);return}var be=ge[Ce];if(!R.isInArray(re,be)){e.removeUploadId.call(te,be),ye(Ce+1);return}if(e.using[be]){ye(Ce+1);return}L.call(te,{Bucket:j,Region:W,Key:I,UploadId:be,tracker:h.tracker},function(we,Ae){!te._isRunningTask($)||(we?(e.removeUploadId.call(te,be),ye(Ce+1)):Se.emit("upload_id_available",{UploadId:be,PartList:Ae.PartList}))})};xe(0)}),Se.on("get_remote_upload_id_list",function(){F.call(te,{Bucket:j,Region:W,Key:I,tracker:h.tracker},function(re,ue){if(!!te._isRunningTask($)){if(re)return Se.emit("error",re);var ge=R.filter(ue.UploadList,function(Ce){return Ce.Key===I&&(!X||Ce.StorageClass.toUpperCase()===X.toUpperCase())}).reverse().map(function(Ce){return Ce.UploadId||Ce.UploadID});if(ge.length)Se.emit("seek_local_avail_upload_id",ge);else{var xe=e.getFileId(h.Body,h.ChunkSize,j,I),ye;xe&&(ye=e.getUploadIdList.call(te,xe))&&R.each(ye,function(Ce){e.removeUploadId.call(te,Ce)}),Se.emit("no_available_upload_id")}}})}),Se.emit("get_remote_upload_id_list")}function F(h,q){var $=this,j=[],W={Bucket:h.Bucket,Region:h.Region,Prefix:h.Key,calledBySdk:h.calledBySdk||"sliceUploadFile",tracker:h.tracker},I=function X(){$.multipartList(W,function(te,Y){if(te)return q(te);j.push.apply(j,Y.Upload||[]),Y.IsTruncated==="true"?(W.KeyMarker=Y.NextKeyMarker,W.UploadIdMarker=Y.NextUploadIdMarker,X()):q(null,{UploadList:j})})};I()}function L(h,q){var $=this,j=[],W={Bucket:h.Bucket,Region:h.Region,Key:h.Key,UploadId:h.UploadId,calledBySdk:"sliceUploadFile",tracker:h.tracker},I=function X(){$.multipartListPart(W,function(te,Y){if(te)return q(te);j.push.apply(j,Y.Part||[]),Y.IsTruncated==="true"?(W.PartNumberMarker=Y.NextPartNumberMarker,X()):q(null,{PartList:j})})};I()}function K(h,q){var $=this,j=h.TaskId,W=h.Bucket,I=h.Region,X=h.Key,te=h.UploadData,Y=h.FileSize,ne=h.SliceSize,ce=Math.min(h.AsyncLimit||$.options.ChunkParallelLimit||1,256),he=h.Body,de=Math.ceil(Y/ne),se=0,pe=h.ServerSideEncryption,fe=h.Headers,Se=R.filter(te.PartList,function(ue){return ue.Uploaded&&(se+=ue.PartNumber>=de&&Y%ne||ne),!ue.Uploaded}),re=h.onProgress;O.eachLimit(Se,ce,function(ue,ge){if(!!$._isRunningTask(j)){var xe=ue.PartNumber,ye=Math.min(Y,ue.PartNumber*ne)-(ue.PartNumber-1)*ne,Ce=0;P.call($,{TaskId:j,Bucket:W,Region:I,Key:X,SliceSize:ne,FileSize:Y,PartNumber:xe,ServerSideEncryption:pe,Body:he,UploadData:te,Headers:fe,onProgress:function(we){se+=we.loaded-Ce,Ce=we.loaded,re({loaded:se,total:Y})},tracker:h.tracker},function(be,we){!$._isRunningTask(j)||(!be&&!we.ETag&&(be='get ETag error, please add "ETag" to CORS ExposeHeader setting.( \u83B7\u53D6ETag\u5931\u8D25\uFF0C\u8BF7\u5728CORS ExposeHeader\u8BBE\u7F6E\u4E2D\u6DFB\u52A0ETag\uFF0C\u8BF7\u53C2\u8003\u6587\u6863\uFF1Ahttps://cloud.tencent.com/document/product/436/13318 )'),be?se-=Ce:(se+=ye-Ce,ue.ETag=we.ETag),re({loaded:se,total:Y}),ge(be||null,we))})}},function(ue){if(!!$._isRunningTask(j)){if(ue)return q(ue);q(null,{UploadId:te.UploadId,SliceList:te.PartList})}})}function P(h,q){var $=this,j=h.TaskId,W=h.Bucket,I=h.Region,X=h.Key,te=h.FileSize,Y=h.Body,ne=h.PartNumber*1,ce=h.SliceSize,he=h.ServerSideEncryption,de=h.UploadData,se=h.Headers||{},pe=$.options.ChunkRetryTimes+1,fe=ce*(ne-1),Se=ce,re=fe+ce;re>te&&(re=te,Se=re-fe);var ue=["x-cos-traffic-limit","x-cos-mime-limit"],ge={};R.each(se,function(ye,Ce){ue.indexOf(Ce)>-1&&(ge[Ce]=ye)});var xe=de.PartList[ne-1];O.retry(pe,function(ye){!$._isRunningTask(j)||R.fileSlice(Y,fe,re,!0,function(Ce){$.multipartUpload({TaskId:j,Bucket:W,Region:I,Key:X,ContentLength:Se,PartNumber:ne,UploadId:de.UploadId,ServerSideEncryption:he,Body:Ce,Headers:ge,onProgress:h.onProgress,calledBySdk:"sliceUploadFile",tracker:h.tracker},function(be,we){if(!!$._isRunningTask(j))return be?ye(be):(xe.Uploaded=!0,ye(null,we))})})},function(ye,Ce){if(!!$._isRunningTask(j))return q(ye,Ce)})}function N(h,q){var $=h.Bucket,j=h.Region,W=h.Key,I=h.UploadId,X=h.SliceList,te=this,Y=this.options.ChunkRetryTimes+1,ne=h.Headers,ce=X.map(function(he){return{PartNumber:he.PartNumber,ETag:he.ETag}});O.retry(Y,function(he){te.multipartComplete({Bucket:$,Region:j,Key:W,UploadId:I,Parts:ce,Headers:ne,calledBySdk:"sliceUploadFile",tracker:h.tracker},he)},function(he,de){q(he,de)})}function b(h,q){var $=h.Bucket,j=h.Region,W=h.Key,I=h.UploadId,X=h.Level||"task",te=h.AsyncLimit,Y=this,ne=new f;if(ne.on("error",function(ce){return q(ce)}),ne.on("get_abort_array",function(ce){B.call(Y,{Bucket:$,Region:j,Key:W,Headers:h.Headers,AsyncLimit:te,AbortArray:ce},q)}),X==="bucket")F.call(Y,{Bucket:$,Region:j,calledBySdk:"abortUploadTask"},function(ce,he){if(ce)return q(ce);ne.emit("get_abort_array",he.UploadList||[])});else if(X==="file"){if(!W)return q(R.error(new Error("abort_upload_task_no_key")));F.call(Y,{Bucket:$,Region:j,Key:W,calledBySdk:"abortUploadTask"},function(ce,he){if(ce)return q(ce);ne.emit("get_abort_array",he.UploadList||[])})}else if(X==="task"){if(!I)return q(R.error(new Error("abort_upload_task_no_id")));if(!W)return q(R.error(new Error("abort_upload_task_no_key")));ne.emit("get_abort_array",[{Key:W,UploadId:I}])}else return q(R.error(new Error("abort_unknown_level")))}function B(h,q){var $=h.Bucket,j=h.Region,W=h.Key,I=h.AbortArray,X=h.AsyncLimit||1,te=this,Y=0,ne=new Array(I.length);O.eachLimit(I,X,function(ce,he){var de=Y;if(W&&W!==ce.Key){ne[de]={error:{KeyNotMatch:!0}},he(null);return}var se=ce.UploadId||ce.UploadID;te.multipartAbort({Bucket:$,Region:j,Key:ce.Key,Headers:h.Headers,UploadId:se},function(pe){var fe={Bucket:$,Region:j,Key:ce.Key,UploadId:se};ne[de]={error:pe,task:fe},he(null)}),Y++},function(ce){if(ce)return q(ce);for(var he=[],de=[],se=0,pe=ne.length;se<pe;se++){var fe=ne[se];fe.task&&(fe.error?de.push(fe.task):he.push(fe.task))}return q(null,{successList:he,errorList:de})})}function G(h,q){var $=this,j=h.SliceSize===void 0?$.options.SliceSize:h.SliceSize,W=[],I=h.Body,X=I.size||I.length||0,te={TaskId:""};if($.options.EnableTracker){var Y=$.options.UseAccelerate||typeof $.options.Domain=="string"&&$.options.Domain.includes("accelerate.");h.tracker=new S({bucket:h.Bucket,region:h.Region,apiName:"uploadFile",fileKey:h.Key,fileSize:X,accelerate:Y,deepTracker:$.options.DeepTracker,customId:$.options.CustomId,delay:$.options.TrackerDelay})}R.each(h,function(pe,fe){a(pe)!=="object"&&typeof pe!="function"&&(te[fe]=pe)});var ne=h.onTaskReady,ce=function(fe){te.TaskId=fe,ne&&ne(fe)};h.onTaskReady=ce;var he=X>j?"sliceUploadFile":"putObject",de=h.onFileFinish,se=function(fe,Se){h.tracker&&h.tracker.formatResult(fe,Se),de&&de(fe,Se,te),q&&q(fe,Se)};W.push({api:he,params:h,callback:se}),$._addTasks(W)}function A(h,q){var $=this,j=h.SliceSize===void 0?$.options.SliceSize:h.SliceSize,W=0,I=0,X=R.throttleOnProgress.call($,I,h.onProgress),te=h.files.length,Y=h.onFileFinish,ne=Array(te),ce=function(se,pe,fe){X(null,!0),Y&&Y(se,pe,fe),ne[fe.Index]={options:fe,error:se,data:pe},--te<=0&&q&&q(null,{files:ne})},he=[];R.each(h.files,function(de,se){(function(){var pe=de.Body,fe=pe.size||pe.length||0,Se={Index:se,TaskId:""};if(W+=fe,$.options.EnableTracker){var re=$.options.UseAccelerate||typeof $.options.Domain=="string"&&$.options.Domain.includes("accelerate.");de.tracker=new S({bucket:de.Bucket,region:de.Region,apiName:"uploadFiles",fileKey:de.Key,fileSize:fe,accelerate:re,deepTracker:$.options.DeepTracker,customId:$.options.CustomId,delay:$.options.TrackerDelay})}R.each(de,function(Pe,Oe){a(Pe)!=="object"&&typeof Pe!="function"&&(Se[Oe]=Pe)});var ue=de.onTaskReady,ge=function(Oe){Se.TaskId=Oe,ue&&ue(Oe)};de.onTaskReady=ge;var xe=0,ye=de.onProgress,Ce=function(Oe){I=I-xe+Oe.loaded,xe=Oe.loaded,ye&&ye(Oe),X({loaded:I,total:W})};de.onProgress=Ce;var be=fe>j?"sliceUploadFile":"putObject",we=de.onFileFinish,Ae=function(Oe,Ie){de.tracker&&de.tracker.formatResult(Oe,Ie),we&&we(Oe,Ie),ce&&ce(Oe,Ie,Se)};he.push({api:be,params:de,callback:Ae})})()}),$._addTasks(he)}function x(h,q){var $=new f,j=this,W=h.Bucket,I=h.Region,X=h.Key,te=h.CopySource,Y=R.getSourceParams.call(this,te);if(!Y){q(R.error(new Error("CopySource format error")));return}var ne=Y.Bucket,ce=Y.Region,he=decodeURIComponent(Y.Key),de=h.CopySliceSize===void 0?j.options.CopySliceSize:h.CopySliceSize;de=Math.max(0,de);var se=h.CopyChunkSize||this.options.CopyChunkSize,pe=this.options.CopyChunkParallelLimit,fe=this.options.ChunkRetryTimes+1,Se=0,re=0,ue,ge,xe={},ye={},Ce={};$.on("copy_slice_complete",function(be){R.each(h.Headers,function(Ae,Pe){Pe.toLowerCase().indexOf("x-cos-meta-")});var we=R.map(be.PartList,function(Ae){return{PartNumber:Ae.PartNumber,ETag:Ae.ETag}});O.retry(fe,function(Ae){j.multipartComplete({Bucket:W,Region:I,Key:X,UploadId:be.UploadId,Parts:we,calledBySdk:"sliceCopyFile"},Ae)},function(Ae,Pe){if(e.removeUsing(be.UploadId),Ae)return ge(null,!0),q(Ae);e.removeUploadId(be.UploadId),ge({loaded:ue,total:ue},!0),q(null,Pe)})}),$.on("get_copy_data_finish",function(be){var we=e.getCopyFileId(te,xe,se,W,X);we&&e.saveUploadId(we,be.UploadId,j.options.UploadIdCacheLimit),e.setUsing(be.UploadId);var Ae=R.filter(be.PartList,function(Pe){return Pe.Uploaded&&(re+=Pe.PartNumber>=Se&&ue%se||se),!Pe.Uploaded});O.eachLimit(Ae,pe,function(Pe,Oe){var Ie=Pe.PartNumber,le=Pe.CopySourceRange,H=Pe.end-Pe.start;O.retry(fe,function(Z){C.call(j,{Bucket:W,Region:I,Key:X,CopySource:te,UploadId:be.UploadId,PartNumber:Ie,CopySourceRange:le},Z)},function(Z,y){if(Z)return Oe(Z);re+=H,ge({loaded:re,total:ue}),Pe.ETag=y.ETag,Oe(Z||null,y)})},function(Pe){if(Pe)return e.removeUsing(be.UploadId),ge(null,!0),q(Pe);$.emit("copy_slice_complete",be)})}),$.on("get_chunk_size_finish",function(){var be=function(){j.multipartInit({Bucket:W,Region:I,Key:X,Headers:Ce},function(Ie,le){if(Ie)return q(Ie);h.UploadId=le.UploadId,$.emit("get_copy_data_finish",{UploadId:h.UploadId,PartList:h.PartList})})},we=e.getCopyFileId(te,xe,se,W,X),Ae=e.getUploadIdList(we);if(!we||!Ae)return be();var Pe=function Oe(Ie){if(Ie>=Ae.length)return be();var le=Ae[Ie];if(e.using[le])return Oe(Ie+1);L.call(j,{Bucket:W,Region:I,Key:X,UploadId:le},function(H,Z){if(H)e.removeUploadId(le),Oe(Ie+1);else{if(e.using[le])return Oe(Ie+1);var y={},l=0;R.each(Z.PartList,function(p){var d=parseInt(p.Size),k=l+d-1;y[p.PartNumber+"|"+l+"|"+k]=p.ETag,l+=d}),R.each(h.PartList,function(p){var d=y[p.PartNumber+"|"+p.start+"|"+p.end];d&&(p.ETag=d,p.Uploaded=!0)}),$.emit("get_copy_data_finish",{UploadId:le,PartList:h.PartList})}})};Pe(0)}),$.on("get_file_size_finish",function(){if(function(){for(var we=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],Ae=1024*1024,Pe=0;Pe<we.length&&(Ae=we[Pe]*1024*1024,!(ue/Ae<=j.options.MaxPartNumber));Pe++);h.ChunkSize=se=Math.max(se,Ae),Se=Math.ceil(ue/se);for(var Oe=[],Ie=1;Ie<=Se;Ie++){var le=(Ie-1)*se,H=Ie*se<ue?Ie*se-1:ue-1,Z={PartNumber:Ie,start:le,end:H,CopySourceRange:"bytes="+le+"-"+H};Oe.push(Z)}h.PartList=Oe}(),h.Headers["x-cos-metadata-directive"]==="Replaced"?Ce=h.Headers:Ce=ye,Ce["x-cos-storage-class"]=h.Headers["x-cos-storage-class"]||ye["x-cos-storage-class"],Ce=R.clearKey(Ce),ye["x-cos-storage-class"]==="ARCHIVE"||ye["x-cos-storage-class"]==="DEEP_ARCHIVE"){var be=ye["x-cos-restore"];if(!be||be==='ongoing-request="true"'){q(R.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete Ce["x-cos-copy-source"],delete Ce["x-cos-metadata-directive"],delete Ce["x-cos-copy-source-If-Modified-Since"],delete Ce["x-cos-copy-source-If-Unmodified-Since"],delete Ce["x-cos-copy-source-If-Match"],delete Ce["x-cos-copy-source-If-None-Match"],$.emit("get_chunk_size_finish")}),j.headObject({Bucket:ne,Region:ce,Key:he},function(be,we){if(be){be.statusCode&&be.statusCode===404?q(R.error(be,{ErrorStatus:he+" Not Exist"})):q(be);return}if(ue=h.FileSize=we.headers["content-length"],ue===void 0||!ue){q(R.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.\uFF08 \u83B7\u53D6Content-Length\u5931\u8D25\uFF0C\u8BF7\u5728CORS ExposeHeader\u8BBE\u7F6E\u4E2D\u6DFB\u52A0Content-Length\uFF0C\u8BF7\u53C2\u8003\u6587\u6863\uFF1Ahttps://cloud.tencent.com/document/product/436/13318 \uFF09')));return}if(ge=R.throttleOnProgress.call(j,ue,h.onProgress),ue<=de)h.Headers["x-cos-metadata-directive"]||(h.Headers["x-cos-metadata-directive"]="Copy"),j.putObjectCopy(h,function(Pe,Oe){if(Pe)return ge(null,!0),q(Pe);ge({loaded:ue,total:ue},!0),q(Pe,Oe)});else{var Ae=we.headers;xe=Ae,ye={"Cache-Control":Ae["cache-control"],"Content-Disposition":Ae["content-disposition"],"Content-Encoding":Ae["content-encoding"],"Content-Type":Ae["content-type"],Expires:Ae.expires,"x-cos-storage-class":Ae["x-cos-storage-class"]},R.each(Ae,function(Pe,Oe){var Ie="x-cos-meta-";Oe.indexOf(Ie)===0&&Oe.length>Ie.length&&(ye[Oe]=Pe)}),$.emit("get_file_size_finish")}})}function C(h,q){var $=h.TaskId,j=h.Bucket,W=h.Region,I=h.Key,X=h.CopySource,te=h.UploadId,Y=h.PartNumber*1,ne=h.CopySourceRange,ce=this.options.ChunkRetryTimes+1,he=this;O.retry(ce,function(de){he.uploadPartCopy({TaskId:$,Bucket:j,Region:W,Key:I,CopySource:X,UploadId:te,PartNumber:Y,CopySourceRange:ne},function(se,pe){de(se||null,pe)})},function(de,se){return q(de,se)})}var Q={sliceUploadFile:T,abortUploadTask:b,uploadFile:G,uploadFiles:A,sliceCopyFile:x};n.exports.init=function(h,q){q.transferToTaskMethod(Q,"sliceUploadFile"),R.each(Q,function($,j){h.prototype[j]=R.apiWrapper(j,$)})}},"./src/async.js":function(n,s){var r=function(f,R,S,T){if(T=T||function(){},!f.length||R<=0)return T();var E=0,F=0,L=0;(function K(){if(E>=f.length)return T();for(;L<R&&F<f.length;)F+=1,L+=1,S(f[F-1],function(P){P?(T(P),T=function(){}):(E+=1,L-=1,E>=f.length?T():K())})})()},a=function(f,R,S){var T=function E(F){R(function(L,K){L&&F<f?E(F+1):S(L,K)})};f<1?S():T(1)},e={eachLimit:r,retry:a};n.exports=e},"./src/base.js":function(n,s,r){var a=r("./lib/request.js"),e=r("./src/util.js");function O(o,m){typeof o=="function"&&(m=o,o={});var u=this.options.Protocol||(e.isBrowser&&location.protocol==="http:"?"http:":"https:"),v=this.options.ServiceDomain,_=o.AppId||this.options.appId,w=o.Region;v?(v=v.replace(/\{\{AppId\}\}/ig,_||"").replace(/\{\{Region\}\}/ig,w||"").replace(/\{\{.*?\}\}/ig,""),/^[a-zA-Z]+:\/\//.test(v)||(v=u+"//"+v),v.slice(-1)==="/"&&(v=v.slice(0,-1))):w?v=u+"//cos."+w+".myqcloud.com":v=u+"//service.cos.myqcloud.com";var D="",z=w?"cos."+w+".myqcloud.com":"service.cos.myqcloud.com",oe=v.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");z===oe&&(D=z),J.call(this,{Action:"name/cos:GetService",url:v,method:"GET",headers:o.Headers,SignHost:D},function(Ee,Re){if(Ee)return m(Ee);var ke=Re&&Re.ListAllMyBucketsResult&&Re.ListAllMyBucketsResult.Buckets&&Re.ListAllMyBucketsResult.Buckets.Bucket||[];ke=e.isArray(ke)?ke:[ke];var _e=Re&&Re.ListAllMyBucketsResult&&Re.ListAllMyBucketsResult.Owner||{};m(null,{Buckets:ke,Owner:_e,statusCode:Re.statusCode,headers:Re.headers})})}function f(o,m){var u=this,v="";if(o.BucketAZConfig){var _={BucketAZConfig:o.BucketAZConfig};v=e.json2xml({CreateBucketConfiguration:_})}J.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,body:v},function(w,D){if(w)return m(w);var z=c({protocol:u.options.Protocol,domain:u.options.Domain,bucket:o.Bucket,region:o.Region,isLocation:!0});m(null,{Location:z,statusCode:D.statusCode,headers:D.headers})})}function R(o,m){J.call(this,{Action:"name/cos:HeadBucket",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,method:"HEAD"},m)}function S(o,m){var u={};u.prefix=o.Prefix||"",u.delimiter=o.Delimiter,u.marker=o.Marker,u["max-keys"]=o.MaxKeys,u["encoding-type"]=o.EncodingType,J.call(this,{Action:"name/cos:GetBucket",ResourceKey:u.prefix,method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,qs:u},function(v,_){if(v)return m(v);var w=_.ListBucketResult||{},D=w.Contents||[],z=w.CommonPrefixes||[];D=e.isArray(D)?D:[D],z=e.isArray(z)?z:[z];var oe=e.clone(w);e.extend(oe,{Contents:D,CommonPrefixes:z,statusCode:_.statusCode,headers:_.headers}),m(null,oe)})}function T(o,m){J.call(this,{Action:"name/cos:DeleteBucket",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,method:"DELETE"},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode,headers:v.headers})})}function E(o,m){var u=o.Headers,v="";if(o.AccessControlPolicy){var _=e.clone(o.AccessControlPolicy||{}),w=_.Grants||_.Grant;w=e.isArray(w)?w:[w],delete _.Grant,delete _.Grants,_.AccessControlList={Grant:w},v=e.json2xml({AccessControlPolicy:_}),u["Content-Type"]="application/xml",u["Content-MD5"]=e.binaryBase64(e.md5(v))}e.each(u,function(D,z){z.indexOf("x-cos-grant-")===0&&(u[z]=Ye(u[z]))}),J.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:o.Bucket,Region:o.Region,headers:u,action:"acl",body:v},function(D,z){if(D)return m(D);m(null,{statusCode:z.statusCode,headers:z.headers})})}function F(o,m){J.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"acl"},function(u,v){if(u)return m(u);var _=v.AccessControlPolicy||{},w=_.Owner||{},D=_.AccessControlList.Grant||[];D=e.isArray(D)?D:[D];var z=tt(_);v.headers&&v.headers["x-cos-acl"]&&(z.ACL=v.headers["x-cos-acl"]),z=e.extend(z,{Owner:w,Grants:D,statusCode:v.statusCode,headers:v.headers}),m(null,z)})}function L(o,m){var u=o.CORSConfiguration||{},v=u.CORSRules||o.CORSRules||[];v=e.clone(e.isArray(v)?v:[v]),e.each(v,function(z){e.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(oe){var Ee=oe+"s",Re=z[Ee]||z[oe]||[];delete z[Ee],z[oe]=e.isArray(Re)?Re:[Re]})});var _={CORSRule:v};o.ResponseVary&&(_.ResponseVary=o.ResponseVary);var w=e.json2xml({CORSConfiguration:_}),D=o.Headers;D["Content-Type"]="application/xml",D["Content-MD5"]=e.binaryBase64(e.md5(w)),J.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:w,action:"cors",headers:D},function(z,oe){if(z)return m(z);m(null,{statusCode:oe.statusCode,headers:oe.headers})})}function K(o,m){J.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"cors"},function(u,v){if(u){if(u.statusCode===404&&u.error&&u.error.Code==="NoSuchCORSConfiguration"){var _={CORSRules:[],statusCode:u.statusCode};u.headers&&(_.headers=u.headers),m(null,_)}else m(u);return}var w=v.CORSConfiguration||{},D=w.CORSRules||w.CORSRule||[];D=e.clone(e.isArray(D)?D:[D]);var z=w.ResponseVary;e.each(D,function(oe){e.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(Ee){var Re=Ee+"s",ke=oe[Re]||oe[Ee]||[];delete oe[Ee],oe[Re]=e.isArray(ke)?ke:[ke]})}),m(null,{CORSRules:D,ResponseVary:z,statusCode:v.statusCode,headers:v.headers})})}function P(o,m){J.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"cors"},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode||u.statusCode,headers:v.headers})})}function N(o,m){J.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"location"},m)}function b(o,m){var u=o.Policy;try{typeof u=="string"&&(u=JSON.parse(u))}catch{}if(!u||typeof u=="string")return m(e.error(new Error("Policy format error")));var v=JSON.stringify(u);u.version||(u.version="2.0");var _=o.Headers;_["Content-Type"]="application/json",_["Content-MD5"]=e.binaryBase64(e.md5(v)),J.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:o.Bucket,Region:o.Region,action:"policy",body:v,headers:_},function(w,D){if(w&&w.statusCode===204)return m(null,{statusCode:w.statusCode});if(w)return m(w);m(null,{statusCode:D.statusCode,headers:D.headers})})}function B(o,m){J.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"policy",rawBody:!0},function(u,v){if(u)return u.statusCode&&u.statusCode===403?m(e.error(u,{ErrorStatus:"Access Denied"})):u.statusCode&&u.statusCode===405?m(e.error(u,{ErrorStatus:"Method Not Allowed"})):u.statusCode&&u.statusCode===404?m(e.error(u,{ErrorStatus:"Policy Not Found"})):m(u);var _={};try{_=JSON.parse(v.body)}catch{}m(null,{Policy:_,statusCode:v.statusCode,headers:v.headers})})}function G(o,m){J.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"policy"},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode||u.statusCode,headers:v.headers})})}function A(o,m){var u=o.Tagging||{},v=u.TagSet||u.Tags||o.Tags||[];v=e.clone(e.isArray(v)?v:[v]);var _=e.json2xml({Tagging:{TagSet:{Tag:v}}}),w=o.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(_)),J.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:_,action:"tagging",headers:w},function(D,z){if(D&&D.statusCode===204)return m(null,{statusCode:D.statusCode});if(D)return m(D);m(null,{statusCode:z.statusCode,headers:z.headers})})}function x(o,m){J.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"tagging"},function(u,v){if(u){if(u.statusCode===404&&u.error&&(u.error==="Not Found"||u.error.Code==="NoSuchTagSet")){var _={Tags:[],statusCode:u.statusCode};u.headers&&(_.headers=u.headers),m(null,_)}else m(u);return}var w=[];try{w=v.Tagging.TagSet.Tag||[]}catch{}w=e.clone(e.isArray(w)?w:[w]),m(null,{Tags:w,statusCode:v.statusCode,headers:v.headers})})}function C(o,m){J.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"tagging"},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode,headers:v.headers})})}function Q(o,m){var u=o.LifecycleConfiguration||{},v=u.Rules||o.Rules||[];v=e.clone(v);var _=e.json2xml({LifecycleConfiguration:{Rule:v}}),w=o.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(_)),J.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:_,action:"lifecycle",headers:w},function(D,z){if(D&&D.statusCode===204)return m(null,{statusCode:D.statusCode});if(D)return m(D);m(null,{statusCode:z.statusCode,headers:z.headers})})}function h(o,m){J.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"lifecycle"},function(u,v){if(u){if(u.statusCode===404&&u.error&&u.error.Code==="NoSuchLifecycleConfiguration"){var _={Rules:[],statusCode:u.statusCode};u.headers&&(_.headers=u.headers),m(null,_)}else m(u);return}var w=[];try{w=v.LifecycleConfiguration.Rule||[]}catch{}w=e.clone(e.isArray(w)?w:[w]),m(null,{Rules:w,statusCode:v.statusCode,headers:v.headers})})}function q(o,m){J.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"lifecycle"},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode,headers:v.headers})})}function $(o,m){if(!o.VersioningConfiguration){m(e.error(new Error("missing param VersioningConfiguration")));return}var u=o.VersioningConfiguration||{},v=e.json2xml({VersioningConfiguration:u}),_=o.Headers;_["Content-Type"]="application/xml",_["Content-MD5"]=e.binaryBase64(e.md5(v)),J.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:v,action:"versioning",headers:_},function(w,D){if(w&&w.statusCode===204)return m(null,{statusCode:w.statusCode});if(w)return m(w);m(null,{statusCode:D.statusCode,headers:D.headers})})}function j(o,m){J.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"versioning"},function(u,v){u||!v.VersioningConfiguration&&(v.VersioningConfiguration={}),m(u,v)})}function W(o,m){var u=e.clone(o.ReplicationConfiguration),v=e.json2xml({ReplicationConfiguration:u});v=v.replace(/<(\/?)Rules>/ig,"<$1Rule>"),v=v.replace(/<(\/?)Tags>/ig,"<$1Tag>");var _=o.Headers;_["Content-Type"]="application/xml",_["Content-MD5"]=e.binaryBase64(e.md5(v)),J.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:v,action:"replication",headers:_},function(w,D){if(w&&w.statusCode===204)return m(null,{statusCode:w.statusCode});if(w)return m(w);m(null,{statusCode:D.statusCode,headers:D.headers})})}function I(o,m){J.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"replication"},function(u,v){if(u){if(u.statusCode===404&&u.error&&(u.error==="Not Found"||u.error.Code==="ReplicationConfigurationnotFoundError")){var _={ReplicationConfiguration:{Rules:[]},statusCode:u.statusCode};u.headers&&(_.headers=u.headers),m(null,_)}else m(u);return}!v.ReplicationConfiguration&&(v.ReplicationConfiguration={}),v.ReplicationConfiguration.Rule&&(v.ReplicationConfiguration.Rules=e.makeArray(v.ReplicationConfiguration.Rule),delete v.ReplicationConfiguration.Rule),m(u,v)})}function X(o,m){J.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"replication"},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode,headers:v.headers})})}function te(o,m){if(!o.WebsiteConfiguration){m(e.error(new Error("missing param WebsiteConfiguration")));return}var u=e.clone(o.WebsiteConfiguration||{}),v=u.RoutingRules||u.RoutingRule||[];v=e.isArray(v)?v:[v],delete u.RoutingRule,delete u.RoutingRules,v.length&&(u.RoutingRules={RoutingRule:v});var _=e.json2xml({WebsiteConfiguration:u}),w=o.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(_)),J.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:_,action:"website",headers:w},function(D,z){if(D&&D.statusCode===204)return m(null,{statusCode:D.statusCode});if(D)return m(D);m(null,{statusCode:z.statusCode,headers:z.headers})})}function Y(o,m){J.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:o.Bucket,Region:o.Region,Key:o.Key,headers:o.Headers,action:"website"},function(u,v){if(u){if(u.statusCode===404&&u.error.Code==="NoSuchWebsiteConfiguration"){var _={WebsiteConfiguration:{},statusCode:u.statusCode};u.headers&&(_.headers=u.headers),m(null,_)}else m(u);return}var w=v.WebsiteConfiguration||{};if(w.RoutingRules){var D=e.clone(w.RoutingRules.RoutingRule||[]);D=e.makeArray(D),w.RoutingRules=D}m(null,{WebsiteConfiguration:w,statusCode:v.statusCode,headers:v.headers})})}function ne(o,m){J.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"website"},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode,headers:v.headers})})}function ce(o,m){if(!o.RefererConfiguration){m(e.error(new Error("missing param RefererConfiguration")));return}var u=e.clone(o.RefererConfiguration||{}),v=u.DomainList||{},_=v.Domains||v.Domain||[];_=e.isArray(_)?_:[_],_.length&&(u.DomainList={Domain:_});var w=e.json2xml({RefererConfiguration:u}),D=o.Headers;D["Content-Type"]="application/xml",D["Content-MD5"]=e.binaryBase64(e.md5(w)),J.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:w,action:"referer",headers:D},function(z,oe){if(z&&z.statusCode===204)return m(null,{statusCode:z.statusCode});if(z)return m(z);m(null,{statusCode:oe.statusCode,headers:oe.headers})})}function he(o,m){J.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:o.Bucket,Region:o.Region,Key:o.Key,headers:o.Headers,action:"referer"},function(u,v){if(u){if(u.statusCode===404&&u.error.Code==="NoSuchRefererConfiguration"){var _={WebsiteConfiguration:{},statusCode:u.statusCode};u.headers&&(_.headers=u.headers),m(null,_)}else m(u);return}var w=v.RefererConfiguration||{};if(w.DomainList){var D=e.makeArray(w.DomainList.Domain||[]);w.DomainList={Domains:D}}m(null,{RefererConfiguration:w,statusCode:v.statusCode,headers:v.headers})})}function de(o,m){var u=o.DomainConfiguration||{},v=u.DomainRule||o.DomainRule||[];v=e.clone(v);var _=e.json2xml({DomainConfiguration:{DomainRule:v}}),w=o.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(_)),J.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:_,action:"domain",headers:w},function(D,z){if(D&&D.statusCode===204)return m(null,{statusCode:D.statusCode});if(D)return m(D);m(null,{statusCode:z.statusCode,headers:z.headers})})}function se(o,m){J.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"domain"},function(u,v){if(u)return m(u);var _=[];try{_=v.DomainConfiguration.DomainRule||[]}catch{}_=e.clone(e.isArray(_)?_:[_]),m(null,{DomainRule:_,statusCode:v.statusCode,headers:v.headers})})}function pe(o,m){J.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"domain"},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode,headers:v.headers})})}function fe(o,m){var u=o.OriginConfiguration||{},v=u.OriginRule||o.OriginRule||[];v=e.clone(v);var _=e.json2xml({OriginConfiguration:{OriginRule:v}}),w=o.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(_)),J.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:_,action:"origin",headers:w},function(D,z){if(D&&D.statusCode===204)return m(null,{statusCode:D.statusCode});if(D)return m(D);m(null,{statusCode:z.statusCode,headers:z.headers})})}function Se(o,m){J.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"origin"},function(u,v){if(u)return m(u);var _=[];try{_=v.OriginConfiguration.OriginRule||[]}catch{}_=e.clone(e.isArray(_)?_:[_]),m(null,{OriginRule:_,statusCode:v.statusCode,headers:v.headers})})}function re(o,m){J.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"origin"},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode,headers:v.headers})})}function ue(o,m){var u=e.json2xml({BucketLoggingStatus:o.BucketLoggingStatus||""}),v=o.Headers;v["Content-Type"]="application/xml",v["Content-MD5"]=e.binaryBase64(e.md5(u)),J.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:u,action:"logging",headers:v},function(_,w){if(_&&_.statusCode===204)return m(null,{statusCode:_.statusCode});if(_)return m(_);m(null,{statusCode:w.statusCode,headers:w.headers})})}function ge(o,m){J.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"logging"},function(u,v){if(u)return m(u);m(null,{BucketLoggingStatus:v.BucketLoggingStatus,statusCode:v.statusCode,headers:v.headers})})}function xe(o,m){var u=e.clone(o.InventoryConfiguration);if(u.OptionalFields){var v=u.OptionalFields||[];u.OptionalFields={Field:v}}if(u.Destination&&u.Destination.COSBucketDestination&&u.Destination.COSBucketDestination.Encryption){var _=u.Destination.COSBucketDestination.Encryption;Object.keys(_).indexOf("SSECOS")>-1&&(_["SSE-COS"]=_.SSECOS,delete _.SSECOS)}var w=e.json2xml({InventoryConfiguration:u}),D=o.Headers;D["Content-Type"]="application/xml",D["Content-MD5"]=e.binaryBase64(e.md5(w)),J.call(this,{Action:"name/cos:PutBucketInventory",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:w,action:"inventory",qs:{id:o.Id},headers:D},function(z,oe){if(z&&z.statusCode===204)return m(null,{statusCode:z.statusCode});if(z)return m(z);m(null,{statusCode:oe.statusCode,headers:oe.headers})})}function ye(o,m){J.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"inventory",qs:{id:o.Id}},function(u,v){if(u)return m(u);var _=v.InventoryConfiguration;if(_&&_.OptionalFields&&_.OptionalFields.Field){var w=_.OptionalFields.Field;e.isArray(w)||(w=[w]),_.OptionalFields=w}if(_.Destination&&_.Destination.COSBucketDestination&&_.Destination.COSBucketDestination.Encryption){var D=_.Destination.COSBucketDestination.Encryption;Object.keys(D).indexOf("SSE-COS")>-1&&(D.SSECOS=D["SSE-COS"],delete D["SSE-COS"])}m(null,{InventoryConfiguration:_,statusCode:v.statusCode,headers:v.headers})})}function Ce(o,m){J.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"inventory",qs:{"continuation-token":o.ContinuationToken}},function(u,v){if(u)return m(u);var _=v.ListInventoryConfigurationResult,w=_.InventoryConfiguration||[];w=e.isArray(w)?w:[w],delete _.InventoryConfiguration,e.each(w,function(D){if(D&&D.OptionalFields&&D.OptionalFields.Field){var z=D.OptionalFields.Field;e.isArray(z)||(z=[z]),D.OptionalFields=z}if(D.Destination&&D.Destination.COSBucketDestination&&D.Destination.COSBucketDestination.Encryption){var oe=D.Destination.COSBucketDestination.Encryption;Object.keys(oe).indexOf("SSE-COS")>-1&&(oe.SSECOS=oe["SSE-COS"],delete oe["SSE-COS"])}}),_.InventoryConfigurations=w,e.extend(_,{statusCode:v.statusCode,headers:v.headers}),m(null,_)})}function be(o,m){J.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"inventory",qs:{id:o.Id}},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode,headers:v.headers})})}function we(o,m){if(!o.AccelerateConfiguration){m(e.error(new Error("missing param AccelerateConfiguration")));return}var u={AccelerateConfiguration:o.AccelerateConfiguration||{}},v=e.json2xml(u),_={};_["Content-Type"]="application/xml",_["Content-MD5"]=e.binaryBase64(e.md5(v)),J.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:v,action:"accelerate",headers:_},function(w,D){if(w)return m(w);m(null,{statusCode:D.statusCode,headers:D.headers})})}function Ae(o,m){J.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:o.Bucket,Region:o.Region,action:"accelerate"},function(u,v){u||!v.AccelerateConfiguration&&(v.AccelerateConfiguration={}),m(u,v)})}function Pe(o,m){var u=o.ServerSideEncryptionConfiguration||{},v=u.Rule||u.Rules||[],_=e.json2xml({ServerSideEncryptionConfiguration:{Rule:v}}),w=o.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(_)),J.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:o.Bucket,Region:o.Region,body:_,action:"encryption",headers:w},function(D,z){if(D&&D.statusCode===204)return m(null,{statusCode:D.statusCode});if(D)return m(D);m(null,{statusCode:z.statusCode,headers:z.headers})})}function Oe(o,m){J.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"encryption"},function(u,v){if(u){if(u.statusCode===404&&u.code==="NoSuchEncryptionConfiguration"){var _={EncryptionConfiguration:{Rules:[]},statusCode:u.statusCode};u.headers&&(_.headers=u.headers),m(null,_)}else m(u);return}var w=e.makeArray(v.EncryptionConfiguration&&v.EncryptionConfiguration.Rule||[]);v.EncryptionConfiguration={Rules:w},m(u,v)})}function Ie(o,m){J.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"encryption"},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode,headers:v.headers})})}function le(o,m){J.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:o.Bucket,Region:o.Region,Key:o.Key,VersionId:o.VersionId,headers:o.Headers},function(u,v){if(u){var _=u.statusCode;return o.Headers["If-Modified-Since"]&&_&&_===304?m(null,{NotModified:!0,statusCode:_}):m(u)}v.ETag=e.attr(v.headers,"etag",""),m(null,v)})}function H(o,m){var u={};u.prefix=o.Prefix||"",u.delimiter=o.Delimiter,u["key-marker"]=o.KeyMarker,u["version-id-marker"]=o.VersionIdMarker,u["max-keys"]=o.MaxKeys,u["encoding-type"]=o.EncodingType,J.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:u.prefix,method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,qs:u,action:"versions"},function(v,_){if(v)return m(v);var w=_.ListVersionsResult||{},D=w.DeleteMarker||[];D=e.isArray(D)?D:[D];var z=w.Version||[];z=e.isArray(z)?z:[z];var oe=e.clone(w);delete oe.DeleteMarker,delete oe.Version,e.extend(oe,{DeleteMarkers:D,Versions:z,statusCode:_.statusCode,headers:_.headers}),m(null,oe)})}function Z(o,m){var u=o.Query||{},v=o.QueryString||"",_=e.throttleOnProgress.call(this,0,o.onProgress),w=o.tracker;w&&w.setParams({signStartTime:new Date().getTime()}),u["response-content-type"]=o.ResponseContentType,u["response-content-language"]=o.ResponseContentLanguage,u["response-expires"]=o.ResponseExpires,u["response-cache-control"]=o.ResponseCacheControl,u["response-content-disposition"]=o.ResponseContentDisposition,u["response-content-encoding"]=o.ResponseContentEncoding,J.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:o.Bucket,Region:o.Region,Key:o.Key,VersionId:o.VersionId,DataType:o.DataType,headers:o.Headers,qs:u,qsStr:v,rawBody:!0,onDownloadProgress:_,tracker:w},function(D,z){if(_(null,!0),D){var oe=D.statusCode;return o.Headers["If-Modified-Since"]&&oe&&oe===304?m(null,{NotModified:!0}):m(D)}m(null,{Body:z.body,ETag:e.attr(z.headers,"etag",""),statusCode:z.statusCode,headers:z.headers})})}function y(o,m){var u=this,v=o.ContentLength,_=e.throttleOnProgress.call(u,v,o.onProgress),w=o.Headers;!w["Cache-Control"]&&!w["cache-control"]&&(w["Cache-Control"]=""),!w["Content-Type"]&&!w["content-type"]&&(w["Content-Type"]=o.Body&&o.Body.type||"");var D=o.UploadAddMetaMd5||u.options.UploadAddMetaMd5||u.options.UploadCheckContentMd5,z=o.tracker;D&&z&&z.setParams({md5StartTime:new Date().getTime()}),e.getBodyMd5(D,o.Body,function(oe){oe&&(z&&z.setParams({md5EndTime:new Date().getTime()}),u.options.UploadCheckContentMd5&&(w["Content-MD5"]=e.binaryBase64(oe)),(o.UploadAddMetaMd5||u.options.UploadAddMetaMd5)&&(w["x-cos-meta-md5"]=oe)),o.ContentLength!==void 0&&(w["Content-Length"]=o.ContentLength),_(null,!0),J.call(u,{Action:"name/cos:PutObject",TaskId:o.TaskId,method:"PUT",Bucket:o.Bucket,Region:o.Region,Key:o.Key,headers:o.Headers,qs:o.Query,body:o.Body,onProgress:_,tracker:z},function(Ee,Re){if(Ee)return _(null,!0),m(Ee);_({loaded:v,total:v},!0);var ke=c({ForcePathStyle:u.options.ForcePathStyle,protocol:u.options.Protocol,domain:u.options.Domain,bucket:o.Bucket,region:u.options.UseAccelerate?"accelerate":o.Region,object:o.Key});ke=ke.substr(ke.indexOf("://")+3),Re.Location=ke,Re.ETag=e.attr(Re.headers,"etag",""),m(null,Re)})},o.onHashProgress)}function l(o,m){J.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:o.Bucket,Region:o.Region,Key:o.Key,headers:o.Headers,VersionId:o.VersionId,action:o.Recursive?"recursive":""},function(u,v){if(u){var _=u.statusCode;return _&&_===404?m(null,{BucketNotFound:!0,statusCode:_}):m(u)}m(null,{statusCode:v.statusCode,headers:v.headers})})}function p(o,m){var u={};o.VersionId&&(u.versionId=o.VersionId),J.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:o.Bucket,Region:o.Region,Key:o.Key,headers:o.Headers,qs:u,action:"acl"},function(v,_){if(v)return m(v);var w=_.AccessControlPolicy||{},D=w.Owner||{},z=w.AccessControlList&&w.AccessControlList.Grant||[];z=e.isArray(z)?z:[z];var oe=tt(w);delete oe.GrantWrite,_.headers&&_.headers["x-cos-acl"]&&(oe.ACL=_.headers["x-cos-acl"]),oe=e.extend(oe,{Owner:D,Grants:z,statusCode:_.statusCode,headers:_.headers}),m(null,oe)})}function d(o,m){var u=o.Headers,v="";if(o.AccessControlPolicy){var _=e.clone(o.AccessControlPolicy||{}),w=_.Grants||_.Grant;w=e.isArray(w)?w:[w],delete _.Grant,delete _.Grants,_.AccessControlList={Grant:w},v=e.json2xml({AccessControlPolicy:_}),u["Content-Type"]="application/xml",u["Content-MD5"]=e.binaryBase64(e.md5(v))}e.each(u,function(D,z){z.indexOf("x-cos-grant-")===0&&(u[z]=Ye(u[z]))}),J.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:o.Bucket,Region:o.Region,Key:o.Key,action:"acl",headers:u,body:v},function(D,z){if(D)return m(D);m(null,{statusCode:z.statusCode,headers:z.headers})})}function k(o,m){var u=o.Headers;u.Origin=o.Origin,u["Access-Control-Request-Method"]=o.AccessControlRequestMethod,u["Access-Control-Request-Headers"]=o.AccessControlRequestHeaders,J.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:o.Bucket,Region:o.Region,Key:o.Key,headers:u},function(v,_){if(v)return v.statusCode&&v.statusCode===403?m(null,{OptionsForbidden:!0,statusCode:v.statusCode}):m(v);var w=_.headers||{};m(null,{AccessControlAllowOrigin:w["access-control-allow-origin"],AccessControlAllowMethods:w["access-control-allow-methods"],AccessControlAllowHeaders:w["access-control-allow-headers"],AccessControlExposeHeaders:w["access-control-expose-headers"],AccessControlMaxAge:w["access-control-max-age"],statusCode:_.statusCode,headers:_.headers})})}function M(o,m){var u=this,v=o.Headers;!v["Cache-Control"]&&!v["cache-control"]&&(v["Cache-Control"]="");var _=o.CopySource||"",w=e.getSourceParams.call(this,_);if(!w){m(e.error(new Error("CopySource format error")));return}var D=w.Bucket,z=w.Region,oe=decodeURIComponent(w.Key);J.call(this,{Scope:[{action:"name/cos:GetObject",bucket:D,region:z,prefix:oe},{action:"name/cos:PutObject",bucket:o.Bucket,region:o.Region,prefix:o.Key}],method:"PUT",Bucket:o.Bucket,Region:o.Region,Key:o.Key,VersionId:o.VersionId,headers:o.Headers},function(Ee,Re){if(Ee)return m(Ee);var ke=e.clone(Re.CopyObjectResult||{}),_e=c({ForcePathStyle:u.options.ForcePathStyle,protocol:u.options.Protocol,domain:u.options.Domain,bucket:o.Bucket,region:o.Region,object:o.Key,isLocation:!0});e.extend(ke,{Location:_e,statusCode:Re.statusCode,headers:Re.headers}),m(null,ke)})}function V(o,m){var u=o.CopySource||"",v=e.getSourceParams.call(this,u);if(!v){m(e.error(new Error("CopySource format error")));return}var _=v.Bucket,w=v.Region,D=decodeURIComponent(v.Key);J.call(this,{Scope:[{action:"name/cos:GetObject",bucket:_,region:w,prefix:D},{action:"name/cos:PutObject",bucket:o.Bucket,region:o.Region,prefix:o.Key}],method:"PUT",Bucket:o.Bucket,Region:o.Region,Key:o.Key,VersionId:o.VersionId,qs:{partNumber:o.PartNumber,uploadId:o.UploadId},headers:o.Headers},function(z,oe){if(z)return m(z);var Ee=e.clone(oe.CopyPartResult||{});e.extend(Ee,{statusCode:oe.statusCode,headers:oe.headers}),m(null,Ee)})}function ie(o,m){var u=o.Objects||[],v=o.Quiet;u=e.isArray(u)?u:[u];var _=e.json2xml({Delete:{Object:u,Quiet:v||!1}}),w=o.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(_));var D=e.map(u,function(z){return{action:"name/cos:DeleteObject",bucket:o.Bucket,region:o.Region,prefix:z.Key}});J.call(this,{Scope:D,method:"POST",Bucket:o.Bucket,Region:o.Region,body:_,action:"delete",headers:w},function(z,oe){if(z)return m(z);var Ee=oe.DeleteResult||{},Re=Ee.Deleted||[],ke=Ee.Error||[];Re=e.isArray(Re)?Re:[Re],ke=e.isArray(ke)?ke:[ke];var _e=e.clone(Ee);e.extend(_e,{Error:ke,Deleted:Re,statusCode:oe.statusCode,headers:oe.headers}),m(null,_e)})}function ve(o,m){var u=o.Headers;if(!o.RestoreRequest){m(e.error(new Error("missing param RestoreRequest")));return}var v=o.RestoreRequest||{},_=e.json2xml({RestoreRequest:v});u["Content-Type"]="application/xml",u["Content-MD5"]=e.binaryBase64(e.md5(_)),J.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:o.Bucket,Region:o.Region,Key:o.Key,VersionId:o.VersionId,body:_,action:"restore",headers:u},m)}function me(o,m){var u=o.Tagging||{},v=u.TagSet||u.Tags||o.Tags||[];v=e.clone(e.isArray(v)?v:[v]);var _=e.json2xml({Tagging:{TagSet:{Tag:v}}}),w=o.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(_)),J.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:o.Bucket,Key:o.Key,Region:o.Region,body:_,action:"tagging",headers:w,VersionId:o.VersionId},function(D,z){if(D&&D.statusCode===204)return m(null,{statusCode:D.statusCode});if(D)return m(D);m(null,{statusCode:z.statusCode,headers:z.headers})})}function ae(o,m){J.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:o.Key,Bucket:o.Bucket,Region:o.Region,headers:o.Headers,action:"tagging",VersionId:o.VersionId},function(u,v){if(u){if(u.statusCode===404&&u.error&&(u.error==="Not Found"||u.error.Code==="NoSuchTagSet")){var _={Tags:[],statusCode:u.statusCode};u.headers&&(_.headers=u.headers),m(null,_)}else m(u);return}var w=[];try{w=v.Tagging.TagSet.Tag||[]}catch{}w=e.clone(e.isArray(w)?w:[w]),m(null,{Tags:w,statusCode:v.statusCode,headers:v.headers})})}function De(o,m){J.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:o.Bucket,Region:o.Region,Key:o.Key,headers:o.Headers,action:"tagging",VersionId:o.VersionId},function(u,v){if(u&&u.statusCode===204)return m(null,{statusCode:u.statusCode});if(u)return m(u);m(null,{statusCode:v.statusCode,headers:v.headers})})}function Te(o,m){var u=o.SelectType;if(!u)return m(e.error(new Error("missing param SelectType")));var v=o.SelectRequest||{},_=e.json2xml({SelectRequest:v}),w=o.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=e.binaryBase64(e.md5(_)),J.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:o.Bucket,Region:o.Region,Key:o.Key,headers:o.Headers,action:"select",qs:{"select-type":o.SelectType},VersionId:o.VersionId,body:_,DataType:"arraybuffer",rawBody:!0},function(D,z){if(D&&D.statusCode===204)return m(null,{statusCode:D.statusCode});if(D)return m(D);var oe=e.parseSelectPayload(z.body);m(null,{statusCode:z.statusCode,headers:z.headers,Body:oe.body,Payload:oe.payload})})}function Fe(o,m){var u=this,v=o.Headers,_=o.tracker;!v["Cache-Control"]&&!v["cache-control"]&&(v["Cache-Control"]=""),!v["Content-Type"]&&!v["content-type"]&&(v["Content-Type"]=o.Body&&o.Body.type||"");var w=o.Body&&(o.UploadAddMetaMd5||u.options.UploadAddMetaMd5);w&&_&&_.setParams({md5StartTime:new Date().getTime()}),e.getBodyMd5(w,o.Body,function(D){D&&(o.Headers["x-cos-meta-md5"]=D),w&&_&&_.setParams({md5EndTime:new Date().getTime()}),J.call(u,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:o.Bucket,Region:o.Region,Key:o.Key,action:"uploads",headers:o.Headers,qs:o.Query,tracker:_},function(z,oe){if(z)return _&&_.parent&&_.parent.setParams({errorNode:"multipartInit"}),m(z);if(oe=e.clone(oe||{}),oe&&oe.InitiateMultipartUploadResult)return m(null,e.extend(oe.InitiateMultipartUploadResult,{statusCode:oe.statusCode,headers:oe.headers}));m(null,oe)})},o.onHashProgress)}function He(o,m){var u=this;e.getFileSize("multipartUpload",o,function(){var v=o.tracker,_=u.options.UploadCheckContentMd5;_&&v&&v.setParams({md5StartTime:new Date().getTime()}),e.getBodyMd5(_,o.Body,function(w){w&&(o.Headers["Content-MD5"]=e.binaryBase64(w)),_&&v&&v.setParams({md5EndTime:new Date().getTime()}),v&&v.setParams({partNumber:o.PartNumber}),J.call(u,{Action:"name/cos:UploadPart",TaskId:o.TaskId,method:"PUT",Bucket:o.Bucket,Region:o.Region,Key:o.Key,qs:{partNumber:o.PartNumber,uploadId:o.UploadId},headers:o.Headers,onProgress:o.onProgress,body:o.Body||null,tracker:v},function(D,z){if(D)return v&&v.parent&&v.parent.setParams({errorNode:"multipartUpload"}),m(D);m(null,{ETag:e.attr(z.headers,"etag",""),statusCode:z.statusCode,headers:z.headers})})})})}function Ke(o,m){for(var u=this,v=o.UploadId,_=o.Parts,w=o.tracker,D=0,z=_.length;D<z;D++)_[D].ETag&&_[D].ETag.indexOf('"')===0||(_[D].ETag='"'+_[D].ETag+'"');var oe=e.json2xml({CompleteMultipartUpload:{Part:_}});oe=oe.replace(/\n\s*/g,"");var Ee=o.Headers;Ee["Content-Type"]="application/xml",Ee["Content-MD5"]=e.binaryBase64(e.md5(oe)),J.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:o.Bucket,Region:o.Region,Key:o.Key,qs:{uploadId:v},body:oe,headers:Ee,tracker:w},function(Re,ke){if(Re)return w&&w.parent&&w.parent.setParams({errorNode:"multipartComplete"}),m(Re);var _e=c({ForcePathStyle:u.options.ForcePathStyle,protocol:u.options.Protocol,domain:u.options.Domain,bucket:o.Bucket,region:o.Region,object:o.Key,isLocation:!0}),je=ke.CompleteMultipartUploadResult||{};je.ProcessResults&&je&&je.ProcessResults&&(je.UploadResult={OriginalInfo:{Key:je.Key,Location:_e,ETag:je.ETag,ImageInfo:je.ImageInfo},ProcessResults:je.ProcessResults},delete je.ImageInfo,delete je.ProcessResults);var Qe=e.extend(je,{Location:_e,statusCode:ke.statusCode,headers:ke.headers});m(null,Qe)})}function Ve(o,m){var u={};u.delimiter=o.Delimiter,u["encoding-type"]=o.EncodingType,u.prefix=o.Prefix||"",u["max-uploads"]=o.MaxUploads,u["key-marker"]=o.KeyMarker,u["upload-id-marker"]=o.UploadIdMarker,u=e.clearKey(u);var v=o.tracker;v&&v.setParams({signStartTime:new Date().getTime()}),J.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:u.prefix,method:"GET",Bucket:o.Bucket,Region:o.Region,headers:o.Headers,qs:u,action:"uploads",tracker:v},function(_,w){if(_)return v&&v.parent&&v.parent.setParams({errorNode:"multipartList"}),m(_);if(w&&w.ListMultipartUploadsResult){var D=w.ListMultipartUploadsResult.Upload||[];D=e.isArray(D)?D:[D],w.ListMultipartUploadsResult.Upload=D}var z=e.clone(w.ListMultipartUploadsResult||{});e.extend(z,{statusCode:w.statusCode,headers:w.headers}),m(null,z)})}function We(o,m){var u={},v=o.tracker;u.uploadId=o.UploadId,u["encoding-type"]=o.EncodingType,u["max-parts"]=o.MaxParts,u["part-number-marker"]=o.PartNumberMarker,J.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:o.Bucket,Region:o.Region,Key:o.Key,headers:o.Headers,qs:u},function(_,w){if(_)return v&&v.parent&&v.parent.setParams({errorNode:"multipartListPart"}),m(_);var D=w.ListPartsResult||{},z=D.Part||[];z=e.isArray(z)?z:[z],D.Part=z;var oe=e.clone(D);e.extend(oe,{statusCode:w.statusCode,headers:w.headers}),m(null,oe)})}function Xe(o,m){var u={};u.uploadId=o.UploadId,J.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:o.Bucket,Region:o.Region,Key:o.Key,headers:o.Headers,qs:u},function(v,_){if(v)return m(v);m(null,{statusCode:_.statusCode,headers:_.headers})})}function ze(o,m){J.call(this,{method:o.Method,Bucket:o.Bucket,Region:o.Region,Key:o.Key,action:o.Action,headers:o.Headers,qs:o.Query,body:o.Body,Url:o.Url,rawBody:o.RawBody,DataType:o.DataType},function(u,v){if(u)return m(u);v&&v.body&&(v.Body=v.body,delete v.body),m(u,v)})}function Ge(o,m){var u=o.Headers;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]=""),!u["Content-Type"]&&!u["content-type"]&&(u["Content-Type"]=o.Body&&o.Body.type||""),J.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:o.Bucket,Region:o.Region,action:"append",Key:o.Key,body:o.Body,qs:{position:o.Position},headers:o.Headers},function(v,_){if(v)return m(v);m(null,_)})}function Je(o){var m=this;return e.getAuth({SecretId:o.SecretId||this.options.SecretId||"",SecretKey:o.SecretKey||this.options.SecretKey||"",Bucket:o.Bucket,Region:o.Region,Method:o.Method,Key:o.Key,Query:o.Query,Headers:o.Headers,Expires:o.Expires,UseRawKey:m.options.UseRawKey,SystemClockOffset:m.options.SystemClockOffset})}function it(o,m){var u=this,v=o.UseAccelerate===void 0?u.options.UseAccelerate:o.UseAccelerate,_=c({ForcePathStyle:u.options.ForcePathStyle,protocol:o.Protocol||u.options.Protocol,domain:o.Domain||u.options.Domain,bucket:o.Bucket,region:v?"accelerate":o.Region,object:o.Key}),w="";o.Query&&(w+=e.obj2str(o.Query)),o.QueryString&&(w+=(w?"&":"")+o.QueryString);var D=_;if(o.Sign!==void 0&&!o.Sign)return w&&(D+="?"+w),m(null,{Url:D}),D;var z=g.call(this,{Bucket:o.Bucket,Region:o.Region,UseAccelerate:o.UseAccelerate,Url:_}),oe=U.call(this,{Action:(o.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:o.Bucket||"",Region:o.Region||"",Method:o.Method||"get",Key:o.Key,Expires:o.Expires,Headers:o.Headers,Query:o.Query,SignHost:z,ForceSignHost:o.ForceSignHost===!1?!1:u.options.ForceSignHost},function(Ee,Re){if(!!m){if(Ee){m(Ee);return}var ke=function(Qe){var rt=Qe.match(/q-url-param-list.*?(?=&)/g)[0],nt="q-url-param-list="+encodeURIComponent(rt.replace(/q-url-param-list=/,"")).toLowerCase(),Ze=new RegExp(rt,"g"),ot=Qe.replace(Ze,nt);return ot},_e=_;_e+="?"+(Re.Authorization.indexOf("q-signature")>-1?ke(Re.Authorization):"sign="+encodeURIComponent(Re.Authorization)),Re.SecurityToken&&(_e+="&x-cos-security-token="+Re.SecurityToken),Re.ClientIP&&(_e+="&clientIP="+Re.ClientIP),Re.ClientUA&&(_e+="&clientUA="+Re.ClientUA),Re.Token&&(_e+="&token="+Re.Token),w&&(_e+="&"+w),setTimeout(function(){m(null,{Url:_e})})}});return oe?(D+="?"+oe.Authorization+(oe.SecurityToken?"&x-cos-security-token="+oe.SecurityToken:""),w&&(D+="&"+w)):w&&(D+="?"+w),D}function tt(o){var m={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},u={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},v=o&&o.AccessControlList||{},_=v.Grant;_&&(_=e.isArray(_)?_:[_]);var w={READ:0,WRITE:0,FULL_CONTROL:0};return _&&_.length&&e.each(_,function(D){D.Grantee.ID==="qcs::cam::anyone:anyone"||D.Grantee.URI==="http://cam.qcloud.com/groups/global/AllUsers"?w[D.Permission]=1:D.Grantee.ID!==o.Owner.ID&&m[u[D.Permission]].push('id="'+D.Grantee.ID+'"')}),w.FULL_CONTROL||w.WRITE&&w.READ?m.ACL="public-read-write":w.READ?m.ACL="public-read":m.ACL="private",e.each(u,function(D){m[D]=Ye(m[D].join(","))}),m}function Ye(o){var m=o.split(","),u={},v,_;for(v=0;v<m.length;)_=m[v].trim(),u[_]?m.splice(v,1):(u[_]=!0,m[v]=_,v++);return m.join(",")}function c(o){var m=o.region||"",u=o.bucket||"",v=u.substr(0,u.lastIndexOf("-")),_=u.substr(u.lastIndexOf("-")+1),w=o.domain,D=o.object;typeof w=="function"&&(w=w({Bucket:u,Region:m})),["http","https"].includes(o.protocol)&&(o.protocol=o.protocol+":");var z=o.protocol||(e.isBrowser&&location.protocol==="http:"?"http:":"https:");w||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(m)>-1?w="{Region}.myqcloud.com":w="cos.{Region}.myqcloud.com",o.ForcePathStyle||(w="{Bucket}."+w)),w=w.replace(/\{\{AppId\}\}/ig,_).replace(/\{\{Bucket\}\}/ig,v).replace(/\{\{Region\}\}/ig,m).replace(/\{\{.*?\}\}/ig,""),w=w.replace(/\{AppId\}/ig,_).replace(/\{BucketName\}/ig,v).replace(/\{Bucket\}/ig,u).replace(/\{Region\}/ig,m).replace(/\{.*?\}/ig,""),/^[a-zA-Z]+:\/\//.test(w)||(w=z+"//"+w),w.slice(-1)==="/"&&(w=w.slice(0,-1));var oe=w;return o.ForcePathStyle&&(oe+="/"+u),oe+="/",D&&(oe+=e.camSafeUrlEncode(D).replace(/%2F/g,"/")),o.isLocation&&(oe=oe.replace(/^https?:\/\//,"")),oe}var g=function(m){if(!m.Bucket||!m.Region)return"";var u=m.UseAccelerate===void 0?this.options.UseAccelerate:m.UseAccelerate,v=m.Url||c({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:m.Bucket,region:u?"accelerate":m.Region}),_=v.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1"),w=new RegExp("^([a-z\\d-]+-\\d+\\.)?(cos|cosv6|ci|pic)\\.([a-z\\d-]+)\\.myqcloud\\.com$");return w.test(_)?_:""};function U(o,m){var u=e.clone(o.Headers),v="";e.each(u,function(Ue,Ne){(Ue===""||["content-type","cache-control","expires"].indexOf(Ne.toLowerCase())>-1)&&delete u[Ne],Ne.toLowerCase()==="host"&&(v=Ue)});var _=o.ForceSignHost!==!1;!v&&o.SignHost&&_&&(u.Host=o.SignHost);var w=!1,D=function(Ne,Le){w||(w=!0,Le&&Le.XCosSecurityToken&&!Le.SecurityToken&&(Le=e.clone(Le),Le.SecurityToken=Le.XCosSecurityToken,delete Le.XCosSecurityToken),m&&m(Ne,Le))},z=this,oe=o.Bucket||"",Ee=o.Region||"",Re=o.Key||"";z.options.ForcePathStyle&&oe&&(Re=oe+"/"+Re);var ke="/"+Re,_e={},je=o.Scope;if(!je){var Qe=o.Action||"",rt=o.ResourceKey||o.Key||"";je=o.Scope||[{action:Qe,bucket:oe,region:Ee,prefix:rt}]}var nt=e.md5(JSON.stringify(je));z._StsCache=z._StsCache||[],function(){var Ue,Ne;for(Ue=z._StsCache.length-1;Ue>=0;Ue--){Ne=z._StsCache[Ue];var Le=Math.round(e.getSkewTime(z.options.SystemClockOffset)/1e3)+30;if(Ne.StartTime&&Le<Ne.StartTime||Le>=Ne.ExpiredTime){z._StsCache.splice(Ue,1);continue}if(!Ne.ScopeLimit||Ne.ScopeLimit&&Ne.ScopeKey===nt){_e=Ne;break}}}();var Ze=function(){var Ne="";_e.StartTime&&o.Expires?Ne=_e.StartTime+";"+(_e.StartTime+o.Expires*1):_e.StartTime&&_e.ExpiredTime&&(Ne=_e.StartTime+";"+_e.ExpiredTime);var Le=e.getAuth({SecretId:_e.TmpSecretId,SecretKey:_e.TmpSecretKey,Method:o.Method,Pathname:ke,Query:o.Query,Headers:u,Expires:o.Expires,UseRawKey:z.options.UseRawKey,SystemClockOffset:z.options.SystemClockOffset,KeyTime:Ne,ForceSignHost:_}),$e={Authorization:Le,SecurityToken:_e.SecurityToken||_e.XCosSecurityToken||"",Token:_e.Token||"",ClientIP:_e.ClientIP||"",ClientUA:_e.ClientUA||""};D(null,$e)},ot=function(Ne){if(Ne.Authorization){var Le=!1,$e=Ne.Authorization;if($e)if($e.indexOf(" ")>-1)Le=!1;else if($e.indexOf("q-sign-algorithm=")>-1&&$e.indexOf("q-ak=")>-1&&$e.indexOf("q-sign-time=")>-1&&$e.indexOf("q-key-time=")>-1&&$e.indexOf("q-url-param-list=")>-1)Le=!0;else try{$e=atob($e),$e.indexOf("a=")>-1&&$e.indexOf("k=")>-1&&$e.indexOf("t=")>-1&&$e.indexOf("r=")>-1&&$e.indexOf("b=")>-1&&(Le=!0)}catch{}if(!Le)return e.error(new Error("getAuthorization callback params format error"))}else{if(!Ne.TmpSecretId)return e.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!Ne.TmpSecretKey)return e.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!Ne.SecurityToken&&!Ne.XCosSecurityToken)return e.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!Ne.ExpiredTime)return e.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(Ne.ExpiredTime&&Ne.ExpiredTime.toString().length!==10)return e.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(Ne.StartTime&&Ne.StartTime.toString().length!==10)return e.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(_e.ExpiredTime&&_e.ExpiredTime-e.getSkewTime(z.options.SystemClockOffset)/1e3>60)Ze();else if(z.options.getAuthorization)z.options.getAuthorization.call(z,{Bucket:oe,Region:Ee,Method:o.Method,Key:Re,Pathname:ke,Query:o.Query,Headers:u,Scope:je,SystemClockOffset:z.options.SystemClockOffset,ForceSignHost:_},function(Ue){typeof Ue=="string"&&(Ue={Authorization:Ue});var Ne=ot(Ue);if(Ne)return D(Ne);Ue.Authorization?D(null,Ue):(_e=Ue||{},_e.Scope=je,_e.ScopeKey=nt,z._StsCache.push(_e),Ze())});else if(z.options.getSTS)z.options.getSTS.call(z,{Bucket:oe,Region:Ee},function(Ue){_e=Ue||{},_e.Scope=je,_e.ScopeKey=nt,_e.TmpSecretId||(_e.TmpSecretId=_e.SecretId),_e.TmpSecretKey||(_e.TmpSecretKey=_e.SecretKey);var Ne=ot(_e);if(Ne)return D(Ne);z._StsCache.push(_e),Ze()});else return function(){var Ue=e.getAuth({SecretId:o.SecretId||z.options.SecretId,SecretKey:o.SecretKey||z.options.SecretKey,Method:o.Method,Pathname:ke,Query:o.Query,Headers:u,Expires:o.Expires,UseRawKey:z.options.UseRawKey,SystemClockOffset:z.options.SystemClockOffset,ForceSignHost:_}),Ne={Authorization:Ue,SecurityToken:z.options.SecurityToken||z.options.XCosSecurityToken};return D(null,Ne),Ne}();return""}function ee(o){var m=!1,u=!1,v=o.headers&&(o.headers.date||o.headers.Date)||o.error&&o.error.ServerTime;try{var _=o.error.Code,w=o.error.Message;(_==="RequestTimeTooSkewed"||_==="AccessDenied"&&w==="Request has expired")&&(u=!0)}catch{}if(o)if(u&&v){var D=Date.parse(v);this.options.CorrectClockSkew&&Math.abs(e.getSkewTime(this.options.SystemClockOffset)-D)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=D-Date.now(),m=!0)}else Math.floor(o.statusCode/100)===5&&(m=!0);return m}function J(o,m){var u=this;!o.headers&&(o.headers={}),!o.qs&&(o.qs={}),o.VersionId&&(o.qs.versionId=o.VersionId),o.qs=e.clearKey(o.qs),o.headers&&(o.headers=e.clearKey(o.headers)),o.qs&&(o.qs=e.clearKey(o.qs));var v=e.clone(o.qs);o.action&&(v[o.action]="");var _=o.url||o.Url,w=o.SignHost||g.call(this,{Bucket:o.Bucket,Region:o.Region,Url:_}),D=o.tracker,z=function oe(Ee){var Re=u.options.SystemClockOffset;D&&D.setParams({signStartTime:new Date().getTime(),retryTimes:Ee-1}),U.call(u,{Bucket:o.Bucket||"",Region:o.Region||"",Method:o.method,Key:o.Key,Query:v,Headers:o.headers,SignHost:w,Action:o.Action,ResourceKey:o.ResourceKey,Scope:o.Scope,ForceSignHost:u.options.ForceSignHost},function(ke,_e){if(ke){m(ke);return}D&&D.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),o.AuthData=_e,Be.call(u,o,function(je,Qe){D&&D.setParams({httpEndTime:new Date().getTime()}),je&&Ee<2&&(Re!==u.options.SystemClockOffset||ee.call(u,je))?(o.headers&&(delete o.headers.Authorization,delete o.headers.token,delete o.headers.clientIP,delete o.headers.clientUA,o.headers["x-cos-security-token"]&&delete o.headers["x-cos-security-token"],o.headers["x-ci-security-token"]&&delete o.headers["x-ci-security-token"]),oe(Ee+1)):m(je,Qe)})})};z(1)}function Be(o,m){var u=this,v=o.TaskId;if(!(v&&!u._isRunningTask(v))){var _=o.Bucket,w=o.Region,D=o.Key,z=o.method||"GET",oe=o.Url||o.url,Ee=o.body,Re=o.rawBody;u.options.UseAccelerate&&(w="accelerate"),oe=oe||c({ForcePathStyle:u.options.ForcePathStyle,protocol:u.options.Protocol,domain:u.options.Domain,bucket:_,region:w,object:D}),o.action&&(oe=oe+"?"+(e.isIOS_QQ?"".concat(o.action,"="):o.action)),o.qsStr&&(oe.indexOf("?")>-1?oe=oe+"&"+o.qsStr:oe=oe+"?"+o.qsStr);var ke={method:z,url:oe,headers:o.headers,qs:o.qs,body:Ee},_e="x-cos-security-token";if(e.isCIHost(oe)&&(_e="x-ci-security-token"),ke.headers.Authorization=o.AuthData.Authorization,o.AuthData.Token&&(ke.headers.token=o.AuthData.Token),o.AuthData.ClientIP&&(ke.headers.clientIP=o.AuthData.ClientIP),o.AuthData.ClientUA&&(ke.headers.clientUA=o.AuthData.ClientUA),o.AuthData.SecurityToken&&(ke.headers[_e]=o.AuthData.SecurityToken),ke.headers&&(ke.headers=e.clearKey(ke.headers)),ke=e.clearKey(ke),o.onProgress&&typeof o.onProgress=="function"){var je=Ee&&(Ee.size||Ee.length)||0;ke.onProgress=function(Ue){if(!(v&&!u._isRunningTask(v))){var Ne=Ue?Ue.loaded:0;o.onProgress({loaded:Ne,total:je})}}}o.onDownloadProgress&&(ke.onDownloadProgress=o.onDownloadProgress),o.DataType&&(ke.dataType=o.DataType),this.options.Timeout&&(ke.timeout=this.options.Timeout),u.options.ForcePathStyle&&(ke.pathStyle=u.options.ForcePathStyle),u.emit("before-send",ke);var Qe=ke.url.includes("accelerate."),rt=ke.qs?Object.keys(ke.qs).map(function(Ue){return"".concat(Ue,"=").concat(ke.qs[Ue])}).join("&"):"",nt=rt?ke.url+"?"+rt:ke.url;o.tracker&&o.tracker.setParams({reqUrl:nt,accelerate:Qe?"Y":"N"}),o.tracker&&o.tracker.parent&&o.tracker.parent.setParams({reqUrl:nt,accelerate:Qe?"Y":"N"});var Ze=(u.options.Request||a)(ke,function(Ue){if(!(Ue&&Ue.error==="abort")){var Ne={options:ke,error:Ue&&Ue.error,statusCode:Ue&&Ue.statusCode||0,statusMessage:Ue&&Ue.statusMessage||"",headers:Ue&&Ue.headers||{},body:Ue&&Ue.body};u.emit("after-receive",Ne);var Le=Ne.error,$e=Ne.body,et={statusCode:Ne.statusCode,statusMessage:Ne.statusMessage,headers:Ne.headers},ht,st=function(lt,ft){if(v&&u.off("inner-kill-task",ot),!ht){ht=!0;var dt={};et&&et.statusCode&&(dt.statusCode=et.statusCode),et&&et.headers&&(dt.headers=et.headers),lt?(lt=e.extend(lt||{},dt),m(lt,null)):(ft=e.extend(ft||{},dt),m(null,ft)),Ze=null}};if(Le)return st(e.error(Le));var ut=et.statusCode,pt=Math.floor(ut/100)===2;if(Re&&pt)return st(null,{body:$e});var at;try{at=$e&&$e.indexOf("<")>-1&&$e.indexOf(">")>-1&&e.xml2json($e)||{}}catch{at={}}var ct=at&&at.Error;pt?st(null,at):ct?st(e.error(new Error(ct.Message),{code:ct.Code,error:ct})):ut?st(e.error(new Error(et.statusMessage),{code:""+ut})):ut&&st(e.error(new Error("statusCode error")))}}),ot=function Ue(Ne){Ne.TaskId===v&&(Ze&&Ze.abort&&Ze.abort(),u.off("inner-kill-task",Ue))};v&&u.on("inner-kill-task",ot)}}var Me={getService:O,putBucket:f,headBucket:R,getBucket:S,deleteBucket:T,putBucketAcl:E,getBucketAcl:F,putBucketCors:L,getBucketCors:K,deleteBucketCors:P,getBucketLocation:N,getBucketPolicy:B,putBucketPolicy:b,deleteBucketPolicy:G,putBucketTagging:A,getBucketTagging:x,deleteBucketTagging:C,putBucketLifecycle:Q,getBucketLifecycle:h,deleteBucketLifecycle:q,putBucketVersioning:$,getBucketVersioning:j,putBucketReplication:W,getBucketReplication:I,deleteBucketReplication:X,putBucketWebsite:te,getBucketWebsite:Y,deleteBucketWebsite:ne,putBucketReferer:ce,getBucketReferer:he,putBucketDomain:de,getBucketDomain:se,deleteBucketDomain:pe,putBucketOrigin:fe,getBucketOrigin:Se,deleteBucketOrigin:re,putBucketLogging:ue,getBucketLogging:ge,putBucketInventory:xe,getBucketInventory:ye,listBucketInventory:Ce,deleteBucketInventory:be,putBucketAccelerate:we,getBucketAccelerate:Ae,putBucketEncryption:Pe,getBucketEncryption:Oe,deleteBucketEncryption:Ie,getObject:Z,headObject:le,listObjectVersions:H,putObject:y,deleteObject:l,getObjectAcl:p,putObjectAcl:d,optionsObject:k,putObjectCopy:M,deleteMultipleObject:ie,restoreObject:ve,putObjectTagging:me,getObjectTagging:ae,deleteObjectTagging:De,selectObjectContent:Te,appendObject:Ge,uploadPartCopy:V,multipartInit:Fe,multipartUpload:He,multipartComplete:Ke,multipartList:Ve,multipartListPart:We,multipartAbort:Xe,request:ze,getObjectUrl:it,getAuth:Je};function qe(o,m,u){e.each(["Cors","Acl"],function(v){if(o.slice(-v.length)===v){var _=o.slice(0,-v.length)+v.toUpperCase(),w=e.apiWrapper(o,m),D=!1;u[_]=function(){!D&&console.warn("warning: cos."+_+" has been deprecated. Please Use cos."+o+" instead."),D=!0,w.apply(this,arguments)}}})}n.exports.init=function(o,m){m.transferToTaskMethod(Me,"putObject"),e.each(Me,function(u,v){o.prototype[v]=e.apiWrapper(v,u),qe(v,u,o.prototype)})}},"./src/cos.js":function(n,s,r){var a=r("./src/util.js"),e=r("./src/event.js"),O=r("./src/task.js"),f=r("./src/base.js"),R=r("./src/advance.js"),S=r("./package.json"),T={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,EnableTracker:!1,DeepTracker:!1,TrackerDelay:5e3,CustomId:""},E=function(L){this.options=a.extend(a.clone(T),L||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1&&(console.error("error: SecretId\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1&&(console.error("error: SecretKey\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5"),console.error("error: SecretKey format is incorrect. Please check")),a.isNode()&&(console.warn("warning: cos-js-sdk-v5 \u4E0D\u652F\u6301 nodejs \u73AF\u5883\u4F7F\u7528\uFF0C\u8BF7\u6539\u7528 cos-nodejs-sdk-v5\uFF0C\u53C2\u8003\u6587\u6863\uFF1A https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),e.init(this),O.init(this)};f.init(E,O),R.init(E,O),E.util={md5:a.md5,xml2json:a.xml2json,json2xml:a.json2xml},E.getAuthorization=a.getAuth,E.version=S.version,n.exports=E},"./src/event.js":function(n,s){var r=function(O){var f={},R=function(T){return!f[T]&&(f[T]=[]),f[T]};O.on=function(S,T){S==="task-list-update"&&console.warn('warning: Event "'+S+'" has been deprecated. Please use "list-update" instead.'),R(S).push(T)},O.off=function(S,T){for(var E=R(S),F=E.length-1;F>=0;F--)T===E[F]&&E.splice(F,1)},O.emit=function(S,T){for(var E=R(S).map(function(L){return L}),F=0;F<E.length;F++)E[F](T)}},a=function(){r(this)};n.exports.init=r,n.exports.EventProxy=a},"./src/session.js":function(n,s,r){var a=r("./src/util.js"),e="cos_sdk_upload_cache",O=30*24*3600,f,R,S=function(){try{var P=JSON.parse(localStorage.getItem(e))}catch{}P||(P=[]),f=P},T=function(){try{f.length?localStorage.setItem(e,JSON.stringify(f)):localStorage.removeItem(e)}catch{}},E=function(){if(!f){S.call(this);for(var P=!1,N=Math.round(Date.now()/1e3),b=f.length-1;b>=0;b--){var B=f[b][2];(!B||B+O<N)&&(f.splice(b,1),P=!0)}P&&T()}},F=function(){R||(R=setTimeout(function(){T(),R=null},400))},L={using:{},setUsing:function(P){L.using[P]=!0},removeUsing:function(P){delete L.using[P]},getFileId:function(P,N,b,B){return P.name&&P.size&&P.lastModifiedDate&&N?a.md5([P.name,P.size,P.lastModifiedDate,N,b,B].join("::")):null},getCopyFileId:function(P,N,b,B,G){var A=N["content-length"],x=N.etag||"",C=N["last-modified"];return P&&b?a.md5([P,A,x,C,b,B,G].join("::")):null},getUploadIdList:function(P){if(!P)return null;E.call(this);for(var N=[],b=0;b<f.length;b++)f[b][0]===P&&N.push(f[b][1]);return N.length?N:null},saveUploadId:function(P,N,b){if(E.call(this),!!P){for(var B=f.length-1;B>=0;B--){var G=f[B];G[0]===P&&G[1]===N&&f.splice(B,1)}f.unshift([P,N,Math.round(Date.now()/1e3)]),f.length>b&&f.splice(b),F()}},removeUploadId:function(P){E.call(this),delete L.using[P];for(var N=f.length-1;N>=0;N--)f[N][1]===P&&f.splice(N,1);F()}};n.exports=L},"./src/task.js":function(n,s,r){var a=r("./src/session.js"),e=r("./src/util.js"),O={},f=function(T,E){O[E]=T[E],T[E]=function(F,L){F.SkipTask?O[E].call(this,F,L):this._addTask(E,F,L)}},R=function(T){var E=[],F={},L=0,K=0,P=function(C){var Q={id:C.id,Bucket:C.Bucket,Region:C.Region,Key:C.Key,FilePath:C.FilePath,state:C.state,loaded:C.loaded,size:C.size,speed:C.speed,percent:C.percent,hashPercent:C.hashPercent,error:C.error};return C.FilePath&&(Q.FilePath=C.FilePath),C._custom&&(Q._custom=C._custom),Q},N=function(){var x,C=function(){x=0,T.emit("task-list-update",{list:e.map(E,P)}),T.emit("list-update",{list:e.map(E,P)})};return function(){x||(x=setTimeout(C))}}(),b=function(){if(!(E.length<=T.options.UploadQueueSize)){for(var C=0;C<K&&C<E.length&&E.length>T.options.UploadQueueSize;){var Q=E[C].state==="waiting"||E[C].state==="checking"||E[C].state==="uploading";!E[C]||!Q?(F[E[C].id]&&delete F[E[C].id],E.splice(C,1),K--):C++}N()}},B=function x(){if(!(L>=T.options.FileParallelLimit)){for(;E[K]&&E[K].state!=="waiting";)K++;if(!(K>=E.length)){var C=E[K];K++,L++,C.state="checking",C.params.onTaskStart&&C.params.onTaskStart(P(C)),!C.params.UploadData&&(C.params.UploadData={});var Q=e.formatParams(C.api,C.params);O[C.api].call(T,Q,function(h,q){!T._isRunningTask(C.id)||((C.state==="checking"||C.state==="uploading")&&(C.state=h?"error":"success",h&&(C.error=h),L--,N(),x(),C.callback&&C.callback(h,q),C.state==="success"&&(C.params&&(delete C.params.UploadData,delete C.params.Body,delete C.params),delete C.callback)),b())}),N(),setTimeout(x)}}},G=function(C,Q){var h=F[C];if(!!h){var q=h&&h.state==="waiting",$=h&&(h.state==="checking"||h.state==="uploading");if(Q==="canceled"&&h.state!=="canceled"||Q==="paused"&&q||Q==="paused"&&$){if(Q==="paused"&&h.params.Body&&typeof h.params.Body.pipe=="function"){console.error("stream not support pause");return}h.state=Q,T.emit("inner-kill-task",{TaskId:C,toState:Q});try{var j=h&&h.params&&h.params.UploadData.UploadId}catch{}Q==="canceled"&&j&&a.removeUsing(j),N(),$&&(L--,B()),Q==="canceled"&&(h.params&&(delete h.params.UploadData,delete h.params.Body,delete h.params),delete h.callback)}b()}};T._addTasks=function(x){e.each(x,function(C){T._addTask(C.api,C.params,C.callback,!0)}),N()};var A=!0;T._addTask=function(x,C,Q,h){C=e.formatParams(x,C);var q=e.uuid();C.TaskId=q,C.onTaskReady&&C.onTaskReady(q),C.TaskReady&&(C.TaskReady(q),A&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),A=!1);var $={params:C,callback:Q,api:x,index:E.length,id:q,Bucket:C.Bucket,Region:C.Region,Key:C.Key,FilePath:C.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:C._custom},j=C.onHashProgress;C.onHashProgress=function(I){!T._isRunningTask($.id)||($.hashPercent=I.percent,j&&j(I),N())};var W=C.onProgress;return C.onProgress=function(I){!T._isRunningTask($.id)||($.state==="checking"&&($.state="uploading"),$.loaded=I.loaded,$.speed=I.speed,$.percent=I.percent,W&&W(I),N())},e.getFileSize(x,C,function(I,X){if(I)return Q(e.error(I));F[q]=$,E.push($),$.size=X,!h&&N(),B(),b()}),q},T._isRunningTask=function(x){var C=F[x];return!!(C&&(C.state==="checking"||C.state==="uploading"))},T.getTaskList=function(){return e.map(E,P)},T.cancelTask=function(x){G(x,"canceled")},T.pauseTask=function(x){G(x,"paused")},T.restartTask=function(x){var C=F[x];C&&(C.state==="paused"||C.state==="error")&&(C.state="waiting",N(),K=Math.min(K,C.index),B())},T.isUploadRunning=function(){return L||K<E.length}};n.exports.transferToTaskMethod=f,n.exports.init=R},"./src/tracker.js":function(n,s,r){var a=r("./node_modules/@babel/runtime/helpers/classCallCheck.js"),e=r("./node_modules/@babel/runtime/helpers/createClass.js"),O=r("./node_modules/@babel/runtime/helpers/typeof.js"),f=r("./package.json"),R=null,S=function(x){if(!R){var C=r("./lib/beacon.min.js");R=new C({appkey:"0AND0VEVB24UBGDU",versionCode:f.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:x,sessionDuration:60*1e3})}return R},T={getUid:function(){var x=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return x()+x()+"-"+x()+"-"+x()+"-"+x()+"-"+x()+x()+x()},getNetType:function(){if((typeof navigator=="undefined"?"undefined":O(navigator))==="object"){var x=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(x==null?void 0:x.type)||(x==null?void 0:x.effectiveType)||"unknown"}return"unknown"},getOsType:function(){if((typeof navigator=="undefined"?"undefined":O(navigator))!=="object")return"unknown os";var x=navigator.userAgent.toLowerCase(),C=/macintosh|mac os x/i.test(navigator.userAgent);return x.indexOf("win32")>=0||x.indexOf("wow32")>=0?"win32":x.indexOf("win64")>=0||x.indexOf("wow64")>=0?"win64":C?"mac":"unknown os"},isMobile:function(){var x=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator=="undefined"?"undefined":O(navigator))==="object"&&navigator.userAgent.match(x))},isAndroid:function(){var x=/(Android|Adr|Linux)/i;return!!((typeof navigator=="undefined"?"undefined":O(navigator))==="object"&&navigator.userAgent.match(x))},isIOS:function(){var x=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator=="undefined"?"undefined":O(navigator))==="object"&&navigator.userAgent.match(x))},isOtherMobile:function(){return isMobile&&!isAndroid&&!isIOS},getDeviceName:function(){if((typeof navigator=="undefined"?"undefined":O(navigator))!=="object")return"unknown device";var x=navigator.userAgent.toLowerCase();if(x.includes("app/tencent_wemeet"))return"tencent_wemeet";if(x.indexOf("maxthon")>=0){var C=x.match(/maxthon\/([\d.]+)/),Q=C&&C[1]||"";return"\u50B2\u6E38\u6D4F\u89C8\u5668 ".concat(Q).trim()}if(x.indexOf("qqbrowser")>=0){var h=x.match(/qqbrowser\/([\d.]+)/),q=h&&h[1]||"";return"QQ\u6D4F\u89C8\u5668 ".concat(q).trim()}if(x.indexOf("se 2.x")>=0)return"\u641C\u72D7\u6D4F\u89C8\u5668";if(x.indexOf("wxwork")>=0)return"\u5FAE\u4FE1\u5185\u7F6E\u6D4F\u89C8\u5668";if(x.indexOf("msie")>=0){var $=x.match(/msie ([\d.]+)/),j=$&&$[1]||"";return"IE ".concat(j).trim()}if(x.indexOf("firefox")>=0){var W=x.match(/firefox\/([\d.]+)/),I=W&&W[1]||"";return"Firefox ".concat(I).trim()}if(x.indexOf("chrome")>=0){var X=x.match(/chrome\/([\d.]+)/),te=X&&X[1]||"";return"Chrome ".concat(te).trim()}if(x.indexOf("opera")>=0){var Y=x.match(/opera.([\d.]+)/),ne=Y&&Y[1]||"";return"Opera ".concat(ne).trim()}if(x.indexOf("safari")>=0){var ce=x.match(/version\/([\d.]+)/),he=ce&&ce[1]||"";return"Safari ".concat(he).trim()}if(x.indexOf("edge")>=0){var de=x.match(/edge\/([\d.]+)/),se=de&&de[1]||"";return"edge ".concat(se).trim()}return x.substr(0,200)}},E={isMobile:T.isMobile(),isBrowser:!T.isMobile(),mobileOsType:T.isAndroid()?"android":T.isIOS?"ios":"other_mobile",pcOsType:T.getOsType()},F={deviceType:E.isMobile?"mobile":E.isBrowser?"browser":"unknown",devicePlatform:E.isMobile?E.mobileOsType:E.pcOsType,deviceName:T.getDeviceName()},L=["multipartInit","multipartUpload","multipartComplete","multipartList","multipartListPart","multipartAbort"],K=["putObject","postObject","appendObject","sliceUploadFile","uploadFile","uploadFiles"].concat(L),P=["getObject"];function N(A){return K.includes(A)?"cos_upload":P.includes(A)?"cos_download":"base_service"}function b(A){return A.replace(/([A-Z])/g,"_$1").toLowerCase()}function B(A){var x={},C=["tracePlatform","cossdkVersion","region","networkType","host","accelerate","requestPath","size","httpMd5","httpSign","httpFull","name","result","tookTime","errorNode","errorCode","errorMessage","errorRequestId","errorStatusCode","errorServiceName","errorType","traceId","bucket","appid","partNumber","retryTimes","reqUrl","customId","fullError","deviceType","devicePlatform","deviceName"],Q=["tracePlatform","cossdkVersion","region","bucket","appid","networkType","host","accelerate","requestPath","partNumber","size","name","result","tookTime","errorRequestId","retryTimes","reqUrl","customId","deviceType","devicePlatform","deviceName"],h=A.result==="Success"?Q:C;for(var q in A)if(!!h.includes(q)){var $=b(q);x[$]=A[q]}return x}var G=function(){function A(x){a(this,A);var C=x.parent,Q=x.traceId,h=x.bucket,q=x.region,$=x.apiName,j=x.fileKey,W=x.fileSize,I=x.accelerate,X=x.customId,te=x.delay,Y=x.deepTracker,ne=h&&h.substr(h.lastIndexOf("-")+1)||"";this.parent=C,this.deepTracker=Y,this.delay=te,this.params={cossdkVersion:f.version,region:q,networkType:"",host:"",accelerate:I?"Y":"N",requestPath:j||"",size:W||-1,httpMd5:0,httpSign:0,httpFull:0,name:$||"",result:"",tookTime:0,errorNode:"",errorCode:"",errorMessage:"",errorRequestId:"",errorStatusCode:0,errorServiceName:"",tracePlatform:"cos-js-sdk-v5",traceId:Q||T.getUid(),bucket:h,appid:ne,partNumber:0,retryTimes:0,reqUrl:"",customId:X||"",deviceType:F.deviceType,devicePlatform:F.devicePlatform,deviceName:F.deviceName,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0},this.beacon=S(te)}return e(A,[{key:"formatResult",value:function(C,Q){var h,q,$,j,W,I,X=new Date().getTime(),te=X-this.params.startTime,Y=T.getNetType(),ne=C?(C==null?void 0:C.code)||(C==null||(h=C.error)===null||h===void 0?void 0:h.code)||(C==null||(q=C.error)===null||q===void 0?void 0:q.Code):"",ce=C?(C==null?void 0:C.message)||(C==null||($=C.error)===null||$===void 0?void 0:$.message)||(C==null||(j=C.error)===null||j===void 0?void 0:j.Message):"",he=C?(C==null?void 0:C.resource)||(C==null||(W=C.error)===null||W===void 0?void 0:W.resource)||(C==null||(I=C.error)===null||I===void 0?void 0:I.Resource):"",de=C?C==null?void 0:C.statusCode:Q.statusCode,se=C?(C==null?void 0:C.headers)&&(C==null?void 0:C.headers["x-cos-request-id"]):(Q==null?void 0:Q.headers)&&(Q==null?void 0:Q.headers["x-cos-request-id"]),pe=C?se?"Server":"Client":"";if(Object.assign(this.params,{tookTime:te,networkType:Y,httpMd5:this.params.md5EndTime-this.params.md5StartTime,httpSign:this.params.signEndTime-this.params.signStartTime,httpFull:this.params.httpEndTime-this.params.httpStartTime,result:C?"Fail":"Success",errorType:pe,errorCode:ne,errorStatusCode:de,errorMessage:ce,errorServiceName:he,errorRequestId:se}),C&&(!ne||!ce)&&(this.params.fullError=C?JSON.stringify(C):""),this.params.name==="getObject"&&(this.params.size=Q?Q.headers&&Q.headers["content-length"]:-1),this.params.reqUrl)try{var fe=/^http(s)?:\/\/(.*?)\//.exec(this.params.reqUrl);this.params.host=fe[2]}catch{this.params.host=this.params.reqUrl}this.sendEvents()}},{key:"setParams",value:function(C){Object.assign(this.params,C)}},{key:"sendEvents",value:function(){if(!(L.includes(this.params.name)&&!this.deepTracker)){var C=N(this.params.name),Q=B(this.params);this.beacon||(this.beacon=S(this.delay||5e3)),this.delay===0?this.beacon&&this.beacon.onDirectUserAction(C,Q):this.beacon&&this.beacon.onUserAction(C,Q)}}},{key:"generateSubTracker",value:function(C){return Object.assign(C,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay}),new A(C)}}]),A}();n.exports=G},"./src/util.js":function(n,s,r){(function(a){var e=r("./node_modules/@babel/runtime/helpers/typeof.js"),O=r("./lib/md5.js"),f=r("./lib/crypto.js"),R=r("./lib/xml2json.js"),S=r("./lib/json2xml.js"),T=r("./src/tracker.js");function E(le){return encodeURIComponent(le).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function F(le,H){var Z=[];for(var y in le)le.hasOwnProperty(y)&&Z.push(H?E(y).toLowerCase():y);return Z.sort(function(l,p){return l=l.toLowerCase(),p=p.toLowerCase(),l===p?0:l>p?1:-1})}var L=function(H,Z){var y,l,p,d=[],k=F(H);for(y=0;y<k.length;y++)l=k[y],p=H[l]===void 0||H[l]===null?"":""+H[l],l=Z?E(l).toLowerCase():E(l),p=E(p)||"",d.push(l+"="+p);return d.join("&")},K=["content-disposition","content-encoding","content-length","content-md5","expect","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","response-cache-control","response-content-disposition","response-content-encoding","response-content-language","response-content-type","response-expires","transfer-encoding","versionid"],P=function(H){var Z={};for(var y in H){var l=y.toLowerCase();(l.indexOf("x-cos-")>-1||K.indexOf(l)>-1)&&(Z[y]=H[y])}return Z},N=function(H){H=H||{};var Z=H.SecretId,y=H.SecretKey,l=H.KeyTime,p=(H.method||H.Method||"get").toLowerCase(),d=I(H.Query||H.params||{}),k=P(I(H.Headers||H.headers||{})),M=H.Key||"",V;H.UseRawKey?V=H.Pathname||H.pathname||"/"+M:(V=H.Pathname||H.pathname||M,V.indexOf("/")!==0&&(V="/"+V));var ie=H.ForceSignHost!==!1;if(!k.Host&&!k.host&&H.Bucket&&H.Region&&ie&&(k.Host=H.Bucket+".cos."+H.Region+".myqcloud.com"),!Z)throw new Error("missing param SecretId");if(!y)throw new Error("missing param SecretKey");var ve=Math.round(ye(H.SystemClockOffset)/1e3)-1,me=ve,ae=H.Expires||H.expires;ae===void 0?me+=900:me+=ae*1||0;var De="sha1",Te=Z,Fe=l||ve+";"+me,He=l||ve+";"+me,Ke=F(k,!0).join(";").toLowerCase(),Ve=F(d,!0).join(";").toLowerCase(),We=f.HmacSHA1(He,y).toString(),Xe=[p,V,Ie.obj2str(d,!0),Ie.obj2str(k,!0),""].join(`
`),ze=["sha1",Fe,f.SHA1(Xe).toString(),""].join(`
`),Ge=f.HmacSHA1(ze,We).toString(),Je=["q-sign-algorithm="+De,"q-ak="+Te,"q-sign-time="+Fe,"q-key-time="+He,"q-header-list="+Ke,"q-url-param-list="+Ve,"q-signature="+Ge].join("&");return Je},b=function(H,Z,y){var l=Z/8,p=H.slice(y,y+l);return new Uint8Array(p).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[Z](p)[0]},B=function(H,Z,y,l){var p=H.slice(Z,y),d="";return new Uint8Array(p).forEach(function(k){d+=String.fromCharCode(k)}),l&&(d=decodeURIComponent(escape(d))),d},G=function(H){for(var Z={},y=B(H),l={records:[]};H.byteLength;){var p=b(H,32,0),d=b(H,32,4),k=p-d-16,M=0,V;for(H=H.slice(12);M<d;){var ie=b(H,8,M),ve=B(H,M+1,M+1+ie),me=b(H,16,M+ie+2),ae=B(H,M+ie+4,M+ie+4+me);Z[ve]=ae,M+=ie+4+me}if(Z[":event-type"]==="Records")V=B(H,M,M+k,!0),l.records.push(V);else if(Z[":event-type"]==="Stats")V=B(H,M,M+k,!0),l.stats=Ie.xml2json(V).Stats;else if(Z[":event-type"]==="error"){var De=Z[":error-code"],Te=Z[":error-message"],Fe=new Error(Te);Fe.message=Te,Fe.name=Fe.code=De,l.error=Fe}H=H.slice(M+k+4)}return{payload:l.records.join(""),body:y}},A=function(H){var Z=this.options.CopySourceParser;if(Z)return Z(H);var y=H.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return y?{Bucket:y[1],Region:y[3],Key:y[7]}:null},x=function(){},C=function(H){var Z={};for(var y in H)H.hasOwnProperty(y)&&H[y]!==void 0&&H[y]!==null&&(Z[y]=H[y]);return Z},Q=function(H,Z){var y,l=new FileReader;FileReader.prototype.readAsBinaryString?(y=FileReader.prototype.readAsBinaryString,l.onload=function(){Z(this.result)}):FileReader.prototype.readAsArrayBuffer?y=function(d){var k="",M=new FileReader;M.onload=function(V){for(var ie=new Uint8Array(M.result),ve=ie.byteLength,me=0;me<ve;me++)k+=String.fromCharCode(ie[me]);Z(k)},M.readAsArrayBuffer(d)}:console.error("FileReader not support readAsBinaryString"),y.call(l,H)},h=function(){var le=function(y,l){y=y.split("."),l=l.split(".");for(var p=0;p<l.length;p++)if(y[p]!==l[p])return parseInt(y[p])>parseInt(l[p])?1:-1;return 0},H=function(y){if(!y)return!1;var l=(y.match(/Chrome\/([.\d]+)/)||[])[1],p=(y.match(/QBCore\/([.\d]+)/)||[])[1],d=(y.match(/QQBrowser\/([.\d]+)/)||[])[1],k=l&&le(l,"53.0.2785.116")<0&&p&&le(p,"3.53.991.400")<0&&d&&le(d,"9.0.2524.400")<=0||!1;return k};return H(typeof navigator!="undefined"&&navigator.userAgent)}(),q=function(H,Z,y,l,p){var d;if(H.slice?d=H.slice(Z,y):H.mozSlice?d=H.mozSlice(Z,y):H.webkitSlice&&(d=H.webkitSlice(Z,y)),l&&h){var k=new FileReader;k.onload=function(M){d=null,p(new Blob([k.result]))},k.readAsArrayBuffer(d)}else p(d)},$=function(H,Z,y,l){y=y||x,H?typeof Z=="string"?y(Ie.md5(Z,!0)):Blob&&Z instanceof Blob?Ie.getFileMd5(Z,function(p,d){y(d)},l):y():y()},j=1024*1024,W=function(H,Z,y){var l=H.size,p=0,d=O.getCtx(),k=function M(V){if(V>=l){var ie=d.digest("hex");Z(null,ie);return}var ve=Math.min(l,V+j);Ie.fileSlice(H,V,ve,!1,function(me){Q(me,function(ae){me=null,d=d.update(ae,!0),p+=ae.length,ae=null,y&&y({loaded:p,total:l,percent:Math.round(p/l*1e4)/1e4}),M(V+j)})})};k(0)};function I(le){return de(le,function(H){return e(H)==="object"&&H!==null?I(H):H})}function X(le,H,Z){return le&&H in le?le[H]:Z}function te(le,H){return he(H,function(Z,y){le[y]=H[y]}),le}function Y(le){return le instanceof Array}function ne(le,H){for(var Z=!1,y=0;y<le.length;y++)if(H===le[y]){Z=!0;break}return Z}function ce(le){return Y(le)?le:[le]}function he(le,H){for(var Z in le)le.hasOwnProperty(Z)&&H(le[Z],Z)}function de(le,H){var Z=Y(le)?[]:{};for(var y in le)le.hasOwnProperty(y)&&(Z[y]=H(le[y],y));return Z}function se(le,H){var Z=Y(le),y=Z?[]:{};for(var l in le)le.hasOwnProperty(l)&&H(le[l],l)&&(Z?y.push(le[l]):y[l]=le[l]);return y}var pe=function(H){var Z,y,l,p="";for(Z=0,y=H.length/2;Z<y;Z++)l=parseInt(H[Z*2]+H[Z*2+1],16),p+=String.fromCharCode(l);return btoa(p)},fe=function(){var H=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return H()+H()+"-"+H()+"-"+H()+"-"+H()+"-"+H()+H()+H()},Se=function(H,Z){var y=Z.Bucket,l=Z.Region,p=Z.Key,d=this.options.Domain,k=!d||typeof d=="string"&&d.indexOf("{Bucket}")>-1,M=!d||typeof d=="string"&&d.indexOf("{Region}")>-1;if(H.indexOf("Bucket")>-1||H==="deleteMultipleObject"||H==="multipartList"||H==="listObjectVersions"){if(k&&!y)return"Bucket";if(M&&!l)return"Region"}else if(H.indexOf("Object")>-1||H.indexOf("multipart")>-1||H==="sliceUploadFile"||H==="abortUploadTask"){if(k&&!y)return"Bucket";if(M&&!l)return"Region";if(!p)return"Key"}return!1},re=function(H,Z){if(Z=te({},Z),H!=="getAuth"&&H!=="getV4Auth"&&H!=="getObjectUrl"){var y=Z.Headers||{};if(Z&&e(Z)==="object"){(function(){for(var p in Z)Z.hasOwnProperty(p)&&p.indexOf("x-cos-")>-1&&(y[p]=Z[p])})();var l={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations"};Ie.each(l,function(p,d){Z[p]!==void 0&&(y[d]=Z[p])}),Z.Headers=C(y)}}return Z},ue=function(H,Z){return function(y,l){var p=this;typeof y=="function"&&(l=y,y={}),y=re(H,y);var d;if(p.options.EnableTracker)if(y.calledBySdk==="sliceUploadFile")d=y.tracker&&y.tracker.generateSubTracker({apiName:H});else if(["uploadFile","uploadFiles"].includes(H))d=null;else{var k=-1;y.Body&&(k=typeof y.Body=="string"?y.Body.length:y.Body.size||y.Body.byteLength||-1),d=new T({bucket:y.Bucket,region:y.Region,apiName:H,fileKey:y.Key,fileSize:k,deepTracker:p.options.DeepTracker,customId:p.options.CustomId,delay:p.options.TrackerDelay})}y.tracker=d;var M=function(Te){return Te&&Te.headers&&(Te.headers["x-cos-request-id"]&&(Te.RequestId=Te.headers["x-cos-request-id"]),Te.headers["x-ci-request-id"]&&(Te.RequestId=Te.headers["x-ci-request-id"]),Te.headers["x-cos-version-id"]&&(Te.VersionId=Te.headers["x-cos-version-id"]),Te.headers["x-cos-delete-marker"]&&(Te.DeleteMarker=Te.headers["x-cos-delete-marker"])),Te},V=function(Te,Fe){d&&d.formatResult(Te,Fe),l&&l(M(Te),M(Fe))},ie=function(){if(H!=="getService"&&H!=="abortUploadTask"){var Te=Se.call(p,H,y);if(Te)return"missing param "+Te;if(y.Region){if(p.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(y.Region))return"Region format error."}else{if(y.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(y.Region))return"Region format error."}!p.options.CompatibilityMode&&y.Region.indexOf("-")===-1&&y.Region!=="yfb"&&y.Region!=="default"&&y.Region!=="accelerate"&&console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(y.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(y.Bucket))if(y.AppId)y.Bucket=y.Bucket+"-"+y.AppId;else if(p.options.AppId)y.Bucket=y.Bucket+"-"+p.options.AppId;else return'Bucket should format as "test-1250000000".';y.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete y.AppId)}!p.options.UseRawKey&&y.Key&&y.Key.substr(0,1)==="/"&&(y.Key=y.Key.substr(1))}},ve=ie(),me=["getAuth","getObjectUrl"].includes(H);if(typeof Promise=="function"&&!me&&!l)return new Promise(function(De,Te){if(l=function(He,Ke){He?Te(He):De(Ke)},ve)return V(Ie.error(new Error(ve)));Z.call(p,y,V)});if(ve)return V(Ie.error(new Error(ve)));var ae=Z.call(p,y,V);if(me)return ae}},ge=function(H,Z){var y=this,l=0,p=0,d=Date.now(),k,M;function V(){if(M=0,Z&&typeof Z=="function"){k=Date.now();var ie=Math.max(0,Math.round((p-l)/((k-d)/1e3)*100)/100)||0,ve;p===0&&H===0?ve=1:ve=Math.floor(p/H*100)/100||0,d=k,l=p;try{Z({loaded:p,total:H,speed:ie,percent:ve})}catch{}}}return function(ie,ve){if(ie&&(p=ie.loaded,H=ie.total),ve)clearTimeout(M),V();else{if(M)return;M=setTimeout(V,y.options.ProgressInterval)}}},xe=function(H,Z,y){var l;if(typeof Z.Body=="string"?Z.Body=new Blob([Z.Body],{type:"text/plain"}):Z.Body instanceof ArrayBuffer&&(Z.Body=new Blob([Z.Body])),Z.Body&&(Z.Body instanceof Blob||Z.Body.toString()==="[object File]"||Z.Body.toString()==="[object Blob]"))l=Z.Body.size;else{y(Ie.error(new Error("params body format error, Only allow File|Blob|String.")));return}Z.ContentLength=l,y(null,l)},ye=function(H){return Date.now()+(H||0)},Ce=function(H,Z){var y=H;return H.message=H.message||null,typeof Z=="string"?(H.error=Z,H.message=Z):e(Z)==="object"&&Z!==null&&(te(H,Z),(Z.code||Z.name)&&(H.code=Z.code||Z.name),Z.message&&(H.message=Z.message),Z.stack&&(H.stack=Z.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(H,"name",{writable:!0,enumerable:!1}),Object.defineProperty(H,"message",{enumerable:!0})),H.name=Z&&Z.name||H.name||H.code||"Error",H.code||(H.code=H.name),H.error||(H.error=I(y)),H},be=function(){return(typeof globalThis=="undefined"?"undefined":e(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},we=function(){return(typeof window=="undefined"?"undefined":e(window))!=="object"&&(typeof a=="undefined"?"undefined":e(a))==="object"&&!0&&!be()},Ae=function(H){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(H)},Pe=function(){if((typeof navigator=="undefined"?"undefined":e(navigator))!=="object")return!1;var le=navigator.userAgent,H=!!le.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return H}(),Oe=function(){return(typeof navigator=="undefined"?"undefined":e(navigator))!=="object"?!1:/\sQQ/i.test(navigator.userAgent)}(),Ie={noop:x,formatParams:re,apiWrapper:ue,xml2json:R,json2xml:S,md5:O,clearKey:C,fileSlice:q,getBodyMd5:$,getFileMd5:W,binaryBase64:pe,extend:te,isArray:Y,isInArray:ne,makeArray:ce,each:he,map:de,filter:se,clone:I,attr:X,uuid:fe,camSafeUrlEncode:E,throttleOnProgress:ge,getFileSize:xe,getSkewTime:ye,error:Ce,obj2str:L,getAuth:N,parseSelectPayload:G,getSourceParams:A,isBrowser:!0,isNode:we,isCIHost:Ae,isIOS_QQ:Pe&&Oe};n.exports=Ie}).call(this,r("./node_modules/process/browser.js"))}})})})(cosJsSdkV5);var eventemitter3={exports:{}};(function(n){var s=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function e(S,T,E){this.fn=S,this.context=T,this.once=E||!1}function O(S,T,E,F,L){if(typeof E!="function")throw new TypeError("The listener must be a function");var K=new e(E,F||S,L),P=r?r+T:T;return S._events[P]?S._events[P].fn?S._events[P]=[S._events[P],K]:S._events[P].push(K):(S._events[P]=K,S._eventsCount++),S}function f(S,T){--S._eventsCount===0?S._events=new a:delete S._events[T]}function R(){this._events=new a,this._eventsCount=0}R.prototype.eventNames=function(){var T=[],E,F;if(this._eventsCount===0)return T;for(F in E=this._events)s.call(E,F)&&T.push(r?F.slice(1):F);return Object.getOwnPropertySymbols?T.concat(Object.getOwnPropertySymbols(E)):T},R.prototype.listeners=function(T){var E=r?r+T:T,F=this._events[E];if(!F)return[];if(F.fn)return[F.fn];for(var L=0,K=F.length,P=new Array(K);L<K;L++)P[L]=F[L].fn;return P},R.prototype.listenerCount=function(T){var E=r?r+T:T,F=this._events[E];return F?F.fn?1:F.length:0},R.prototype.emit=function(T,E,F,L,K,P){var N=r?r+T:T;if(!this._events[N])return!1;var b=this._events[N],B=arguments.length,G,A;if(b.fn){switch(b.once&&this.removeListener(T,b.fn,void 0,!0),B){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,E),!0;case 3:return b.fn.call(b.context,E,F),!0;case 4:return b.fn.call(b.context,E,F,L),!0;case 5:return b.fn.call(b.context,E,F,L,K),!0;case 6:return b.fn.call(b.context,E,F,L,K,P),!0}for(A=1,G=new Array(B-1);A<B;A++)G[A-1]=arguments[A];b.fn.apply(b.context,G)}else{var x=b.length,C;for(A=0;A<x;A++)switch(b[A].once&&this.removeListener(T,b[A].fn,void 0,!0),B){case 1:b[A].fn.call(b[A].context);break;case 2:b[A].fn.call(b[A].context,E);break;case 3:b[A].fn.call(b[A].context,E,F);break;case 4:b[A].fn.call(b[A].context,E,F,L);break;default:if(!G)for(C=1,G=new Array(B-1);C<B;C++)G[C-1]=arguments[C];b[A].fn.apply(b[A].context,G)}}return!0},R.prototype.on=function(T,E,F){return O(this,T,E,F,!1)},R.prototype.once=function(T,E,F){return O(this,T,E,F,!0)},R.prototype.removeListener=function(T,E,F,L){var K=r?r+T:T;if(!this._events[K])return this;if(!E)return f(this,K),this;var P=this._events[K];if(P.fn)P.fn===E&&(!L||P.once)&&(!F||P.context===F)&&f(this,K);else{for(var N=0,b=[],B=P.length;N<B;N++)(P[N].fn!==E||L&&!P[N].once||F&&P[N].context!==F)&&b.push(P[N]);b.length?this._events[K]=b.length===1?b[0]:b:f(this,K)}return this},R.prototype.removeAllListeners=function(T){var E;return T?(E=r?r+T:T,this._events[E]&&f(this,E)):(this._events=new a,this._eventsCount=0),this},R.prototype.off=R.prototype.removeListener,R.prototype.addListener=R.prototype.on,R.prefixed=r,R.EventEmitter=R,n.exports=R})(eventemitter3);var axios$2={exports:{}},bind$2=function n(s,r){return function(){for(var e=new Array(arguments.length),O=0;O<e.length;O++)e[O]=arguments[O];return s.apply(r,e)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray(n){return toString.call(n)==="[object Array]"}function isUndefined(n){return typeof n=="undefined"}function isBuffer(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function isArrayBuffer(n){return toString.call(n)==="[object ArrayBuffer]"}function isFormData(n){return typeof FormData!="undefined"&&n instanceof FormData}function isArrayBufferView(n){var s;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?s=ArrayBuffer.isView(n):s=n&&n.buffer&&n.buffer instanceof ArrayBuffer,s}function isString(n){return typeof n=="string"}function isNumber(n){return typeof n=="number"}function isObject(n){return n!==null&&typeof n=="object"}function isPlainObject(n){if(toString.call(n)!=="[object Object]")return!1;var s=Object.getPrototypeOf(n);return s===null||s===Object.prototype}function isDate(n){return toString.call(n)==="[object Date]"}function isFile(n){return toString.call(n)==="[object File]"}function isBlob(n){return toString.call(n)==="[object Blob]"}function isFunction(n){return toString.call(n)==="[object Function]"}function isStream(n){return isObject(n)&&isFunction(n.pipe)}function isURLSearchParams(n){return typeof URLSearchParams!="undefined"&&n instanceof URLSearchParams}function trim(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(n,s){if(!(n===null||typeof n=="undefined"))if(typeof n!="object"&&(n=[n]),isArray(n))for(var r=0,a=n.length;r<a;r++)s.call(null,n[r],r,n);else for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&s.call(null,n[e],e,n)}function merge(){var n={};function s(e,O){isPlainObject(n[O])&&isPlainObject(e)?n[O]=merge(n[O],e):isPlainObject(e)?n[O]=merge({},e):isArray(e)?n[O]=e.slice():n[O]=e}for(var r=0,a=arguments.length;r<a;r++)forEach(arguments[r],s);return n}function extend(n,s,r){return forEach(s,function(e,O){r&&typeof e=="function"?n[O]=bind$1(e,r):n[O]=e}),n}function stripBOM(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}var utils$d={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM},utils$c=utils$d;function encode(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function n(s,r,a){if(!r)return s;var e;if(a)e=a(r);else if(utils$c.isURLSearchParams(r))e=r.toString();else{var O=[];utils$c.forEach(r,function(S,T){S===null||typeof S=="undefined"||(utils$c.isArray(S)?T=T+"[]":S=[S],utils$c.forEach(S,function(F){utils$c.isDate(F)?F=F.toISOString():utils$c.isObject(F)&&(F=JSON.stringify(F)),O.push(encode(T)+"="+encode(F))}))}),e=O.join("&")}if(e){var f=s.indexOf("#");f!==-1&&(s=s.slice(0,f)),s+=(s.indexOf("?")===-1?"?":"&")+e}return s},utils$b=utils$d;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function n(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function n(s){this.handlers[s]&&(this.handlers[s]=null)};InterceptorManager$1.prototype.forEach=function n(s){utils$b.forEach(this.handlers,function(a){a!==null&&s(a)})};var InterceptorManager_1=InterceptorManager$1,utils$a=utils$d,normalizeHeaderName$1=function n(s,r){utils$a.forEach(s,function(e,O){O!==r&&O.toUpperCase()===r.toUpperCase()&&(s[r]=e,delete s[O])})},enhanceError$2=function n(s,r,a,e,O){return s.config=r,a&&(s.code=a),s.request=e,s.response=O,s.isAxiosError=!0,s.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},s},enhanceError$1=enhanceError$2,createError$2=function n(s,r,a,e,O){var f=new Error(s);return enhanceError$1(f,r,a,e,O)},createError$1=createError$2,settle$1=function n(s,r,a){var e=a.config.validateStatus;!a.status||!e||e(a.status)?s(a):r(createError$1("Request failed with status code "+a.status,a.config,null,a.request,a))},utils$9=utils$d,cookies$1=utils$9.isStandardBrowserEnv()?function n(){return{write:function(r,a,e,O,f,R){var S=[];S.push(r+"="+encodeURIComponent(a)),utils$9.isNumber(e)&&S.push("expires="+new Date(e).toGMTString()),utils$9.isString(O)&&S.push("path="+O),utils$9.isString(f)&&S.push("domain="+f),R===!0&&S.push("secure"),document.cookie=S.join("; ")},read:function(r){var a=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function n(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function n(s){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(s)},combineURLs$1=function n(s,r){return r?s.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):s},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function n(s,r){return s&&!isAbsoluteURL(r)?combineURLs(s,r):r},utils$8=utils$d,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function n(s){var r={},a,e,O;return s&&utils$8.forEach(s.split(`
`),function(R){if(O=R.indexOf(":"),a=utils$8.trim(R.substr(0,O)).toLowerCase(),e=utils$8.trim(R.substr(O+1)),a){if(r[a]&&ignoreDuplicateOf.indexOf(a)>=0)return;a==="set-cookie"?r[a]=(r[a]?r[a]:[]).concat([e]):r[a]=r[a]?r[a]+", "+e:e}}),r},utils$7=utils$d,isURLSameOrigin$1=utils$7.isStandardBrowserEnv()?function n(){var s=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),a;function e(O){var f=O;return s&&(r.setAttribute("href",f),f=r.href),r.setAttribute("href",f),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return a=e(window.location.href),function(f){var R=utils$7.isString(f)?e(f):f;return R.protocol===a.protocol&&R.host===a.host}}():function n(){return function(){return!0}}(),utils$6=utils$d,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,xhr=function n(s){return new Promise(function(a,e){var O=s.data,f=s.headers,R=s.responseType;utils$6.isFormData(O)&&delete f["Content-Type"];var S=new XMLHttpRequest;if(s.auth){var T=s.auth.username||"",E=s.auth.password?unescape(encodeURIComponent(s.auth.password)):"";f.Authorization="Basic "+btoa(T+":"+E)}var F=buildFullPath(s.baseURL,s.url);S.open(s.method.toUpperCase(),buildURL$1(F,s.params,s.paramsSerializer),!0),S.timeout=s.timeout;function L(){if(!!S){var P="getAllResponseHeaders"in S?parseHeaders(S.getAllResponseHeaders()):null,N=!R||R==="text"||R==="json"?S.responseText:S.response,b={data:N,status:S.status,statusText:S.statusText,headers:P,config:s,request:S};settle(a,e,b),S=null}}if("onloadend"in S?S.onloadend=L:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(L)},S.onabort=function(){!S||(e(createError("Request aborted",s,"ECONNABORTED",S)),S=null)},S.onerror=function(){e(createError("Network Error",s,null,S)),S=null},S.ontimeout=function(){var N="timeout of "+s.timeout+"ms exceeded";s.timeoutErrorMessage&&(N=s.timeoutErrorMessage),e(createError(N,s,s.transitional&&s.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",S)),S=null},utils$6.isStandardBrowserEnv()){var K=(s.withCredentials||isURLSameOrigin(F))&&s.xsrfCookieName?cookies.read(s.xsrfCookieName):void 0;K&&(f[s.xsrfHeaderName]=K)}"setRequestHeader"in S&&utils$6.forEach(f,function(N,b){typeof O=="undefined"&&b.toLowerCase()==="content-type"?delete f[b]:S.setRequestHeader(b,N)}),utils$6.isUndefined(s.withCredentials)||(S.withCredentials=!!s.withCredentials),R&&R!=="json"&&(S.responseType=s.responseType),typeof s.onDownloadProgress=="function"&&S.addEventListener("progress",s.onDownloadProgress),typeof s.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",s.onUploadProgress),s.cancelToken&&s.cancelToken.promise.then(function(N){!S||(S.abort(),e(N),S=null)}),O||(O=null),S.send(O)})},utils$5=utils$d,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(n,s){!utils$5.isUndefined(n)&&utils$5.isUndefined(n["Content-Type"])&&(n["Content-Type"]=s)}function getDefaultAdapter(){var n;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(n=xhr),n}function stringifySafely(n,s,r){if(utils$5.isString(n))try{return(s||JSON.parse)(n),utils$5.trim(n)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(n)}var defaults$3={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function n(s,r){return normalizeHeaderName(r,"Accept"),normalizeHeaderName(r,"Content-Type"),utils$5.isFormData(s)||utils$5.isArrayBuffer(s)||utils$5.isBuffer(s)||utils$5.isStream(s)||utils$5.isFile(s)||utils$5.isBlob(s)?s:utils$5.isArrayBufferView(s)?s.buffer:utils$5.isURLSearchParams(s)?(setContentTypeIfUnset(r,"application/x-www-form-urlencoded;charset=utf-8"),s.toString()):utils$5.isObject(s)||r&&r["Content-Type"]==="application/json"?(setContentTypeIfUnset(r,"application/json"),stringifySafely(s)):s}],transformResponse:[function n(s){var r=this.transitional,a=r&&r.silentJSONParsing,e=r&&r.forcedJSONParsing,O=!a&&this.responseType==="json";if(O||e&&utils$5.isString(s)&&s.length)try{return JSON.parse(s)}catch(f){if(O)throw f.name==="SyntaxError"?enhanceError(f,this,"E_JSON_PARSE"):f}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function n(s){return s>=200&&s<300}};defaults$3.headers={common:{Accept:"application/json, text/plain, */*"}};utils$5.forEach(["delete","get","head"],function n(s){defaults$3.headers[s]={}});utils$5.forEach(["post","put","patch"],function n(s){defaults$3.headers[s]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$4=utils$d,defaults$2=defaults_1,transformData$1=function n(s,r,a){var e=this||defaults$2;return utils$4.forEach(a,function(f){s=f.call(e,s,r)}),s},isCancel$1=function n(s){return!!(s&&s.__CANCEL__)},utils$3=utils$d,transformData=transformData$1,isCancel=isCancel$1,defaults$1=defaults_1;function throwIfCancellationRequested(n){n.cancelToken&&n.cancelToken.throwIfRequested()}var dispatchRequest$1=function n(s){throwIfCancellationRequested(s),s.headers=s.headers||{},s.data=transformData.call(s,s.data,s.headers,s.transformRequest),s.headers=utils$3.merge(s.headers.common||{},s.headers[s.method]||{},s.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(e){delete s.headers[e]});var r=s.adapter||defaults$1.adapter;return r(s).then(function(e){return throwIfCancellationRequested(s),e.data=transformData.call(s,e.data,e.headers,s.transformResponse),e},function(e){return isCancel(e)||(throwIfCancellationRequested(s),e&&e.response&&(e.response.data=transformData.call(s,e.response.data,e.response.headers,s.transformResponse))),Promise.reject(e)})},utils$2=utils$d,mergeConfig$2=function n(s,r){r=r||{};var a={},e=["url","method","data"],O=["headers","auth","proxy","params"],f=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],R=["validateStatus"];function S(L,K){return utils$2.isPlainObject(L)&&utils$2.isPlainObject(K)?utils$2.merge(L,K):utils$2.isPlainObject(K)?utils$2.merge({},K):utils$2.isArray(K)?K.slice():K}function T(L){utils$2.isUndefined(r[L])?utils$2.isUndefined(s[L])||(a[L]=S(void 0,s[L])):a[L]=S(s[L],r[L])}utils$2.forEach(e,function(K){utils$2.isUndefined(r[K])||(a[K]=S(void 0,r[K]))}),utils$2.forEach(O,T),utils$2.forEach(f,function(K){utils$2.isUndefined(r[K])?utils$2.isUndefined(s[K])||(a[K]=S(void 0,s[K])):a[K]=S(void 0,r[K])}),utils$2.forEach(R,function(K){K in r?a[K]=S(s[K],r[K]):K in s&&(a[K]=S(void 0,s[K]))});var E=e.concat(O).concat(f).concat(R),F=Object.keys(s).concat(Object.keys(r)).filter(function(K){return E.indexOf(K)===-1});return utils$2.forEach(F,T),a};const name$1="axios",version$1="0.21.4",description$1="Promise based HTTP client for the browser and node.js",main$1="index.js",scripts$1={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository$1={type:"git",url:"https://github.com/axios/axios.git"},keywords$1=["xhr","http","ajax","promise","node"],author$1="Matt Zabriskie",license$1="MIT",bugs$1={url:"https://github.com/axios/axios/issues"},homepage$1="https://axios-http.com",devDependencies$1={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr="dist/axios.min.js",unpkg$1="dist/axios.min.js",typings$1="./index.d.ts",dependencies$1={"follow-redirects":"^1.14.0"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}];var require$$0={name:name$1,version:version$1,description:description$1,main:main$1,scripts:scripts$1,repository:repository$1,keywords:keywords$1,author:author$1,license:license$1,bugs:bugs$1,homepage:homepage$1,devDependencies:devDependencies$1,browser,jsdelivr,unpkg:unpkg$1,typings:typings$1,dependencies:dependencies$1,bundlesize},pkg=require$$0,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(n,s){validators$1[n]=function(a){return typeof a===n||"a"+(s<1?"n ":" ")+n}});var deprecatedWarnings={},currentVerArr=pkg.version.split(".");function isOlderVersion(n,s){for(var r=s?s.split("."):currentVerArr,a=n.split("."),e=0;e<3;e++){if(r[e]>a[e])return!0;if(r[e]<a[e])return!1}return!1}validators$1.transitional=function n(s,r,a){var e=r&&isOlderVersion(r);function O(f,R){return"[Axios v"+pkg.version+"] Transitional option '"+f+"'"+R+(a?". "+a:"")}return function(f,R,S){if(s===!1)throw new Error(O(R," has been removed in "+r));return e&&!deprecatedWarnings[R]&&(deprecatedWarnings[R]=!0,console.warn(O(R," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(f,R,S):!0}};function assertOptions(n,s,r){if(typeof n!="object")throw new TypeError("options must be an object");for(var a=Object.keys(n),e=a.length;e-- >0;){var O=a[e],f=s[O];if(f){var R=n[O],S=R===void 0||f(R,O,n);if(S!==!0)throw new TypeError("option "+O+" must be "+S);continue}if(r!==!0)throw Error("Unknown option "+O)}}var validator$1={isOlderVersion,assertOptions,validators:validators$1},utils$1=utils$d,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(n){this.defaults=n,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function n(s){typeof s=="string"?(s=arguments[1]||{},s.url=arguments[0]):s=s||{},s=mergeConfig$1(this.defaults,s),s.method?s.method=s.method.toLowerCase():this.defaults.method?s.method=this.defaults.method.toLowerCase():s.method="get";var r=s.transitional;r!==void 0&&validator.assertOptions(r,{silentJSONParsing:validators.transitional(validators.boolean,"1.0.0"),forcedJSONParsing:validators.transitional(validators.boolean,"1.0.0"),clarifyTimeoutError:validators.transitional(validators.boolean,"1.0.0")},!1);var a=[],e=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(s)===!1||(e=e&&L.synchronous,a.unshift(L.fulfilled,L.rejected))});var O=[];this.interceptors.response.forEach(function(L){O.push(L.fulfilled,L.rejected)});var f;if(!e){var R=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(R,a),R=R.concat(O),f=Promise.resolve(s);R.length;)f=f.then(R.shift(),R.shift());return f}for(var S=s;a.length;){var T=a.shift(),E=a.shift();try{S=T(S)}catch(F){E(F);break}}try{f=dispatchRequest(S)}catch(F){return Promise.reject(F)}for(;O.length;)f=f.then(O.shift(),O.shift());return f};Axios$1.prototype.getUri=function n(s){return s=mergeConfig$1(this.defaults,s),buildURL(s.url,s.params,s.paramsSerializer).replace(/^\?/,"")};utils$1.forEach(["delete","get","head","options"],function n(s){Axios$1.prototype[s]=function(r,a){return this.request(mergeConfig$1(a||{},{method:s,url:r,data:(a||{}).data}))}});utils$1.forEach(["post","put","patch"],function n(s){Axios$1.prototype[s]=function(r,a,e){return this.request(mergeConfig$1(e||{},{method:s,url:r,data:a}))}});var Axios_1=Axios$1;function Cancel$1(n){this.message=n}Cancel$1.prototype.toString=function n(){return"Cancel"+(this.message?": "+this.message:"")};Cancel$1.prototype.__CANCEL__=!0;var Cancel_1=Cancel$1,Cancel=Cancel_1;function CancelToken(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(e){s=e});var r=this;n(function(e){r.reason||(r.reason=new Cancel(e),s(r.reason))})}CancelToken.prototype.throwIfRequested=function n(){if(this.reason)throw this.reason};CancelToken.source=function n(){var s,r=new CancelToken(function(e){s=e});return{token:r,cancel:s}};var CancelToken_1=CancelToken,spread=function n(s){return function(a){return s.apply(null,a)}},isAxiosError=function n(s){return typeof s=="object"&&s.isAxiosError===!0},utils=utils$d,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(n){var s=new Axios(n),r=bind(Axios.prototype.request,s);return utils.extend(r,Axios.prototype,s),utils.extend(r,s),r}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.create=function n(s){return createInstance(mergeConfig(axios$1.defaults,s))};axios$1.Cancel=Cancel_1;axios$1.CancelToken=CancelToken_1;axios$1.isCancel=isCancel$1;axios$1.all=function n(s){return Promise.all(s)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axios=axios$2.exports,util={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.HOST=void 0;function s(S){return Object.prototype.toString.call(S)=="[object File]"}function r(S){return typeof S=="function"}function a(S){return typeof S=="string"}function e(){}function O(S){return new Promise(function(T){setTimeout(function(){T()},S)})}function f(){return Math.floor(Date.now()/1e3)}var R;(function(S){S[S.UPLOAD_FAIL=1]="UPLOAD_FAIL"})(R||(R={})),function(S){S.MAIN="vod2.qcloud.com",S.BACKUP="vod2.dnsv1.com"}(n.HOST||(n.HOST={})),n.default={isFile:s,isFunction:r,isString:a,noop:e,delay:O,getUnix:f,isTest:!1,isDev:!1,CLIENT_ERROR_CODE:R}})(util);var vod_reporter={};const name="vod-js-sdk-v6",version="1.4.16",description="tencent cloud vod js sdk v6",main="lib/src/tc_vod.js",unpkg="dist/vod-js-sdk-v6.js",typings="lib/src/tc_vod.d.ts",scripts={test:"cross-env NODE_ENV=test mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts",cover:"cross-env NODE_ENV=test nyc mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts",dev:"webpack --config webpack.dev.config.js --watch",dist:"webpack --config webpack.config.js",build:"npm run test && npm run dist && npm run compile",compile:"tsc -p tsconfig.json",prepublish:"npm run build",lint:"tsc --noEmit && eslint 'src/**/*.{js,ts,tsx}' --quiet --fix"},repository={type:"git",url:"git+https://github.com/tencentyun/vod-js-sdk-v6.git"},keywords=["tencentcloud","sdk","vod"],author="alsotang <alsotang@gmail.com>",license="MIT",bugs={url:"https://github.com/tencentyun/vod-js-sdk-v6/issues"},homepage="https://github.com/tencentyun/vod-js-sdk-v6#readme",dependencies={axios:"^0.21.1","cos-js-sdk-v5":"^1.3.7",eventemitter3:"^4.0.7","js-sha1":"^0.6.0",uuid:"^3.3.2"},devDependencies={"@types/mocha":"^5.2.5","@types/semver":"^6.0.0","@types/sha1":"^1.1.1","@types/uuid":"^3.4.4","@typescript-eslint/eslint-plugin":"^1.9.0","@typescript-eslint/parser":"^1.9.0","cross-env":"^6.0.3",eslint:"^5.16.0","eslint-config-prettier":"^4.3.0","eslint-plugin-prettier":"^3.1.0","espower-typescript":"^9.0.1",jsdom:"^13.1.0","jsdom-global":"^3.0.2",mm:"^2.4.1",mocha:"^5.2.0",nyc:"^13.1.0","power-assert":"^1.6.1",prettier:"^1.17.1",semver:"^6.1.1","ts-loader":"^5.3.3",typescript:"^3.5.3",webpack:"^4.28.1","webpack-cli":"^3.3.12"},nyc={extension:[".ts",".tsx"],include:["src"],reporter:["html"],all:!0};var require$$1={name,version,description,main,unpkg,typings,scripts,repository,keywords,author,license,bugs,homepage,dependencies,devDependencies,nyc};(function(n){var s=commonjsGlobal&&commonjsGlobal.__assign||function(){return s=Object.assign||function(S){for(var T,E=1,F=arguments.length;E<F;E++){T=arguments[E];for(var L in T)Object.prototype.hasOwnProperty.call(T,L)&&(S[L]=T[L])}return S},s.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.VodReporter=n.VodReportEvent=void 0;var r=uploader,a=require$$1,e=util,O;(function(S){S.report_apply="report_apply",S.report_cos_upload="report_cos_upload",S.report_commit="report_commit",S.report_done="report_done"})(O=n.VodReportEvent||(n.VodReportEvent={}));var f;(function(S){S[S.apply=10001]="apply",S[S.cos_upload=20001]="cos_upload",S[S.commit=10002]="commit",S[S.done=40001]="done"})(f||(f={}));var R=function(){function S(T,E){this.baseReportData={version:a.version,platform:3e3,device:navigator.userAgent},this.reportUrl="https://vodreport.qcloud.com/ugcupload_new",this.uploader=T,this.options=E,this.init()}return S.prototype.init=function(){this.uploader.on(O.report_apply,this.onApply.bind(this)),this.uploader.on(O.report_cos_upload,this.onCosUpload.bind(this)),this.uploader.on(O.report_commit,this.onCommit.bind(this)),this.uploader.on(O.report_done,this.onDone.bind(this))},S.prototype.onApply=function(T){try{var E=this.uploader;if(!E.videoFile)return;Object.assign(this.baseReportData,{appId:E.appId,fileSize:E.videoFile.size,fileName:E.videoFile.name,fileType:E.videoFile.type,vodSessionKey:E.vodSessionKey,reqKey:E.reqKey,reportId:E.reportId});var F={reqType:f.apply,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(T.requestStartTime),reqTime:Number(T.requestStartTime)};T.err&&(F.errCode=1,F.vodErrCode=T.err.code,F.errMsg=T.err.message),T.data&&(this.baseReportData.cosRegion=T.data.storageRegionV5),this.report(F)}catch(L){if(console.error("onApply",L),e.default.isTest)throw L}},S.prototype.onCosUpload=function(T){try{var E={reqType:f.cos_upload,errCode:0,cosErrCode:"",errMsg:"",reqTimeCost:Number(new Date)-Number(T.requestStartTime),reqTime:Number(T.requestStartTime)};T.err&&(E.errCode=1,E.cosErrCode=T.err.error?T.err.error.Code:T.err,T.err&&T.err.error==="error"&&(E.cosErrCode="cors error"),E.errMsg=JSON.stringify(T.err)),this.report(E)}catch(F){if(console.error("onCosUpload",F),e.default.isTest)throw F}},S.prototype.onCommit=function(T){try{var E={reqType:f.commit,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(T.requestStartTime),reqTime:Number(T.requestStartTime)};T.err&&(E.errCode=1,E.vodErrCode=T.err.code,E.errMsg=T.err.message),T.data&&(this.baseReportData.fileId=T.data.fileId),this.report(E)}catch(F){if(console.error("onCommit",F),e.default.isTest)throw F}},S.prototype.onDone=function(T){try{var E={reqType:f.done,errCode:T.err&&T.err.code,reqTimeCost:Number(new Date)-Number(T.requestStartTime),reqTime:Number(T.requestStartTime)};this.report(E)}catch(F){if(console.error("onDone",F),e.default.isTest)throw F}},S.prototype.report=function(T){T=s(s({},this.baseReportData),T),this.send(T)},S.prototype.send=function(T){if(e.default.isDev||e.default.isTest){console.log("send reportData",T);return}r.vodAxios.post(this.reportUrl,T,{withCredentials:!1})},S}();n.VodReporter=R})(vod_reporter);var rngBrowser={exports:{}},getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);rngBrowser.exports=function(){return getRandomValues(rnds8),rnds8}}else{var rnds=new Array(16);rngBrowser.exports=function(){for(var s=0,r;s<16;s++)(s&3)===0&&(r=Math.random()*4294967296),rnds[s]=r>>>((s&3)<<3)&255;return rnds}}var byteToHex=[];for(var i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);function bytesToUuid$1(n,s){var r=s||0,a=byteToHex;return[a[n[r++]],a[n[r++]],a[n[r++]],a[n[r++]],"-",a[n[r++]],a[n[r++]],"-",a[n[r++]],a[n[r++]],"-",a[n[r++]],a[n[r++]],"-",a[n[r++]],a[n[r++]],a[n[r++]],a[n[r++]],a[n[r++]],a[n[r++]]].join("")}var bytesToUuid_1=bytesToUuid$1,rng=rngBrowser.exports,bytesToUuid=bytesToUuid_1;function v4(n,s,r){var a=s&&r||0;typeof n=="string"&&(s=n==="binary"?new Array(16):null,n=null),n=n||{};var e=n.random||(n.rng||rng)();if(e[6]=e[6]&15|64,e[8]=e[8]&63|128,s)for(var O=0;O<16;++O)s[a+O]=e[O];return s||bytesToUuid(e)}var v4_1=v4;(function(n){var s=commonjsGlobal&&commonjsGlobal.__extends||function(){var P=function(N,b){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,G){B.__proto__=G}||function(B,G){for(var A in G)G.hasOwnProperty(A)&&(B[A]=G[A])},P(N,b)};return function(N,b){P(N,b);function B(){this.constructor=N}N.prototype=b===null?Object.create(b):(B.prototype=b.prototype,new B)}}(),r=commonjsGlobal&&commonjsGlobal.__assign||function(){return r=Object.assign||function(P){for(var N,b=1,B=arguments.length;b<B;b++){N=arguments[b];for(var G in N)Object.prototype.hasOwnProperty.call(N,G)&&(P[G]=N[G])}return P},r.apply(this,arguments)},a=commonjsGlobal&&commonjsGlobal.__awaiter||function(P,N,b,B){function G(A){return A instanceof b?A:new b(function(x){x(A)})}return new(b||(b=Promise))(function(A,x){function C(q){try{h(B.next(q))}catch($){x($)}}function Q(q){try{h(B.throw(q))}catch($){x($)}}function h(q){q.done?A(q.value):G(q.value).then(C,Q)}h((B=B.apply(P,N||[])).next())})},e=commonjsGlobal&&commonjsGlobal.__generator||function(P,N){var b={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},B,G,A,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(h){return function(q){return Q([h,q])}}function Q(h){if(B)throw new TypeError("Generator is already executing.");for(;b;)try{if(B=1,G&&(A=h[0]&2?G.return:h[0]?G.throw||((A=G.return)&&A.call(G),0):G.next)&&!(A=A.call(G,h[1])).done)return A;switch(G=0,A&&(h=[h[0]&2,A.value]),h[0]){case 0:case 1:A=h;break;case 4:return b.label++,{value:h[1],done:!1};case 5:b.label++,G=h[1],h=[0];continue;case 7:h=b.ops.pop(),b.trys.pop();continue;default:if(A=b.trys,!(A=A.length>0&&A[A.length-1])&&(h[0]===6||h[0]===2)){b=0;continue}if(h[0]===3&&(!A||h[1]>A[0]&&h[1]<A[3])){b.label=h[1];break}if(h[0]===6&&b.label<A[1]){b.label=A[1],A=h;break}if(A&&b.label<A[2]){b.label=A[2],b.ops.push(h);break}A[2]&&b.ops.pop(),b.trys.pop();continue}h=N.call(P,b)}catch(q){h=[6,q],G=0}finally{B=A=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.UploaderEvent=n.vodAxios=void 0;var O=sha1.exports,f=cosJsSdkV5.exports,R=eventemitter3.exports,S=axios,T=util,E=vod_reporter,F=v4_1;n.vodAxios=S.default.create(),n.vodAxios.interceptors.response.use(function(P){return P},function(P){return isNaN(P.code)&&(P.code=500),Promise.reject(P)});var L;(function(P){P.video_progress="video_progress",P.media_progress="media_progress",P.video_upload="video_upload",P.media_upload="media_upload",P.cover_progress="cover_progress",P.cover_upload="cover_upload"})(L=n.UploaderEvent||(n.UploaderEvent={}));var K=function(P){s(N,P);function N(b){var B=P.call(this)||this;return B.sessionName="",B.vodSessionKey="",B.appId=0,B.reqKey=F(),B.reportId="",B.enableResume=!0,B.applyRequestTimeout=5e3,B.applyRequestRetryCount=3,B.commitRequestTimeout=5e3,B.commitRequestRetryCount=3,B.retryDelay=1e3,B.validateInitParams(b),B.videoFile=b.mediaFile||b.videoFile,B.getSignature=b.getSignature,B.cosStrategy=B.getCosStrategy(b),B.enableResume=b.enableResume,B.videoName=b.mediaName||b.videoName,B.coverFile=b.coverFile,B.fileId=b.fileId,B.applyRequestTimeout=b.applyRequestTimeout||B.applyRequestTimeout,B.commitRequestTimeout=b.commitRequestTimeout||B.commitRequestTimeout,B.retryDelay=b.retryDelay||B.retryDelay,B.appId=b.appId||B.appId,B.reportId=b.reportId||B.reportId,B.cosAuthTime=0,B.genFileInfo(),B}return N.prototype.getCosStrategy=function(b){var B={FileParallelLimit:b.fileParallelLimit,ChunkParallelLimit:b.chunkParallelLimit||6,ChunkRetryTimes:b.chunkRetryTimes,ChunkSize:b.chunkSize||8388608,SliceSize:b.sliceSize,CopyChunkParallelLimit:b.copyChunkParallelLimit,CopyChunkSize:b.copyChunkSize,CopySliceSize:b.copySliceSize,ProgressInterval:b.progressInterval},G=Object.keys(B).filter(function(A){return B[A]!==void 0}).reduce(function(A,x){var C;return r(r({},A),(C={},C[x]=B[x],C))},{});return G},N.prototype.setStorage=function(b,B){if(!!b){var G="webugc_"+O(b);try{localStorage.setItem(G,B)}catch{}}},N.prototype.getStorage=function(b){if(!!b){var B="webugc_"+O(b),G=null;try{G=localStorage.getItem(B)}catch{}return G}},N.prototype.delStorage=function(b){if(!!b){var B="webugc_"+O(b);try{localStorage.removeItem(B)}catch{}}},N.prototype.validateInitParams=function(b){if(!T.default.isFunction(b.getSignature))throw new Error("getSignature must be a function");if(b.videoFile&&!T.default.isFile(b.videoFile))throw new Error("videoFile must be a File")},N.prototype.genFileInfo=function(){var b=this.videoFile;if(b){var B=b.name.lastIndexOf("."),G="";if(this.videoName)if(T.default.isString(this.videoName)){if(/[:*?<>\"\\/|]/g.test(this.videoName))throw new Error('Cant use these chars in filename: \\ / : * ? " < > |');G=this.videoName}else throw new Error("mediaName must be a string");else G=b.name.substring(0,B);this.videoInfo={name:G,type:b.name.substring(B+1).toLowerCase(),size:b.size},this.sessionName+=b.name+"_"+b.size+";"}var A=this.coverFile;if(A){var x=A.name,C=x.lastIndexOf(".");this.coverInfo={name:x.substring(0,C),type:x.substring(C+1).toLowerCase(),size:A.size},this.sessionName+=A.name+"_"+A.size+";"}},N.prototype.applyUploadUGC=function(b){return b===void 0&&(b=0),a(this,void 0,void 0,function(){function B(Y){return a(this,void 0,void 0,function(){return e(this,function(ne){switch(ne.label){case 0:if(Y.code===500&&(N.host=N.host===T.HOST.MAIN?T.HOST.BACKUP:T.HOST.MAIN),G.emit(E.VodReportEvent.report_apply,{err:Y,requestStartTime:q}),G.delStorage(G.sessionName),G.applyRequestRetryCount==b)throw Y||new Error("apply upload failed");return[4,T.default.delay(G.retryDelay)];case 1:return ne.sent(),[2,G.applyUploadUGC(b+1)]}})})}var G,A,x,C,Q,h,q,$,j,W,I,X,te;return e(this,function(Y){switch(Y.label){case 0:return G=this,[4,this.getSignature()];case 1:if(A=Y.sent(),C=this.videoInfo,Q=this.coverInfo,h=this.vodSessionKey||this.enableResume&&this.getStorage(this.sessionName),h)x={signature:A,vodSessionKey:h};else if(C)x={signature:A,videoName:C.name,videoType:C.type,videoSize:C.size},Q&&(x.coverName=Q.name,x.coverType=Q.type,x.coverSize=Q.size);else if(this.fileId&&Q)x={signature:A,fileId:this.fileId,coverName:Q.name,coverType:Q.type,coverSize:Q.size};else throw"Wrong params, please check and try again";x.uploadFromWeb=!0,q=new Date,Y.label=2;case 2:return Y.trys.push([2,4,,5]),[4,n.vodAxios.post("https://"+N.host+"/v3/index.php?Action=ApplyUploadUGC",x,{timeout:this.applyRequestTimeout,withCredentials:!1})];case 3:return $=Y.sent(),[3,5];case 4:return j=Y.sent(),[2,B(j)];case 5:return W=$.data,W.code==0?(I=W.data,X=I.vodSessionKey,this.setStorage(this.sessionName,X),this.vodSessionKey=X,this.appId=I.appId,this.emit(E.VodReportEvent.report_apply,{data:I,requestStartTime:q}),[2,I]):(te=new Error(W.message),te.code=W.code,[2,B(te)])}})})},N.prototype.uploadToCos=function(b){return a(this,void 0,void 0,function(){var B,G,A,x,C,Q,h,q;return e(this,function($){switch($.label){case 0:return B=this,G={bucket:b.storageBucket+"-"+b.storageAppId,region:b.storageRegionV5},A=new f(Object.assign({getAuthorization:function(j,W){return a(this,void 0,void 0,function(){var I,X;return e(this,function(te){switch(te.label){case 0:return I=T.default.getUnix(),X=(b.tempCertificate.expiredTime-b.timestamp)*.9,B.cosAuthTime!==0?[3,1]:(B.cosAuthTime=I,[3,3]);case 1:return B.cosAuthTime&&I-B.cosAuthTime>=X?[4,B.applyUploadUGC()]:[3,3];case 2:b=te.sent(),B.cosAuthTime=T.default.getUnix(),te.label=3;case 3:return W({TmpSecretId:b.tempCertificate.secretId,TmpSecretKey:b.tempCertificate.secretKey,XCosSecurityToken:b.tempCertificate.token,StartTime:b.timestamp,ExpiredTime:b.tempCertificate.expiredTime}),[2]}})})}},this.cosStrategy)),this.cos=A,x=[],this.videoFile&&(C=r(r({},G),{file:this.videoFile,key:b.video.storagePath,onProgress:function(j){B.emit(L.video_progress,j),B.emit(L.media_progress,j)},onUpload:function(j){B.emit(L.video_upload,j),B.emit(L.media_upload,j)},onTaskReady:function(j){B.taskId=j}}),x.push(C)),this.coverFile&&(Q=r(r({},G),{file:this.coverFile,key:b.cover.storagePath,onProgress:function(j){B.emit(L.cover_progress,j)},onUpload:function(j){B.emit(L.cover_upload,j)},onTaskReady:T.default.noop}),x.push(Q)),h=new Date,q=x.map(function(j){return new Promise(function(W,I){A.sliceUploadFile({Bucket:j.bucket,Region:j.region,Key:j.key,Body:j.file,onTaskReady:j.onTaskReady,onProgress:j.onProgress},function(X,te){if(j.file===B.videoFile&&B.emit(E.VodReportEvent.report_cos_upload,{err:X,requestStartTime:h}),!X)return j.onUpload(te),W();if(B.delStorage(B.sessionName),JSON.stringify(X)==='{"error":"error","headers":{}}')return I(new Error("cors error"));I(X)})})}),[4,Promise.all(q)];case 1:return[2,$.sent()]}})})},N.prototype.commitUploadUGC=function(b){return b===void 0&&(b=0),a(this,void 0,void 0,function(){function B(j){return a(this,void 0,void 0,function(){return e(this,function(W){switch(W.label){case 0:if(j.code===500&&(N.host=N.host===T.HOST.MAIN?T.HOST.BACKUP:T.HOST.MAIN),G.emit(E.VodReportEvent.report_commit,{err:j,requestStartTime:C}),G.commitRequestRetryCount==b)throw j||new Error("commit upload failed");return[4,T.default.delay(G.retryDelay)];case 1:return W.sent(),[2,G.commitUploadUGC(b+1)]}})})}var G,A,x,C,Q,h,q,$;return e(this,function(j){switch(j.label){case 0:return G=this,[4,this.getSignature()];case 1:A=j.sent(),this.delStorage(this.sessionName),x=this.vodSessionKey,C=new Date,j.label=2;case 2:return j.trys.push([2,4,,5]),[4,n.vodAxios.post("https://"+N.host+"/v3/index.php?Action=CommitUploadUGC",{signature:A,vodSessionKey:x},{timeout:this.commitRequestTimeout,withCredentials:!1})];case 3:return Q=j.sent(),[3,5];case 4:return h=j.sent(),[2,B(h)];case 5:return q=Q.data,q.code==0?(this.emit(E.VodReportEvent.report_commit,{data:q.data,requestStartTime:C}),[2,q.data]):($=new Error(q.message),$.code=q.code,[2,B($)])}})})},N.prototype.start=function(){var b=this,B=new Date;this.donePromise=this._start().then(function(G){return b.emit(E.VodReportEvent.report_done,{err:{code:0},requestStartTime:B}),G}).catch(function(G){throw b.emit(E.VodReportEvent.report_done,{err:{code:G&&G.code||T.default.CLIENT_ERROR_CODE.UPLOAD_FAIL},requestStartTime:B}),G})},N.prototype._start=function(){return a(this,void 0,void 0,function(){var b;return e(this,function(B){switch(B.label){case 0:return[4,this.applyUploadUGC()];case 1:return b=B.sent(),[4,this.uploadToCos(b)];case 2:return B.sent(),[4,this.commitUploadUGC()];case 3:return[2,B.sent()]}})})},N.prototype.done=function(){return this.donePromise},N.prototype.cancel=function(){this.cos.cancelTask(this.taskId)},N.host=T.HOST.MAIN,N}(R.EventEmitter);n.default=K})(uploader);var __assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(n){for(var s,r=1,a=arguments.length;r<a;r++){s=arguments[r];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(n[e]=s[e])}return n},__assign.apply(this,arguments)};Object.defineProperty(tc_vod,"__esModule",{value:!0});var uploader_1=uploader,vod_reporter_1=vod_reporter,TcVod=function(){function n(s){this.allowReport=!0,this.enableResume=!0,this.getSignature=s.getSignature,s.allowReport!==void 0&&(this.allowReport=s.allowReport),s.enableResume!==void 0&&(this.enableResume=s.enableResume),this.appId=s.appId,this.reportId=s.reportId}return n.prototype.upload=function(s){var r=__assign({getSignature:this.getSignature,appId:this.appId,reportId:this.reportId,enableResume:this.enableResume},s),a=new uploader_1.default(r);return this.allowReport&&this.initReporter(a),a.start(),a},n.prototype.initReporter=function(s){new vod_reporter_1.VodReporter(s)},n}(),_default=tc_vod.default=TcVod,uploading_vue_vue_type_style_index_0_scoped_true_lang=(()=>`.container[data-v-067c19fe]{width:100vw;background:#bce2d5;min-height:100vh}.container header[data-v-067c19fe]{width:100vw;min-height:88.533333vw;background:url(https://imgcdn.dahebao.cn/20221130/20221130200720395972.png);background-repeat:no-repeat;background-size:100%}.container header img[data-v-067c19fe]{float:left;margin:1.333333vw 0 0 4.133333vw;width:15.333333vw;height:2.666667vw}.container main[data-v-067c19fe]{width:100vw;padding-bottom:6.666667vw;box-sizing:border-box;text-align:center}.container main .title[data-v-067c19fe]{margin:0 auto;width:88.266667vw;height:21.6vw;background:url(https://imgcdn.dahebao.cn/20221115/20221115161716948436.png);background-size:100%;background-repeat:no-repeat}.container main .van-form[data-v-067c19fe]{margin:-7.466667vw auto 1.333333vw;width:80vw;z-index:100;color:red;padding-bottom:4vw;box-sizing:border-box;border-radius:0 0 2.666667vw 2.666667vw;background:#fff}.container main .van-form .group[data-v-067c19fe]{color:red}.van-cell-group--inset[data-v-067c19fe]{margin:0;padding-top:2.666667vw}.van-button[data-v-067c19fe]{margin:0 auto;width:58.933333vw;height:9.6vw}[data-v-067c19fe] .van-field__label{width:16vw}video[data-v-067c19fe]::-webkit-media-controls-timeline{display:none}video[data-v-067c19fe]::-webkit-media-controls-mute-button{display:none}video[data-v-067c19fe]::-webkit-media-controls-volume-slider{display:none}
`)();const _withScopeId=n=>(pushScopeId("data-v-067c19fe"),n=n(),popScopeId(),n),_hoisted_1={class:"container"},_hoisted_2=_withScopeId(()=>createBaseVNode("header",null,null,-1)),_hoisted_3=_withScopeId(()=>createBaseVNode("div",{class:"title"},null,-1)),_hoisted_4={style:{margin:"16px"}},_hoisted_5=createTextVNode(" \u63D0\u4EA4\u62A5\u540D "),_sfc_main=defineComponent({__name:"uploading",setup(n){const s=useCounterStore(),r=reactive({accept:"video/*,image/*",max:9,info:[{isNull:!1,name:"\u6807\u9898",length:20,value:""},{isNull:!1,name:"\u4E0A\u4F20",length:20,value:"",type:1}],file:[]}),a=ref(!1),e=reactive({posts_title:"",posts_img:"",posts_video:"",posts_video_img:"",posts_content:"#2022\u6CB3\u5357\u65B0\u5730\u6807# ",user_id:s.$state.userId,tecent_video_id:"",source:"0",activityNo:s.$state.activityNo,location_address:s.$state.city.city_name,creatorType:s.$state.city.city_id,creator_type:s.$state.city.city_id}),O=P=>{if(r.max==9&&r.file[0].url){let N=[];r.file.map(b=>{N.push({imgUrl:b.url,imgWidth:"750",imgHeight:"560",imgType:2})}),e.posts_img=JSON.stringify(N),e.posts_video="",e.tecent_video_id=""}e.posts_title=r.info[0].value,E()},f=P=>{P.file.type.indexOf("image")!=-1?(r.accept="image/*",r.max=9,R(P)):(r.max=1,T(P.file)),Toast.loading({duration:0,message:"\u6B63\u5728\u4E0A\u4F20",forbidClick:!0})};function R(P){let N=new FormData;N.append("file",P.file),axios$3.post("https://news.dahebao.cn/dahe/app/announce/uploadImg",N,{headers:{"content-type":"multipart/form-data"}}).then(b=>{b.state==1?(P.url=b.data.fileUrl,P.id=b.data.fileId,delete e.posts_video_img,Toast.clear()):(Toast("\u4E0A\u4F20\u5931\u8D25"),r.file=[])})}async function S(){return await axios$3.post("https://news.dahebao.cn/dahe/appshortvideocb/getsignature")}function T(P){new _default({getSignature:S}).upload({mediaFile:P}).done().then(B=>{e.tecent_video_id=B.fileId,e.posts_video=B.video.url,delete e.posts_img,e.posts_video_img="",K(B.video.url),Toast.clear()}).catch(function(){Toast("\u4E0A\u4F20\u5931\u8D25,\u8BF7\u91CD\u65B0\u4E0A\u4F20\u89C6\u9891")})}function E(){saveCity(e).then(P=>{P.state==1?(Toast(P.data),r.info.map(N=>{N.value=""}),r.file=[],r.accept="image/*,video/*",r.max=9,e.location_address="",e.posts_img="",e.posts_video_img="",e.posts_video="",e.tecent_video_id=""):Toast(P.message)})}function F(){r.file.length==0&&(r.accept="video/*,image/*")}function L(P){a.value=!1,e.location_address=P.city_name,e.creator_type=P.creatorType,e.creatorType=P.creatorType}function K(P){return new Promise(function(N,b){let B="",G=document.createElement("video");G.setAttribute("crossOrigin","anonymous"),G.setAttribute("src",P),G.setAttribute("width","400"),G.setAttribute("height","240"),G.setAttribute("preload","auto"),G.addEventListener("loadeddata",function(){var Q;let A=document.createElement("canvas"),x=G.width,C=G.height;A.width=x,A.height=C,(Q=A.getContext("2d"))==null||Q.drawImage(G,0,0,x,C),B=A.toDataURL("image/jpeg"),r.file[0].content=B,r.file[0].file=""})})}return onMounted(()=>{}),(P,N)=>{const b=Field,B=Picker,G=Popup,A=Uploader,x=CellGroup,C=Button,Q=Form;return openBlock(),createElementBlock("div",_hoisted_1,[_hoisted_2,createBaseVNode("main",null,[_hoisted_3,createVNode(Q,{onSubmit:O},{default:withCtx(()=>[createVNode(x,{class:"group",inset:""},{default:withCtx(()=>[createVNode(b,{modelValue:e.location_address,"onUpdate:modelValue":N[0]||(N[0]=h=>e.location_address=h),"is-link":"",readonly:"",label:"\u57CE\u5E02",required:!0,placeholder:"\u9009\u62E9\u57CE\u5E02",onClick:N[1]||(N[1]=h=>a.value=!0)},null,8,["modelValue"]),createVNode(G,{show:a.value,"onUpdate:show":N[3]||(N[3]=h=>a.value=h),round:"",position:"bottom"},{default:withCtx(()=>[createVNode(B,{columns:unref(s).$state.citys,onCancel:N[2]||(N[2]=h=>a.value=!1),onConfirm:L},null,8,["columns"])]),_:1},8,["show"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.info,(h,q)=>(openBlock(),createBlock(b,{key:q,rules:[{required:!h.isNull,message:`\u8BF7\u586B\u5199${h.name}`}],label:`${h.name}:`,required:!h.isNull,name:h.name,placeholder:`\u8BF7\u8F93\u5165${h.name}`,maxlength:h.length,type:Number(h.length)>200?"textarea":"text",autosize:"",modelValue:h.value,"onUpdate:modelValue":$=>h.value=$},createSlots({_:2},[h.type==1?{name:"input",fn:withCtx(()=>[createVNode(A,{"preview-full-image":!1,modelValue:r.file,"onUpdate:modelValue":N[4]||(N[4]=$=>r.file=$),accept:r.accept,ResultType:"file","max-count":r.max,"after-read":f,onDelete:F},null,8,["modelValue","accept","max-count"])])}:void 0]),1032,["rules","label","required","name","placeholder","maxlength","type","modelValue","onUpdate:modelValue"]))),128))]),_:1}),createBaseVNode("div",_hoisted_4,[createVNode(C,{round:"",block:"",color:"#FF7700","native-type":"submit"},{default:withCtx(()=>[_hoisted_5]),_:1})])]),_:1})])])}}});var uploading=_export_sfc(_sfc_main,[["__scopeId","data-v-067c19fe"]]);export{uploading as default};
