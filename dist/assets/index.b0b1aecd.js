/* empty css              */import{r as y,F as Y,a as Z,c as tt,s as at}from"./index.a3ec9ed1.js";import{_ as j,d as q,r as J,u as K,o as c,c as l,a as e,n as et,F as C,b as B,t as m,w as S,v as M,e as b,f as x,p as W,g as G,h as nt,T as g,D as ot,C as it,B as rt,O as dt,i as st,j as U,k as vt,l as ct,m as lt,q as R,s as gt,x as ut}from"./index.7882ed54.js";const ht=a=>y.get("app/daheDrawActivityConfig/findDrawActivityConfigByAactivityNo",a,""),bt=a=>y.get("app/daheDrawActivityConfig/drawRecordList",a,""),pt=a=>y.get("app/daheDrawActivityConfig/getUserCodeAndinvitationList",a,""),ft=a=>y.get("app/daheDrawActivityConfig/toDraw",a,""),mt=a=>y.get("app/daheDrawActivityConfig/findDrawCount",a,""),wt=(a,p)=>y.post("app/daheDrawActivityConfig/saveAddress"+a,p,"");var k={findDraw:ht,drawRecordList:bt,getUserCode:pt,toDraw:ft,findDrawCount:mt,saveAddress:wt};const A=a=>(W("data-v-36834158"),a=a(),G(),a),_t={class:"wrapper"},xt={class:"sector-inner"},yt=["src"],kt=A(()=>e("div",{class:"start"},"\u7ACB\u5373\u62BD\u5956",-1)),Ct=[kt],At={class:"van-overlay"},zt={class:"block"},$t=A(()=>e("div",null,"\u8BF7\u586B\u5199\u9886\u5956\u4FE1\u606F",-1)),Ft={style:{margin:"16px"}},Bt=nt(" \u63D0\u4EA4 "),Dt={class:"number"},Nt={class:"residue"},It=A(()=>e("text",null," \u60A8\u5F53\u524D\u5269\u4F59 ",-1)),Lt={style:{color:"#fc0404"}},Tt=A(()=>e("text",null," \u62BD\u5956\u673A\u4F1A ",-1)),Et=A(()=>e("div",{class:"assistance"},"\u53C2\u52A0\u6295\u7A3F\u53EF\u83B71\u6B21\u62BD\u5956\u673A\u4F1A",-1)),Ot=q({__name:"Corona",props:{RecordList:Function},setup(a){const p=a,t=J({number:0,message:{realName:"",phone:"",address:""},show:!1,rotateAngle:0,time:0,IsTurnOver:!0,rotate_angle:"",activity:{poolList:[]}}),n=K(),I=/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[1589]))\d{8}$/;k.findDraw({userId:n.$state.userId,activityNo:n.$state.activityNo}).then(r=>{t.activity=r.drawActivityConfig});function d(){k.saveAddress(`?userId=${n.$state.userId}&activityNo=${n.$state.activityNo}`,JSON.stringify({realName:t.message.realName,recordNo:t.message.recordNo,phone:t.message.phone,activityNo:n.$state.activityNo,address:t.message.address})).then(r=>{g(r.message),t.show=!1,p.RecordList()})}function z(){k.findDrawCount({userId:n.$state.userId,activityNo:n.$state.activityNo}).then(r=>{t.number=r.drawCount})}function w(){t.IsTurnOver?(t.IsTurnOver=!1,k.toDraw({userId:n.$state.userId,activityNo:n.$state.activityNo}).then(r=>{z(),t.activity.poolList.map((s,f)=>{if(s.awardNo==r.awardNo){t.message.recordNo=r.recordNo,$(f+1),setTimeout(function(){s.awardFlag=="1"?ot.alert({message:"\u606D\u559C\u83B7\u5F97"+s.awardName}).then(()=>{t.show=!0}):g(s.awardName),t.IsTurnOver=!0},5200);return}})})):g("\u8BF7\u52FF\u91CD\u590D\u62BD\u5956")}function $(r){switch(t.rotateAngle=t.rotateAngle-t.time,r){case 1:t.time=Math.random()*(30-0)+0;break;case 6:t.time=Math.random()*(85-35)+35;break;case 5:t.time=Math.random()*(145-95)+95;break;case 4:t.time=Math.random()*(205-155)+155;break;case 3:t.time=Math.random()*(265-215)+215;break;case 2:t.time=Math.random()*(325-275)+275;break}t.rotateAngle=t.rotateAngle+3600+t.time,t.rotate_angle=`rotate(${t.rotateAngle}deg)`}function L(r){d()}return z(),(r,s)=>{const f=Y,F=it,T=rt,o=Z,i=dt;return c(),l(C,null,[e("div",_t,[e("div",{class:"panel",style:et({transform:t.rotate_angle,transition:"5s"})},[(c(!0),l(C,null,B(t.activity.poolList,(v,E)=>(c(),l("div",{class:"sector",key:E},[e("div",xt,[e("span",null,m(v.awardName),1),S(e("img",{src:v.awardImage},null,8,yt),[[M,v.awardImage]])])]))),128))],4),e("div",{class:"pointer",onClick:w},Ct),b(i,{show:t.show},{default:x(()=>[e("div",At,[e("div",zt,[$t,b(o,{onSubmit:L},{default:x(()=>[b(F,{inset:""},{default:x(()=>[b(f,{modelValue:t.message.realName,"onUpdate:modelValue":s[0]||(s[0]=v=>t.message.realName=v),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",name:"realName",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"]),b(f,{modelValue:t.message.phone,"onUpdate:modelValue":s[1]||(s[1]=v=>t.message.phone=v),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801",name:"phone",rules:[{pattern:I,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u624B\u673A\u53F7"}]},null,8,["modelValue","rules"]),b(f,{modelValue:t.message.address,"onUpdate:modelValue":s[2]||(s[2]=v=>t.message.address=v),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740",name:"address",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5730\u5740"}]},null,8,["modelValue"])]),_:1}),e("div",Ft,[b(T,{round:"",block:"",type:"primary","native-type":"submit"},{default:x(()=>[Bt]),_:1})])]),_:1})])])]),_:1},8,["show"])]),e("div",Dt,[e("div",Nt,[It,e("text",Lt,m(t.number)+"\u6B21 ",1),Tt]),Et])],64)}}});var Pt=j(Ot,[["__scopeId","data-v-36834158"]]),D={versions:function(){var a=navigator.userAgent;return{trident:a.indexOf("Trident")>-1,presto:a.indexOf("Presto")>-1,webKit:a.indexOf("AppleWebKit")>-1,gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")==-1,mobile:!!a.match(/AppleWebKit.*Mobile.*/)||!!a.match(/AppleWebKit/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:a.indexOf("Android")>-1||a.indexOf("Linux")>-1,iPhone:a.indexOf("iPhone")>-1||a.indexOf("Mac")>-1,iPad:a.indexOf("iPad")>-1,webApp:a.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};const H=D.versions.android,X=D.versions.ios||D.versions.iPhone||D.versions.iPad;var St=navigator.userAgent.toLowerCase();St.match(/MicroMessenger/i)=="micromessenger";function Q(a){const p=document.createElement("a");p.setAttribute("href",a),p.click()}function Mt(a){H&&window.android&&window.android.postDetails(JSON.stringify(a)),X&&Q("/ios://postDetails@?data="+JSON.stringify(a))}function P(){H&&window.android&&window.android.userLogin(),X&&Q("/ios://userLogin@?data=")}function _(){return window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)=="micromessenger"}const N=a=>(W("data-v-594201f3"),a=a(),G(),a),Vt={class:"content"},Ut=N(()=>e("img",{src:"https://imgcdn.dahebao.cn/20221128/20221128171231279774.png"},null,-1)),Rt={class:"tab"},jt={class:"tab_content"},qt={class:"item_content"},Jt=["onClick"],Kt=["src"],Wt=N(()=>e("img",{class:"item_start",src:"https://imgcdn.dahebao.cn/20221011/20221011094515515822.png"},null,-1)),Gt=["onClick"],Ht=["src"],Xt={class:"postsTitle"},Qt={class:"hotData"},Yt=N(()=>e("span",null," \u4EBA\u6C14\u503C:",-1)),Zt={style:{color:"#dc5d3c"}},ta=["onClick"],aa={key:0,class:"empty",src:"https://imgcdn.dahebao.cn/20221027/20221027113957273185.png",alt:""},ea={class:"button"},na=N(()=>e("div",{class:"title"},"\u6295\u7A3F\u5373\u53EF\u53C2\u4E0E\u62BD\u5956",-1)),oa={class:"lottery"},ia={class:"record"},ra=q({__name:"index",setup(a){const p=st(),t=U(0),n=J({item:[],recordList:{},city:[],currentPage:1}),I=U(),d=K();function z(){tt().then(o=>{o.map(i=>{delete i.children}),n.city=o,d.$state.citys=o}).then(()=>{R.get("https://restapi.amap.com/v3/ip?key=8f97aea18038bcb28d2d29b1c5cf5158").then(o=>{d.changeCity(o),n.city.map((i,v)=>{if(o.adcode==i.city_id){t.value=v,w(!1);return}})})})}function w(o){at(n.city[t.value].city_id,n.currentPage).then(i=>{i.state==1?(i.data.length==0&&o?(g("\u6CA1\u6709\u66F4\u591A\u6570\u636E\u4E86"),--n.currentPage):n.item=i.data,i.data.length<4?n.city[t.value].more="no-more":n.city[t.value].more="more"):g(i.message)})}function $(){k.drawRecordList({userId:d.$state.userId,activityNo:d.$state.activityNo,awardFlag:"1",page_index:0,page_count:200}).then(o=>{n.recordList=o.recordList})}function L(){n.city[t.value].more=="no-more"?g("\u6CA1\u6709\u66F4\u591A\u6570\u636E\u4E86"):(++n.currentPage,w(!0))}function r(){if(n.currentPage<=1){g("\u6CA1\u6709\u66F4\u591A\u6570\u636E\u4E86");return}else--n.currentPage,w(!0)}function s(){n.currentPage=1,w(!1)}function f(){d.$state.userId==""&&_()?(g("\u8BF7\u5728\u8C6B\u89C6\u9891App\u4E0A\u4F20\u65B0\u5730\u6807"),setTimeout(()=>{location.href="https://news.dahebao.cn/appdownload/index.html?Type=125"},500)):d.$state.userId==""&&!_()?P():p.push({name:"uploading"})}function F(o){d.$state.userId==""&&_()?(g("\u8BF7\u5728\u8C6B\u89C6\u9891App\u67E5\u770B\u8BE6\u60C5"),setTimeout(()=>{location.href="https://news.dahebao.cn/appdownload/index.html?Type=125"},500)):d.$state.userId==""&&!_()?P():Mt(o.postsId)}function T(o){d.$state.userId==""&&_()?(g("\u8BF7\u5728\u8C6B\u89C6\u9891App\u6295\u7968"),setTimeout(()=>{location.href="https://news.dahebao.cn/appdownload/index.html?Type=125"},500)):d.$state.userId==""&&!_()?P():R({method:"get",url:"https://news.dahebao.cn/dahe/appposts/poststhumbup",params:{data:JSON.stringify({user_id:d.$state.userId,action_type:1,posts_id:o.postsId}),headers:{"Content-Type":"application/json"}}}).then(i=>{i.state==1&&g("\u6295\u7968\u6210\u529F")})}return vt(()=>{z(),$()}),(o,i)=>{const v=ct,E=lt;return c(),l("div",Vt,[e("header",null,[Ut,e("span",{onClick:f},"\u4E0A\u4F20\u65B0\u5730\u6807")]),e("main",Rt,[b(E,{active:t.value,"onUpdate:active":i[0]||(i[0]=u=>t.value=u),onChange:s,swipeable:""},{default:x(()=>[(c(!0),l(C,null,B(n.city,(u,O)=>(c(),gt(v,{title:u.city_name,key:O},{default:x(()=>[e("div",jt,[e("div",qt,[(c(!0),l(C,null,B(n.item,(h,da)=>(c(),l("div",{class:"item",key:h},[h.postsVideo?(c(),l("div",{key:0,onClick:V=>F(h),class:"video"},[e("img",{src:h.postsVideoImg},null,8,Kt),Wt],8,Jt)):(c(),l("div",{key:1,onClick:V=>F(h),class:"img"},[e("img",{class:"postsImg",src:JSON.parse(h.postsImg)[0].imgUrl},null,8,Ht)],8,Gt)),e("div",Xt,[e("div",Qt,[Yt,e("span",Zt,m(h.hotData),1)]),e("span",null,m(h.postsTitle),1)]),e("div",{class:"text",onClick:V=>T(h)},"\u4E3ATA\u6295\u7968",8,ta)]))),128)),n.item.length==0?(c(),l("img",aa)):ut("",!0)]),S(e("div",ea,[e("button",{onClick:r},"\u4E0A\u4E00\u9875"),e("button",{onClick:L},"\u4E0B\u4E00\u9875")],512),[[M,n.item.length!=0]])])]),_:2},1032,["title"]))),128))]),_:1},8,["active"])]),e("footer",null,[na,e("div",oa,[b(Pt,{RecordList:$})])]),e("div",ia,[e("div",{class:"groud",ref_key:"scrollRef",ref:I},[(c(!0),l(C,null,B(n.recordList,(u,O)=>S((c(),l("div",{class:"cell",key:O},[e("div",null,m(u.realName),1),e("div",null,m(u.awardName),1),e("div",null,m(u.phone),1)])),[[M,u.realName&&u.awardName&&u.phone]])),128))],512)])])}}});var la=j(ra,[["__scopeId","data-v-594201f3"]]);export{la as default};
