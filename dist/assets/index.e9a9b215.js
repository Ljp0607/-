import{E as k,G as N,a5 as T,a4 as L,V as M,a2 as j,ah as G,Z as U,a as i,c as C,d as P,u as V,t as _,w as S,e as R,f as J,g as z,a1 as W,aF as X,n as Y,ab as Z,X as q,aG as Q,r as aa,i as na,a6 as ta,b as ea,at as oa,aH as ia,aI as ra,B as la,aa as da,aJ as A,aA as sa}from"./index.4a3d8a83.js";import{B as y}from"./index.68f2ff4e.js";import{r as ca,u as ga}from"./use-route.323992c4.js";const va=(a,r)=>{const t=k(),e=()=>{t.value=U(a).height};return N(()=>{if(T(e),r)for(let o=1;o<=3;o++)setTimeout(e,100*o)}),L(()=>T(e)),M([j,G],e),t};function ua(a,r){const t=va(a,!0);return e=>i("div",{class:r("placeholder"),style:{height:t.value?`${t.value}px`:void 0}},[e()])}const[H,D]=C("action-bar"),$=Symbol(H),ha={placeholder:Boolean,safeAreaInsetBottom:_};var fa=P({name:H,props:ha,setup(a,{slots:r}){const t=k(),e=ua(t,D),{linkChildren:o}=V($);o();const v=()=>{var u;return i("div",{ref:t,class:[D(),{"van-safe-area-bottom":a.safeAreaInsetBottom}]},[(u=r.default)==null?void 0:u.call(r)])};return()=>a.placeholder?e(v):v()}});const ma=S(fa),[ba,xa]=C("action-bar-button"),pa=R({},ca,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var wa=P({name:ba,props:pa,setup(a,{slots:r}){const t=ga(),{parent:e,index:o}=J($),v=z(()=>{if(e){const d=e.children[o.value-1];return!(d&&"isButton"in d)}}),u=z(()=>{if(e){const d=e.children[o.value+1];return!(d&&"isButton"in d)}});return W({isButton:!0}),()=>{const{type:d,icon:h,text:f,color:x,loading:p,disabled:w}=a;return i(y,{class:xa([d,{last:u.value,first:v.value}]),size:"large",type:d,icon:h,color:x,loading:p,disabled:w,onClick:t},{default:()=>[r.default?r.default():f]})}}});const E=S(wa),[Ba,s,b]=C("dialog"),_a=R({},X,{title:String,theme:String,width:Y,message:[String,Function],callback:Function,allowHtml:Boolean,className:Z,transition:q("van-dialog-bounce"),messageAlign:String,closeOnPopstate:_,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:_,closeOnClickOverlay:Boolean}),ya=[...Q,"transition","closeOnPopstate"];var ka=P({name:Ba,props:_a,emits:["confirm","cancel","keydown","update:show"],setup(a,{emit:r,slots:t}){const e=k(),o=aa({confirm:!1,cancel:!1}),v=n=>r("update:show",n),u=n=>{var l;v(!1),(l=a.callback)==null||l.call(a,n)},d=n=>()=>{!a.show||(r(n),a.beforeClose?(o[n]=!0,da(a.beforeClose,{args:[n],done(){u(n),o[n]=!1},canceled(){o[n]=!1}})):u(n))},h=d("cancel"),f=d("confirm"),x=ia(n=>{var l,c;if(n.target!==((c=(l=e.value)==null?void 0:l.popupRef)==null?void 0:c.value))return;({Enter:a.showConfirmButton?f:A,Escape:a.showCancelButton?h:A})[n.key](),r("keydown",n)},["enter","esc"]),p=()=>{const n=t.title?t.title():a.title;if(n)return i("div",{class:s("header",{isolated:!a.message&&!t.default})},[n])},w=n=>{const{message:l,allowHtml:c,messageAlign:g}=a,m=s("message",{"has-title":n,[g]:g}),B=sa(l)?l():l;return c&&typeof B=="string"?i("div",{class:m,innerHTML:B},null):i("div",{class:m},[B])},O=()=>{if(t.default)return i("div",{class:s("content")},[t.default()]);const{title:n,message:l,allowHtml:c}=a;if(l){const g=!!(n||t.title);return i("div",{key:c?1:0,class:s("content",{isolated:!g})},[w(g)])}},F=()=>i("div",{class:[la,s("footer")]},[a.showCancelButton&&i(y,{size:"large",text:a.cancelButtonText||b("cancel"),class:s("cancel"),style:{color:a.cancelButtonColor},loading:o.cancel,disabled:a.cancelButtonDisabled,onClick:h},null),a.showConfirmButton&&i(y,{size:"large",text:a.confirmButtonText||b("confirm"),class:[s("confirm"),{[ra]:a.showCancelButton}],style:{color:a.confirmButtonColor},loading:o.confirm,disabled:a.confirmButtonDisabled,onClick:f},null)]),I=()=>i(ma,{class:s("footer")},{default:()=>[a.showCancelButton&&i(E,{type:"warning",text:a.cancelButtonText||b("cancel"),class:s("cancel"),color:a.cancelButtonColor,loading:o.cancel,disabled:a.cancelButtonDisabled,onClick:h},null),a.showConfirmButton&&i(E,{type:"danger",text:a.confirmButtonText||b("confirm"),class:s("confirm"),color:a.confirmButtonColor,loading:o.confirm,disabled:a.confirmButtonDisabled,onClick:f},null)]}),K=()=>t.footer?t.footer():a.theme==="round-button"?I():F();return()=>{const{width:n,title:l,theme:c,message:g,className:m}=a;return i(oa,na({ref:e,role:"dialog",class:[s([c]),m],style:{width:ea(n)},tabindex:0,"aria-labelledby":l||g,onKeydown:x,"onUpdate:show":v},ta(a,ya)),{default:()=>[p(),O(),K()]})}}});const Ta=S(ka);export{Ta as D,ka as s};
